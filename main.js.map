{"version":3,"sources":["webpack://@aelea/website/../.yarn/cache/@most-prelude-npm-1.8.0-f9da233011-64ef6318fd.zip/node_modules/@most/prelude/dist/index.es.js","webpack://@aelea/website/../.yarn/cache/@most-scheduler-npm-1.3.0-e34ae83921-942a3d0ac9.zip/node_modules/@most/scheduler/dist/index.es.js","webpack://@aelea/website/../.yarn/cache/@most-disposable-npm-1.3.0-e16fa0d39d-eb88a38a85.zip/node_modules/@most/disposable/dist/index.es.js","webpack://@aelea/website/../.yarn/cache/@most-core-npm-1.6.1-3baa05d523-bc452f048d.zip/node_modules/@most/core/dist/index.es.js","webpack://@aelea/website/../core/.dist/esm/utils/styleUtils.js","webpack://@aelea/website/../core/.dist/esm/utils.js","webpack://@aelea/website/../core/.dist/esm/run.js","webpack://@aelea/website/../core/.dist/esm/combinators/event.js","webpack://@aelea/website/../core/.dist/esm/combinators/tether.js","webpack://@aelea/website/../core/.dist/esm/source/behavior.js","webpack://@aelea/website/../core/.dist/esm/combinators/component.js","webpack://@aelea/website/../core/.dist/esm/utils/SettableDisposable.js","webpack://@aelea/website/../core/.dist/esm/source/node.js","webpack://@aelea/website/../core/.dist/esm/combinators/style.js","webpack://@aelea/website/../router/.dist/esm/resolveUrl.js","webpack://@aelea/website/../core/.dist/esm/combinators/attribute.js","webpack://@aelea/website/../router/.dist/esm/components/$Anchor.js","webpack://@aelea/website/../ui-components-theme/.dist/esm/staticThemeService.js","webpack://@aelea/website/../ui-components/.dist/esm/style/layoutSheet.js","webpack://@aelea/website/../ui-components/.dist/esm/$elements.js","webpack://@aelea/website/../ui-components/.dist/esm/elemets/$icon.js","webpack://@aelea/website/./src/elements/$icons.ts","webpack://@aelea/website/../core/.dist/esm/combinators/animate.js","webpack://@aelea/website/./src/components/transitions/enter.ts","webpack://@aelea/website/./src/components/$Example.ts","webpack://@aelea/website/./src/components/$Link.ts","webpack://@aelea/website/../ui-components/.dist/esm/style/designSheet.js","webpack://@aelea/website/../ui-components/.dist/esm/components/form/form.js","webpack://@aelea/website/../ui-components/.dist/esm/components/form/types.js","webpack://@aelea/website/../ui-components/.dist/esm/components/form/$Field.js","webpack://@aelea/website/../ui-components/.dist/esm/components/$NumberTicker.js","webpack://@aelea/website/./src/pages/examples/calculator/$Calculator.ts","webpack://@aelea/website/../core/.dist/esm/source/state.js","webpack://@aelea/website/../ui-components/.dist/esm/components/form/$Button.js","webpack://@aelea/website/./src/elements/$common.ts","webpack://@aelea/website/../ui-components/.dist/esm/components/form/$ButtonIcon.js","webpack://@aelea/website/./src/pages/examples/count-counters/$Counter.ts","webpack://@aelea/website/./src/pages/examples/count-counters/$CountCounters.ts","webpack://@aelea/website/../ui-components/.dist/esm/components/$Sortable.js","webpack://@aelea/website/./src/pages/examples/dragList/$DragList.ts","webpack://@aelea/website/../ui-components/.dist/esm/components/form/$TextField.js","webpack://@aelea/website/../ui-components/.dist/esm/components/$QuantumScroll.js","webpack://@aelea/website/../ui-components/.dist/esm/utils/elementObservers.js","webpack://@aelea/website/./src/pages/examples/quantum-list/$QuantumList.ts","webpack://@aelea/website/../ui-components/.dist/esm/components/$Table.js","webpack://@aelea/website/./src/pages/examples/table/$Table.ts","webpack://@aelea/website/./src/common/theme.ts","webpack://@aelea/website/./src/pages/examples/theme/$Theme.ts","webpack://@aelea/website/./src/pages/examples/todo-app/$CreateTodo.ts","webpack://@aelea/website/../ui-components/.dist/esm/components/form/$Checkbox.js","webpack://@aelea/website/./src/pages/examples/todo-app/$TodoItem.ts","webpack://@aelea/website/./src/pages/examples/todo-app/$TodoApp.ts","webpack://@aelea/website/./src/pages/examples/$Examples.ts","webpack://@aelea/website/../core/.dist/esm/source/fromCallback.js","webpack://@aelea/website/../ui-components/.dist/esm/components/$MonacoEditor.js","webpack://@aelea/website/./src/components/typescript-notebook/$TSPeep.ts","webpack://@aelea/website/./src/pages/guide/$Guide.ts","webpack://@aelea/website/./src/pages/$MainMenu.ts","webpack://@aelea/website/./src/pages/$Website.ts","webpack://@aelea/website/./src/website-run.ts","webpack://@aelea/website/./src/components/$ThemePicker.ts"],"names":["append","x","a","l","length","b","Array","i","reduce","f","z","r","remove","TypeError","j","unsafeRemove","findIndex","id","g","apply","curry2","curried","arguments","curry3","c","ScheduledTaskImpl","time","localOffset","period","task","scheduler","this","active","prototype","run","error","e","dispose","cancel","RelativeScheduler","origin","currentTime","scheduleTask","delay","relative","cancelAll","runTask","SchedulerImpl","timer","timeline","_this","_runReadyTasksBound","_runReadyTasks","_timer","_nextArrival","Infinity","now","Math","max","st","add","_scheduleNextRun","offset","_reschedule","removeAll","isEmpty","_unschedule","clearTimer","nextArrival","_scheduleNextArrival","setTimer","runTasks","TimelineImpl","tasks","insertByTime","binarySearch","getTime","events","at","splice","removeAllFrom","t","slice","runReadyTasks","timeslots","push","newTimeslot","timeslot","spliceEvent","addEvent","insertAtTimeslot","scheduledTask","floor","sortedArray","mid","y","lo","hi","ClockTimer","clock","_clock","dt","Asap","Promise","resolve","then","defer","runAsap","setTimeout","clearTimeout","RelativeClock","HRTimeClock","hrtime","hrt","clockRelativeTo","asap","cancelTask","schedulerRelativeTo","predicate","console","warn","newDefaultTimer","performance","process","Date","NONE","DisposeNone","disposeOnce","disposable","DisposeOnce","disposed","undefined","resource","DisposeWithImpl","_dispose","_resource","disposeAll","ds","merged","merge","DisposeAll","disposeBoth","d1","d2","d","isDisposeNone","al","bl","concat","disposables","throwIfErrors","disposeCollectErrors","appendIfError","errors","DisposeAllError","message","name","Error","call","captureStackTrace","stack","formatErrorStacks","Object","create","formatErrorStack","s","tryDispose","sink","extendStatics","setPrototypeOf","__proto__","p","hasOwnProperty","__extends","__","constructor","fatalError","rethrow","propagateTask","value","PropagateRunEventTask","propagateEventTask","PropagateEventTask","propagateEndTask","PropagateEndTask","propagateErrorTask","PropagateErrorTask","PropagateTask","runIfActive","_super","runEvent","event","end","empty","EMPTY","isCanonicalEmpty","stream","containsCanonicalEmpty","streams","some","Empty","NEVER","Never","At","runAt","SettableDisposable","setDisposable","reject","observer","RunEffectsSink","runStream","_end","_error","_disposable","_t","RelativeSink","withLocalTime","WithLocalTime","source","relativeSink","Pipe","Loop","stepper","seed","step","LoopSink","result","Scan","ScanSink","continueWith","ContinueWith","ContinueWithSink","startNext","continue","Filter","FilterSink","and","q","FilterMap","FilterMapSink","Map","MapSink","Tap","TapSink","IndexSink","index","invoke","args","combine","stream1","stream2","combineArray","Combine","sources","sinks","mergeSink","CombineSink","indexSink","awaiting","values","hasValue","fill","activeCount","indexedValue","updateReady","mergeConcurrently","concurrency","mergeMapConcurrently","MergeConcurrently","Outer","pending","current","addInner","startInner","initInner","innerSink","Inner","mapAndRun","checkEnd","endInner","inner","indexOf","shift","outer","join","mergeArray","mergeStreams","withoutCanonicalEmpty","Merge","appendSources","filter","isNotCanonicalEmpty","MergeSink","indexValue","snapshot","sampler","Snapshot","sampleSink","SnapshotSink","valuesDisposable","latest","samplerDisposable","LatestValueSink","boundsFrom","unsafeMin","unsafeMax","min","take","n","start","sliceBounds","bounds","isSliceEmpty","commuteMapSlice","Slice","fuseSlice","createSlice","mapStream","sliceStream","b1","b2","sliceSink","SliceSink","skip","TakeWhile","takeWhileSink","TakeWhileSink","SkipWhile","SkipWhileSink","skipping","SkipAfter","SkipAfterSink","zipItems","items","ZipItems","keepLeft","ZipItemsSink","Queue","head","tail","capacityMask","list","growArray","shrinkArray","copyArray","newArray","len","zipArray","Zip","buffers","zipSink","ZipSink","buffer","ready","emitZipped","ended","map","switchLatest","Switch","switchSink","SwitchSink","disposeCurrent","Segment","disposeInner","errorInner","skipRepeats","skipRepeatsWith","same","equals","SkipRepeats","SkipRepeatsSink","init","until","signal","Until","since","Since","maxSignal","UntilSink","minSignal","LowerBoundSink","SinceSink","allow","Delay","delaySink","DelaySink","forEach","throttle","commuteMapThrottle","Throttle","fuseThrottle","throttleStream","ThrottleSink","Debounce","DebounceSink","DebounceTask","handleEventFromTask","awaitPromises","Await","fromPromise","promise","AwaitSink","eventBound","endBound","errorBound","queue","handlePromise","catch","SafeSink","disable","tryEvent","tryEnd","RecoverWith","RecoverWithSink","nextSink","_startNext","_continue","multicast","Multicast","MulticastSource","MulticastDisposable","err","loop$1","scan$1","initial","startWith$1","map$1","constant$1","tap$1","chain$1","fs","xs","continueWith$1","merge$1","combine$1","snapshot$1","filter$1","skipRepeatsWith$1","take$1","skip$1","skipAfter$1","until$1","delay$1","timeWindow","delayTime","debounce$1","recoverWith$1","styleObjectAsString","styleObj","entries","key","val","replace","toLowerCase","useStyleRule","cacheService","styleDefinition","properties","cachedRuleIdx","cache","stylesheet","cssRules","namespace","insertRule","isFunction","Function","nullSink","_","O","fns","reduceRight","BranchEffectsSink","env","parentElement","segmentPosition","segmentsCount","segmentsSlotsMap","node","element","slot","disposableBranch","get","delete","parent","child","insertAt","prepend","insertBefore","children","appendToSlot","style","keys","selector","classList","stylePseudo","styleDeclaration","pseudo","rule","useStylePseudoRule","class","attributes","applyAttrFn","styleBehavior","disposeStyle","sb","latestClass","previousCssRule","styleObject","cashedCssClas","attributesBehavior","attrs","attr","newDisp","BranchChildrenSinkList","$segments","set","$child","attrKey","removeAttribute","setAttribute","String","eventElementTarget","eventType","options","cb","addEventListener","removeEventListener","ns","capture","SourceSink","tetherSink","TetherSink","super","Tether","sourceSink","_a","sourceDisposable","sinkIdx","BehaviorSource","queuedSamplers","sample","ops","tetherSource","split","tether","bops","sourcesMap","runBehavior","disposeSampler","behavior","ss","component","inputComp","projectBehaviors","behaviors","view","outputBehaviors","outputDisposables","k","consumerSampler","outputDisposable","initialDiposable","$svg","branch","document","createElementNS","$element","createElement","$custom","$node","$wrapNativeElement","rootNode","$text","$textFn","postOp","input","strStream","NodeSource","sourceValue","sourceOp","text","createTextNode","sourceOpValue","$branch","styleInline","applyInlineStyleStream","prop","styleInput","pseudoClass","fragment","fragmentsChange","title","resolveRoute","next","prev","every","pathChange","parentFragments","fragments","fragIdx","diff","contains","isMatched","match","evt","lastTarget","miss","frag","path","RegExp","Boolean","route","exactMatch","isMatch","unmatch","attrBehavior","$anchor","textDecoration","$Anchor","url","$content","sampleClick","click","sampleFocus","focus","href","clickEv","preventDefault","pathName","currentTarget","HTMLAnchorElement","pathname","location","history","pushState","blur","THEME_PALLETE_SELECTED_KEY","selected","JSON","parse","localStorage","getItem","theme","pallete","stretch","position","top","bottom","right","left","spacingTiny","gap","spacingSmall","spacing","spacingBig","flex","displayFlex","display","row","flexDirection","column","rowFlex","columnFlex","$row","layoutSheet","$column","$seperator","padding","backgroundColor","middleground","boxShadow","$card","width","margin","minHeight","minWidth","background","description","$icon","height","viewBox","$trash","$aeleaLogo","$github","AnimationFrameSource","afp","requestTime","rafId","requestAnimationFrame","eventThenEnd","fid","cancelAnimationFrame","responseTime","nextAnimationFrame","window","animationFrames","MOTION_STIFF","stiffness","damping","precision","motion","motionEnvironment","initialState","change","motionEnv","ma","motionState","velocity","target","frames","state","fps","delta","acceleration","newVelocity","newPosition","settled","abs","stepFrame","fadeIn","slideIn","opacity","slide","transform","animation","config","$Link","styles","sampleContains","color","isActive","isFocus","primary","cursor","anchorOps","fontFamily","fontWeight","fontSize","customScroll","control","border","outline","flexShrink","main","overflowY","scrollbarColor","scrollbarWidth","borderBottom","paddingBottom","btn","alignItems","interactionOp","src","dismissOp","activeElement","$label","InputType","$Field","type","TEXT","placeholder","interactionBehavior","focusStyle","dismissBehavior","dismissstyle","sampleChange","designSheet","inputEv","HTMLInputElement","Direction","getDetlaSlotIdex","$NumberTicker","value$","incrementColor","decrementColor","textStyle","slots","uniqueValues$","incrementMulticast","changeStr","toLocaleString","dir","pos","INCREMENT","DECREMENT","currentStr","dirStyleMap","transition","decayColor","extractValue","str","Number","$plus","justifyContent","sampleX","sampleY","negative","bs","mbs","replayLatest","StateSink","latestvalue","ReplayLatest","hasInitial","startWithReplay","$Button","disabled","pointerEvents","borderColor","$button","$TrashBtn","borderRadius","iconOp","$AddBtn","sumAdd","sampleAddedCounter","addedCounter","sampleDisposeCounter","disposeCounter","sampleCountersIncrement","counterIncrement","sampleCountersDecrement","counterDecrement","sampleDisposedCounterCount","disposedCounterCount","sumWithInitial","totalCount","addCounter","placeContent","sampleRemove","sampleValue","sampleIncrement","increment","sampleDecrement","decrement","$Counter","swap","idx","arr","currentIdx","newArr","$dragItem","sampleOrder","$list","itemHeight","sampleOrderChange","orderChange","listLength","containerHeight","orderMulticat","$listChangesWithInitial","draggingMotion","userSelect","$item","sampleDragY","dragY","multicastedDrag","isDraggingStream","isDragging","iHeight","yMotion","$draggedItem","yDragPosition","applyTransformStyle","ypos","scale","applyBoxShadowStyle","shadow","startEv","drag","move","ev","pointerEvent","from","clientY","to","round","isPositionChange","zIndex","$TextField","hint","alignSelf","label","getPageRequest","offsetTop","rowHeight","threshold","pageSize","$itemLoading","$QuantumScroll","dataSource","containerStyle","contentStyle","$loading","sampleScroll","scroll","sampleContainerDimension","containerDimension","multicastedData","initalScrollState","rect","requestSource","$requestAndLoader","res","$items","$skipRepaintingLoader","$intermissionedItems","$container","HTMLElement","scrollTop","clientHeight","ro","ResizeObserver","observe","instance","el","unobserve","dim","contentRect","overflow","totalItemsCount","totalItems","willChange","loc","formatNumber","Intl","NumberFormat","format","sampleDelayResponse","delayResponse","sampleDebounceRequest","debounceRequest","initialDebounceRequestChange","initialDelayResponse","debounceDuration","dd","positionChange","elipsisTextOverflow","textOverflow","whiteSpace","tableCellStyle","$headerCell","$bodyCell","$rowContainer","sampleRequestList","requestList","segment","data","columns","$header","col","_b","cellStyle","header","dataStream","rowData","$body","light","horizon","foreground","positive","indeterminate","dark","getPallete","colors","$Theme","themeDef","$Pallete","iid","sampleAdd","sampleInputChange","inputChange","inputState","valueChahnges","completed","$Checkbox","sampleCheck","check","$overlay","ch","$checkInput","checked","rowStyle","router","sampleLinkClick","routeChanges","dragAngDropRoute","todoAppRoute","countCountersRoute","quantumListRoute","calculatorRoute","tableRoute","themeRoute","$Example","$DragList","$Calculator","$CountCounters","todos","sampleCreateTodo","newTodo","sampleShowCompletedList","showCompletedList","$CreateTodo","todo","sampleCompleted","onlyCompleted","isCompleted","sampleComplete","complete","sampleText","$TodoItem","FromCallbackSource","callbackFunction","context","maybeDisposable","bind","fetchJson","async","fetch","json","packageQueryCache","packageLocalCache","fetchAndCacheDependancyTree","version","pkgPath","pkg","queryStore","locallyStoredItem","storedItem","parsedItem","pendingQuery","query","pkgJson","dependencies","files","meta","dependency","fetchMeta","dtsFiles","metaFile","test","dtsQueries","file","content","all","fetchFileListContent","typings","types","resp","setItem","stringify","cacheGet","depsQueries","pkgName","definePackageTree","monacoGlobal","pkgModelUri","Uri","editor","getModel","acc","pakgDefJsonStr","createModel","defineModel","whitespaceRegexp","elementBecameVisibleEvent","intersectionObserver","IntersectionObserver","intersectionEvent","intersectionRatio","MonacoEnvironment","getWorkerUrl","encodeURIComponent","monacoQuery","loadMonacoTSEditor","import","precacheAeleaDependanciesQuery","codiConQuery","FontFace","codiConFont","fonts","asyncloadMonacoEditor","monacoEntryFileId","$MonacoEditor","code","override","editorload","$editor","editorElement","languages","typescript","typescriptDefaults","setCompilerOptions","getCompilerOptions","module","ModuleKind","ESNext","moduleResolution","ModuleResolutionKind","NodeJs","model","minimap","enabled","overviewRulerLanes","lineNumbers","glyphMargin","folding","lineDecorationsWidth","lineNumbersMinChars","hover","renderLineHighlight","renderIndentGuides","scrollBeyondLastLine","automaticLayout","onDidContentSizeChange","contentHeight","getContentHeight","layout","clientWidth","attempDuration","getWorkerStream","getTypeScriptWorker","elEvents","modelChangeWithDelay","cbf","fromCallback","onDidChangeContent","editorChanges","getValue","changesWithInitial","ignoreWhitespaceChanges","modelChange","getWorker","worker","uri","semanticDiagnosticsQuery","getSemanticDiagnostics","toString","syntacticDiagnosticsQuery","getSyntacticDiagnostics","semanticDiagnostics","syntacticDiagnostics","readOnly","$loader","xxx","initalCodeBlockHeight","refImports","getEmitOutput","outputFiles","esModuleBlobUrl","URL","createObjectURL","Blob","default","parentRoute","$TSPeep","sampleRouteChange","routeChange","guideRoute","examplesRoute","popStateEvent","initialLocation","requestRouteChange","locationChange","composedConfig","CSSStyleSheet","body","adoptedStyleSheets","$root","runBrowser","baseRoute","changes","trailingSlash","frags","baseURI","rootRoute","pagesRoute","backgroundImage","alignContent","textAlign","maxWidth","$MainMenu","$Guide","$Examples","themes","sampleChangeThemeEffect","changeThemeEffect","applyOps","toIdx","toTheme","newTheme","assign","self","reload","changeTheme","$Website"],"mappings":"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","file":"main.js","sourcesContent":["/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\n// Non-mutating array operations\r\n/**\r\n * a with x prepended\r\n */\r\nfunction cons(x, a) {\r\n    var l = a.length;\r\n    var b = new Array(l + 1);\r\n    b[0] = x;\r\n    for (var i = 0; i < l; ++i) {\r\n        b[i + 1] = a[i];\r\n    }\r\n    return b;\r\n}\r\n/**\r\n * a with x appended\r\n */\r\nfunction append(x, a) {\r\n    var l = a.length;\r\n    var b = new Array(l + 1);\r\n    for (var i = 0; i < l; ++i) {\r\n        b[i] = a[i];\r\n    }\r\n    b[l] = x;\r\n    return b;\r\n}\r\n/**\r\n * Concats two `ArrayLike`s\r\n */\r\nfunction concat(a, b) {\r\n    var al = a.length;\r\n    var bl = b.length;\r\n    var r = new Array(al + bl);\r\n    var i = 0;\r\n    for (i = 0; i < al; i++) {\r\n        r[i] = a[i];\r\n    }\r\n    for (var j = 0; j < bl; j++) {\r\n        r[i++] = b[j];\r\n    }\r\n    return r;\r\n}\r\n//\r\n/**\r\n * drop first n elements\r\n */\r\nfunction drop(n, a) {\r\n    if (n < 0) {\r\n        throw new TypeError('n must be >= 0');\r\n    }\r\n    var l = a.length;\r\n    if (n === 0 || l === 0) {\r\n        return a;\r\n    }\r\n    if (n >= l) {\r\n        return [];\r\n    }\r\n    return unsafeDrop(n, a, l - n);\r\n}\r\n/**\r\n * Internal helper for drop\r\n */\r\nfunction unsafeDrop(n, a, l) {\r\n    var b = new Array(l);\r\n    for (var i = 0; i < l; ++i) {\r\n        b[i] = a[n + i];\r\n    }\r\n    return b;\r\n}\r\n/**\r\n * drop head element\r\n */\r\nfunction tail(a) {\r\n    return drop(1, a);\r\n}\r\n/**\r\n * duplicate a (shallow duplication)\r\n */\r\nfunction copy(a) {\r\n    var l = a.length;\r\n    var b = new Array(l);\r\n    for (var i = 0; i < l; ++i) {\r\n        b[i] = a[i];\r\n    }\r\n    return b;\r\n}\r\n/**\r\n * transform each element with f\r\n */\r\nfunction map(f, a) {\r\n    var l = a.length;\r\n    var b = new Array(l);\r\n    for (var i = 0; i < l; ++i) {\r\n        b[i] = f(a[i]);\r\n    }\r\n    return b;\r\n}\r\n/**\r\n * accumulate via left-fold\r\n */\r\nfunction reduce(f, z, a) {\r\n    var r = z;\r\n    for (var i = 0, l = a.length; i < l; ++i) {\r\n        r = f(r, a[i], i);\r\n    }\r\n    return r;\r\n}\r\n/**\r\n * replace element at index\r\n */\r\nfunction replace(x, i, a) {\r\n    if (i < 0) {\r\n        throw new TypeError('i must be >= 0');\r\n    }\r\n    var l = a.length;\r\n    var b = new Array(l);\r\n    for (var j = 0; j < l; ++j) {\r\n        b[j] = i === j ? x : a[j];\r\n    }\r\n    return b;\r\n}\r\n/**\r\n * remove element at index\r\n * @throws\r\n */\r\nfunction remove(i, a) {\r\n    if (i < 0) {\r\n        throw new TypeError('i must be >= 0');\r\n    }\r\n    var l = a.length;\r\n    if (l === 0 || i >= l) { // exit early if index beyond end of array\r\n        return a;\r\n    }\r\n    if (l === 1) { // exit early if index in bounds and length === 1\r\n        return [];\r\n    }\r\n    return unsafeRemove(i, a, l - 1);\r\n}\r\n/**\r\n * Internal helper to remove element at index\r\n */\r\nfunction unsafeRemove(i, a, l) {\r\n    var b = new Array(l);\r\n    var j;\r\n    for (j = 0; j < i; ++j) {\r\n        b[j] = a[j];\r\n    }\r\n    for (j = i; j < l; ++j) {\r\n        b[j] = a[j + 1];\r\n    }\r\n    return b;\r\n}\r\n/**\r\n * remove all elements matching a predicate\r\n * @deprecated\r\n */\r\nfunction removeAll(f, a) {\r\n    var l = a.length;\r\n    var b = new Array(l);\r\n    var j = 0;\r\n    for (var x = void 0, i = 0; i < l; ++i) {\r\n        x = a[i];\r\n        if (!f(x)) {\r\n            b[j] = x;\r\n            ++j;\r\n        }\r\n    }\r\n    b.length = j;\r\n    return b;\r\n}\r\n/**\r\n * find index of x in a, from the left\r\n */\r\nfunction findIndex(x, a) {\r\n    for (var i = 0, l = a.length; i < l; ++i) {\r\n        if (x === a[i]) {\r\n            return i;\r\n        }\r\n    }\r\n    return -1;\r\n}\r\n/**\r\n * Return true iff x is array-like\r\n */\r\nfunction isArrayLike(x) {\r\n    return x != null && typeof x.length === 'number' && typeof x !== 'function';\r\n}\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\nvar id = function (x) { return x; };\r\nvar compose = function (f, g) { return function (x) { return f(g(x)); }; };\r\nvar apply = function (f, x) { return f(x); };\r\nfunction curry2(f) {\r\n    function curried(a, b) {\r\n        switch (arguments.length) {\r\n            case 0: return curried;\r\n            case 1: return function (b) { return f(a, b); };\r\n            default: return f(a, b);\r\n        }\r\n    }\r\n    return curried;\r\n}\r\nfunction curry3(f) {\r\n    function curried(a, b, c) {\r\n        switch (arguments.length) {\r\n            case 0: return curried;\r\n            case 1: return curry2(function (b, c) { return f(a, b, c); });\r\n            case 2: return function (c) { return f(a, b, c); };\r\n            default: return f(a, b, c);\r\n        }\r\n    }\r\n    return curried;\r\n}\r\nfunction curry4(f) {\r\n    function curried(a, b, c, d) {\r\n        switch (arguments.length) {\r\n            case 0: return curried;\r\n            case 1: return curry3(function (b, c, d) { return f(a, b, c, d); });\r\n            case 2: return curry2(function (c, d) { return f(a, b, c, d); });\r\n            case 3: return function (d) { return f(a, b, c, d); };\r\n            default: return f(a, b, c, d);\r\n        }\r\n    }\r\n    return curried;\r\n}\n\nexport { append, apply, compose, concat, cons, copy, curry2, curry3, curry4, drop, findIndex, id, isArrayLike, map, reduce, remove, removeAll, replace, tail };\n//# sourceMappingURL=index.es.js.map\n","import { findIndex, removeAll, curry2, curry3 } from '@most/prelude';\n\nvar ScheduledTaskImpl = /** @class */ (function () {\r\n    function ScheduledTaskImpl(time, localOffset, period, task, scheduler) {\r\n        this.time = time;\r\n        this.localOffset = localOffset;\r\n        this.period = period;\r\n        this.task = task;\r\n        this.scheduler = scheduler;\r\n        this.active = true;\r\n    }\r\n    ScheduledTaskImpl.prototype.run = function () {\r\n        return this.task.run(this.time - this.localOffset);\r\n    };\r\n    ScheduledTaskImpl.prototype.error = function (e) {\r\n        return this.task.error(this.time - this.localOffset, e);\r\n    };\r\n    ScheduledTaskImpl.prototype.dispose = function () {\r\n        this.active = false;\r\n        this.scheduler.cancel(this);\r\n        return this.task.dispose();\r\n    };\r\n    return ScheduledTaskImpl;\r\n}());\n\nvar RelativeScheduler = /** @class */ (function () {\r\n    function RelativeScheduler(origin, scheduler) {\r\n        this.origin = origin;\r\n        this.scheduler = scheduler;\r\n    }\r\n    RelativeScheduler.prototype.currentTime = function () {\r\n        return this.scheduler.currentTime() - this.origin;\r\n    };\r\n    RelativeScheduler.prototype.scheduleTask = function (localOffset, delay, period, task) {\r\n        return this.scheduler.scheduleTask(localOffset + this.origin, delay, period, task);\r\n    };\r\n    RelativeScheduler.prototype.relative = function (origin) {\r\n        return new RelativeScheduler(origin + this.origin, this.scheduler);\r\n    };\r\n    RelativeScheduler.prototype.cancel = function (task) {\r\n        return this.scheduler.cancel(task);\r\n    };\r\n    RelativeScheduler.prototype.cancelAll = function (f) {\r\n        return this.scheduler.cancelAll(f);\r\n    };\r\n    return RelativeScheduler;\r\n}());\n\n/** @license MIT License (c) copyright 2010-2017 original author or authors */\r\nvar defer = function (task) {\r\n    return Promise.resolve(task).then(runTask);\r\n};\r\nfunction runTask(task) {\r\n    try {\r\n        return task.run();\r\n    }\r\n    catch (e) {\r\n        return task.error(e);\r\n    }\r\n}\n\n/** @license MIT License (c) copyright 2010-2017 original author or authors */\r\nvar SchedulerImpl = /** @class */ (function () {\r\n    function SchedulerImpl(timer, timeline) {\r\n        var _this = this;\r\n        this._runReadyTasksBound = function () { return _this._runReadyTasks(); };\r\n        this.timer = timer;\r\n        this.timeline = timeline;\r\n        this._timer = null;\r\n        this._nextArrival = Infinity;\r\n    }\r\n    SchedulerImpl.prototype.currentTime = function () {\r\n        return this.timer.now();\r\n    };\r\n    SchedulerImpl.prototype.scheduleTask = function (localOffset, delay, period, task) {\r\n        var time = this.currentTime() + Math.max(0, delay);\r\n        var st = new ScheduledTaskImpl(time, localOffset, period, task, this);\r\n        this.timeline.add(st);\r\n        this._scheduleNextRun();\r\n        return st;\r\n    };\r\n    SchedulerImpl.prototype.relative = function (offset) {\r\n        return new RelativeScheduler(offset, this);\r\n    };\r\n    SchedulerImpl.prototype.cancel = function (task) {\r\n        task.active = false;\r\n        if (this.timeline.remove(task)) {\r\n            this._reschedule();\r\n        }\r\n    };\r\n    // @deprecated\r\n    SchedulerImpl.prototype.cancelAll = function (f) {\r\n        this.timeline.removeAll(f);\r\n        this._reschedule();\r\n    };\r\n    SchedulerImpl.prototype._reschedule = function () {\r\n        if (this.timeline.isEmpty()) {\r\n            this._unschedule();\r\n        }\r\n        else {\r\n            this._scheduleNextRun();\r\n        }\r\n    };\r\n    SchedulerImpl.prototype._unschedule = function () {\r\n        this.timer.clearTimer(this._timer);\r\n        this._timer = null;\r\n    };\r\n    SchedulerImpl.prototype._scheduleNextRun = function () {\r\n        if (this.timeline.isEmpty()) {\r\n            return;\r\n        }\r\n        var nextArrival = this.timeline.nextArrival();\r\n        if (this._timer === null) {\r\n            this._scheduleNextArrival(nextArrival);\r\n        }\r\n        else if (nextArrival < this._nextArrival) {\r\n            this._unschedule();\r\n            this._scheduleNextArrival(nextArrival);\r\n        }\r\n    };\r\n    SchedulerImpl.prototype._scheduleNextArrival = function (nextArrival) {\r\n        this._nextArrival = nextArrival;\r\n        var delay = Math.max(0, nextArrival - this.currentTime());\r\n        this._timer = this.timer.setTimer(this._runReadyTasksBound, delay);\r\n    };\r\n    SchedulerImpl.prototype._runReadyTasks = function () {\r\n        this._timer = null;\r\n        this.timeline.runTasks(this.currentTime(), runTask);\r\n        this._scheduleNextRun();\r\n    };\r\n    return SchedulerImpl;\r\n}());\n\n/** @license MIT License (c) copyright 2010-2017 original author or authors */\r\nvar TimelineImpl = /** @class */ (function () {\r\n    function TimelineImpl() {\r\n        this.tasks = [];\r\n    }\r\n    TimelineImpl.prototype.nextArrival = function () {\r\n        return this.isEmpty() ? Infinity : this.tasks[0].time;\r\n    };\r\n    TimelineImpl.prototype.isEmpty = function () {\r\n        return this.tasks.length === 0;\r\n    };\r\n    TimelineImpl.prototype.add = function (st) {\r\n        insertByTime(st, this.tasks);\r\n    };\r\n    TimelineImpl.prototype.remove = function (st) {\r\n        var i = binarySearch(getTime(st), this.tasks);\r\n        if (i >= 0 && i < this.tasks.length) {\r\n            var events = this.tasks[i].events;\r\n            var at = findIndex(st, events);\r\n            if (at >= 0) {\r\n                events.splice(at, 1);\r\n                if (events.length === 0) {\r\n                    this.tasks.splice(i, 1);\r\n                }\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    /**\r\n     * @deprecated\r\n     */\r\n    TimelineImpl.prototype.removeAll = function (f) {\r\n        for (var i = 0; i < this.tasks.length; ++i) {\r\n            removeAllFrom(f, this.tasks[i]);\r\n        }\r\n    };\r\n    TimelineImpl.prototype.runTasks = function (t, runTask) {\r\n        var tasks = this.tasks;\r\n        var l = tasks.length;\r\n        var i = 0;\r\n        while (i < l && tasks[i].time <= t) {\r\n            ++i;\r\n        }\r\n        this.tasks = tasks.slice(i);\r\n        // Run all ready tasks\r\n        for (var j = 0; j < i; ++j) {\r\n            this.tasks = runReadyTasks(runTask, tasks[j].events, this.tasks);\r\n        }\r\n    };\r\n    return TimelineImpl;\r\n}());\r\nfunction runReadyTasks(runTask, events, tasks) {\r\n    for (var i = 0; i < events.length; ++i) {\r\n        var task = events[i];\r\n        if (task.active) {\r\n            runTask(task);\r\n            // Reschedule periodic repeating tasks\r\n            // Check active again, since a task may have canceled itself\r\n            if (task.period >= 0 && task.active) {\r\n                task.time = task.time + task.period;\r\n                insertByTime(task, tasks);\r\n            }\r\n        }\r\n    }\r\n    return tasks;\r\n}\r\nfunction insertByTime(task, timeslots) {\r\n    var l = timeslots.length;\r\n    var time = getTime(task);\r\n    if (l === 0) {\r\n        timeslots.push(newTimeslot(time, [task]));\r\n        return;\r\n    }\r\n    var i = binarySearch(time, timeslots);\r\n    if (i >= l) {\r\n        timeslots.push(newTimeslot(time, [task]));\r\n    }\r\n    else {\r\n        insertAtTimeslot(task, timeslots, time, i);\r\n    }\r\n}\r\nfunction insertAtTimeslot(task, timeslots, time, i) {\r\n    var timeslot = timeslots[i];\r\n    if (time === timeslot.time) {\r\n        addEvent(task, timeslot.events);\r\n    }\r\n    else {\r\n        timeslots.splice(i, 0, newTimeslot(time, [task]));\r\n    }\r\n}\r\nfunction addEvent(task, events) {\r\n    if (events.length === 0 || task.time >= events[events.length - 1].time) {\r\n        events.push(task);\r\n    }\r\n    else {\r\n        spliceEvent(task, events);\r\n    }\r\n}\r\nfunction spliceEvent(task, events) {\r\n    for (var j = 0; j < events.length; j++) {\r\n        if (task.time < events[j].time) {\r\n            events.splice(j, 0, task);\r\n            break;\r\n        }\r\n    }\r\n}\r\nfunction getTime(scheduledTask) {\r\n    return Math.floor(scheduledTask.time);\r\n}\r\n/**\r\n * @deprecated\r\n */\r\nfunction removeAllFrom(f, timeslot) {\r\n    timeslot.events = removeAll(f, timeslot.events);\r\n}\r\nfunction binarySearch(t, sortedArray) {\r\n    var lo = 0;\r\n    var hi = sortedArray.length;\r\n    var mid, y;\r\n    while (lo < hi) {\r\n        mid = Math.floor((lo + hi) / 2);\r\n        y = sortedArray[mid];\r\n        if (t === y.time) {\r\n            return mid;\r\n        }\r\n        else if (t < y.time) {\r\n            hi = mid;\r\n        }\r\n        else {\r\n            lo = mid + 1;\r\n        }\r\n    }\r\n    return hi;\r\n}\r\nvar newTimeslot = function (t, events) { return ({ time: t, events: events }); };\n\n/** @license MIT License (c) copyright 2010-2017 original author or authors */\r\n/* global setTimeout, clearTimeout */\r\nvar ClockTimer = /** @class */ (function () {\r\n    function ClockTimer(clock) {\r\n        this._clock = clock;\r\n    }\r\n    ClockTimer.prototype.now = function () {\r\n        return this._clock.now();\r\n    };\r\n    ClockTimer.prototype.setTimer = function (f, dt) {\r\n        return dt <= 0 ? runAsap(f) : setTimeout(f, dt);\r\n    };\r\n    ClockTimer.prototype.clearTimer = function (t) {\r\n        return t instanceof Asap ? t.cancel() : clearTimeout(t);\r\n    };\r\n    return ClockTimer;\r\n}());\r\nvar Asap = /** @class */ (function () {\r\n    function Asap(f) {\r\n        this.f = f;\r\n        this.active = true;\r\n    }\r\n    Asap.prototype.run = function () {\r\n        if (this.active) {\r\n            return this.f();\r\n        }\r\n    };\r\n    Asap.prototype.error = function (e) {\r\n        throw e;\r\n    };\r\n    Asap.prototype.cancel = function () {\r\n        this.active = false;\r\n    };\r\n    return Asap;\r\n}());\r\nfunction runAsap(f) {\r\n    var task = new Asap(f);\r\n    defer(task);\r\n    return task;\r\n}\n\n/* global performance, process */\r\nvar RelativeClock = /** @class */ (function () {\r\n    function RelativeClock(clock, origin) {\r\n        this.origin = origin;\r\n        this.clock = clock;\r\n    }\r\n    RelativeClock.prototype.now = function () {\r\n        return this.clock.now() - this.origin;\r\n    };\r\n    return RelativeClock;\r\n}());\r\nvar HRTimeClock = /** @class */ (function () {\r\n    function HRTimeClock(hrtime, origin) {\r\n        this.origin = origin;\r\n        this.hrtime = hrtime;\r\n    }\r\n    HRTimeClock.prototype.now = function () {\r\n        var hrt = this.hrtime(this.origin);\r\n        return (hrt[0] * 1e9 + hrt[1]) / 1e6;\r\n    };\r\n    return HRTimeClock;\r\n}());\r\nvar clockRelativeTo = function (clock) {\r\n    return new RelativeClock(clock, clock.now());\r\n};\r\nvar newPerformanceClock = function () {\r\n    return clockRelativeTo(performance);\r\n};\r\n/**\r\n * @deprecated will be removed in 2.0.0\r\n * Date.now is not monotonic, and performance.now is ubiquitous:\r\n * @see https://caniuse.com/#search=performance.now\r\n */\r\nvar newDateClock = function () {\r\n    return clockRelativeTo(Date);\r\n};\r\nvar newHRTimeClock = function () {\r\n    return new HRTimeClock(process.hrtime, process.hrtime());\r\n};\r\nvar newPlatformClock = function () {\r\n    if (typeof performance !== 'undefined' && typeof performance.now === 'function') {\r\n        return newPerformanceClock();\r\n    }\r\n    else if (typeof process !== 'undefined' && typeof process.hrtime === 'function') {\r\n        return newHRTimeClock();\r\n    }\r\n    return newDateClock();\r\n};\n\n/**\r\n * Read the current time from the provided Scheduler\r\n */\r\nvar currentTime = function (scheduler) {\r\n    return scheduler.currentTime();\r\n};\r\n/**\r\n * Schedule a task to run as soon as possible, but\r\n * not in the current call stack\r\n */\r\nvar asap = curry2(function (task, scheduler) {\r\n    return scheduler.scheduleTask(0, 0, -1, task);\r\n});\r\n/**\r\n * Schedule a task to run after a millisecond delay\r\n */\r\nvar delay = curry3(function (delay, task, scheduler) {\r\n    return scheduler.scheduleTask(0, delay, -1, task);\r\n});\r\n/**\r\n * Schedule a task to run periodically, with the\r\n * first run starting asap\r\n */\r\nvar periodic = curry3(function (period, task, scheduler) {\r\n    return scheduler.scheduleTask(0, 0, period, task);\r\n});\r\n/**\r\n * Cancel a scheduledTask\r\n */\r\nvar cancelTask = function (scheduledTask) {\r\n    return scheduledTask.dispose();\r\n};\r\n/**\r\n * Cancel all ScheduledTasks for which a predicate is true\r\n * @deprecated Will be removed in 2.0.0\r\n */\r\nvar cancelAllTasks = curry2(function (predicate, scheduler) {\r\n    console.warn(\"DEPRECATED cancelAllTasks to be removed in 2.0.0\");\r\n    return scheduler.cancelAll(predicate);\r\n});\n\nvar schedulerRelativeTo = curry2(function (offset, scheduler) {\r\n    return new RelativeScheduler(offset, scheduler);\r\n});\n\n/** @license MIT License (c) copyright 2010-2017 original author or authors */\r\nvar newScheduler = curry2(function (timer, timeline) { return new SchedulerImpl(timer, timeline); });\r\nvar newDefaultScheduler = function () { return new SchedulerImpl(newDefaultTimer(), new TimelineImpl()); };\r\nvar newDefaultTimer = function () { return new ClockTimer(newPlatformClock()); };\r\nvar newClockTimer = function (clock) { return new ClockTimer(clock); };\r\nvar newTimeline = function () { return new TimelineImpl(); };\n\nexport { HRTimeClock, RelativeClock, asap, cancelAllTasks, cancelTask, clockRelativeTo, currentTime, delay, newClockTimer, newDateClock, newDefaultScheduler, newDefaultTimer, newHRTimeClock, newPerformanceClock, newPlatformClock, newScheduler, newTimeline, periodic, schedulerRelativeTo };\n//# sourceMappingURL=index.es.js.map\n","import { curry2, reduce, concat, append, curry3 } from '@most/prelude';\n\nvar dispose = function (disposable) {\r\n    return disposable.dispose();\r\n};\n\nvar disposeNone = function () { return NONE; };\r\nvar NONE = new (/** @class */ (function () {\r\n    function DisposeNone() {\r\n    }\r\n    DisposeNone.prototype.dispose = function () { };\r\n    return DisposeNone;\r\n}()))();\r\nvar isDisposeNone = function (d) {\r\n    return d === NONE;\r\n};\n\n/**\r\n * Wrap an existing disposable (which may not already have been once()d)\r\n * so that it will only dispose its underlying resource at most once.\r\n */\r\nvar disposeOnce = function (disposable) {\r\n    return new DisposeOnce(disposable);\r\n};\r\nvar DisposeOnce = /** @class */ (function () {\r\n    function DisposeOnce(disposable) {\r\n        this.disposed = false;\r\n        this.disposable = disposable;\r\n    }\r\n    DisposeOnce.prototype.dispose = function () {\r\n        if (!this.disposed) {\r\n            this.disposed = true;\r\n            if (this.disposable) {\r\n                this.disposable.dispose();\r\n                this.disposable = undefined;\r\n            }\r\n        }\r\n    };\r\n    return DisposeOnce;\r\n}());\n\n/** @license MIT License (c) copyright 2010-2017 original author or authors */\r\n/**\r\n * Create a Disposable that will use the provided\r\n * dispose function to dispose the resource\r\n */\r\nvar disposeWith = curry2(function (dispose, resource) {\r\n    return disposeOnce(new DisposeWithImpl(dispose, resource));\r\n});\r\n/**\r\n * Disposable represents a resource that must be\r\n * disposed/released. It aggregates a function to dispose\r\n * the resource and a handle to a key/id/handle/reference\r\n * that identifies the resource\r\n */\r\nvar DisposeWithImpl = /** @class */ (function () {\r\n    function DisposeWithImpl(dispose, resource) {\r\n        this._dispose = dispose;\r\n        this._resource = resource;\r\n    }\r\n    DisposeWithImpl.prototype.dispose = function () {\r\n        this._dispose(this._resource);\r\n    };\r\n    return DisposeWithImpl;\r\n}());\n\n/** @license MIT License (c) copyright 2010 original author or authors */\r\n/**\r\n * Aggregate a list of disposables into a DisposeAll\r\n */\r\nvar disposeAll = function (ds) {\r\n    var merged = reduce(merge, [], ds);\r\n    return merged.length === 0 ? disposeNone() : new DisposeAll(merged);\r\n};\r\n/**\r\n * Convenience to aggregate 2 disposables\r\n */\r\nvar disposeBoth = curry2(function (d1, d2) {\r\n    return disposeAll([d1, d2]);\r\n});\r\nvar merge = function (ds, d) {\r\n    return isDisposeNone(d) ? ds\r\n        : d instanceof DisposeAll ? concat(ds, d.disposables)\r\n            : append(d, ds);\r\n};\r\nvar DisposeAll = /** @class */ (function () {\r\n    function DisposeAll(disposables) {\r\n        this.disposables = disposables;\r\n    }\r\n    DisposeAll.prototype.dispose = function () {\r\n        throwIfErrors(disposeCollectErrors(this.disposables));\r\n    };\r\n    return DisposeAll;\r\n}());\r\n/**\r\n * Dispose all, safely collecting errors into an array\r\n */\r\nvar disposeCollectErrors = function (disposables) {\r\n    return reduce(appendIfError, [], disposables);\r\n};\r\n/**\r\n * Call dispose and if throws, append thrown error to errors\r\n */\r\nvar appendIfError = function (errors, d) {\r\n    try {\r\n        d.dispose();\r\n    }\r\n    catch (e) {\r\n        errors.push(e);\r\n    }\r\n    return errors;\r\n};\r\n/**\r\n * Throw DisposeAllError if errors is non-empty\r\n * @throws\r\n */\r\nvar throwIfErrors = function (errors) {\r\n    if (errors.length > 0) {\r\n        throw new DisposeAllError(errors.length + \" errors\", errors);\r\n    }\r\n};\r\nvar DisposeAllError = /** @class */ (function () {\r\n    function DisposeAllError(message, errors) {\r\n        this.name = 'DisposeAllError';\r\n        this.message = message;\r\n        this.errors = errors;\r\n        Error.call(this, message);\r\n        if (Error.captureStackTrace) {\r\n            Error.captureStackTrace(this, DisposeAllError);\r\n        }\r\n        this.stack = \"\" + this.stack + formatErrorStacks(this.errors);\r\n    }\r\n    return DisposeAllError;\r\n}());\r\nDisposeAllError.prototype = Object.create(Error.prototype);\r\nvar formatErrorStacks = function (errors) {\r\n    return reduce(formatErrorStack, '', errors);\r\n};\r\nvar formatErrorStack = function (s, e, i) {\r\n    return s + (\"\\n[\" + (i + 1) + \"] \" + e.stack);\r\n};\n\n/** @license MIT License (c) copyright 2010-2017 original author or authors */\r\n// Try to dispose the disposable.  If it throws, send\r\n// the error to sink.error with the provided Time value\r\nvar tryDispose = curry3(function (t, disposable, sink) {\r\n    try {\r\n        disposable.dispose();\r\n    }\r\n    catch (e) {\r\n        sink.error(t, e);\r\n    }\r\n});\n\nexport { DisposeAllError, dispose, disposeAll, disposeBoth, disposeNone, disposeOnce, disposeWith, isDisposeNone, tryDispose };\n//# sourceMappingURL=index.es.js.map\n","import { curry2, compose, apply, id, reduce, map as map$2, append, findIndex, remove, curry3 } from '@most/prelude';\nimport { asap, delay as delay$2, periodic as periodic$1, schedulerRelativeTo, currentTime, cancelTask } from '@most/scheduler';\nimport { disposeNone, disposeBoth, tryDispose as tryDispose$1, disposeOnce, disposeAll } from '@most/disposable';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\n/** @author Brian Cavalier */\r\n/** @author John Hann */\r\nfunction fatalError(e) {\r\n    setTimeout(rethrow, 0, e);\r\n}\r\nfunction rethrow(e) {\r\n    throw e;\r\n}\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\nvar propagateTask = function (run, value, sink) { return new PropagateRunEventTask(run, value, sink); };\r\nvar propagateEventTask = function (value, sink) { return new PropagateEventTask(value, sink); };\r\nvar propagateEndTask = function (sink) { return new PropagateEndTask(sink); };\r\nvar propagateErrorTask = function (value, sink) { return new PropagateErrorTask(value, sink); };\r\nvar PropagateTask = /** @class */ (function () {\r\n    function PropagateTask(sink) {\r\n        this.sink = sink;\r\n        this.active = true;\r\n    }\r\n    PropagateTask.prototype.dispose = function () {\r\n        this.active = false;\r\n    };\r\n    PropagateTask.prototype.run = function (t) {\r\n        if (!this.active) {\r\n            return;\r\n        }\r\n        this.runIfActive(t);\r\n    };\r\n    PropagateTask.prototype.error = function (t, e) {\r\n        // TODO: Remove this check and just do this.sink.error(t, e)?\r\n        if (!this.active) {\r\n            return fatalError(e);\r\n        }\r\n        this.sink.error(t, e);\r\n    };\r\n    return PropagateTask;\r\n}());\r\nvar PropagateRunEventTask = /** @class */ (function (_super) {\r\n    __extends(PropagateRunEventTask, _super);\r\n    function PropagateRunEventTask(runEvent, value, sink) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.runEvent = runEvent;\r\n        _this.value = value;\r\n        return _this;\r\n    }\r\n    PropagateRunEventTask.prototype.runIfActive = function (t) {\r\n        this.runEvent(t, this.value, this.sink);\r\n    };\r\n    return PropagateRunEventTask;\r\n}(PropagateTask));\r\nvar PropagateEventTask = /** @class */ (function (_super) {\r\n    __extends(PropagateEventTask, _super);\r\n    function PropagateEventTask(value, sink) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.value = value;\r\n        return _this;\r\n    }\r\n    PropagateEventTask.prototype.runIfActive = function (t) {\r\n        this.sink.event(t, this.value);\r\n    };\r\n    return PropagateEventTask;\r\n}(PropagateTask));\r\nvar PropagateEndTask = /** @class */ (function (_super) {\r\n    __extends(PropagateEndTask, _super);\r\n    function PropagateEndTask() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    PropagateEndTask.prototype.runIfActive = function (t) {\r\n        this.sink.end(t);\r\n    };\r\n    return PropagateEndTask;\r\n}(PropagateTask));\r\nvar PropagateErrorTask = /** @class */ (function (_super) {\r\n    __extends(PropagateErrorTask, _super);\r\n    function PropagateErrorTask(value, sink) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.value = value;\r\n        return _this;\r\n    }\r\n    PropagateErrorTask.prototype.runIfActive = function (t) {\r\n        this.sink.error(t, this.value);\r\n    };\r\n    return PropagateErrorTask;\r\n}(PropagateTask));\n\n/** @license MIT License (c) copyright 2010-2017 original author or authors */\r\nvar empty = function () { return EMPTY; };\r\nvar isCanonicalEmpty = function (stream) {\r\n    return stream === EMPTY;\r\n};\r\nvar containsCanonicalEmpty = function (streams) {\r\n    return streams.some(isCanonicalEmpty);\r\n};\r\nvar Empty = /** @class */ (function () {\r\n    function Empty() {\r\n    }\r\n    Empty.prototype.run = function (sink, scheduler) {\r\n        return asap(propagateEndTask(sink), scheduler);\r\n    };\r\n    return Empty;\r\n}());\r\nvar EMPTY = new Empty();\n\n/** @license MIT License (c) copyright 2010-2017 original author or authors */\r\nvar never = function () { return NEVER; };\r\nvar Never = /** @class */ (function () {\r\n    function Never() {\r\n    }\r\n    Never.prototype.run = function () {\r\n        return disposeNone();\r\n    };\r\n    return Never;\r\n}());\r\nvar NEVER = new Never();\n\n/** @license MIT License (c) copyright 2010-2017 original author or authors */\r\nvar at = function (t, x) { return new At(t, x); };\r\nvar At = /** @class */ (function () {\r\n    function At(t, x) {\r\n        this.time = t;\r\n        this.value = x;\r\n    }\r\n    At.prototype.run = function (sink, scheduler) {\r\n        return delay$2(this.time, propagateTask(runAt, this.value, sink), scheduler);\r\n    };\r\n    return At;\r\n}());\r\nfunction runAt(t, x, sink) {\r\n    sink.event(t, x);\r\n    sink.end(t);\r\n}\n\n/** @license MIT License (c) copyright 2010-2017 original author or authors */\r\nvar now = function (x) { return at(0, x); };\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\n/**\r\n * Create a stream of events that occur at a regular period\r\n * @param {Number} period periodicity of events\r\n * @returns {Stream} new stream of periodic events, the event value is undefined\r\n */\r\nvar periodic = function (period) {\r\n    return new Periodic(period);\r\n};\r\nvar Periodic = /** @class */ (function () {\r\n    function Periodic(period) {\r\n        this.period = period;\r\n    }\r\n    Periodic.prototype.run = function (sink, scheduler) {\r\n        return periodic$1(this.period, propagateEventTask(undefined, sink), scheduler);\r\n    };\r\n    return Periodic;\r\n}());\n\nvar newStream = function (run) { return new StreamImpl(run); };\r\nvar StreamImpl = /** @class */ (function () {\r\n    function StreamImpl(run) {\r\n        this.run = run;\r\n    }\r\n    return StreamImpl;\r\n}());\n\nvar SettableDisposable = /** @class */ (function () {\r\n    function SettableDisposable() {\r\n        this.disposable = undefined;\r\n        this.disposed = false;\r\n    }\r\n    SettableDisposable.prototype.setDisposable = function (disposable) {\r\n        if (this.disposable !== undefined) {\r\n            throw new Error('setDisposable called more than once');\r\n        }\r\n        this.disposable = disposable;\r\n        if (this.disposed) {\r\n            disposable.dispose();\r\n        }\r\n    };\r\n    SettableDisposable.prototype.dispose = function () {\r\n        if (this.disposed) {\r\n            return;\r\n        }\r\n        this.disposed = true;\r\n        if (this.disposable !== undefined) {\r\n            this.disposable.dispose();\r\n        }\r\n    };\r\n    return SettableDisposable;\r\n}());\n\n/** @license MIT License (c) copyright 2010-2017 original author or authors */\r\nvar runEffects = curry2(function (stream, scheduler) {\r\n    return new Promise(function (resolve, reject) {\r\n        return runStream(stream, scheduler, resolve, reject);\r\n    });\r\n});\r\nfunction runStream(stream, scheduler, resolve, reject) {\r\n    var disposable = new SettableDisposable();\r\n    var observer = new RunEffectsSink(resolve, reject, disposable);\r\n    disposable.setDisposable(stream.run(observer, scheduler));\r\n}\r\nvar RunEffectsSink = /** @class */ (function () {\r\n    function RunEffectsSink(end, error, disposable) {\r\n        this._end = end;\r\n        this._error = error;\r\n        this._disposable = disposable;\r\n        this.active = true;\r\n    }\r\n    RunEffectsSink.prototype.event = function () { };\r\n    RunEffectsSink.prototype.end = function () {\r\n        if (!this.active) {\r\n            return;\r\n        }\r\n        this.dispose(this._error, this._end, undefined);\r\n    };\r\n    RunEffectsSink.prototype.error = function (_t, e) {\r\n        this.dispose(this._error, this._error, e);\r\n    };\r\n    RunEffectsSink.prototype.dispose = function (error, end, x) {\r\n        this.active = false;\r\n        tryDispose(error, end, x, this._disposable);\r\n    };\r\n    return RunEffectsSink;\r\n}());\r\nfunction tryDispose(error, end, x, disposable) {\r\n    try {\r\n        disposable.dispose();\r\n    }\r\n    catch (e) {\r\n        error(e);\r\n        return;\r\n    }\r\n    end(x);\r\n}\n\n/**\r\n * Run a Stream, sending all its events to the provided Sink.\r\n */\r\nvar run = function (sink, scheduler, stream) {\r\n    return stream.run(sink, scheduler);\r\n};\n\nvar RelativeSink = /** @class */ (function () {\r\n    function RelativeSink(offset, sink) {\r\n        this.sink = sink;\r\n        this.offset = offset;\r\n    }\r\n    RelativeSink.prototype.event = function (t, x) {\r\n        this.sink.event(t + this.offset, x);\r\n    };\r\n    RelativeSink.prototype.error = function (t, e) {\r\n        this.sink.error(t + this.offset, e);\r\n    };\r\n    RelativeSink.prototype.end = function (t) {\r\n        this.sink.end(t + this.offset);\r\n    };\r\n    return RelativeSink;\r\n}());\n\n/**\r\n * Create a stream with its own local clock\r\n * This transforms time from the provided scheduler's clock to a stream-local\r\n * clock (which starts at 0), and then *back* to the scheduler's clock before\r\n * propagating events to sink.  In other words, upstream sources will see local times,\r\n * and downstream sinks will see non-local (original) times.\r\n */\r\nvar withLocalTime = function (origin, stream) {\r\n    return new WithLocalTime(origin, stream);\r\n};\r\nvar WithLocalTime = /** @class */ (function () {\r\n    function WithLocalTime(origin, source) {\r\n        this.origin = origin;\r\n        this.source = source;\r\n    }\r\n    WithLocalTime.prototype.run = function (sink, scheduler) {\r\n        return this.source.run(relativeSink(this.origin, sink), schedulerRelativeTo(this.origin, scheduler));\r\n    };\r\n    return WithLocalTime;\r\n}());\r\n/**\r\n * Accumulate offsets instead of nesting RelativeSinks, which can happen\r\n * with higher-order stream and combinators like continueWith when they're\r\n * applied recursively.\r\n */\r\nvar relativeSink = function (origin, sink) {\r\n    return sink instanceof RelativeSink\r\n        ? new RelativeSink(origin + sink.offset, sink.sink)\r\n        : new RelativeSink(origin, sink);\r\n};\n\nvar Pipe = /** @class */ (function () {\r\n    function Pipe(sink) {\r\n        this.sink = sink;\r\n    }\r\n    Pipe.prototype.end = function (t) {\r\n        return this.sink.end(t);\r\n    };\r\n    Pipe.prototype.error = function (t, e) {\r\n        return this.sink.error(t, e);\r\n    };\r\n    return Pipe;\r\n}());\n\n/** @license MIT License (c) copyright 2010 original author or authors */\r\n/**\r\n * Generalized feedback loop. Call a stepper function for each event. The stepper\r\n * will be called with 2 params: the current seed and the an event value.  It must\r\n * return a new { seed, value } pair. The `seed` will be fed back into the next\r\n * invocation of stepper, and the `value` will be propagated as the event value.\r\n * @param stepper loop step function\r\n * @param seed initial seed value passed to first stepper call\r\n * @param stream event stream\r\n * @returns new stream whose values are the `value` field of the objects\r\n * returned by the stepper\r\n */\r\nvar loop = function (stepper, seed, stream) {\r\n    return isCanonicalEmpty(stream) ? empty()\r\n        : new Loop(stepper, seed, stream);\r\n};\r\nvar Loop = /** @class */ (function () {\r\n    function Loop(stepper, seed, source) {\r\n        this.step = stepper;\r\n        this.seed = seed;\r\n        this.source = source;\r\n    }\r\n    Loop.prototype.run = function (sink, scheduler) {\r\n        return this.source.run(new LoopSink(this.step, this.seed, sink), scheduler);\r\n    };\r\n    return Loop;\r\n}());\r\nvar LoopSink = /** @class */ (function (_super) {\r\n    __extends(LoopSink, _super);\r\n    function LoopSink(stepper, seed, sink) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.step = stepper;\r\n        _this.seed = seed;\r\n        return _this;\r\n    }\r\n    LoopSink.prototype.event = function (t, x) {\r\n        var result = this.step(this.seed, x);\r\n        this.seed = result.seed;\r\n        this.sink.event(t, result.value);\r\n    };\r\n    return LoopSink;\r\n}(Pipe));\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\n/**\r\n * Create a stream containing successive reduce results of applying f to\r\n * the previous reduce result and the current stream item.\r\n * @param f reducer function\r\n * @param initial initial value\r\n * @param stream stream to scan\r\n * @returns new stream containing successive reduce results\r\n */\r\nvar scan = function (f, initial, stream) {\r\n    return new Scan(f, initial, stream);\r\n};\r\nvar Scan = /** @class */ (function () {\r\n    function Scan(f, z, source) {\r\n        this.source = source;\r\n        this.f = f;\r\n        this.value = z;\r\n    }\r\n    Scan.prototype.run = function (sink, scheduler) {\r\n        var d1 = asap(propagateEventTask(this.value, sink), scheduler);\r\n        var d2 = this.source.run(new ScanSink(this.f, this.value, sink), scheduler);\r\n        return disposeBoth(d1, d2);\r\n    };\r\n    return Scan;\r\n}());\r\nvar ScanSink = /** @class */ (function (_super) {\r\n    __extends(ScanSink, _super);\r\n    function ScanSink(f, z, sink) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.f = f;\r\n        _this.value = z;\r\n        return _this;\r\n    }\r\n    ScanSink.prototype.event = function (t, x) {\r\n        var f = this.f;\r\n        this.value = f(this.value, x);\r\n        this.sink.event(t, this.value);\r\n    };\r\n    return ScanSink;\r\n}(Pipe));\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\nvar continueWith = function (f, stream) {\r\n    return new ContinueWith(f, stream);\r\n};\r\nvar ContinueWith = /** @class */ (function () {\r\n    function ContinueWith(f, source) {\r\n        this.f = f;\r\n        this.source = source;\r\n    }\r\n    ContinueWith.prototype.run = function (sink, scheduler) {\r\n        return new ContinueWithSink(this.f, this.source, sink, scheduler);\r\n    };\r\n    return ContinueWith;\r\n}());\r\nvar ContinueWithSink = /** @class */ (function (_super) {\r\n    __extends(ContinueWithSink, _super);\r\n    function ContinueWithSink(f, source, sink, scheduler) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.f = f;\r\n        _this.scheduler = scheduler;\r\n        _this.active = true;\r\n        _this.disposable = disposeOnce(source.run(_this, scheduler));\r\n        return _this;\r\n    }\r\n    ContinueWithSink.prototype.event = function (t, x) {\r\n        if (!this.active) {\r\n            return;\r\n        }\r\n        this.sink.event(t, x);\r\n    };\r\n    ContinueWithSink.prototype.end = function (t) {\r\n        if (!this.active) {\r\n            return;\r\n        }\r\n        tryDispose$1(t, this.disposable, this.sink);\r\n        this.startNext(t, this.sink);\r\n    };\r\n    ContinueWithSink.prototype.startNext = function (t, sink) {\r\n        try {\r\n            this.disposable = this.continue(this.f, t, sink);\r\n        }\r\n        catch (e) {\r\n            sink.error(t, e);\r\n        }\r\n    };\r\n    ContinueWithSink.prototype.continue = function (f, t, sink) {\r\n        return run(sink, this.scheduler, withLocalTime(t, f()));\r\n    };\r\n    ContinueWithSink.prototype.dispose = function () {\r\n        this.active = false;\r\n        return this.disposable.dispose();\r\n    };\r\n    return ContinueWithSink;\r\n}(Pipe));\n\n/** @license MIT License (c) copyright 2010-2017 original author or authors */\r\nvar startWith = function (x, stream) {\r\n    return continueWith(function () { return stream; }, now(x));\r\n};\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\nvar Filter = /** @class */ (function () {\r\n    function Filter(p, source) {\r\n        this.p = p;\r\n        this.source = source;\r\n    }\r\n    Filter.prototype.run = function (sink, scheduler) {\r\n        return this.source.run(new FilterSink(this.p, sink), scheduler);\r\n    };\r\n    /**\r\n     * Create a filtered source, fusing adjacent filter.filter if possible\r\n     * @param {function(x:*):boolean} p filtering predicate\r\n     * @param {{run:function}} source source to filter\r\n     * @returns {Filter} filtered source\r\n     */\r\n    Filter.create = function (p, source) {\r\n        if (isCanonicalEmpty(source)) {\r\n            return source;\r\n        }\r\n        if (source instanceof Filter) {\r\n            return new Filter(and(source.p, p), source.source);\r\n        }\r\n        return new Filter(p, source);\r\n    };\r\n    return Filter;\r\n}());\r\nvar FilterSink = /** @class */ (function (_super) {\r\n    __extends(FilterSink, _super);\r\n    function FilterSink(p, sink) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.p = p;\r\n        return _this;\r\n    }\r\n    FilterSink.prototype.event = function (t, x) {\r\n        var p = this.p;\r\n        p(x) && this.sink.event(t, x);\r\n    };\r\n    return FilterSink;\r\n}(Pipe));\r\nvar and = function (p, q) { return function (x) { return p(x) && q(x); }; };\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\nvar FilterMap = /** @class */ (function () {\r\n    function FilterMap(p, f, source) {\r\n        this.p = p;\r\n        this.f = f;\r\n        this.source = source;\r\n    }\r\n    FilterMap.prototype.run = function (sink, scheduler) {\r\n        return this.source.run(new FilterMapSink(this.p, this.f, sink), scheduler);\r\n    };\r\n    return FilterMap;\r\n}());\r\nvar FilterMapSink = /** @class */ (function (_super) {\r\n    __extends(FilterMapSink, _super);\r\n    function FilterMapSink(p, f, sink) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.p = p;\r\n        _this.f = f;\r\n        return _this;\r\n    }\r\n    FilterMapSink.prototype.event = function (t, x) {\r\n        var f = this.f;\r\n        var p = this.p;\r\n        p(x) && this.sink.event(t, f(x));\r\n    };\r\n    return FilterMapSink;\r\n}(Pipe));\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\nvar Map = /** @class */ (function () {\r\n    function Map(f, source) {\r\n        this.f = f;\r\n        this.source = source;\r\n    }\r\n    Map.prototype.run = function (sink, scheduler) {\r\n        return this.source.run(new MapSink(this.f, sink), scheduler);\r\n    };\r\n    /**\r\n     * Create a mapped source, fusing adjacent map.map, filter.map,\r\n     * and filter.map.map if possible\r\n     * @param {function(*):*} f mapping function\r\n     * @param {{run:function}} source source to map\r\n     * @returns {Map|FilterMap} mapped source, possibly fused\r\n     */\r\n    Map.create = function (f, source) {\r\n        if (isCanonicalEmpty(source)) {\r\n            return empty();\r\n        }\r\n        if (source instanceof Map) {\r\n            return new Map(compose(f, source.f), source.source);\r\n        }\r\n        if (source instanceof Filter) {\r\n            return new FilterMap(source.p, f, source.source);\r\n        }\r\n        return new Map(f, source);\r\n    };\r\n    return Map;\r\n}());\r\nvar MapSink = /** @class */ (function (_super) {\r\n    __extends(MapSink, _super);\r\n    function MapSink(f, sink) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.f = f;\r\n        return _this;\r\n    }\r\n    MapSink.prototype.event = function (t, x) {\r\n        var f = this.f;\r\n        this.sink.event(t, f(x));\r\n    };\r\n    return MapSink;\r\n}(Pipe));\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\n/**\r\n * Transform each value in the stream by applying f to each\r\n * @param f mapping function\r\n * @param stream stream to map\r\n * @returns stream containing items transformed by f\r\n */\r\nvar map = function (f, stream) {\r\n    return Map.create(f, stream);\r\n};\r\n/**\r\n* Replace each value in the stream with x\r\n* @param x\r\n* @param stream\r\n* @returns stream containing items replaced with x\r\n*/\r\nvar constant = function (x, stream) {\r\n    return map(function () { return x; }, stream);\r\n};\r\n/**\r\n* Perform a side effect for each item in the stream\r\n* @param f side effect to execute for each item. The return value will be discarded.\r\n* @param stream stream to tap\r\n* @returns new stream containing the same items as this stream\r\n*/\r\nvar tap = function (f, stream) {\r\n    return new Tap(f, stream);\r\n};\r\nvar Tap = /** @class */ (function () {\r\n    function Tap(f, source) {\r\n        this.source = source;\r\n        this.f = f;\r\n    }\r\n    Tap.prototype.run = function (sink, scheduler) {\r\n        return this.source.run(new TapSink(this.f, sink), scheduler);\r\n    };\r\n    return Tap;\r\n}());\r\nvar TapSink = /** @class */ (function (_super) {\r\n    __extends(TapSink, _super);\r\n    function TapSink(f, sink) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.f = f;\r\n        return _this;\r\n    }\r\n    TapSink.prototype.event = function (t, x) {\r\n        var f = this.f;\r\n        f(x);\r\n        this.sink.event(t, x);\r\n    };\r\n    return TapSink;\r\n}(Pipe));\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\nvar IndexSink = /** @class */ (function (_super) {\r\n    __extends(IndexSink, _super);\r\n    function IndexSink(i, sink) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.index = i;\r\n        _this.active = true;\r\n        _this.value = undefined;\r\n        return _this;\r\n    }\r\n    IndexSink.prototype.event = function (t, x) {\r\n        if (!this.active) {\r\n            return;\r\n        }\r\n        this.value = x;\r\n        this.sink.event(t, this);\r\n    };\r\n    IndexSink.prototype.end = function (t) {\r\n        if (!this.active) {\r\n            return;\r\n        }\r\n        this.active = false;\r\n        this.sink.event(t, this);\r\n    };\r\n    return IndexSink;\r\n}(Pipe));\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\n/** @author Brian Cavalier */\r\n/** @author John Hann */\r\n/**\r\n * TODO: find a better way (without `any`)\r\n */\r\nfunction invoke(f, args) {\r\n    /* eslint complexity: [2,7] */\r\n    switch (args.length) {\r\n        case 0: return f();\r\n        case 1: return f(args[0]);\r\n        case 2: return f(args[0], args[1]);\r\n        case 3: return f(args[0], args[1], args[2]);\r\n        case 4: return f(args[0], args[1], args[2], args[3]);\r\n        case 5: return f(args[0], args[1], args[2], args[3], args[4]);\r\n        default:\r\n            return f.apply(undefined, args);\r\n    }\r\n}\n\n/** @license MIT License (c) copyright 2010 original author or authors */\r\n/**\r\n * Combine latest events from two streams\r\n * @param f function to combine most recent events\r\n * @param stream1\r\n * @param stream2\r\n * @returns stream containing the result of applying f to the most recent\r\n *  event of each input stream, whenever a new event arrives on any stream.\r\n */\r\nvar combine = function (f, stream1, stream2) {\r\n    return combineArray(f, [stream1, stream2]);\r\n};\r\n/**\r\n* Combine latest events from all input streams\r\n* @param f function to combine most recent events\r\n* @param streams most recent events\r\n* @returns stream containing the result of applying f to the most recent\r\n*  event of each input stream, whenever a new event arrives on any stream.\r\n*/\r\nvar combineArray = function (f, streams) {\r\n    return streams.length === 0 || containsCanonicalEmpty(streams) ? empty()\r\n        : streams.length === 1 ? map(f, streams[0])\r\n            : new Combine(f, streams);\r\n};\r\nvar Combine = /** @class */ (function () {\r\n    function Combine(f, sources) {\r\n        this.f = f;\r\n        this.sources = sources;\r\n    }\r\n    Combine.prototype.run = function (sink, scheduler) {\r\n        var l = this.sources.length;\r\n        var disposables = new Array(l);\r\n        var sinks = new Array(l);\r\n        var mergeSink = new CombineSink(disposables, sinks.length, sink, this.f);\r\n        for (var indexSink = void 0, i = 0; i < l; ++i) {\r\n            indexSink = sinks[i] = new IndexSink(i, mergeSink);\r\n            disposables[i] = this.sources[i].run(indexSink, scheduler);\r\n        }\r\n        return disposeAll(disposables);\r\n    };\r\n    return Combine;\r\n}());\r\nvar CombineSink = /** @class */ (function (_super) {\r\n    __extends(CombineSink, _super);\r\n    function CombineSink(disposables, length, sink, f) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.disposables = disposables;\r\n        _this.f = f;\r\n        _this.awaiting = length;\r\n        _this.values = new Array(length);\r\n        _this.hasValue = new Array(length).fill(false);\r\n        _this.activeCount = length;\r\n        return _this;\r\n    }\r\n    CombineSink.prototype.event = function (t, indexedValue) {\r\n        if (!indexedValue.active) {\r\n            this.dispose(t, indexedValue.index);\r\n            return;\r\n        }\r\n        var i = indexedValue.index;\r\n        var awaiting = this.updateReady(i);\r\n        this.values[i] = indexedValue.value;\r\n        if (awaiting === 0) {\r\n            this.sink.event(t, invoke(this.f, this.values));\r\n        }\r\n    };\r\n    CombineSink.prototype.updateReady = function (index) {\r\n        if (this.awaiting > 0) {\r\n            if (!this.hasValue[index]) {\r\n                this.hasValue[index] = true;\r\n                this.awaiting -= 1;\r\n            }\r\n        }\r\n        return this.awaiting;\r\n    };\r\n    CombineSink.prototype.dispose = function (t, index) {\r\n        tryDispose$1(t, this.disposables[index], this.sink);\r\n        if (--this.activeCount === 0) {\r\n            this.sink.end(t);\r\n        }\r\n    };\r\n    return CombineSink;\r\n}(Pipe));\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\n/**\r\n * Assume fs is a stream containing functions, and apply the latest function\r\n * in fs to the latest value in xs.\r\n * fs:         --f---------g--------h------>\r\n * xs:         -a-------b-------c-------d-->\r\n * ap(fs, xs): --fa-----fb-gb---gc--hc--hd->\r\n * @param {Stream} fs stream of functions to apply to the latest x\r\n * @param {Stream} xs stream of values to which to apply all the latest f\r\n * @returns {Stream} stream containing all the applications of fs to xs\r\n */\r\nfunction ap(fs, xs) {\r\n    return combine(apply, fs, xs);\r\n}\n\n/** @license MIT License (c) copyright 2010 original author or authors */\r\nvar mergeConcurrently = function (concurrency, stream) {\r\n    return mergeMapConcurrently(id, concurrency, stream);\r\n};\r\nvar mergeMapConcurrently = function (f, concurrency, stream) {\r\n    return isCanonicalEmpty(stream) ? empty()\r\n        : new MergeConcurrently(f, concurrency, stream);\r\n};\r\nvar MergeConcurrently = /** @class */ (function () {\r\n    function MergeConcurrently(f, concurrency, source) {\r\n        this.f = f;\r\n        this.concurrency = concurrency;\r\n        this.source = source;\r\n    }\r\n    MergeConcurrently.prototype.run = function (sink, scheduler) {\r\n        return new Outer(this.f, this.concurrency, this.source, sink, scheduler);\r\n    };\r\n    return MergeConcurrently;\r\n}());\r\nvar isNonEmpty = function (array) { return array.length > 0; };\r\nvar Outer = /** @class */ (function () {\r\n    function Outer(f, concurrency, source, sink, scheduler) {\r\n        this.f = f;\r\n        this.concurrency = concurrency;\r\n        this.sink = sink;\r\n        this.scheduler = scheduler;\r\n        this.pending = [];\r\n        this.current = [];\r\n        this.disposable = disposeOnce(source.run(this, scheduler));\r\n        this.active = true;\r\n    }\r\n    Outer.prototype.event = function (t, x) {\r\n        this.addInner(t, x);\r\n    };\r\n    Outer.prototype.addInner = function (t, x) {\r\n        if (this.current.length < this.concurrency) {\r\n            this.startInner(t, x);\r\n        }\r\n        else {\r\n            this.pending.push(x);\r\n        }\r\n    };\r\n    Outer.prototype.startInner = function (t, x) {\r\n        try {\r\n            this.initInner(t, x);\r\n        }\r\n        catch (e) {\r\n            this.error(t, e);\r\n        }\r\n    };\r\n    Outer.prototype.initInner = function (t, x) {\r\n        var innerSink = new Inner(t, this, this.sink);\r\n        innerSink.disposable = mapAndRun(this.f, t, x, innerSink, this.scheduler);\r\n        this.current.push(innerSink);\r\n    };\r\n    Outer.prototype.end = function (t) {\r\n        this.active = false;\r\n        tryDispose$1(t, this.disposable, this.sink);\r\n        this.checkEnd(t);\r\n    };\r\n    Outer.prototype.error = function (t, e) {\r\n        this.active = false;\r\n        this.sink.error(t, e);\r\n    };\r\n    Outer.prototype.dispose = function () {\r\n        this.active = false;\r\n        this.pending.length = 0;\r\n        this.disposable.dispose();\r\n        disposeAll(this.current).dispose();\r\n    };\r\n    Outer.prototype.endInner = function (t, inner) {\r\n        var i = this.current.indexOf(inner);\r\n        if (i >= 0) {\r\n            this.current.splice(i, 1);\r\n        }\r\n        tryDispose$1(t, inner, this);\r\n        var pending = this.pending;\r\n        if (isNonEmpty(pending)) {\r\n            this.startInner(t, pending.shift());\r\n        }\r\n        else {\r\n            this.checkEnd(t);\r\n        }\r\n    };\r\n    Outer.prototype.checkEnd = function (t) {\r\n        if (!this.active && this.current.length === 0) {\r\n            this.sink.end(t);\r\n        }\r\n    };\r\n    return Outer;\r\n}());\r\nvar mapAndRun = function (f, t, x, sink, scheduler) {\r\n    return f(x).run(sink, schedulerRelativeTo(t, scheduler));\r\n};\r\nvar Inner = /** @class */ (function () {\r\n    function Inner(time, outer, sink) {\r\n        this.time = time;\r\n        this.outer = outer;\r\n        this.sink = sink;\r\n        this.disposable = disposeNone();\r\n    }\r\n    Inner.prototype.event = function (t, x) {\r\n        this.sink.event(t + this.time, x);\r\n    };\r\n    Inner.prototype.end = function (t) {\r\n        this.outer.endInner(t + this.time, this);\r\n    };\r\n    Inner.prototype.error = function (t, e) {\r\n        this.outer.error(t + this.time, e);\r\n    };\r\n    Inner.prototype.dispose = function () {\r\n        return this.disposable.dispose();\r\n    };\r\n    return Inner;\r\n}());\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\n/**\r\n * Map each value in the stream to a new stream, and merge it into the\r\n * returned outer stream. Event arrival times are preserved.\r\n * @param f chaining function, must return a Stream\r\n * @param stream\r\n * @returns new stream containing all events from each stream returned by f\r\n */\r\nvar chain = function (f, stream) { return mergeMapConcurrently(f, Infinity, stream); };\r\n/**\r\n * Monadic join. Flatten a Stream<Stream<X>> to Stream<X> by merging inner\r\n * streams to the outer. Event arrival times are preserved.\r\n * @param stream stream of streams\r\n * @returns new stream containing all events of all inner streams\r\n */\r\nvar join = function (stream) { return mergeConcurrently(Infinity, stream); };\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\n/**\r\n * Map each value in stream to a new stream, and concatenate them all\r\n * stream:              -a---b---cX\r\n * f(a):                 1-1-1-1X\r\n * f(b):                        -2-2-2-2X\r\n * f(c):                                -3-3-3-3X\r\n * stream.concatMap(f): -1-1-1-1-2-2-2-2-3-3-3-3X\r\n * @param f function to map each value to a stream\r\n * @param stream\r\n * @returns new stream containing all events from each stream returned by f\r\n */\r\nvar concatMap = function (f, stream) {\r\n    return mergeMapConcurrently(f, 1, stream);\r\n};\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\n/**\r\n * @returns stream containing events from two streams in time order.\r\n * If two events are simultaneous they will be merged in arbitrary order.\r\n */\r\nfunction merge(stream1, stream2) {\r\n    return mergeArray([stream1, stream2]);\r\n}\r\n/**\r\n * @param streams array of stream to merge\r\n * @returns stream containing events from all input observables\r\n * in time order.  If two events are simultaneous they will be merged in\r\n * arbitrary order.\r\n */\r\nvar mergeArray = function (streams) {\r\n    return mergeStreams(withoutCanonicalEmpty(streams));\r\n};\r\n/**\r\n * This implements fusion/flattening for merge.  It will\r\n * fuse adjacent merge operations.  For example:\r\n * - a.merge(b).merge(c) effectively becomes merge(a, b, c)\r\n * - merge(a, merge(b, c)) effectively becomes merge(a, b, c)\r\n * It does this by concatenating the sources arrays of\r\n * any nested Merge sources, in effect \"flattening\" nested\r\n * merge operations into a single merge.\r\n * TODO: use {@link MergeArray}\r\n */\r\nvar mergeStreams = function (streams) {\r\n    return streams.length === 0 ? empty()\r\n        : streams.length === 1 ? streams[0]\r\n            : new Merge(reduce(appendSources, [], streams));\r\n};\r\nvar withoutCanonicalEmpty = function (streams) {\r\n    return streams.filter(isNotCanonicalEmpty);\r\n};\r\nvar isNotCanonicalEmpty = function (stream) {\r\n    return !isCanonicalEmpty(stream);\r\n};\r\nvar appendSources = function (sources, stream) {\r\n    return sources.concat(stream instanceof Merge ? stream.sources : stream);\r\n};\r\nvar Merge = /** @class */ (function () {\r\n    function Merge(sources) {\r\n        this.sources = sources;\r\n    }\r\n    Merge.prototype.run = function (sink, scheduler) {\r\n        var l = this.sources.length;\r\n        var disposables = new Array(l);\r\n        var sinks = new Array(l);\r\n        var mergeSink = new MergeSink(disposables, sinks, sink);\r\n        for (var indexSink = void 0, i = 0; i < l; ++i) {\r\n            indexSink = sinks[i] = new IndexSink(i, mergeSink);\r\n            disposables[i] = this.sources[i].run(indexSink, scheduler);\r\n        }\r\n        return disposeAll(disposables);\r\n    };\r\n    return Merge;\r\n}());\r\nvar MergeSink = /** @class */ (function (_super) {\r\n    __extends(MergeSink, _super);\r\n    function MergeSink(disposables, sinks, sink) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.disposables = disposables;\r\n        _this.activeCount = sinks.length;\r\n        return _this;\r\n    }\r\n    MergeSink.prototype.event = function (t, indexValue) {\r\n        if (!indexValue.active) {\r\n            this.dispose(t, indexValue.index);\r\n            return;\r\n        }\r\n        this.sink.event(t, indexValue.value);\r\n    };\r\n    MergeSink.prototype.dispose = function (t, index) {\r\n        tryDispose$1(t, this.disposables[index], this.sink);\r\n        if (--this.activeCount === 0) {\r\n            this.sink.end(t);\r\n        }\r\n    };\r\n    return MergeSink;\r\n}(Pipe));\n\n/** @license MIT License (c) copyright 2010 original author or authors */\r\nvar sample = function (values, sampler) {\r\n    return snapshot(function (x) { return x; }, values, sampler);\r\n};\r\nvar snapshot = function (f, values, sampler) {\r\n    return isCanonicalEmpty(sampler) || isCanonicalEmpty(values)\r\n        ? empty()\r\n        : new Snapshot(f, values, sampler);\r\n};\r\nvar Snapshot = /** @class */ (function () {\r\n    function Snapshot(f, values, sampler) {\r\n        this.f = f;\r\n        this.values = values;\r\n        this.sampler = sampler;\r\n    }\r\n    Snapshot.prototype.run = function (sink, scheduler) {\r\n        var sampleSink = new SnapshotSink(this.f, sink);\r\n        var valuesDisposable = this.values.run(sampleSink.latest, scheduler);\r\n        var samplerDisposable = this.sampler.run(sampleSink, scheduler);\r\n        return disposeBoth(samplerDisposable, valuesDisposable);\r\n    };\r\n    return Snapshot;\r\n}());\r\nvar SnapshotSink = /** @class */ (function (_super) {\r\n    __extends(SnapshotSink, _super);\r\n    function SnapshotSink(f, sink) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.f = f;\r\n        _this.latest = new LatestValueSink(_this);\r\n        return _this;\r\n    }\r\n    SnapshotSink.prototype.event = function (t, x) {\r\n        if (this.latest.hasValue) {\r\n            var f = this.f;\r\n            // TODO: value should be boxed to avoid ! bang\r\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\r\n            this.sink.event(t, f(this.latest.value, x));\r\n        }\r\n    };\r\n    return SnapshotSink;\r\n}(Pipe));\r\nvar LatestValueSink = /** @class */ (function (_super) {\r\n    __extends(LatestValueSink, _super);\r\n    function LatestValueSink(sink) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.hasValue = false;\r\n        return _this;\r\n    }\r\n    LatestValueSink.prototype.event = function (_t, x) {\r\n        this.value = x;\r\n        this.hasValue = true;\r\n    };\r\n    LatestValueSink.prototype.end = function () { };\r\n    return LatestValueSink;\r\n}(Pipe));\n\n/** @license MIT License (c) copyright 2010 original author or authors */\r\n// Construct a constrained bounds\r\nvar boundsFrom = function (unsafeMin, unsafeMax) {\r\n    var min = Math.max(0, unsafeMin);\r\n    var max = Math.max(min, unsafeMax);\r\n    return { min: min, max: max };\r\n};\r\n// Combine 2 bounds by narrowing min and max\r\nvar mergeBounds = function (b1, b2) {\r\n    return boundsFrom(b1.min + b2.min, Math.min(b1.max, b1.min + b2.max));\r\n};\r\n// Nil bounds excludes all slice indices\r\nvar isNilBounds = function (b) {\r\n    return b.min >= b.max;\r\n};\r\n// Infinite bounds includes all slice indices\r\nvar isInfiniteBounds = function (b) {\r\n    return b.min <= 0 && b.max === Infinity;\r\n};\n\n// TODO: split into smaller files\r\n/**\r\n * @param n\r\n * @param stream\r\n * @returns new stream containing only up to the first n items from stream\r\n */\r\nvar take = function (n, stream) {\r\n    return slice(0, n, stream);\r\n};\r\n/**\r\n * @param n\r\n * @param stream\r\n * @returns new stream with the first n items removed\r\n */\r\nvar skip = function (n, stream) {\r\n    return slice(n, Infinity, stream);\r\n};\r\n/**\r\n * Slice a stream by index. Negative start/end indexes are not supported\r\n * @param start\r\n * @param end\r\n * @param stream\r\n * @returns stream containing items where start <= index < end\r\n */\r\nvar slice = function (start, end, stream) {\r\n    return sliceBounds(boundsFrom(start, end), stream);\r\n};\r\nvar sliceBounds = function (bounds, stream) {\r\n    return isSliceEmpty(bounds, stream) ? empty()\r\n        : stream instanceof Map ? commuteMapSlice(bounds, stream)\r\n            : stream instanceof Slice ? fuseSlice(bounds, stream)\r\n                : createSlice(bounds, stream);\r\n};\r\nvar isSliceEmpty = function (bounds, stream) {\r\n    return isCanonicalEmpty(stream) || isNilBounds(bounds);\r\n};\r\nvar createSlice = function (bounds, stream) {\r\n    return isInfiniteBounds(bounds) ? stream : new Slice(bounds, stream);\r\n};\r\nvar commuteMapSlice = function (bounds, mapStream) {\r\n    return Map.create(mapStream.f, sliceBounds(bounds, mapStream.source));\r\n};\r\nvar fuseSlice = function (bounds, sliceStream) {\r\n    return sliceBounds(mergeBounds(sliceStream.bounds, bounds), sliceStream.source);\r\n};\r\nvar Slice = /** @class */ (function () {\r\n    function Slice(bounds, source) {\r\n        this.source = source;\r\n        this.bounds = bounds;\r\n    }\r\n    Slice.prototype.run = function (sink, scheduler) {\r\n        var disposable = new SettableDisposable();\r\n        var sliceSink = new SliceSink(this.bounds.min, this.bounds.max - this.bounds.min, sink, disposable);\r\n        disposable.setDisposable(this.source.run(sliceSink, scheduler));\r\n        return disposable;\r\n    };\r\n    return Slice;\r\n}());\r\nvar SliceSink = /** @class */ (function (_super) {\r\n    __extends(SliceSink, _super);\r\n    function SliceSink(skip, take, sink, disposable) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.skip = skip;\r\n        _this.take = take;\r\n        _this.disposable = disposable;\r\n        return _this;\r\n    }\r\n    SliceSink.prototype.event = function (t, x) {\r\n        /* eslint complexity: [1, 4] */\r\n        if (this.skip > 0) {\r\n            this.skip -= 1;\r\n            return;\r\n        }\r\n        if (this.take === 0) {\r\n            return;\r\n        }\r\n        this.take -= 1;\r\n        this.sink.event(t, x);\r\n        if (this.take === 0) {\r\n            this.disposable.dispose();\r\n            this.sink.end(t);\r\n        }\r\n    };\r\n    return SliceSink;\r\n}(Pipe));\r\nvar takeWhile = function (p, stream) {\r\n    return isCanonicalEmpty(stream) ? empty()\r\n        : new TakeWhile(p, stream);\r\n};\r\nvar TakeWhile = /** @class */ (function () {\r\n    function TakeWhile(p, source) {\r\n        this.p = p;\r\n        this.source = source;\r\n    }\r\n    TakeWhile.prototype.run = function (sink, scheduler) {\r\n        var disposable = new SettableDisposable();\r\n        var takeWhileSink = new TakeWhileSink(this.p, sink, disposable);\r\n        disposable.setDisposable(this.source.run(takeWhileSink, scheduler));\r\n        return disposable;\r\n    };\r\n    return TakeWhile;\r\n}());\r\nvar TakeWhileSink = /** @class */ (function (_super) {\r\n    __extends(TakeWhileSink, _super);\r\n    function TakeWhileSink(p, sink, disposable) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.p = p;\r\n        _this.active = true;\r\n        _this.disposable = disposable;\r\n        return _this;\r\n    }\r\n    TakeWhileSink.prototype.event = function (t, x) {\r\n        if (!this.active) {\r\n            return;\r\n        }\r\n        var p = this.p;\r\n        this.active = p(x);\r\n        if (this.active) {\r\n            this.sink.event(t, x);\r\n        }\r\n        else {\r\n            this.disposable.dispose();\r\n            this.sink.end(t);\r\n        }\r\n    };\r\n    return TakeWhileSink;\r\n}(Pipe));\r\nvar skipWhile = function (p, stream) {\r\n    return isCanonicalEmpty(stream) ? empty()\r\n        : new SkipWhile(p, stream);\r\n};\r\nvar SkipWhile = /** @class */ (function () {\r\n    function SkipWhile(p, source) {\r\n        this.p = p;\r\n        this.source = source;\r\n    }\r\n    SkipWhile.prototype.run = function (sink, scheduler) {\r\n        return this.source.run(new SkipWhileSink(this.p, sink), scheduler);\r\n    };\r\n    return SkipWhile;\r\n}());\r\nvar SkipWhileSink = /** @class */ (function (_super) {\r\n    __extends(SkipWhileSink, _super);\r\n    function SkipWhileSink(p, sink) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.p = p;\r\n        _this.skipping = true;\r\n        return _this;\r\n    }\r\n    SkipWhileSink.prototype.event = function (t, x) {\r\n        if (this.skipping) {\r\n            var p = this.p;\r\n            this.skipping = p(x);\r\n            if (this.skipping) {\r\n                return;\r\n            }\r\n        }\r\n        this.sink.event(t, x);\r\n    };\r\n    return SkipWhileSink;\r\n}(Pipe));\r\nvar skipAfter = function (p, stream) {\r\n    return isCanonicalEmpty(stream) ? empty()\r\n        : new SkipAfter(p, stream);\r\n};\r\nvar SkipAfter = /** @class */ (function () {\r\n    function SkipAfter(p, source) {\r\n        this.p = p;\r\n        this.source = source;\r\n    }\r\n    SkipAfter.prototype.run = function (sink, scheduler) {\r\n        return this.source.run(new SkipAfterSink(this.p, sink), scheduler);\r\n    };\r\n    return SkipAfter;\r\n}());\r\nvar SkipAfterSink = /** @class */ (function (_super) {\r\n    __extends(SkipAfterSink, _super);\r\n    function SkipAfterSink(p, sink) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.p = p;\r\n        _this.skipping = false;\r\n        return _this;\r\n    }\r\n    SkipAfterSink.prototype.event = function (t, x) {\r\n        if (this.skipping) {\r\n            return;\r\n        }\r\n        var p = this.p;\r\n        this.skipping = p(x);\r\n        this.sink.event(t, x);\r\n        if (this.skipping) {\r\n            this.sink.end(t);\r\n        }\r\n    };\r\n    return SkipAfterSink;\r\n}(Pipe));\n\n/** @license MIT License (c) copyright 2017 original author or authors */\r\nvar withItems = function (items, stream) {\r\n    return zipItems(keepLeft, items, stream);\r\n};\r\nvar zipItems = function (f, items, stream) {\r\n    return isCanonicalEmpty(stream) || items.length === 0\r\n        ? empty()\r\n        : new ZipItems(f, items, take(items.length, stream));\r\n};\r\nvar keepLeft = function (a) { return a; };\r\nvar ZipItems = /** @class */ (function () {\r\n    function ZipItems(f, items, source) {\r\n        this.f = f;\r\n        this.items = items;\r\n        this.source = source;\r\n    }\r\n    ZipItems.prototype.run = function (sink, scheduler) {\r\n        return this.source.run(new ZipItemsSink(this.f, this.items, sink), scheduler);\r\n    };\r\n    return ZipItems;\r\n}());\r\nvar ZipItemsSink = /** @class */ (function (_super) {\r\n    __extends(ZipItemsSink, _super);\r\n    function ZipItemsSink(f, items, sink) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.f = f;\r\n        _this.items = items;\r\n        _this.index = 0;\r\n        return _this;\r\n    }\r\n    ZipItemsSink.prototype.event = function (t, b) {\r\n        var f = this.f;\r\n        this.sink.event(t, f(this.items[this.index], b));\r\n        this.index += 1;\r\n    };\r\n    return ZipItemsSink;\r\n}(Pipe));\n\n// Copied and modified from https://github.com/invertase/denque\r\n// MIT License\r\n// These constants were extracted directly from denque's shift()\r\n// It's not clear exactly why the authors chose these particular\r\n// values, but given denque's stated goals, it seems likely that\r\n// they were chosen for speed/memory reasons.\r\n// Max value of _head at which Queue is willing to shink\r\n// its internal array\r\nvar HEAD_MAX_SHRINK = 2;\r\n// Min value of _tail at which Queue is willing to shink\r\n// its internal array\r\nvar TAIL_MIN_SHRINK = 10000;\r\nvar Queue = /** @class */ (function () {\r\n    function Queue() {\r\n        this.head = 0;\r\n        this.tail = 0;\r\n        this.capacityMask = 0x3;\r\n        this.list = new Array(4);\r\n    }\r\n    Queue.prototype.push = function (x) {\r\n        var tail = this.tail;\r\n        this.list[tail] = x;\r\n        this.tail = (tail + 1) & this.capacityMask;\r\n        if (this.tail === this.head) {\r\n            this.growArray();\r\n        }\r\n        if (this.head < this.tail) {\r\n            return this.tail - this.head;\r\n        }\r\n        else {\r\n            return this.capacityMask + 1 - (this.head - this.tail);\r\n        }\r\n    };\r\n    Queue.prototype.shift = function () {\r\n        var head = this.head;\r\n        if (head === this.tail) {\r\n            return undefined;\r\n        }\r\n        var x = this.list[head];\r\n        this.list[head] = undefined;\r\n        this.head = (head + 1) & this.capacityMask;\r\n        if (head < HEAD_MAX_SHRINK &&\r\n            this.tail > TAIL_MIN_SHRINK &&\r\n            this.tail <= this.list.length >>> 2) {\r\n            this.shrinkArray();\r\n        }\r\n        return x;\r\n    };\r\n    Queue.prototype.isEmpty = function () {\r\n        return this.head === this.tail;\r\n    };\r\n    Queue.prototype.length = function () {\r\n        if (this.head === this.tail) {\r\n            return 0;\r\n        }\r\n        else if (this.head < this.tail) {\r\n            return this.tail - this.head;\r\n        }\r\n        else {\r\n            return this.capacityMask + 1 - (this.head - this.tail);\r\n        }\r\n    };\r\n    Queue.prototype.growArray = function () {\r\n        if (this.head) {\r\n            // copy existing data, head to end, then beginning to tail.\r\n            this.list = this.copyArray();\r\n            this.head = 0;\r\n        }\r\n        // head is at 0 and array is now full, safe to extend\r\n        this.tail = this.list.length;\r\n        this.list.length *= 2;\r\n        this.capacityMask = (this.capacityMask << 1) | 1;\r\n    };\r\n    Queue.prototype.shrinkArray = function () {\r\n        this.list.length >>>= 1;\r\n        this.capacityMask >>>= 1;\r\n    };\r\n    Queue.prototype.copyArray = function () {\r\n        var newArray = [];\r\n        var list = this.list;\r\n        var len = list.length;\r\n        var i;\r\n        for (i = this.head; i < len; i++) {\r\n            newArray.push(list[i]);\r\n        }\r\n        for (i = 0; i < this.tail; i++) {\r\n            newArray.push(list[i]);\r\n        }\r\n        return newArray;\r\n    };\r\n    return Queue;\r\n}());\n\n/** @license MIT License (c) copyright 2010 original author or authors */\r\n/**\r\n * Combine two streams pairwise by index by applying f to values at corresponding\r\n * indices.  The returned stream ends when either of the input streams ends.\r\n * @param {function} f function to combine values\r\n * @returns {Stream} new stream with items at corresponding indices combined\r\n *  using f\r\n */\r\nfunction zip(f, stream1, stream2) {\r\n    return zipArray(f, [stream1, stream2]);\r\n}\r\n/**\r\n* Combine streams pairwise (or tuple-wise) by index by applying f to values\r\n* at corresponding indices.  The returned stream ends when any of the input\r\n* streams ends.\r\n* @param {function} f function to combine values\r\n* @param {[Stream]} streams streams to zip using f\r\n* @returns {Stream} new stream with items at corresponding indices combined\r\n*  using f\r\n*/\r\nvar zipArray = function (f, streams) {\r\n    return streams.length === 0 || containsCanonicalEmpty(streams) ? empty()\r\n        : streams.length === 1 ? map(f, streams[0])\r\n            : new Zip(f, streams);\r\n};\r\nvar Zip = /** @class */ (function () {\r\n    function Zip(f, sources) {\r\n        this.f = f;\r\n        this.sources = sources;\r\n    }\r\n    Zip.prototype.run = function (sink, scheduler) {\r\n        var l = this.sources.length;\r\n        var disposables = new Array(l);\r\n        var sinks = new Array(l);\r\n        var buffers = new Array(l);\r\n        var zipSink = new ZipSink(this.f, buffers, sinks, sink);\r\n        for (var indexSink = void 0, i = 0; i < l; ++i) {\r\n            buffers[i] = new Queue();\r\n            indexSink = sinks[i] = new IndexSink(i, zipSink);\r\n            disposables[i] = this.sources[i].run(indexSink, scheduler);\r\n        }\r\n        return disposeAll(disposables);\r\n    };\r\n    return Zip;\r\n}());\r\nvar ZipSink = /** @class */ (function (_super) {\r\n    __extends(ZipSink, _super);\r\n    function ZipSink(f, buffers, sinks, sink) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.f = f;\r\n        _this.sinks = sinks;\r\n        _this.buffers = buffers;\r\n        return _this;\r\n    }\r\n    ZipSink.prototype.event = function (t, indexedValue) {\r\n        /* eslint complexity: [1, 5] */\r\n        if (!indexedValue.active) {\r\n            this.dispose(t, indexedValue.index);\r\n            return;\r\n        }\r\n        var buffers = this.buffers;\r\n        var buffer = buffers[indexedValue.index];\r\n        buffer.push(indexedValue.value);\r\n        if (buffer.length() === 1) {\r\n            if (!ready(buffers)) {\r\n                return;\r\n            }\r\n            emitZipped(this.f, t, buffers, this.sink);\r\n            if (ended(this.buffers, this.sinks)) {\r\n                this.sink.end(t);\r\n            }\r\n        }\r\n    };\r\n    ZipSink.prototype.dispose = function (t, index) {\r\n        var buffer = this.buffers[index];\r\n        if (buffer.isEmpty()) {\r\n            this.sink.end(t);\r\n        }\r\n    };\r\n    return ZipSink;\r\n}(Pipe));\r\nvar emitZipped = function (f, t, buffers, sink) {\r\n    return sink.event(t, invoke(f, map$2(head, buffers)));\r\n};\r\nvar head = function (buffer) { return buffer.shift(); };\r\nfunction ended(buffers, sinks) {\r\n    for (var i = 0, l = buffers.length; i < l; ++i) {\r\n        if (buffers[i].isEmpty() && !sinks[i].active) {\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n}\r\nfunction ready(buffers) {\r\n    for (var i = 0, l = buffers.length; i < l; ++i) {\r\n        if (buffers[i].isEmpty()) {\r\n            return false;\r\n        }\r\n    }\r\n    return true;\r\n}\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\n/**\r\n * Given a stream of streams, return a new stream that adopts the behavior\r\n * of the most recent inner stream.\r\n * @param stream of streams on which to switch\r\n * @returns switching stream\r\n */\r\nvar switchLatest = function (stream) {\r\n    return isCanonicalEmpty(stream)\r\n        ? empty()\r\n        : new Switch(stream);\r\n};\r\nvar Switch = /** @class */ (function () {\r\n    function Switch(source) {\r\n        this.source = source;\r\n    }\r\n    Switch.prototype.run = function (sink, scheduler) {\r\n        var switchSink = new SwitchSink(sink, scheduler);\r\n        return disposeBoth(switchSink, this.source.run(switchSink, scheduler));\r\n    };\r\n    return Switch;\r\n}());\r\nvar SwitchSink = /** @class */ (function () {\r\n    function SwitchSink(sink, scheduler) {\r\n        this.sink = sink;\r\n        this.scheduler = scheduler;\r\n        this.current = null;\r\n        this.ended = false;\r\n    }\r\n    SwitchSink.prototype.event = function (t, stream) {\r\n        this.disposeCurrent(t);\r\n        this.current = new Segment(stream, t, Infinity, this, this.sink, this.scheduler);\r\n    };\r\n    SwitchSink.prototype.end = function (t) {\r\n        this.ended = true;\r\n        this.checkEnd(t);\r\n    };\r\n    SwitchSink.prototype.error = function (t, e) {\r\n        this.ended = true;\r\n        this.sink.error(t, e);\r\n    };\r\n    SwitchSink.prototype.dispose = function () {\r\n        return this.disposeCurrent(currentTime(this.scheduler));\r\n    };\r\n    SwitchSink.prototype.disposeCurrent = function (t) {\r\n        if (this.current !== null) {\r\n            return this.current.dispose(t);\r\n        }\r\n    };\r\n    SwitchSink.prototype.disposeInner = function (t, inner) {\r\n        inner.dispose(t);\r\n        if (inner === this.current) {\r\n            this.current = null;\r\n        }\r\n    };\r\n    SwitchSink.prototype.checkEnd = function (t) {\r\n        if (this.ended && this.current === null) {\r\n            this.sink.end(t);\r\n        }\r\n    };\r\n    SwitchSink.prototype.endInner = function (t, inner) {\r\n        this.disposeInner(t, inner);\r\n        this.checkEnd(t);\r\n    };\r\n    SwitchSink.prototype.errorInner = function (t, e, inner) {\r\n        this.disposeInner(t, inner);\r\n        this.sink.error(t, e);\r\n    };\r\n    return SwitchSink;\r\n}());\r\nvar Segment = /** @class */ (function () {\r\n    function Segment(source, min, max, outer, sink, scheduler) {\r\n        this.min = min;\r\n        this.max = max;\r\n        this.outer = outer;\r\n        this.sink = sink;\r\n        this.disposable = source.run(this, schedulerRelativeTo(min, scheduler));\r\n    }\r\n    Segment.prototype.event = function (t, x) {\r\n        var time = Math.max(0, t + this.min);\r\n        if (time < this.max) {\r\n            this.sink.event(time, x);\r\n        }\r\n    };\r\n    Segment.prototype.end = function (t) {\r\n        this.outer.endInner(t + this.min, this);\r\n    };\r\n    Segment.prototype.error = function (t, e) {\r\n        this.outer.errorInner(t + this.min, e, this);\r\n    };\r\n    Segment.prototype.dispose = function (t) {\r\n        tryDispose$1(t, this.disposable, this.sink);\r\n    };\r\n    return Segment;\r\n}());\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\nfunction filter(p, stream) {\r\n    return Filter.create(p, stream);\r\n}\r\n/**\r\n * Skip repeated events, using === to detect duplicates\r\n * @param stream stream from which to omit repeated events\r\n * @returns stream without repeated events\r\n */\r\nvar skipRepeats = function (stream) {\r\n    return skipRepeatsWith(same, stream);\r\n};\r\n/**\r\n * Skip repeated events using the provided equals function to detect duplicates\r\n * @param equals optional function to compare items\r\n * @param stream stream from which to omit repeated events\r\n * @returns stream without repeated events\r\n */\r\nvar skipRepeatsWith = function (equals, stream) {\r\n    return isCanonicalEmpty(stream) ? empty()\r\n        : new SkipRepeats(equals, stream);\r\n};\r\nvar SkipRepeats = /** @class */ (function () {\r\n    function SkipRepeats(equals, source) {\r\n        this.equals = equals;\r\n        this.source = source;\r\n    }\r\n    SkipRepeats.prototype.run = function (sink, scheduler) {\r\n        return this.source.run(new SkipRepeatsSink(this.equals, sink), scheduler);\r\n    };\r\n    return SkipRepeats;\r\n}());\r\nvar SkipRepeatsSink = /** @class */ (function (_super) {\r\n    __extends(SkipRepeatsSink, _super);\r\n    function SkipRepeatsSink(equals, sink) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.equals = equals;\r\n        _this.value = undefined;\r\n        _this.init = true;\r\n        return _this;\r\n    }\r\n    SkipRepeatsSink.prototype.event = function (t, x) {\r\n        if (this.init) {\r\n            this.init = false;\r\n            this.value = x;\r\n            this.sink.event(t, x);\r\n            // TODO: value should be boxed to avoid ! bang\r\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\r\n        }\r\n        else if (!this.equals(this.value, x)) {\r\n            this.value = x;\r\n            this.sink.event(t, x);\r\n        }\r\n    };\r\n    return SkipRepeatsSink;\r\n}(Pipe));\r\nfunction same(a, b) {\r\n    return a === b;\r\n}\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\nvar until = function (signal, stream) {\r\n    return new Until(signal, stream);\r\n};\r\nvar since = function (signal, stream) {\r\n    return new Since(signal, stream);\r\n};\r\nvar during = function (timeWindow, stream) {\r\n    return until(join(timeWindow), since(timeWindow, stream));\r\n};\r\nvar Until = /** @class */ (function () {\r\n    function Until(maxSignal, source) {\r\n        this.maxSignal = maxSignal;\r\n        this.source = source;\r\n    }\r\n    Until.prototype.run = function (sink, scheduler) {\r\n        var disposable = new SettableDisposable();\r\n        var d1 = this.source.run(sink, scheduler);\r\n        var d2 = this.maxSignal.run(new UntilSink(sink, disposable), scheduler);\r\n        disposable.setDisposable(disposeBoth(d1, d2));\r\n        return disposable;\r\n    };\r\n    return Until;\r\n}());\r\nvar Since = /** @class */ (function () {\r\n    function Since(minSignal, source) {\r\n        this.minSignal = minSignal;\r\n        this.source = source;\r\n    }\r\n    Since.prototype.run = function (sink, scheduler) {\r\n        var min = new LowerBoundSink(this.minSignal, sink, scheduler);\r\n        var d = this.source.run(new SinceSink(min, sink), scheduler);\r\n        return disposeBoth(min, d);\r\n    };\r\n    return Since;\r\n}());\r\nvar SinceSink = /** @class */ (function (_super) {\r\n    __extends(SinceSink, _super);\r\n    function SinceSink(min, sink) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.min = min;\r\n        return _this;\r\n    }\r\n    SinceSink.prototype.event = function (t, x) {\r\n        if (this.min.allow) {\r\n            this.sink.event(t, x);\r\n        }\r\n    };\r\n    return SinceSink;\r\n}(Pipe));\r\nvar LowerBoundSink = /** @class */ (function (_super) {\r\n    __extends(LowerBoundSink, _super);\r\n    function LowerBoundSink(signal, sink, scheduler) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.allow = false;\r\n        _this.disposable = signal.run(_this, scheduler);\r\n        return _this;\r\n    }\r\n    LowerBoundSink.prototype.event = function () {\r\n        this.allow = true;\r\n        this.dispose();\r\n    };\r\n    LowerBoundSink.prototype.end = function () { };\r\n    LowerBoundSink.prototype.dispose = function () {\r\n        this.disposable.dispose();\r\n    };\r\n    return LowerBoundSink;\r\n}(Pipe));\r\nvar UntilSink = /** @class */ (function (_super) {\r\n    __extends(UntilSink, _super);\r\n    function UntilSink(sink, disposable) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.disposable = disposable;\r\n        return _this;\r\n    }\r\n    UntilSink.prototype.event = function (t) {\r\n        this.disposable.dispose();\r\n        this.sink.end(t);\r\n    };\r\n    UntilSink.prototype.end = function () { };\r\n    return UntilSink;\r\n}(Pipe));\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\n/**\r\n * @param delayTime milliseconds to delay each item\r\n * @param stream\r\n * @returns new stream containing the same items, but delayed by ms\r\n */\r\nvar delay = function (delayTime, stream) {\r\n    return delayTime <= 0 ? stream : new Delay(delayTime, stream);\r\n};\r\nvar Delay = /** @class */ (function () {\r\n    function Delay(dt, source) {\r\n        this.dt = dt;\r\n        this.source = source;\r\n    }\r\n    Delay.prototype.run = function (sink, scheduler) {\r\n        var delaySink = new DelaySink(this.dt, sink, scheduler);\r\n        return disposeBoth(delaySink, this.source.run(delaySink, scheduler));\r\n    };\r\n    return Delay;\r\n}());\r\nvar DelaySink = /** @class */ (function (_super) {\r\n    __extends(DelaySink, _super);\r\n    function DelaySink(dt, sink, scheduler) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.dt = dt;\r\n        _this.scheduler = scheduler;\r\n        _this.tasks = [];\r\n        return _this;\r\n    }\r\n    DelaySink.prototype.dispose = function () {\r\n        this.tasks.forEach(cancelTask);\r\n    };\r\n    DelaySink.prototype.event = function (_t, x) {\r\n        this.tasks.push(delay$2(this.dt, propagateEventTask(x, this.sink), this.scheduler));\r\n    };\r\n    DelaySink.prototype.end = function () {\r\n        this.tasks.push(delay$2(this.dt, propagateEndTask(this.sink), this.scheduler));\r\n    };\r\n    return DelaySink;\r\n}(Pipe));\n\n/** @license MIT License (c) copyright 2010-2017 original author or authors */\r\n/**\r\n * Limit the rate of events by suppressing events that occur too often\r\n * @param period time to suppress events\r\n * @param stream\r\n */\r\nvar throttle = function (period, stream) {\r\n    return isCanonicalEmpty(stream) ? empty()\r\n        : stream instanceof Map ? commuteMapThrottle(period, stream)\r\n            : stream instanceof Throttle ? fuseThrottle(period, stream)\r\n                : new Throttle(period, stream);\r\n};\r\nvar commuteMapThrottle = function (period, mapStream) {\r\n    return Map.create(mapStream.f, throttle(period, mapStream.source));\r\n};\r\nvar fuseThrottle = function (period, throttleStream) {\r\n    return new Throttle(Math.max(period, throttleStream.period), throttleStream.source);\r\n};\r\nvar Throttle = /** @class */ (function () {\r\n    function Throttle(period, source) {\r\n        this.period = period;\r\n        this.source = source;\r\n    }\r\n    Throttle.prototype.run = function (sink, scheduler) {\r\n        return this.source.run(new ThrottleSink(this.period, sink), scheduler);\r\n    };\r\n    return Throttle;\r\n}());\r\nvar ThrottleSink = /** @class */ (function (_super) {\r\n    __extends(ThrottleSink, _super);\r\n    function ThrottleSink(period, sink) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.time = 0;\r\n        _this.period = period;\r\n        return _this;\r\n    }\r\n    ThrottleSink.prototype.event = function (t, x) {\r\n        if (t >= this.time) {\r\n            this.time = t + this.period;\r\n            this.sink.event(t, x);\r\n        }\r\n    };\r\n    return ThrottleSink;\r\n}(Pipe));\r\n/**\r\n * Wait for a burst of events to subside and emit only the last event in the burst\r\n * @param period events occuring more frequently than this will be suppressed\r\n * @param stream stream to debounce\r\n * @returns new debounced stream\r\n */\r\nvar debounce = function (period, stream) {\r\n    return isCanonicalEmpty(stream) ? empty()\r\n        : new Debounce(period, stream);\r\n};\r\nvar Debounce = /** @class */ (function () {\r\n    function Debounce(dt, source) {\r\n        this.dt = dt;\r\n        this.source = source;\r\n    }\r\n    Debounce.prototype.run = function (sink, scheduler) {\r\n        return new DebounceSink(this.dt, this.source, sink, scheduler);\r\n    };\r\n    return Debounce;\r\n}());\r\nvar DebounceSink = /** @class */ (function () {\r\n    function DebounceSink(dt, source, sink, scheduler) {\r\n        this.dt = dt;\r\n        this.sink = sink;\r\n        this.scheduler = scheduler;\r\n        this.timer = null;\r\n        this.disposable = source.run(this, scheduler);\r\n    }\r\n    DebounceSink.prototype.event = function (_t, x) {\r\n        this.clearTimer();\r\n        this.value = x;\r\n        this.timer = delay$2(this.dt, new DebounceTask(this, x), this.scheduler);\r\n    };\r\n    DebounceSink.prototype.handleEventFromTask = function (t, x) {\r\n        this.clearTimer();\r\n        this.sink.event(t, x);\r\n    };\r\n    DebounceSink.prototype.end = function (t) {\r\n        if (this.clearTimer()) {\r\n            // TODO: value should be boxed to avoid ! bang\r\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\r\n            this.sink.event(t, this.value);\r\n            this.value = undefined;\r\n        }\r\n        this.sink.end(t);\r\n    };\r\n    DebounceSink.prototype.error = function (t, x) {\r\n        this.clearTimer();\r\n        this.sink.error(t, x);\r\n    };\r\n    DebounceSink.prototype.dispose = function () {\r\n        this.clearTimer();\r\n        this.disposable.dispose();\r\n    };\r\n    DebounceSink.prototype.clearTimer = function () {\r\n        if (this.timer === null) {\r\n            return false;\r\n        }\r\n        this.timer.dispose();\r\n        this.timer = null;\r\n        return true;\r\n    };\r\n    return DebounceSink;\r\n}());\r\nvar DebounceTask = /** @class */ (function () {\r\n    function DebounceTask(sink, value) {\r\n        this.sink = sink;\r\n        this.value = value;\r\n    }\r\n    DebounceTask.prototype.run = function (t) {\r\n        this.sink.handleEventFromTask(t, this.value);\r\n    };\r\n    DebounceTask.prototype.error = function (t, e) {\r\n        this.sink.error(t, e);\r\n    };\r\n    DebounceTask.prototype.dispose = function () { };\r\n    return DebounceTask;\r\n}());\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\n/**\r\n * Turn a Stream<Promise<T>> into Stream<T> by awaiting each promise.\r\n * Event order is preserved. The stream will fail if any promise rejects.\r\n */\r\nvar awaitPromises = function (stream) {\r\n    return isCanonicalEmpty(stream) ? empty() : new Await(stream);\r\n};\r\n/**\r\n * Create a stream containing only the promise's fulfillment\r\n * value at the time it fulfills.\r\n * @param promise\r\n * @return stream containing promise's fulfillment value.\r\n *  If the promise rejects, the stream will error\r\n */\r\nvar fromPromise = function (promise) { return awaitPromises(now(promise)); };\r\nvar Await = /** @class */ (function () {\r\n    function Await(source) {\r\n        this.source = source;\r\n    }\r\n    Await.prototype.run = function (sink, scheduler) {\r\n        return this.source.run(new AwaitSink(sink, scheduler), scheduler);\r\n    };\r\n    return Await;\r\n}());\r\nvar AwaitSink = /** @class */ (function () {\r\n    function AwaitSink(sink, scheduler) {\r\n        var _this = this;\r\n        // Pre-create closures, to avoid creating them per event\r\n        this.eventBound = function (x) { return _this.sink.event(currentTime(_this.scheduler), x); };\r\n        this.endBound = function () { return _this.sink.end(currentTime(_this.scheduler)); };\r\n        this.errorBound = function (e) { return _this.sink.error(currentTime(_this.scheduler), e); };\r\n        this.sink = sink;\r\n        this.scheduler = scheduler;\r\n        this.queue = Promise.resolve();\r\n    }\r\n    AwaitSink.prototype.event = function (_t, promise) {\r\n        var _this = this;\r\n        this.queue = this.queue.then(function () { return _this.handlePromise(promise); })\r\n            .catch(this.errorBound);\r\n    };\r\n    AwaitSink.prototype.end = function () {\r\n        this.queue = this.queue.then(this.endBound)\r\n            .catch(this.errorBound);\r\n    };\r\n    AwaitSink.prototype.error = function (_t, e) {\r\n        var _this = this;\r\n        // Don't resolve error values, propagate directly\r\n        this.queue = this.queue.then(function () { return _this.errorBound(e); })\r\n            .catch(fatalError);\r\n    };\r\n    AwaitSink.prototype.handlePromise = function (promise) {\r\n        return promise.then(this.eventBound);\r\n    };\r\n    return AwaitSink;\r\n}());\n\nvar SafeSink = /** @class */ (function () {\r\n    function SafeSink(sink) {\r\n        this.sink = sink;\r\n        this.active = true;\r\n    }\r\n    SafeSink.prototype.event = function (t, x) {\r\n        if (!this.active) {\r\n            return;\r\n        }\r\n        this.sink.event(t, x);\r\n    };\r\n    SafeSink.prototype.end = function (t) {\r\n        if (!this.active) {\r\n            return;\r\n        }\r\n        this.disable();\r\n        this.sink.end(t);\r\n    };\r\n    SafeSink.prototype.error = function (t, e) {\r\n        this.disable();\r\n        this.sink.error(t, e);\r\n    };\r\n    SafeSink.prototype.disable = function () {\r\n        this.active = false;\r\n        return this.sink;\r\n    };\r\n    return SafeSink;\r\n}());\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\n/** @author Brian Cavalier */\r\n/** @author John Hann */\r\nfunction tryEvent(t, x, sink) {\r\n    try {\r\n        sink.event(t, x);\r\n    }\r\n    catch (e) {\r\n        sink.error(t, e);\r\n    }\r\n}\r\nfunction tryEnd(t, sink) {\r\n    try {\r\n        sink.end(t);\r\n    }\r\n    catch (e) {\r\n        sink.error(t, e);\r\n    }\r\n}\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\n/**\r\n * If stream encounters an error, recover and continue with items from stream\r\n * returned by f.\r\n * @param f which returns a new stream\r\n * @param stream\r\n * @returns new stream which will recover from an error by calling f\r\n */\r\nvar recoverWith = function (f, stream) {\r\n    return isCanonicalEmpty(stream) ? empty()\r\n        : new RecoverWith(f, stream);\r\n};\r\n/**\r\n * Create a stream containing only an error\r\n * @param e error value, preferably an Error or Error subtype\r\n * @returns new stream containing only an error\r\n */\r\nvar throwError = function (e) {\r\n    return new ErrorStream(e);\r\n};\r\nvar ErrorStream = /** @class */ (function () {\r\n    function ErrorStream(e) {\r\n        this.value = e;\r\n    }\r\n    ErrorStream.prototype.run = function (sink, scheduler) {\r\n        return asap(propagateErrorTask(this.value, sink), scheduler);\r\n    };\r\n    return ErrorStream;\r\n}());\r\nvar RecoverWith = /** @class */ (function () {\r\n    function RecoverWith(f, source) {\r\n        this.f = f;\r\n        this.source = source;\r\n    }\r\n    RecoverWith.prototype.run = function (sink, scheduler) {\r\n        return new RecoverWithSink(this.f, this.source, sink, scheduler);\r\n    };\r\n    return RecoverWith;\r\n}());\r\nvar RecoverWithSink = /** @class */ (function () {\r\n    function RecoverWithSink(f, source, sink, scheduler) {\r\n        this.f = f;\r\n        this.sink = new SafeSink(sink);\r\n        this.scheduler = scheduler;\r\n        this.disposable = source.run(this, scheduler);\r\n    }\r\n    RecoverWithSink.prototype.event = function (t, x) {\r\n        tryEvent(t, x, this.sink);\r\n    };\r\n    RecoverWithSink.prototype.end = function (t) {\r\n        tryEnd(t, this.sink);\r\n    };\r\n    RecoverWithSink.prototype.error = function (t, e) {\r\n        var nextSink = this.sink.disable();\r\n        tryDispose$1(t, this.disposable, this.sink);\r\n        this._startNext(t, e, nextSink);\r\n    };\r\n    RecoverWithSink.prototype._startNext = function (t, x, sink) {\r\n        try {\r\n            this.disposable = this._continue(this.f, t, x, sink);\r\n        }\r\n        catch (e) {\r\n            sink.error(t, e);\r\n        }\r\n    };\r\n    RecoverWithSink.prototype._continue = function (f, t, x, sink) {\r\n        return run(sink, this.scheduler, withLocalTime(t, f(x)));\r\n    };\r\n    RecoverWithSink.prototype.dispose = function () {\r\n        return this.disposable.dispose();\r\n    };\r\n    return RecoverWithSink;\r\n}());\n\nvar multicast = function (stream) {\r\n    return stream instanceof Multicast || isCanonicalEmpty(stream)\r\n        ? stream\r\n        : new Multicast(stream);\r\n};\r\nvar Multicast = /** @class */ (function () {\r\n    function Multicast(source) {\r\n        this.source = new MulticastSource(source);\r\n    }\r\n    Multicast.prototype.run = function (sink, scheduler) {\r\n        return this.source.run(sink, scheduler);\r\n    };\r\n    return Multicast;\r\n}());\r\nvar MulticastSource = /** @class */ (function () {\r\n    function MulticastSource(source) {\r\n        this.source = source;\r\n        this.sinks = [];\r\n        this.disposable = disposeNone();\r\n    }\r\n    MulticastSource.prototype.run = function (sink, scheduler) {\r\n        var n = this.add(sink);\r\n        if (n === 1) {\r\n            this.disposable = this.source.run(this, scheduler);\r\n        }\r\n        return disposeOnce(new MulticastDisposable(this, sink));\r\n    };\r\n    MulticastSource.prototype.dispose = function () {\r\n        var disposable = this.disposable;\r\n        this.disposable = disposeNone();\r\n        return disposable.dispose();\r\n    };\r\n    MulticastSource.prototype.add = function (sink) {\r\n        this.sinks = append(sink, this.sinks);\r\n        return this.sinks.length;\r\n    };\r\n    MulticastSource.prototype.remove = function (sink) {\r\n        var i = findIndex(sink, this.sinks);\r\n        // istanbul ignore next\r\n        if (i >= 0) {\r\n            this.sinks = remove(i, this.sinks);\r\n        }\r\n        return this.sinks.length;\r\n    };\r\n    MulticastSource.prototype.event = function (time, value) {\r\n        var s = this.sinks;\r\n        if (s.length === 1) {\r\n            return s[0].event(time, value);\r\n        }\r\n        for (var i = 0; i < s.length; ++i) {\r\n            tryEvent(time, value, s[i]);\r\n        }\r\n    };\r\n    MulticastSource.prototype.end = function (time) {\r\n        var s = this.sinks;\r\n        for (var i = 0; i < s.length; ++i) {\r\n            tryEnd(time, s[i]);\r\n        }\r\n    };\r\n    MulticastSource.prototype.error = function (time, err) {\r\n        var s = this.sinks;\r\n        for (var i = 0; i < s.length; ++i) {\r\n            s[i].error(time, err);\r\n        }\r\n    };\r\n    return MulticastSource;\r\n}());\r\nvar MulticastDisposable = /** @class */ (function () {\r\n    function MulticastDisposable(source, sink) {\r\n        this.source = source;\r\n        this.sink = sink;\r\n    }\r\n    MulticastDisposable.prototype.dispose = function () {\r\n        if (this.source.remove(this.sink) === 0) {\r\n            this.source.dispose();\r\n        }\r\n    };\r\n    return MulticastDisposable;\r\n}());\n\n/** @license MIT License (c) copyright 2016 original author or authors */\r\nvar run$1 = curry3(run);\r\nvar withLocalTime$1 = curry2(withLocalTime);\r\nvar loop$1 = curry3(loop);\r\nvar scan$1 = curry3(scan);\r\nvar startWith$1 = curry2(startWith);\r\nvar map$1 = curry2(map);\r\nvar constant$1 = curry2(constant);\r\nvar tap$1 = curry2(tap);\r\nvar ap$1 = curry2(ap);\r\nvar chain$1 = curry2(chain);\r\nvar continueWith$1 = curry2(continueWith);\r\nvar concatMap$1 = curry2(concatMap);\r\nvar mergeConcurrently$1 = curry2(mergeConcurrently);\r\nvar mergeMapConcurrently$1 = curry3(mergeMapConcurrently);\r\nvar merge$1 = curry2(merge);\r\nvar combine$1 = curry3(combine);\r\nvar combineArray$1 = curry2(combineArray);\r\nvar sample$1 = curry2(sample);\r\nvar snapshot$1 = curry3(snapshot);\r\nvar zipItems$1 = curry3(zipItems);\r\nvar withItems$1 = curry2(withItems);\r\nvar zip$1 = curry3(zip);\r\nvar zipArray$1 = curry2(zipArray);\r\nvar filter$1 = curry2(filter);\r\nvar skipRepeatsWith$1 = curry2(skipRepeatsWith);\r\nvar take$1 = curry2(take);\r\nvar skip$1 = curry2(skip);\r\nvar slice$1 = curry3(slice);\r\nvar takeWhile$1 = curry2(takeWhile);\r\nvar skipWhile$1 = curry2(skipWhile);\r\nvar skipAfter$1 = curry2(skipAfter);\r\nvar until$1 = curry2(until);\r\nvar since$1 = curry2(since);\r\nvar during$1 = curry2(during);\r\nvar delay$1 = curry2(delay);\r\nvar throttle$1 = curry2(throttle);\r\nvar debounce$1 = curry2(debounce);\r\nvar recoverWith$1 = curry2(recoverWith);\r\nvar propagateTask$1 = curry3(propagateTask);\r\nvar propagateEventTask$1 = curry2(propagateEventTask);\r\nvar propagateErrorTask$1 = curry2(propagateErrorTask);\n\nexport { MulticastSource, ap$1 as ap, at, awaitPromises, chain$1 as chain, combine$1 as combine, combineArray$1 as combineArray, concatMap$1 as concatMap, constant$1 as constant, continueWith$1 as continueWith, debounce$1 as debounce, delay$1 as delay, during$1 as during, empty, filter$1 as filter, fromPromise, join, loop$1 as loop, map$1 as map, merge$1 as merge, mergeArray, mergeConcurrently$1 as mergeConcurrently, mergeMapConcurrently$1 as mergeMapConcurrently, multicast, never, newStream, now, periodic, propagateEndTask, propagateErrorTask$1 as propagateErrorTask, propagateEventTask$1 as propagateEventTask, propagateTask$1 as propagateTask, recoverWith$1 as recoverWith, run$1 as run, runEffects, sample$1 as sample, scan$1 as scan, since$1 as since, skip$1 as skip, skipAfter$1 as skipAfter, skipRepeats, skipRepeatsWith$1 as skipRepeatsWith, skipWhile$1 as skipWhile, slice$1 as slice, snapshot$1 as snapshot, startWith$1 as startWith, switchLatest, take$1 as take, takeWhile$1 as takeWhile, tap$1 as tap, throttle$1 as throttle, throwError, until$1 as until, withItems$1 as withItems, withLocalTime$1 as withLocalTime, zip$1 as zip, zipArray$1 as zipArray, zipItems$1 as zipItems };\n//# sourceMappingURL=index.es.js.map\n","import { loop } from \"@most/core\";\nexport function applyStyleBehavior(styleBehavior, node, styleEnv) {\n    let latestClass;\n    return loop((previousCssRule, styleObject) => {\n        if (previousCssRule) {\n            if (styleObject === null) {\n                node.element.classList.remove(previousCssRule);\n                return { seed: null, value: '' };\n            }\n            else {\n                const cashedCssClas = useStyleRule(styleEnv, styleObject);\n                if (previousCssRule !== cashedCssClas) {\n                    node.element.classList.replace(latestClass, cashedCssClas);\n                    latestClass = cashedCssClas;\n                    return { seed: cashedCssClas, value: cashedCssClas };\n                }\n            }\n        }\n        if (styleObject) {\n            const cashedCssClas = useStyleRule(styleEnv, styleObject);\n            node.element.classList.add(cashedCssClas);\n            latestClass = cashedCssClas;\n            return { seed: cashedCssClas, value: cashedCssClas };\n        }\n        return { seed: previousCssRule, value: '' };\n    }, null, styleBehavior);\n}\nfunction styleObjectAsString(styleObj) {\n    return Object.entries(styleObj)\n        .map(([key, val]) => {\n        const kebabCaseKey = key.replace(/([a-z])([A-Z])/g, \"$1-$2\").toLowerCase();\n        return `${kebabCaseKey}:${val};`;\n    })\n        .join(\"\");\n}\nexport function useStyleRule(cacheService, styleDefinition) {\n    const properties = styleObjectAsString(styleDefinition);\n    const cachedRuleIdx = cacheService.cache.indexOf(properties);\n    if (cachedRuleIdx === -1) {\n        const index = cacheService.stylesheet.cssRules.length;\n        const namespace = cacheService.namespace + index;\n        cacheService.cache.push(properties);\n        cacheService.stylesheet.insertRule(`.${namespace} {${properties}}`, index);\n        return `${cacheService.namespace + index}`;\n    }\n    return `${cacheService.namespace + cachedRuleIdx}`;\n}\nexport function useStylePseudoRule(cacheService, styleDefinition, pseudo = '') {\n    const properties = styleObjectAsString(styleDefinition);\n    const index = cacheService.stylesheet.cssRules.length;\n    const rule = `.${cacheService.namespace + index + pseudo} {${properties}}`;\n    const cachedRuleIdx = cacheService.cache.indexOf(rule);\n    if (cachedRuleIdx === -1) {\n        cacheService.cache.push(rule);\n        cacheService.stylesheet.insertRule(rule, index);\n        return `${cacheService.namespace + index}`;\n    }\n    return `${cacheService.namespace + cachedRuleIdx}`;\n}\n//# sourceMappingURL=styleUtils.js.map","import { compose, id } from '@most/prelude';\nimport { empty, never, run, startWith } from '@most/core';\nimport { disposeNone } from '@most/disposable';\nexport const xForver = (x) => startWith(x, never());\nexport function MaybeOp(a, b) {\n    return b ? compose(b, a) : a;\n}\nexport function isStream(s) {\n    return s instanceof Object && 'run' in s;\n}\nexport function isFunction(s) {\n    return s instanceof Function;\n}\nconst EMPTY = empty();\nexport function isEmpty(s) {\n    return s === EMPTY;\n}\nexport class Pipe {\n    constructor(sink) {\n        this.sink = sink;\n    }\n    end(t) {\n        return this.sink.end(t);\n    }\n    error(t, e) {\n        return this.sink.error(t, e);\n    }\n}\nexport function tryRunning(stream, sink, scheduler, time = scheduler.currentTime()) {\n    try {\n        return run(sink, scheduler, stream);\n    }\n    catch (e) {\n        sink.error(time, e);\n        return disposeNone();\n    }\n}\nexport const nullSink = {\n    // tslint:disable-next-line:no-empty\n    event() { },\n    // tslint:disable-next-line:no-empty\n    end() { },\n    // tslint:disable-next-line:no-empty\n    error(_, x) {\n        // tslint:disable-next-line: no-console\n        console.error(x);\n    }\n};\nexport const nullDisposable = {\n    // tslint:disable-next-line:no-empty\n    dispose() { }\n};\n// /* tslint:enable:max-line-length */\nexport function O(...fns) {\n    // @ts-ignore\n    return fns.length ? fns.reduceRight(compose) : id;\n}\n//# sourceMappingURL=utils.js.map","import { newDefaultScheduler } from '@most/scheduler';\nimport { loop, map, mergeArray, tap } from '@most/core';\nimport { disposeAll, disposeNone, disposeWith } from '@most/disposable';\nimport { useStylePseudoRule, useStyleRule } from './utils/styleUtils';\nimport { nullSink } from './utils';\nfunction appendToSlot(parent, child, insertAt) {\n    if (insertAt === 0)\n        return parent.prepend(child);\n    parent.insertBefore(child, parent.children[insertAt]);\n}\nexport function runBrowser(config = {}) {\n    const composedConfig = {\n        style: {\n            namespace: '•',\n            stylesheet: new CSSStyleSheet(),\n            cache: []\n        },\n        rootNode: document.body,\n        scheduler: newDefaultScheduler(),\n        ...config\n    };\n    document.adoptedStyleSheets = [...document.adoptedStyleSheets, composedConfig.style.stylesheet];\n    return ($root) => {\n        const s = new BranchEffectsSink(composedConfig, composedConfig.rootNode, 0, [0]);\n        map(node => ({ ...node, segmentPosition: 0 }), $root)\n            .run(s, composedConfig.scheduler);\n    };\n}\nclass BranchEffectsSink {\n    constructor(env, parentElement, segmentPosition, segmentsCount) {\n        this.env = env;\n        this.parentElement = parentElement;\n        this.segmentPosition = segmentPosition;\n        this.segmentsCount = segmentsCount;\n        this.disposables = [];\n        this.segmentsSlotsMap = [];\n    }\n    event(_, node) {\n        try {\n            node === null || node === void 0 ? void 0 : node.disposable.setDisposable(disposeWith(node => {\n                this.segmentsCount[this.segmentPosition]--;\n                node.element.remove();\n                const slot = this.segmentsSlotsMap[this.segmentPosition];\n                const disposableBranch = slot.get(node);\n                slot.delete(node);\n                disposableBranch === null || disposableBranch === void 0 ? void 0 : disposableBranch.dispose();\n            }, node));\n        }\n        catch (e) {\n            console.error(node.element);\n            throw new Error(`Cannot append node that have already been rendered, check invalid node operations under ^`);\n        }\n        this.segmentsCount[this.segmentPosition]++;\n        let slot = 0;\n        for (let s = 0; s < this.segmentPosition; s++) {\n            slot += this.segmentsCount[s];\n        }\n        appendToSlot(this.parentElement, node.element, slot);\n        if ('style' in node && node.style && Object.keys(node.style).length) {\n            const selector = useStyleRule(this.env.style, node.style);\n            node.element.classList.add(selector);\n        }\n        if ('stylePseudo' in node) {\n            node.stylePseudo.forEach(styleDeclaration => {\n                const selector = useStylePseudoRule(this.env.style, styleDeclaration.style, styleDeclaration.class);\n                node.element.classList.add(selector);\n            });\n        }\n        if ('attributes' in node && node.attributes) {\n            if (Object.keys(node.attributes).length !== 0) {\n                applyAttrFn(node.attributes, node.element);\n            }\n        }\n        if ('styleBehavior' in node && node.styleBehavior) {\n            const disposeStyle = mergeArray(node.styleBehavior.map(sb => styleBehavior(sb, node, this.env.style))).run(nullSink, this.env.scheduler);\n            this.disposables.push(disposeStyle);\n        }\n        if ('attributesBehavior' in node && node.attributesBehavior) {\n            const disposeStyle = mergeArray(node.attributesBehavior.map(attrs => {\n                return tap((attr) => {\n                    applyAttrFn(attr, node.element);\n                }, attrs);\n            })).run(nullSink, this.env.scheduler);\n            this.disposables.push(disposeStyle);\n        }\n        const newDisp = '$segments' in node\n            ? new BranchChildrenSinkList(node.$segments, this.env, node)\n            : disposeNone();\n        if (!this.segmentsSlotsMap[this.segmentPosition]) {\n            this.segmentsSlotsMap[this.segmentPosition] = new Map();\n        }\n        this.segmentsSlotsMap[this.segmentPosition].set(node, disposeAll([...this.disposables, newDisp]));\n    }\n    end(_t) {\n        this.segmentsSlotsMap.forEach(s => {\n            s.forEach(d => d.dispose());\n        });\n    }\n    error(t, err) {\n        console.error(err);\n    }\n}\nclass BranchChildrenSinkList {\n    constructor($segments, env, node) {\n        this.env = env;\n        this.node = node;\n        this.disposables = new Map();\n        const l = $segments.length;\n        const segmentsCount = new Array(l).fill(0);\n        for (let i = 0; i < l; ++i) {\n            const $child = $segments[i];\n            const sink = new BranchEffectsSink(this.env, node.element, i, segmentsCount);\n            this.disposables.set($child, $child.run(sink, this.env.scheduler));\n        }\n    }\n    dispose() {\n        this.disposables.forEach(d => d.dispose());\n    }\n}\nfunction styleBehavior(styleBehavior, node, cacheService) {\n    let latestClass;\n    return loop((previousCssRule, styleObject) => {\n        if (previousCssRule) {\n            if (styleObject === null) {\n                node.element.classList.remove(previousCssRule);\n                return { seed: null, value: '' };\n            }\n            else {\n                const cashedCssClas = useStyleRule(cacheService, styleObject);\n                if (previousCssRule !== cashedCssClas) {\n                    node.element.classList.replace(latestClass, cashedCssClas);\n                    latestClass = cashedCssClas;\n                    return { seed: cashedCssClas, value: cashedCssClas };\n                }\n            }\n        }\n        if (styleObject) {\n            const cashedCssClas = useStyleRule(cacheService, styleObject);\n            node.element.classList.add(cashedCssClas);\n            latestClass = cashedCssClas;\n            return { seed: cashedCssClas, value: cashedCssClas };\n        }\n        return { seed: previousCssRule, value: '' };\n    }, null, styleBehavior);\n}\nexport function applyAttrFn(attrs, node) {\n    if (attrs) {\n        Object.entries(attrs).forEach(([attrKey, value]) => {\n            if (value === undefined || value === null) {\n                node.removeAttribute(attrKey);\n            }\n            else {\n                node.setAttribute(attrKey, String(value));\n            }\n        });\n    }\n    return node;\n}\n//# sourceMappingURL=run.js.map","import { join, map } from '@most/core';\nimport { curry2 } from '@most/prelude';\nexport function eventElementTarget(eventType, element, options = false) {\n    return {\n        run(sink, scheduler) {\n            const cb = (e) => sink.event(scheduler.currentTime(), e);\n            const removeListener = () => element.removeEventListener(eventType, cb, options);\n            element.addEventListener(eventType, cb, options);\n            return {\n                dispose() {\n                    removeListener();\n                }\n            };\n        }\n    };\n}\nexport const event = curry2((eventType, node) => {\n    return join(map(ns => eventElementTarget(eventType, ns.element, { capture: true }), node));\n});\n//# sourceMappingURL=event.js.map","import { disposeWith } from '@most/disposable';\nimport { remove } from '@most/prelude';\nimport { Pipe } from '../utils';\nclass SourceSink {\n    constructor(parent, sink) {\n        this.parent = parent;\n        this.sink = sink;\n        this.hasValue = false;\n    }\n    event(t, x) {\n        this.value = x;\n        this.hasValue = true;\n        this.sink.event(t, x);\n        this.parent.tetherSink.forEach(s => s.event(t, x));\n    }\n    end(t) {\n        this.sink.end(t);\n    }\n    error(t, e) {\n        this.sink.error(t, e);\n    }\n}\nclass TetherSink extends Pipe {\n    constructor(sink) {\n        super(sink);\n    }\n    event(t, x) {\n        this.sink.event(t, x);\n    }\n}\nexport class Tether {\n    constructor(source) {\n        this.source = source;\n        this.sourceSink = null;\n        this.tetherSink = [];\n    }\n    run(sink, scheduler) {\n        var _a;\n        if (sink instanceof SourceSink) {\n            if (this.sourceSink) {\n                throw new Error('Cannot split multiple sources');\n            }\n            this.sourceSink = sink;\n            const sourceDisposable = this.source.run(sink, scheduler);\n            return {\n                dispose: () => {\n                    sourceDisposable.dispose();\n                    this.tetherSink = [];\n                    this.sourceSink = null;\n                }\n            };\n        }\n        if (sink instanceof TetherSink) {\n            this.tetherSink.push(sink);\n            if ((_a = this.sourceSink) === null || _a === void 0 ? void 0 : _a.hasValue) {\n                sink.event(scheduler.currentTime(), this.sourceSink.value);\n            }\n            return disposeWith(s => {\n                const sinkIdx = this.tetherSink.indexOf(s);\n                if (sinkIdx > -1) {\n                    this.tetherSink[sinkIdx].end(scheduler.currentTime());\n                    remove(sinkIdx, this.tetherSink);\n                }\n            }, sink);\n        }\n        throw new Error(`Sink is not an instance of ${SourceSink.name} or ${TetherSink.name}`);\n    }\n}\nexport const tether = (source) => {\n    const split = new Tether(source);\n    return [\n        {\n            run(sink, scheduler) {\n                return split.run(new SourceSink(split, sink), scheduler);\n            }\n        },\n        {\n            run(sink, scheduler) {\n                return split.run(new TetherSink(sink), scheduler);\n            }\n        }\n    ];\n};\n//# sourceMappingURL=tether.js.map","import { disposeWith } from '@most/disposable';\nimport { O } from '../utils';\nimport { tether } from '../combinators/tether';\nimport { multicast } from '@most/core';\nexport class BehaviorSource {\n    constructor() {\n        this.queuedSamplers = [];\n        this.sinks = new Map();\n        this.sample = (...ops) => {\n            return (sb) => {\n                const [source, tetherSource] = tether(sb);\n                // @ts-ignore\n                const bops = ops.length ? O(...ops)(tetherSource) : tetherSource;\n                this.queuedSamplers.push(multicast(bops));\n                this.sinks.forEach((sourcesMap, sink) => {\n                    sourcesMap.set(bops, this.runBehavior(sink, bops));\n                });\n                return source;\n            };\n        };\n    }\n    // TODO: check case where early samplers will not receive events of future behaviors\n    run(sink, scheduler) {\n        this.scheduler = scheduler;\n        const sourcesMap = new Map();\n        this.sinks.set(sink, sourcesMap);\n        this.queuedSamplers.forEach(s => {\n            sourcesMap.set(s, this.runBehavior(sink, s));\n        });\n        return disposeWith((s) => {\n            sink.end(scheduler.currentTime());\n            this.disposeSampler(s);\n        }, sink);\n    }\n    disposeSampler(sink) {\n        var _a;\n        (_a = this.sinks.get(sink)) === null || _a === void 0 ? void 0 : _a.forEach(x => x === null || x === void 0 ? void 0 : x.dispose());\n        this.sinks.delete(sink);\n    }\n    runBehavior(sink, x) {\n        return x.run(sink, this.scheduler);\n    }\n}\nexport function behavior() {\n    const ss = new BehaviorSource();\n    return [ss.sample, ss];\n}\n//# sourceMappingURL=behavior.js.map","import { behavior } from '../source/behavior';\nimport { disposeAll, disposeWith } from '@most/disposable';\nimport { curry2 } from '@most/prelude';\nimport { nullSink } from '../utils';\nexport function componentFn(inputComp, projectBehaviors) {\n    return {\n        run(sink, scheduler) {\n            // fill stubbed aguments as a behavior\n            const behaviors = Array(inputComp.length).fill(null).map(behavior);\n            const [view, outputBehaviors] = inputComp(...behaviors);\n            const outputDisposables = [];\n            if (projectBehaviors) {\n                for (const k in projectBehaviors) {\n                    if (projectBehaviors[k] && outputBehaviors) {\n                        const consumerSampler = projectBehaviors[k];\n                        if (consumerSampler) {\n                            const componentOutputBehavior = outputBehaviors[k];\n                            const outputDisposable = consumerSampler(componentOutputBehavior).run(nullSink, scheduler);\n                            outputDisposables.push(outputDisposable);\n                        }\n                    }\n                }\n            }\n            return disposeAll([\n                disposeWith(() => {\n                    sink.end(scheduler.currentTime());\n                }, null),\n                view.run(sink, scheduler),\n                ...outputDisposables,\n            ]);\n        }\n    };\n}\nexport const component = curry2(componentFn);\n//# sourceMappingURL=component.js.map","import { disposeNone } from '@most/disposable';\nexport default class SettableDisposable {\n    constructor(initialDiposable = disposeNone()) {\n        this.initialDiposable = initialDiposable;\n        this.disposed = false;\n    }\n    setDisposable(disposable) {\n        if (this.disposable !== undefined) {\n            throw new Error('setDisposable called more than once');\n        }\n        this.disposable = disposable;\n        if (this.disposed) {\n            disposable.dispose();\n        }\n    }\n    dispose() {\n        if (this.disposed) {\n            return;\n        }\n        this.disposed = true;\n        if (this.disposable !== undefined) {\n            this.initialDiposable.dispose();\n            this.disposable.dispose();\n        }\n    }\n}\n//# sourceMappingURL=SettableDisposable.js.map","import { map, never, now, switchLatest } from '@most/core';\nimport { id } from '@most/prelude';\nimport { isFunction, O } from '../utils';\nimport SettableDisposable from '../utils/SettableDisposable';\nexport const $svg = branch((a) => document.createElementNS('http://www.w3.org/2000/svg', a));\nexport const $element = branch((a) => document.createElement(a));\nexport const $custom = branch((a) => document.createElement(a));\nexport const $node = $custom('node');\nexport const $wrapNativeElement = branch((rootNode) => rootNode);\n// childless nodes\nexport const $text = $textFn(id);\nexport class NodeSource {\n    constructor(sourceValue, sourceOp, $segments) {\n        this.sourceValue = sourceValue;\n        this.sourceOp = sourceOp;\n        this.$segments = $segments;\n    }\n    run(sink, scheduler) {\n        const element = this.sourceOp(this.sourceValue);\n        const $segments = this.$segments;\n        const disposable = new SettableDisposable();\n        sink.event(scheduler.currentTime(), {\n            $segments, element, disposable,\n            styleBehavior: [],\n            attributesBehavior: [],\n            stylePseudo: []\n        });\n        return disposable;\n    }\n}\nfunction node(text) {\n    return {\n        run(sink, scheduler) {\n            const element = document.createTextNode(text);\n            const disposable = new SettableDisposable();\n            sink.event(scheduler.currentTime(), { element, disposable });\n            return disposable;\n        }\n    };\n}\nexport function branch(sourceOp, postOp = id) {\n    return (sourceOpValue) => {\n        return function nodeComposeFn(...input) {\n            if (input.some(isFunction))\n                // @ts-ignore\n                return branch(sourceOp, O(postOp, ...input))(sourceOpValue);\n            const $segments = input.length ? input : [never()];\n            const $branch = new NodeSource(sourceOpValue, sourceOp, $segments);\n            return postOp($branch);\n        };\n    };\n}\nfunction $textFn(postOp = O(x => x)) {\n    return function textComp(...input) {\n        if (input.some(isFunction))\n            // @ts-ignore\n            return $textFn(O(postOp, ...input));\n        const children = input.map((x) => {\n            const strStream = typeof x === 'string' ? now(x) : x;\n            return switchLatest(map(node, strStream));\n        });\n        return branch(() => document.createElement('text'), postOp)(null)(...children);\n    };\n}\n//# sourceMappingURL=node.js.map","import { filter, map, tap } from '@most/core';\nimport { curry2, curry3 } from '@most/prelude';\nfunction styleFn(styleInput, source) {\n    return map(node => ({ ...node, style: { ...node.style, ...styleInput } }), source);\n}\nfunction stylePseudoFn(pseudoClass, styleInput, source) {\n    return map(node => ({\n        ...node,\n        stylePseudo: [\n            ...node.stylePseudo,\n            {\n                class: pseudoClass,\n                style: styleInput\n            }\n        ]\n    }), source);\n}\nfunction styleBehaviorFn(style, $node) {\n    return map(node => ({ ...node, styleBehavior: [...node.styleBehavior, style] }), $node);\n}\nexport const styleInline = (style) => ($node) => {\n    return map(node => {\n        const applyInlineStyleStream = tap((styleObj) => {\n            for (const prop in styleObj) {\n                if (Object.prototype.hasOwnProperty.call(styleObj, prop)) {\n                    // @ts-ignore\n                    const val = styleObj[prop];\n                    // @ts-ignore\n                    node.element.style[prop] = val;\n                }\n            }\n        }, style);\n        return { ...node, styleBehavior: [...node.styleBehavior, filter(() => false, applyInlineStyleStream)] };\n    }, $node);\n};\n// applyStyle\nexport const style = curry2(styleFn);\nexport const stylePseudo = curry3(stylePseudoFn);\nexport const styleBehavior = curry2(styleBehaviorFn);\n//# sourceMappingURL=style.js.map","import { constant, filter, join, map, skipRepeatsWith, switchLatest, tap, until } from '@most/core';\nimport { O } from '@aelea/core';\nexport const create = ({ fragment = '', fragmentsChange, title }) => {\n    const ignoreRepeatPathChanges = skipRepeatsWith((next, prev) => {\n        return next.length === prev.length && next.every((f, i) => f === prev[i]);\n    }, fragmentsChange);\n    return resolveRoute(ignoreRepeatPathChanges, [])({ fragment, title });\n};\nfunction resolveRoute(pathChange, parentFragments) {\n    return ({ fragment, title }) => {\n        const fragments = [...parentFragments, fragment];\n        const fragIdx = parentFragments.length;\n        const diff = O(skipRepeatsWith((prev, next) => {\n            return next[fragIdx] === prev[fragIdx];\n        }));\n        const contains = O(diff, filter(next => {\n            return isMatched(fragment, next[fragIdx]);\n        }));\n        const match = O(map((evt) => {\n            const lastTarget = evt.slice(-1)[0];\n            return isMatched(fragment, lastTarget);\n        }), tap(isMatched => {\n            if (isMatched) {\n                document.title = title || '';\n            }\n        }));\n        const miss = O(diff, filter(next => !isMatched(fragment, next[fragIdx])));\n        return {\n            create: resolveRoute(pathChange, fragments),\n            contains: contains(pathChange),\n            match: match(pathChange),\n            miss: miss(pathChange),\n            fragments\n        };\n    };\n}\nexport function isMatched(frag, path) {\n    if (frag instanceof RegExp) {\n        return Boolean(path === null || path === void 0 ? void 0 : path.match(frag));\n    }\n    return frag === path;\n}\nexport const contains = (route) => (ns) => {\n    return switchLatest(constant(until(route.miss, ns), route.contains));\n};\nexport const match = (route) => (ns) => {\n    const exactMatch = filter(isMatch => isMatch, route.match);\n    const unmatch = filter(isMatch => !isMatch, route.match);\n    return join(constant(until(unmatch, ns), exactMatch));\n};\n//# sourceMappingURL=resolveUrl.js.map","import { map } from '@most/core';\nimport { curry2 } from '@most/prelude';\nexport const attr = curry2((attrs, source) => map(ns => ({ ...ns, attributes: { ...ns.attributes, ...attrs } }), source));\nexport const attrBehavior = curry2((attrs, source) => map(ns => ({ ...ns, attributesBehavior: [...ns.attributesBehavior, attrs] }), source));\n//# sourceMappingURL=attribute.js.map","import { component, attr, event, style, $element } from \"@aelea/core\";\nimport { constant, map, merge, startWith } from \"@most/core\";\nconst $anchor = $element('a')(style({ textDecoration: 'none', }));\nexport const $Anchor = ({ url, route, $content }) => component(([sampleClick, click], [sampleFocus, focus]) => {\n    const trailingSlash = /\\/$/;\n    const href = url.replace(trailingSlash, '');\n    const contains = merge(constant(true, route.contains), constant(false, route.miss));\n    return [\n        $anchor(attr({ href }), sampleClick(event('click'), map((clickEv) => {\n            clickEv.preventDefault();\n            const pathName = clickEv.currentTarget instanceof HTMLAnchorElement ? clickEv.currentTarget.pathname : null;\n            if (pathName) {\n                // avoid repeated adjacent states\n                if (location.pathname !== pathName) {\n                    history.pushState(null, '', pathName);\n                }\n                return pathName;\n            }\n            else {\n                throw new Error('target anchor contains no href');\n            }\n        })), sampleFocus($anchor => {\n            const focus = constant(true, merge(event('focus', $anchor), event('pointerenter', $anchor)));\n            const blur = constant(false, merge(event('blur', $anchor), event('pointerleave', $anchor)));\n            return startWith(false, merge(focus, blur));\n        }))($content),\n        { click, match: route.match, contains, focus }\n    ];\n});\n//# sourceMappingURL=$Anchor.js.map","export const THEME_PALLETE_SELECTED_KEY = `!!THEME_PALLETE_SELECTED_KEY`;\nexport function changeTheme(name, pallete) {\n    const newTheme = { name, pallete };\n    localStorage.setItem(THEME_PALLETE_SELECTED_KEY, JSON.stringify(newTheme));\n    Object.assign(theme, newTheme);\n    self.location.reload();\n}\nexport const selected = JSON.parse(localStorage.getItem(THEME_PALLETE_SELECTED_KEY));\nif (selected === null) {\n    console.error('No theme as been assigned to localstorage');\n}\nexport const theme = selected;\nexport const pallete = theme.pallete;\n//# sourceMappingURL=staticThemeService.js.map","import { O, style } from \"@aelea/core\";\nconst stretch = style({\n    position: 'absolute',\n    top: '0',\n    bottom: '0',\n    right: '0',\n    left: '0'\n});\nconst spacingTiny = style({\n    gap: '4px'\n});\nconst spacingSmall = style({\n    gap: '8px'\n});\nconst spacing = style({\n    gap: '16px'\n});\nconst spacingBig = style({\n    gap: '26px'\n});\nconst flex = style({ flex: 1 });\nconst displayFlex = style({ display: 'flex' });\nconst row = O(displayFlex, style({ flexDirection: 'row' }));\nconst column = O(displayFlex, style({ flexDirection: 'column' }));\nconst rowFlex = O(row, flex);\nconst columnFlex = O(column, flex);\nexport default {\n    stretch, spacingTiny, spacingSmall, spacing, spacingBig, flex, displayFlex, row, column, rowFlex, columnFlex\n};\n//# sourceMappingURL=layoutSheet.js.map","import { $custom, $node, style } from '@aelea/core';\nimport { pallete } from '@aelea/ui-components-theme';\nimport layoutSheet from './style/layoutSheet';\nexport const $row = $custom('row')(layoutSheet.row);\nexport const $column = $custom('column')(layoutSheet.column);\nexport const $card = $column(style({\n    padding: '16px',\n    backgroundColor: pallete.middleground,\n    boxShadow: '10px 10px 0px -6px rgba(0, 0, 0, .25)',\n}));\nexport const $mainCard = $card(layoutSheet.spacingBig, style({ width: '400px', margin: '0 auto' }));\nexport const $seperator = $node(style({\n    minHeight: '1px',\n    minWidth: '1px',\n    background: pallete.description\n}))();\n//# sourceMappingURL=$elements.js.map","import { $svg, attr } from \"@aelea/core\";\nimport { pallete } from \"@aelea/ui-components-theme\";\nexport const $icon = ({ $content, width = 24, height = width, viewBox = `0 0 ${width} ${height}`, fill = pallete.description }) => ($svg('svg')(attr({ viewBox, width, height, fill }))($content));\n//# sourceMappingURL=$icon.js.map","import { $svg, attr } from \"@aelea/core\"\n\n\n\nexport const $trash = $svg('path')(\n  attr({\n    d: 'M6.24 18.84A2.16 2.16 0 008.4 21h7.2a2.16 2.16 0 002.16-2.16L19.2 7.32H4.8l1.44 11.52zm7.92-9.36h1.44v9.36h-1.44V9.48zm-2.88 0h1.44v9.36h-1.44V9.48zm-2.88 0h1.44v9.36H8.4V9.48zm10.44-5.04h-4.68S13.838 3 13.44 3h-2.88c-.398 0-.72 1.44-.72 1.44H5.16a1.08 1.08 0 00-1.08 1.08V6.6h15.84V5.52a1.08 1.08 0 00-1.08-1.08z'\n  })\n)()\n\nexport const $aeleaLogo = $svg('path')(\n  attr({\n    d: 'M17.648 58.063l-.046 1.64c0 1.219.343 1.992 1.03 2.32.266.125.571.188.915.188.547 0 1.11-.125 1.687-.375-.593.25-1.109.578-1.547.984-.437.407-.882.805-1.335 1.196-1.125.937-2.258 1.406-3.399 1.406-1.14 0-1.75-.656-1.828-1.969a11.402 11.402 0 01-.047-1.031c-2.812 1.953-5.39 2.93-7.734 2.93-1.985 0-3.36-.602-4.125-1.805-.282-.438-.422-1.04-.422-1.805 0-.765.234-1.531.703-2.297a9.178 9.178 0 011.781-2.133c1.281-1.187 2.828-2.164 4.64-2.93 1.345-.577 3.071-.905 5.18-.984v-1.03c0-2.485-.226-4.165-.68-5.04-.452-.875-1.038-1.516-1.757-1.922-.719-.422-1.562-.633-2.531-.633-1.64 0-3.086.32-4.336.961 1.719-1.422 2.976-2.359 3.773-2.812 1.64-.922 3.125-1.383 4.453-1.383 1.344 0 2.352.195 3.024.586a4.45 4.45 0 011.594 1.547c.672 1.125 1.007 2.742 1.007 4.851v9.54zM6.633 61.437c.375.266.812.461 1.312.586.5.125 1.242.188 2.227.188.984 0 1.96-.234 2.93-.703v-4.922H9.305c-1.36 0-2.547.094-3.563.281a6.641 6.641 0 00-.304 1.922c0 .61.101 1.133.304 1.57.219.438.516.797.89 1.078zM128.352 58.063l.046 1.64c0 1.219-.343 1.992-1.031 2.32a2.12 2.12 0 01-.914.188c-.547 0-1.109-.125-1.687-.375.593.25 1.109.578 1.546.984.438.407.883.805 1.336 1.196 1.125.937 2.258 1.406 3.399 1.406s1.75-.656 1.828-1.969c.031-.344.047-.687.047-1.031 2.812 1.953 5.39 2.93 7.734 2.93 1.985 0 3.36-.602 4.125-1.805.281-.438.422-1.04.422-1.805 0-.765-.234-1.531-.703-2.297a9.177 9.177 0 00-1.781-2.133c-1.281-1.187-2.828-2.164-4.641-2.93-1.344-.577-3.07-.905-5.18-.984v-1.03c0-2.485.227-4.165.68-5.04.453-.875 1.039-1.516 1.758-1.922.719-.422 1.562-.633 2.531-.633 1.641 0 3.086.32 4.336.961-1.719-1.422-2.976-2.359-3.773-2.812-1.641-.922-3.125-1.383-4.453-1.383-1.344 0-2.352.195-3.024.586a4.453 4.453 0 00-1.594 1.547c-.671 1.125-1.007 2.742-1.007 4.851v9.54zm11.015 3.374c-.375.266-.812.461-1.312.586-.5.125-1.243.188-2.227.188-.984 0-1.961-.234-2.93-.703v-4.922h3.797c1.36 0 2.547.094 3.563.281.203.672.304 1.313.304 1.922 0 .61-.101 1.133-.304 1.57a3.008 3.008 0 01-.891 1.078zM55.063 59.219c-2.855 3.187-6.396 5.177-10.626 5.968-.979.167-2.187.25-3.624.25-1.438 0-2.792-.395-4.063-1.187a10.166 10.166 0 01-3.125-3.125c-1.542-2.458-2.313-5.458-2.313-9 0-2.333.896-4.917 2.688-7.75 1.75-2.792 3.885-5.125 6.406-7 2.709-2 5.271-3 7.688-3 1.25 0 2.302.458 3.156 1.375.792.896 1.188 1.917 1.188 3.063 0 1.145-.25 2.208-.75 3.187-.5.958-1.157 1.896-1.97 2.813a22.319 22.319 0 01-2.75 2.656 42.65 42.65 0 01-3.156 2.343c-1.52 1.042-3.437 2.22-5.75 3.532.667 2.52 1.844 4.468 3.532 5.843 1.687 1.355 3.864 2.032 6.531 2.032 2.25 0 4.563-.667 6.938-2zm-9.438-12.532c.563-.895.844-1.77.844-2.624 0-.855-.094-1.573-.282-2.157a5.005 5.005 0 00-.812-1.593c-.813-1.042-1.865-1.563-3.156-1.563-3.167 0-4.75 3.23-4.75 9.688 0 1.145.093 2.28.281 3.406 3.667-1.021 6.292-2.74 7.875-5.157zM90.938 59.219c2.854 3.187 6.395 5.177 10.624 5.968.98.167 2.188.25 3.626.25 1.437 0 2.791-.395 4.062-1.187a10.17 10.17 0 003.125-3.125c1.542-2.458 2.313-5.458 2.313-9 0-2.333-.896-4.917-2.688-7.75-1.75-2.792-3.885-5.125-6.406-7-2.709-2-5.271-3-7.688-3-1.25 0-2.302.458-3.156 1.375-.792.896-1.188 1.917-1.188 3.063 0 1.145.25 2.208.75 3.187.5.958 1.157 1.896 1.97 2.813a22.32 22.32 0 002.75 2.656 42.517 42.517 0 003.156 2.343c1.52 1.042 3.437 2.22 5.75 3.532-.667 2.52-1.844 4.468-3.532 5.843-1.687 1.355-3.864 2.032-6.531 2.032-2.25 0-4.563-.667-6.938-2zm9.437-12.532c-.563-.895-.844-1.77-.844-2.624 0-.855.094-1.573.281-2.157a5.01 5.01 0 01.813-1.593c.813-1.042 1.865-1.563 3.156-1.563 3.167 0 4.75 3.23 4.75 9.688a20.63 20.63 0 01-.281 3.406c-3.667-1.021-6.292-2.74-7.875-5.157zM81.375 65.125a54.597 54.597 0 00-1.969 1.625 15.52 15.52 0 01-1.937 1.438c-1.48.958-3.01 1.437-4.594 1.437-2.292 0-3.542-1.583-3.75-4.75a51.288 51.288 0 01-.063-2.5V28.937c0-2.854-.645-4.708-1.937-5.562-.542-.375-1.063-.563-1.563-.563-.666 0-1.114.021-1.343.063-.23.02-.427.042-.594.063 3-2.084 4.896-3.334 5.688-3.75a92.84 92.84 0 013.218-1.657c1.125-.562 1.99-1 2.594-1.312v45.5c.02.729.146 1.364.375 1.906.52 1.125 1.833 1.688 3.938 1.688.666 0 1.312-.063 1.937-.188z'\n  })\n)()\n\nexport const $github = $svg('path')(\n  attr({\n    d: 'M512 0C229.12 0 0 229.12 0 512c0 226.56 146.56 417.92 350.08 485.76 25.6 4.48 35.2-10.88 35.2-24.32 0-12.16-.64-52.48-.64-95.36-128.64 23.68-161.92-31.36-172.16-60.16-5.76-14.72-30.72-60.16-52.48-72.32-17.92-9.6-43.52-33.28-.64-33.92 40.32-.64 69.12 37.12 78.72 52.48 46.08 77.44 119.68 55.68 149.12 42.24 4.48-33.28 17.92-55.68 32.64-68.48-113.92-12.8-232.96-56.96-232.96-252.8 0-55.68 19.84-101.76 52.48-137.6-5.12-12.8-23.04-65.28 5.12-135.68 0 0 42.88-13.44 140.8 52.48 40.96-11.52 84.48-17.28 128-17.28 43.52 0 87.04 5.76 128 17.28 97.92-66.56 140.8-52.48 140.8-52.48 28.16 70.4 10.24 122.88 5.12 135.68 32.64 35.84 52.48 81.28 52.48 137.6 0 196.48-119.68 240-233.6 252.8 18.56 16 34.56 46.72 34.56 94.72 0 68.48-.64 123.52-.64 140.8 0 13.44 9.6 29.44 35.2 24.32C877.44 929.92 1024 737.92 1024 512 1024 229.12 794.88 0 512 0z'\n  })\n)()\n\n\n","import { currentTime, } from '@most/scheduler';\nimport { skipAfter, map, continueWith, constant, switchLatest, loop, startWith } from '@most/core';\nimport { O } from '../utils';\nimport { disposeWith } from '@most/disposable';\nimport { compose, curry3 } from '@most/prelude';\n// copied & modified from https://github.com/mostjs/x-animation-frame/tree/master\nclass AnimationFrameSource {\n    constructor(afp) {\n        this.afp = afp;\n    }\n    run(sink, scheduler) {\n        const requestTime = currentTime(scheduler);\n        const propagate = () => eventThenEnd(requestTime, currentTime(scheduler), sink);\n        const rafId = this.afp.requestAnimationFrame(propagate);\n        return disposeWith(fid => this.afp.cancelAnimationFrame(fid), rafId);\n    }\n}\nconst eventThenEnd = (requestTime, responseTime, sink) => {\n    sink.event(requestTime, { requestTime, responseTime });\n    sink.end(requestTime);\n};\nexport const nextAnimationFrame = (afp = window) => new AnimationFrameSource(afp);\nexport const animationFrames = (afp = window) => continueWith(() => animationFrames(afp), nextAnimationFrame(afp));\nexport const drawLatest = compose(\n// @ts-ignore\nswitchLatest, map(x => constant(x, nextAnimationFrame(window))));\nexport const MOTION_NO_WOBBLE = { stiffness: 170, damping: 26, precision: .01 };\nexport const MOTION_GENTLE = { stiffness: 120, damping: 14, precision: .01 };\nexport const MOTION_WOBBLY = { stiffness: 180, damping: 12, precision: .01 };\nexport const MOTION_STIFF = { stiffness: 210, damping: 20, precision: .01 };\n/**\n * adapting to motion changes using \"spring physics\"\n *\n * @param initialPositon - animation starting position to animate from\n * @param motionEnvironment - config spring metrics.\n *\n *  noWobble =  stiffness 170 damping 26\n *\n *  gentle =    stiffness 120 damping 14\n *\n *  wobbly =    stiffness 180 damping 12\n *\n *  stiff =     stiffness 210 damping 20\n *\n *  @see  modified-from https://github.com/chenglou/react-motion/blob/master/src/stepper.js\n */\nexport const motion = curry3((motionEnvironment, initialState, change) => {\n    const motionEnv = { ...MOTION_STIFF, ...motionEnvironment };\n    const ma = motionState(motionEnv, { position: initialState, velocity: 0 }, change);\n    return map(s => s.position, ma);\n});\n// used in cases where velocity feedback is needed(for renimation)\nexport const motionState = curry3((motionEnvironment, initialState, change) => {\n    const motionEnv = { ...MOTION_STIFF, ...motionEnvironment };\n    return O(loop((seed, target) => {\n        const frames = O(map(() => stepFrame(target, seed, motionEnv)), skipAfter(n => n.position === target));\n        return { seed, value: frames(animationFrames()) };\n    }, initialState), switchLatest, startWith(initialState))(change);\n});\nfunction stepFrame(target, state, motionEnv) {\n    const fps = 1 / 60;\n    const delta = target - state.position;\n    const spring = motionEnv.stiffness * delta;\n    const damper = motionEnv.damping * state.velocity;\n    const acceleration = spring - damper;\n    const newVelocity = state.velocity + (acceleration * fps);\n    const newPosition = state.position + (newVelocity * fps);\n    const settled = Math.abs(newVelocity) < motionEnv.precision && Math.abs(delta) < motionEnv.precision;\n    state.velocity = newVelocity;\n    state.position = settled ? target : newPosition;\n    return state;\n}\n//# sourceMappingURL=animate.js.map","import { $Node, motion, styleInline } from \"@aelea/core\"\nimport { combine, now } from \"@most/core\"\n\nexport function fadeIn($content: $Node) {\n  const fadeIn = motion({ stiffness: 70, damping: 26, precision: 1 }, 0, now(100))\n  const slideIn = motion({ stiffness: 270, damping: 46, precision: 1 }, 25, now(0))\n\n  const animation = styleInline(\n    combine((opacity, slide) => ({ opacity: `${opacity}%`, transform: `translate(0, ${slide}px)` }), fadeIn, slideIn)\n  )\n\n  return animation(\n    $content\n  )\n}","\nimport { $Branch, component, style } from '@aelea/core'\nimport { $column, layoutSheet } from '@aelea/ui-components'\nimport { fadeIn } from './transitions/enter'\n\n\ninterface Example {\n  file: string,\n}\n\nexport default (config: Example) => (...$content: $Branch[]) => component(() => {\n\n  return [\n    fadeIn(\n      $column(layoutSheet.spacingBig, style({ flex: 1 }))(\n        ...$content\n      )\n    )\n  ]\n})\n\n","import { component, Behavior, O, styleBehavior, StyleCSS, style } from \"@aelea/core\"\nimport { IAnchor, $Anchor } from \"@aelea/router\"\nimport { combine } from \"@most/core\"\nimport { pallete } from \"@aelea/ui-components-theme\"\n\n\n\nexport interface ILink extends IAnchor {\n  styles?: StyleCSS\n}\n\nexport const $Link = ({ url, route, $content, styles = {} }: ILink) => component((\n  [sampleClick, click]: Behavior<string, string>,\n  [sampleContains, active]: Behavior<boolean, boolean>,\n  [sampleFocus, focus]: Behavior<boolean, boolean>,\n) => {\n\n  const anchorOps = O(\n    style({\n      color: pallete.message,\n      padding: '2px 4px',\n      ...styles,\n    }),\n    styleBehavior(\n      combine((isActive, isFocus): StyleCSS | null => {\n        return isActive ? { color: pallete.primary, cursor: 'default' }\n          : isFocus ? { backgroundColor: pallete.primary }\n            : null\n      }, active, focus)\n    )\n  )\n\n  return [\n    anchorOps(\n      $Anchor({ $content, url, route })({\n        click: sampleClick(),\n        focus: sampleFocus(),\n        contains: sampleContains()\n      })\n    ),\n\n    { click, active, focus }\n  ]\n})","import { style, O, stylePseudo } from '@aelea/core';\nimport { pallete } from '@aelea/ui-components-theme';\nconst text = style({\n    fontFamily: `'Nunito', Fira Code`,\n    fontWeight: 100,\n    fontSize: '1.15rem'\n});\nconst customScroll = O(stylePseudo('::-webkit-scrollbar-thumb', {\n    backgroundColor: pallete.description\n}), stylePseudo('::-webkit-scrollbar', {\n    backgroundColor: 'transparent'\n}));\nconst control = O(text, style({\n    border: '2px solid transparent',\n    color: pallete.message,\n    outline: 'none',\n    flexShrink: 0,\n}));\nexport default {\n    customScroll,\n    text,\n    main: O(text, style({\n        height: '100vh',\n        color: pallete.message,\n        fill: pallete.message,\n        overflowY: 'scroll',\n        backgroundColor: pallete.background,\n        margin: '0',\n        scrollbarColor: 'auto',\n        scrollbarWidth: 'thin',\n        display: 'flex'\n    }), customScroll),\n    control,\n    input: O(control, style({\n        minWidth: '100px',\n        backgroundColor: 'transparent',\n        border: 'none',\n        borderBottom: `2px solid ${pallete.description}`,\n        paddingBottom: '2px',\n        flex: 1,\n    }), stylePseudo('::placeholder', {\n        color: pallete.description\n    })),\n    btn: O(control, style({\n        cursor: 'pointer',\n        backgroundColor: 'transparent',\n        border: `2px solid ${pallete.description}`,\n        color: pallete.message,\n        padding: '5px 15px',\n        display: 'flex',\n        alignItems: 'center',\n    }))\n};\n//# sourceMappingURL=designSheet.js.map","import { constant, filter, merge } from '@most/core';\nimport { $element, event, O, style } from '@aelea/core';\nimport layoutSheet from '../../style/layoutSheet';\nimport { pallete } from '@aelea/ui-components-theme';\nexport const interactionOp = O((src) => merge(event('focus', src), event('pointerover', src)), constant(true));\nexport const dismissOp = O((src) => merge(event('blur', src), event('pointerout', src)), filter(x => document.activeElement !== x.target), // focused elements cannot be dismissed\nconstant(false));\nexport const $form = $element('form')(layoutSheet.column);\nexport const $label = $element('label')(layoutSheet.column, style({ cursor: 'pointer', color: pallete.description }));\n//# sourceMappingURL=form.js.map","export var InputType;\n(function (InputType) {\n    InputType[\"TEXT\"] = \"text\";\n    InputType[\"NUMBER\"] = \"number\";\n})(InputType || (InputType = {}));\n//# sourceMappingURL=types.js.map","import { $element, attr, component, event, O, styleBehavior } from '@aelea/core';\nimport { pallete } from '@aelea/ui-components-theme';\nimport { now, tap } from '@most/core';\nimport { filter } from '@most/core';\nimport { merge } from '@most/core';\nimport { empty, map, mergeArray, switchLatest } from \"@most/core\";\nimport designSheet from '../../style/designSheet';\nimport { dismissOp, interactionOp } from \"./form\";\nimport { InputType } from './types';\nexport const $Field = ({ type = InputType.TEXT, value = empty(), name, placeholder }) => component(([interactionBehavior, focusStyle], [dismissBehavior, dismissstyle], [sampleChange, change]) => {\n    return [\n        $element('input')(attr({ name, type, placeholder }), designSheet.input, sampleChange(event('input'), map(inputEv => {\n            if (inputEv.target instanceof HTMLInputElement) {\n                const text = inputEv.target.value;\n                return text || '';\n            }\n            return '';\n        })), styleBehavior(map(active => active ? { borderBottom: `2px solid ${pallete.primary}` } : null, mergeArray([focusStyle, dismissstyle]))), interactionBehavior(interactionOp), dismissBehavior(dismissOp), O(map(node => merge(now(node), filter(() => false, tap(val => {\n            // applying by setting `HTMLInputElement.value` imperatively(only way known to me)\n            node.element.value = String(val);\n        }, value)))), switchLatest))(),\n        {\n            change\n        }\n    ];\n});\n//# sourceMappingURL=$Field.js.map","import { at, map, merge, multicast, now, scan, skip, skipRepeats, skipRepeatsWith, switchLatest } from '@most/core';\nimport { $node, $text, O, style, styleBehavior } from '@aelea/core';\nexport const sumFromZeroOp = scan((current, x) => current + x, 0);\nvar Direction;\n(function (Direction) {\n    Direction[Direction[\"INCREMENT\"] = 0] = \"INCREMENT\";\n    Direction[Direction[\"DECREMENT\"] = 1] = \"DECREMENT\";\n})(Direction || (Direction = {}));\nfunction getDetlaSlotIdex(current, change, i) {\n    if (current[i] !== change[i] || i > change.length)\n        return i;\n    return getDetlaSlotIdex(current, change, i + 1);\n}\nexport const $NumberTicker = ({ value$, incrementColor, decrementColor, textStyle = {}, slots = 10 }) => {\n    const uniqueValues$ = skipRepeats(value$);\n    const incrementMulticast = O(scan((seed, change) => {\n        const changeStr = change.toLocaleString();\n        if (seed === null) {\n            return { change, dir: null, pos: changeStr.length, changeStr };\n        }\n        const dir = change > seed.change ? Direction.INCREMENT : Direction.DECREMENT;\n        const currentStr = seed.change.toLocaleString();\n        const isWholeNumber = changeStr.split('.').length === 1;\n        // TODO handle fractions\n        const pos = isWholeNumber && changeStr.length > currentStr.length ? 0 : getDetlaSlotIdex(currentStr, changeStr, 0);\n        return { change, dir, pos, changeStr };\n    }, null), skip(1), // skips inital null that scans emit - preventing count from getting an inital color\n    multicast)(uniqueValues$);\n    const dirStyleMap = {\n        [Direction.INCREMENT]: { color: incrementColor },\n        [Direction.DECREMENT]: { color: decrementColor },\n    };\n    return $node(...Array(slots).fill(undefined).map((_, slot) => $text(style({ transition: 'ease-out .25s color', ...textStyle }), styleBehavior(switchLatest(O(skipRepeatsWith((x, y) => x.changeStr[slot] === y.changeStr[slot] && slot < y.pos), map(({ pos, dir }) => {\n        const decayColor = at(1000, {});\n        if (slot < pos) {\n            return decayColor;\n        }\n        return merge(now(dirStyleMap[dir]), decayColor);\n    }))(incrementMulticast))))(O(map(({ changeStr }) => { var _a; return (_a = changeStr[slot]) !== null && _a !== void 0 ? _a : ''; }), skipRepeats)(incrementMulticast))));\n};\n//# sourceMappingURL=$NumberTicker.js.map","\nimport { $node, $text, Behavior, component, O, style } from '@aelea/core'\nimport { $column, $Field, $NumberTicker, $row, layoutSheet } from '@aelea/ui-components'\nimport { pallete } from '@aelea/ui-components-theme'\nimport { combine, empty, map, startWith } from '@most/core'\n\n\nconst add = (x: number, y: number) => x + y\n\n\nconst extractValue = O(\n  map((str: string) => Number(str)),\n  startWith(0)\n)\n\nconst $plus = $node(\n  style({\n    justifyContent: 'center', alignItems: 'center',\n    width: '36px', color: pallete.description\n  }),\n  layoutSheet.displayFlex\n)\n\nexport default component((\n  [sampleX, x]: Behavior<string, number>,\n  [sampleY, y]: Behavior<string, number>\n) =>\n  [\n    $column(layoutSheet.spacingSmall)(\n\n      $row(\n        $plus(\n          $text('+')\n        ),\n        $column(layoutSheet.spacingTiny)(\n          $Field({ value: empty(), placeholder: '0' })({\n            change: sampleX(extractValue)\n          }),\n          $Field({ value: empty(), placeholder: '0' })({\n            change: sampleY(extractValue)\n          })\n        )\n      ),\n\n      $row(\n        $node(style({ width: '36px' }))(),\n        $NumberTicker({\n          value$: combine(add, x, y),\n          decrementColor: pallete.negative,\n          incrementColor: pallete.negative,\n          slots: 30\n        })\n      )\n\n    )\n  ]\n)\n\n\n","import { multicast, startWith } from \"@most/core\";\nimport { Pipe } from \"../utils\";\nimport { BehaviorSource } from \"./behavior\";\nexport function state(initialState) {\n    const bs = new BehaviorSource();\n    const mbs = multicast(bs);\n    return [bs.sample, replayLatest(mbs, initialState)];\n}\nclass StateSink extends Pipe {\n    constructor(parent, sink) {\n        super(sink);\n        this.parent = parent;\n        this.sink = sink;\n    }\n    event(t, x) {\n        this.parent.latestvalue = x;\n        this.parent.hasValue = true;\n        this.sink.event(t, x);\n    }\n}\nexport function replayLatest(s, initialState) {\n    if (arguments.length === 1) {\n        return new ReplayLatest(s);\n    }\n    else {\n        return new ReplayLatest(s, initialState);\n    }\n}\nexport class ReplayLatest {\n    constructor(source, initialState) {\n        this.source = source;\n        this.initialState = initialState;\n        this.hasValue = false;\n        this.hasInitial = arguments.length === 2;\n    }\n    run(sink, scheduler) {\n        const startWithReplay = this.hasValue\n            ? startWith(this.latestvalue)\n            : this.hasInitial\n                ? startWith(this.initialState)\n                : null;\n        const withReplayedValue = startWithReplay ? startWithReplay(this.source) : this.source;\n        return withReplayedValue.run(new StateSink(this, sink), scheduler);\n    }\n}\n//# sourceMappingURL=state.js.map","import { map, mergeArray, never } from \"@most/core\";\nimport { $element, component, event, styleBehavior, attrBehavior } from '@aelea/core';\nimport { dismissOp, interactionOp } from './form';\nimport { pallete } from '@aelea/ui-components-theme';\nimport designSheet from \"../../style/designSheet\";\nexport const $Button = ({ disabled = never(), $content }) => component(([interactionBehavior, focusStyle], [dismissBehavior, dismissstyle], [sampleClick, click]) => {\n    const $button = $element('button')(designSheet.btn, sampleClick(event('pointerup')), styleBehavior(map(disabled => disabled ? { opacity: .4, pointerEvents: 'none' } : null, disabled)), attrBehavior(map(disabled => ({ disabled }), disabled)), styleBehavior(map(active => active ? { borderColor: pallete.primary } : null, mergeArray([focusStyle, dismissstyle]))), interactionBehavior(interactionOp), dismissBehavior(dismissOp));\n    return [\n        $button($content),\n        {\n            click\n        }\n    ];\n});\n//# sourceMappingURL=$Button.js.map","import { $ButtonIcon } from \"@aelea/ui-components\"\nimport { $trash } from \"./$icons\"\n\nexport const $TrashBtn = $ButtonIcon($trash)\n","import { map, mergeArray } from \"@most/core\";\nimport { component, event, O, style, styleBehavior } from '@aelea/core';\nimport { dismissOp, interactionOp } from \"./form\";\nimport { $icon } from \"../../elemets/$icon\";\nimport designSheet from \"../../style/designSheet\";\nimport { pallete } from \"@aelea/ui-components-theme\";\nexport const $ButtonIcon = ($content) => component(([interactionBehavior, focusStyle], [dismissBehavior, dismissstyle], [sampleClick, click]) => {\n    const iconOp = O(designSheet.control, style({ cursor: 'pointer', fill: pallete.description, borderRadius: '50%', }), interactionBehavior(interactionOp), dismissBehavior(dismissOp), sampleClick(event('pointerup')), styleBehavior(map(active => active ? { borderColor: pallete.primary } : null, mergeArray([focusStyle, dismissstyle]))));\n    const $buttonIcon = iconOp($icon({ $content }));\n    return [\n        $buttonIcon,\n        { click }\n    ];\n});\n//# sourceMappingURL=$ButtonIcon.js.map","import { $text, Behavior, component, style } from '@aelea/core'\nimport { $Button, $column, $NumberTicker, $row, layoutSheet } from '@aelea/ui-components'\nimport { pallete } from '@aelea/ui-components-theme'\nimport { constant } from '@most/core'\nimport { Stream } from '@most/types'\n\n\ninterface Counter {\n  value$: Stream<number>\n}\n\nexport default ({ value$ }: Counter) => component((\n  [sampleIncrement, increment]: Behavior<PointerEvent, 1>,\n  [sampleDecrement, decrement]: Behavior<PointerEvent, -1>\n) => {\n\n\n  return [\n\n    $row(style({ alignItems: 'center', placeContent: 'space-between' }), layoutSheet.spacing)(\n      $column(style({ borderRadius: '5px', alignItems: 'center' }), layoutSheet.spacing)(\n        $Button({ $content: $text('+') })({\n          click: sampleIncrement(\n            constant(1)\n          )\n        }),\n        $Button({ $content: $text('-') })({\n          click: sampleDecrement(\n            constant(-1)\n          )\n        }),\n      ),\n\n      $NumberTicker({\n        value$,\n        textStyle: {\n          fontSize: '30px'\n        },\n        decrementColor: pallete.negative,\n        incrementColor: pallete.negative\n      })\n    ),\n\n    { increment, decrement }\n\n  ]\n})\n","\nimport { $text, Behavior, behavior, component, O, state, style } from '@aelea/core'\nimport { $Button, $column, $row, $seperator, layoutSheet } from '@aelea/ui-components'\nimport { chain, constant, map, merge, mergeArray, now, scan, snapshot, until } from '@most/core'\nimport { $TrashBtn } from '../../../elements/$common'\nimport $Counter from './$Counter'\n\nconst $AddBtn = $Button({\n  $content: $text('Add One')\n})\nexport const sumAdd = scan((current: number, x: number) => current + x)\n\nexport default component((\n  [sampleAddedCounter, addedCounter]: Behavior<PointerEvent, PointerEvent>,\n  [sampleDisposeCounter, disposeCounter]: Behavior<PointerEvent, PointerEvent>,\n  [sampleCountersIncrement, counterIncrement]: Behavior<1, 1>,\n  [sampleCountersDecrement, counterDecrement]: Behavior<-1, -1>,\n  [sampleDisposedCounterCount, disposedCounterCount]: Behavior<any, number>,\n) => {\n\n  const INITAL_COUNT = 0\n  const sumWithInitial = sumAdd(INITAL_COUNT)\n\n  const counting = mergeArray([disposedCounterCount, counterIncrement, counterDecrement])\n  const totalCount = sumWithInitial(counting)\n\n  const addCounter = merge(addedCounter, now(null))\n\n  return [\n\n    $column(layoutSheet.spacing)(\n      $row(style({ placeContent: 'space-between', alignItems: 'center' }), layoutSheet.spacing)(\n        $text(\n          map(n => `Counters: ${n}`, sumWithInitial(merge(constant(1, addCounter), constant(-1, disposeCounter))))\n        ),\n        $text(\n          map(n => `Sum: ${n}`, totalCount)\n        ),\n        $AddBtn({\n          click: sampleAddedCounter()\n        }),\n      ),\n      chain(() => {\n\n        const [sampleRemove, remove] = behavior<PointerEvent, PointerEvent>()\n        const [sampleValue, value$] = state(0)\n\n\n        return until(remove)(\n          $column(layoutSheet.spacing)(\n            $seperator,\n            $row(style({ alignItems: 'center' }), layoutSheet.spacingBig)(\n              $TrashBtn({\n                click: O(\n                  sampleRemove(),\n                  sampleDisposeCounter(),\n                  sampleDisposedCounterCount(\n                    snapshot((value) => -value, value$)\n                  ),\n                )\n              }),\n              $Counter({ value$ })({\n                increment: O(\n                  sampleCountersIncrement(),               \n\n                  sampleValue(\n                    snapshot((value, increment) => value + increment, value$)\n                  ),\n                ),\n                decrement: O(\n                  sampleCountersDecrement(),\n\n                  sampleValue(\n                    snapshot((value, increment) => value + increment, value$)\n                  ),\n                )\n              })\n            )\n          )\n        )\n      }, addCounter)\n    )\n\n  ]\n})\n\n","import { chain, combine, filter, map, merge, multicast, now, skipAfter, skipRepeats, snapshot, startWith, switchLatest } from \"@most/core\";\nimport { remove } from \"@most/prelude\";\nimport { behavior, component, event, eventElementTarget, motion, O, style, styleInline, styleBehavior } from '@aelea/core';\nimport { $column, $row } from \"../$elements\";\nimport layoutSheet from \"../style/layoutSheet\";\nconst clamp = (val, min, max) => val > max ? max : val < min ? min : val;\nconst swap = (a, idx, arr) => {\n    const currentIdx = arr.indexOf(a);\n    if (currentIdx === -1)\n        throw new Error('unable to find element within the array');\n    const newArr = remove(currentIdx, arr);\n    newArr.splice(idx, 0, a);\n    return newArr;\n};\nconst $dragItem = $row(style({ cursor: 'grab', width: '100%', position: 'absolute' }));\nexport const $Sortable = (config) => component(([sampleOrderChange, orderChange]) => {\n    var _a;\n    const gap = ((_a = config.gap) !== null && _a !== void 0 ? _a : 0);\n    const listLength = config.$list.length;\n    const itemHeight = gap + config.itemHeight;\n    const containerHeight = listLength > 1 ? (itemHeight * listLength) : config.itemHeight;\n    const orderMulticat = multicast(orderChange);\n    const $listChangesWithInitial = startWith(config.$list, map(s => s.list, orderMulticat));\n    const draggingMotion = motion({ stiffness: 150, damping: 20 });\n    return [\n        $column(layoutSheet.flex, style({ flex: 1, userSelect: 'none', position: 'relative', height: containerHeight + 'px' }))(...config.$list.map(($item, i) => {\n            var _a;\n            const [sampleDragY, dragY] = behavior();\n            const multicastedDrag = multicast(dragY);\n            const isDraggingStream = skipRepeats(map(x => x.isDragging, multicastedDrag));\n            const iHeight = config.itemHeight + ((_a = config.gap) !== null && _a !== void 0 ? _a : 0);\n            const yMotion = O(filter(({ $draggedItem }) => $draggedItem !== $item), map(({ list }) => list.indexOf($item) * iHeight))(orderMulticat);\n            const yDragPosition = merge(chain(s => {\n                if (s.isDragging) {\n                    return now(s.delta);\n                }\n                else {\n                    return draggingMotion(s.delta, now(s.list.indexOf($item) * iHeight));\n                }\n            }, multicastedDrag), draggingMotion(i * iHeight, yMotion));\n            const applyTransformStyle = combine((ypos, scale) => ({ transform: `translateY(${ypos}px) scale(${scale})` }), yDragPosition, draggingMotion(1, map(id => id ? 1.1 : 1, isDraggingStream)));\n            const applyBoxShadowStyle = map(shadow => ({ boxShadow: `0px ${shadow}px ${shadow * 3}px 0px rgba(0, 0, 0, 0.25` }), draggingMotion(0, map(id => id ? 5 : 0, isDraggingStream)));\n            return $dragItem(sampleDragY(event('pointerdown'), \n            // list order continously changing, snapshot is used to get a(snapshot) of the latest list\n            snapshot((list, startEv) => {\n                const drag = merge(eventElementTarget('pointerup', window), eventElementTarget('pointermove', window));\n                const move = skipAfter(ev => ev.type === 'pointerup', drag);\n                return map((pointerEvent) => {\n                    const from = list.indexOf($item);\n                    const delta = pointerEvent.clientY - (startEv.clientY - from * iHeight);\n                    const to = clamp(Math.round(delta / iHeight), 0, list.length - 1);\n                    const isPositionChange = to !== from;\n                    const isDragging = pointerEvent.type === 'pointermove';\n                    return {\n                        delta, isDragging, to,\n                        $draggedItem: isDragging ? $item : null,\n                        list: isPositionChange ? swap($item, to, list) : list\n                    };\n                }, move);\n            }, $listChangesWithInitial), switchLatest, sampleOrderChange()), styleInline(merge(applyTransformStyle, applyBoxShadowStyle)), styleBehavior(map(x => ({ zIndex: x ? 1000 : 0 }), isDraggingStream)))($item);\n        })),\n        { orderChange: $listChangesWithInitial }\n    ];\n});\n//# sourceMappingURL=$Sortable.js.map","import { component, Behavior, $Branch, IBranchElement, style, $text } from \"@aelea/core\"\nimport { $column, $row, $Sortable, layoutSheet } from \"@aelea/ui-components\"\nimport { pallete } from \"@aelea/ui-components-theme\"\n\n\nexport default component(([sampleOrder]: Behavior<$Branch<IBranchElement, {}>[], $Branch<IBranchElement, {}>[]>) => {\n\n  const $list = Array(4).fill(null).map((_, i) =>\n    $column(layoutSheet.flex, style({ backgroundColor: pallete.background, placeContent: 'center', height: '90px', alignItems: 'center' }))(\n      $text('node: ' + i)\n    )\n  )\n\n  return [\n    $row(style({ placeContent: 'stretch' }))(\n      $Sortable({\n        $list,\n        itemHeight: 90,\n        gap: 10\n      })({ orderChange: sampleOrder() })\n    )\n  ]\n})","import { $text, component, style } from '@aelea/core';\nimport { empty } from '@most/core';\nimport { $row } from \"../../$elements\";\nimport layoutSheet from '../../style/layoutSheet';\nimport { $Field } from \"./$Field\";\nimport { $label } from \"./form\";\nexport const $TextField = (config) => component(([sampleValue, value]) => {\n    const { hint } = config;\n    return [\n        $label(layoutSheet.flex, layoutSheet.spacingTiny, style({ alignSelf: 'self-start' }))($row(layoutSheet.flex, layoutSheet.spacingSmall)($text(style({ alignSelf: 'flex-end', paddingBottom: '1px' }))(config.label), $Field(config)({\n            change: sampleValue()\n        })), hint ? $text(style({ fontSize: '75%', width: '100%' }))(hint) : empty()),\n        { value }\n    ];\n});\n//# sourceMappingURL=$TextField.js.map","import { combine, delay, map, merge, mergeArray, multicast, skipRepeats, skipRepeatsWith, switchLatest } from \"@most/core\";\nimport { $node, component, style, styleInline, $text, event, replayLatest } from '@aelea/core';\nimport { $column } from '../$elements';\nimport { pallete } from \"@aelea/ui-components-theme\";\nimport designSheet from \"../style/designSheet\";\nimport { observer } from \"..\";\nfunction getPageRequest(offsetTop, containerHeight, rowHeight, threshold) {\n    const top = Math.floor(offsetTop / rowHeight);\n    const pageSize = Math.floor((containerHeight / rowHeight) + threshold);\n    const from = Math.max(0, top - (top % threshold));\n    const to = from + pageSize;\n    const delta = to - from;\n    return { from, to, pageSize, delta };\n}\nconst $itemLoading = $text(style({ color: pallete.description, padding: '3px 10px' }))('loading...');\nexport const $QuantumScroll = ({ rowHeight, dataSource, threshold = 10, containerStyle = {}, contentStyle = {}, $loading = $itemLoading }) => component(([sampleScroll, scroll], [sampleContainerDimension, containerDimension]) => {\n    const multicastedData = multicast(dataSource);\n    const initalScrollState = map(rect => getPageRequest(0, rect.height, rowHeight, threshold), containerDimension);\n    const requestSource = replayLatest(merge(scroll, initalScrollState));\n    const $requestAndLoader = merge(delay(1, map(res => res.$items.map($item => style({ height: rowHeight + 'px' }, $item)), multicastedData)), map((scroll) => Array(scroll.delta).fill(style({ height: rowHeight + 'px' }, $loading)), requestSource));\n    const $skipRepaintingLoader = skipRepeatsWith((prev, next) => {\n        return next[0] === prev[0];\n    }, $requestAndLoader);\n    const $intermissionedItems = switchLatest(map(l => mergeArray(l), $skipRepaintingLoader));\n    const $container = $column(style({ display: 'block', position: 'relative', ...containerStyle }), sampleScroll(event('scroll'), map(ev => {\n        const target = ev.target;\n        if (!(target instanceof HTMLElement)) {\n            throw new Error('element target is not scrollable');\n        }\n        return getPageRequest(target.scrollTop, target.clientHeight, rowHeight, threshold);\n    }), skipRepeatsWith((prev, next) => prev.from === next.from)), sampleContainerDimension(observer.resize(), map(dim => { var _a; return (_a = dim[0]) === null || _a === void 0 ? void 0 : _a.contentRect; }), skipRepeats));\n    const $content = $node(designSheet.customScroll, style({\n        ...contentStyle,\n        display: 'block', overflow: 'auto',\n        position: 'absolute', top: '0px', left: '0px', right: '0px', bottom: '0px'\n    }));\n    const totalItemsCount = skipRepeats(map(x => x.totalItems, multicastedData));\n    const $list = $column(style({ willChange: 'transform' }), styleInline(combine((totalItems, loc) => {\n        const top = loc.from * rowHeight;\n        return {\n            transform: `translate(0, ${top}px)`,\n            height: `${rowHeight * totalItems - top}px`\n        };\n    }, totalItemsCount, requestSource)));\n    return [\n        $container($content($list($intermissionedItems))),\n        {\n            requestSource\n        }\n    ];\n});\n//# sourceMappingURL=$QuantumScroll.js.map","import { chain } from \"@most/core\";\nimport { disposeWith } from \"@most/disposable\";\nexport const intersection = (config = {}) => chain((node) => ({\n    run(sink, scheduler) {\n        const intersectionObserver = new IntersectionObserver(entries => {\n            sink.event(scheduler.currentTime(), entries);\n        }, config);\n        intersectionObserver.observe(node.element);\n        return disposeWith(([instance, el]) => instance.unobserve(el), [intersectionObserver, node.element]);\n    }\n}));\nexport const resize = (config = {}) => chain((node) => ({\n    run(sink, scheduler) {\n        const ro = new ResizeObserver(entries => {\n            sink.event(scheduler.currentTime(), entries);\n        });\n        ro.observe(node.element, config);\n        return disposeWith(([instance, el]) => instance.unobserve(el), [ro, node.element]);\n    }\n}));\nexport const mutation = (config = { attributes: true, childList: false, subtree: false }) => chain((node) => ({\n    run(sink, scheduler) {\n        const ro = new MutationObserver(entries => {\n            sink.event(scheduler.currentTime(), entries);\n        });\n        ro.observe(node.element, config);\n        return disposeWith(instance => instance.disconnect(), ro);\n    }\n}));\n//# sourceMappingURL=elementObservers.js.map","\nimport { $text, Behavior, component, StateBehavior, style } from '@aelea/core'\nimport { $column, $NumberTicker, $QuantumScroll, $row, $seperator, $TextField, layoutSheet, ScrollSegment } from '@aelea/ui-components'\nimport { pallete } from '@aelea/ui-components-theme'\nimport { at, debounce, map, merge, now, snapshot, switchLatest } from '@most/core'\n\nconst formatNumber = Intl.NumberFormat().format\n\n\nexport default component((\n  [sampleScroll, scroll]: Behavior<ScrollSegment, ScrollSegment>,\n  [sampleDelayResponse, delayResponse]: StateBehavior<string, number>,\n  [sampleDebounceRequest, debounceRequest]: StateBehavior<string, number>,\n) => {\n\n  const initialDebounceRequestChange = now(1000)\n  const initialDelayResponse = now(500)\n\n  const dataSource = switchLatest(\n    map((debounceDuration: number) => {\n      const dd = debounce(debounceDuration, scroll)\n\n      return switchLatest(\n        snapshot((delay: number, positionChange) => {\n          const totalItems = 1e6\n\n          const arr = Array(positionChange.delta).fill(null)\n          const $items = arr.map((x, i) => {\n            const to = Math.min(positionChange.to, totalItems)\n            const id = totalItems - (to - i) + 1\n\n            return $text(style({ padding: '3px 10px' }))('item: ' + formatNumber(id))\n          })\n\n          return at(delay, { $items, totalItems })\n        }, merge(initialDelayResponse, delayResponse), dd)\n      )\n    }, merge(initialDebounceRequestChange, debounceRequest))\n  )\n\n\n  return [\n    $column(layoutSheet.spacingBig)(\n      $text('High performance dynamically loaded list based on scroll position and computed container height'),\n      $row(layoutSheet.spacingBig)(\n        $row(layoutSheet.spacingSmall, layoutSheet.flex)(\n          $text(style({ color: pallete.description }))('Page: '),\n          $NumberTicker({\n            value$: map(l => Math.floor(l.to / l.pageSize), scroll),\n            decrementColor: pallete.negative,\n            incrementColor: pallete.negative\n          }),\n        ),\n        $row(layoutSheet.spacingSmall)(\n          $text(style({ color: pallete.description }))(`page size: `),\n          $text(\n            map(l => String(l.pageSize), scroll)\n          )\n        )\n      ),\n\n      $row(layoutSheet.spacingBig)(\n        $TextField({\n          label: 'Debounce Request(ms)',\n          value: initialDebounceRequestChange,\n          hint: 'prevent bursts of page requests to a datasource during scroll'\n        })({\n          value: sampleDebounceRequest(\n            map(Number)\n          )\n        }),\n        $TextField({\n          label: 'Delay Response(ms)',\n          value: initialDelayResponse,\n          hint: 'Emulate the duration of our datasource response, show a stubbed $node instead'\n        })({\n          value: sampleDelayResponse(\n            map(Number)\n          )\n        }),\n      ),\n\n      $seperator,\n\n      $QuantumScroll({\n        rowHeight: 31,\n        dataSource,\n        containerStyle: { border: `1px solid ${pallete.middleground}`, height: '400px' }\n      })({\n        requestSource: sampleScroll()\n      })\n\n    )\n  ]\n})\n\n","import { map, merge, now } from \"@most/core\";\nimport { $text, component, O, style, stylePseudo } from '@aelea/core';\nimport { $row } from \"../$elements\";\nimport { $QuantumScroll } from \"./$QuantumScroll\";\nimport { pallete } from \"@aelea/ui-components-theme\";\nimport layoutSheet from \"../style/layoutSheet\";\nconst elipsisTextOverflow = style({\n    overflow: 'hidden', textOverflow: 'ellipsis', whiteSpace: 'nowrap'\n});\nconst tableCellStyle = O(style({\n    padding: '3px 6px'\n}), layoutSheet.flex);\nconst $headerCell = $row(tableCellStyle, style({ fontSize: '15px', color: pallete.description, }));\nconst $bodyCell = $row(tableCellStyle);\nconst $rowContainer = $row(layoutSheet.spacing);\nexport const $Table = (config) => {\n    return component(([sampleRequestList, requestList]) => {\n        const $header = $rowContainer(style({ overflowY: 'scroll' }), stylePseudo('::-webkit-scrollbar', { backgroundColor: 'transparent' }))(...config.columns.map(col => {\n            var _a, _b;\n            return $headerCell(style((_a = col.cellStyle) !== null && _a !== void 0 ? _a : { height: config.rowHeight + 'px' }))((_b = col.header) !== null && _b !== void 0 ? _b : elipsisTextOverflow($text(String(col.id))));\n        }));\n        const dataStream = map(({ data, totalItems }) => {\n            const $items = data.map(rowData => $rowContainer(...config.columns.map(col => {\n                var _a;\n                return $bodyCell(style((_a = col.cellStyle) !== null && _a !== void 0 ? _a : {}))(col.value(now(rowData)));\n            })));\n            return { $items, totalItems };\n        }, config.dataSource);\n        const $body = $QuantumScroll({\n            ...config,\n            dataSource: dataStream\n        })({\n            requestSource: sampleRequestList()\n        });\n        return [\n            merge($body, $header),\n            { requestList }\n        ];\n    });\n};\n//# sourceMappingURL=$Table.js.map","import { $text, Behavior, component } from \"@aelea/core\"\nimport { $Table, ScrollSegment } from \"@aelea/ui-components\"\nimport { chain, map } from \"@most/core\"\n\n\nexport default component((\n  [sampleRequestList, requestList]: Behavior<ScrollSegment, ScrollSegment>\n) => {\n\n  const dataSource = map(position => {\n    const totalItems = 1e6\n    const segment = position.to - position.from\n    const arr = Array(segment)\n    const $items = arr.fill(null).map((x, i) => {\n      const id = totalItems - (position.to - i) + 1\n\n      return {\n        id: 'item-#' + id\n      }\n    })\n\n    return { totalItems, data: $items }\n  }, requestList)\n\n  return [\n    $Table<{ id: string }>({\n      dataSource,\n      rowHeight: 31,\n      containerStyle: {\n        height: '400px'\n      },\n      columns: [\n        {\n          id: 'id',\n          value: chain(x => $text(x.id)),\n        },\n        {\n          id: 'id',\n          value: chain(x => $text(x.id)),\n        },\n        {\n          id: 'id',\n          value: chain(x => $text(x.id)),\n        }\n      ],\n    })({ requestList: sampleRequestList() })\n  ]\n})\n","\nimport type { Theme } from \"@aelea/ui-components-theme\"\n\n\nexport const light: Theme = {\n  name: 'light',\n  pallete: {\n    primary: '#f00',\n\n    message: '#000000',\n    description: '#616058',\n\n    background: '#e8dab4',\n    horizon: '#ded7cb',\n    middleground: '#fff5de',\n    foreground: '#80600d',\n\n    positive: '#6bc36b',\n    negative: '#e07070',\n    indeterminate: '#c5bd61',\n  }\n}\nexport const dark: Theme = {\n  name: 'dark',\n  pallete: {\n    primary: '#ea607e',\n\n    message: '#ffffff',\n    description: '#a5b6bd',\n\n    background: '#2b3437',\n    horizon: '#89989e',\n    middleground: '#3b464a',\n    foreground: '#a5b6bd',\n\n    positive: '#a6f5a6',\n    negative: '#ff9393',\n    indeterminate: '#dccb07',\n  }\n}\n\n\n","\nimport { $node, $text, component, style } from '@aelea/core'\nimport { $column, $row, layoutSheet } from '@aelea/ui-components'\nimport { Pallete, Theme } from '@aelea/ui-components-theme'\nimport { dark, light } from '../../../common/theme'\n\n\n\nfunction getPallete(theme: Pallete, name: string, colors: [name: string, color: string][]) {\n  return $column(layoutSheet.spacingTiny)(\n    $text(name),\n\n    ...colors.map(([name, color]) =>\n      $row(layoutSheet.spacing, style({ height: '30px', alignItems: 'center' }))(\n        $node(style({ width: '30px', height: '30px', backgroundColor: color }))(),\n        $text(style({ flex: 1, color: theme.description, fontSize: '12px' }))(color),\n        $text(style({ flex: 1 }))(name),\n      )\n    )\n  )\n}\n\nexport const $Pallete = (themeDef: Theme) => component(() => {\n  const pallete = Object.entries(themeDef.pallete)\n  const theme = themeDef.pallete\n\n  return [\n    $column(\n      $column(layoutSheet.spacingBig, style({ color: theme.message, padding: '15px', backgroundColor: theme.background }))(\n        $text(style({ fontSize: '120%' }))(themeDef.name),\n        getPallete(theme, 'Action', pallete.slice(0, 1)),\n        getPallete(theme, 'Story', pallete.slice(1, 3)),\n        getPallete(theme, 'Environment', pallete.slice(3, 7)),\n        getPallete(theme, 'Attention', pallete.slice(7, 10)),\n      )\n    )\n  ]\n})\n\nexport const $Theme = component((\n) => {\n  \n\n  return [\n    $row(layoutSheet.spacingBig)(\n      ...[dark, light].map(themeDef => {\n        return $Pallete(themeDef)({})\n      })\n    )\n  ]\n})\n\n\n","import { $text, Behavior, component, style } from '@aelea/core'\nimport { $Button, $Field, $row, layoutSheet } from \"@aelea/ui-components\"\nimport { constant, map, merge, now, snapshot, startWith } from \"@most/core\"\n\nlet iid = 0\n\nexport interface Todo {\n  id: number,\n  text: string,\n  completed: boolean,\n}\n\nexport function createTodo(text: string): Todo {\n  return {\n    id: iid++,\n    text,\n    completed: false\n  }\n}\n\n\nexport default component((\n  [sampleAdd, create]: Behavior<PointerEvent, PointerEvent>,\n  [sampleInputChange, inputChange]: Behavior<string, string>\n) => {\n\n  const inputState = startWith('', inputChange)\n  const value = constant('', merge(create, now(null)))\n  const valueChahnges = merge(inputChange, value)\n  const disabled = map(x => !x, valueChahnges)\n\n  const add = snapshot(\n    (text) => ({ id: iid++, text, completed: false }),\n    inputState, create\n  )\n\n  return [\n    $row(layoutSheet.flex)(\n      $Field({ value })({\n        change: sampleInputChange()\n      }),\n      $Button({ $content: $text('add'), disabled })({\n        click: sampleAdd()\n      })\n    ),\n\n    { add }\n  ]\n\n})","import { map, mergeArray } from \"@most/core\";\nimport { $element, $node, attr, component, event, O, style, styleBehavior, attrBehavior } from '@aelea/core';\nimport { dismissOp, interactionOp } from \"./form\";\nimport { pallete } from \"@aelea/ui-components-theme\";\nimport layoutSheet from \"../../style/layoutSheet\";\nexport const $Checkbox = ({ value }) => component(([interactionBehavior, focusStyle], [dismissBehavior, dismissstyle], [sampleCheck, check]) => {\n    const $overlay = $node(layoutSheet.stretch, style({ flex: 1, margin: '3px', }), styleBehavior(map(ch => ch ? { backgroundColor: pallete.message } : null, value)));\n    const $checkInput = $element('input')(style({ opacity: 0, width: 'inherit', height: 'inherit', margin: '0', cursor: 'pointer', }), layoutSheet.stretch, sampleCheck(event('change'), map(evt => evt.target.checked)), attr({ type: 'checkbox' }), attrBehavior(map(checked => ({ checked: checked ? true : null }), value)), interactionBehavior(interactionOp), dismissBehavior(dismissOp));\n    const containerStyle = O(styleBehavior(map(active => active ? { borderColor: pallete.primary } : null, mergeArray([focusStyle, dismissstyle]))), style({ position: 'relative', width: '18px', height: '18px', border: `2px solid ${pallete.description}` }));\n    return [\n        $node(containerStyle)($overlay(), $checkInput()),\n        { check }\n    ];\n});\n//# sourceMappingURL=$Checkbox.js.map","import { Behavior, component, O, style } from '@aelea/core'\nimport { $Checkbox, $Field, $row, layoutSheet } from \"@aelea/ui-components\"\nimport { now } from \"@most/core\"\nimport { Stream } from \"@most/types\"\nimport { $TrashBtn } from '../../../elements/$common'\nimport { Todo } from \"./$CreateTodo\"\n\n\nconst rowStyle = O(\n  layoutSheet.spacing,\n  style({ alignItems: 'center' })\n)\n\ninterface TodoItem {\n  todo: Todo,\n  completed: Stream<boolean>\n}\n\nexport default ({ todo, completed }: TodoItem) => component((\n  [sampleRemove, remove]: Behavior<MouseEvent, MouseEvent>,\n  [sampleComplete, complete]: Behavior<boolean, boolean>,\n  [sampleText, text]: Behavior<string, string>\n) => {\n\n  return [\n    $row(rowStyle)(\n      $Checkbox({ value: completed })({\n        check: sampleComplete()\n      }),\n      $Field({ value: now(todo.text) })({\n        change: sampleText()\n      }),\n      $TrashBtn({\n        click: sampleRemove()\n      })\n    ),\n\n    { text, remove, complete }\n  ]\n})\n\n\n","\nimport { $element, $text, behavior, Behavior, component, state, style } from '@aelea/core'\nimport { $Checkbox, $column, $row, layoutSheet } from '@aelea/ui-components'\nimport { pallete } from '@aelea/ui-components-theme'\nimport { chain, combine, empty, mergeArray, now, switchLatest, until } from '@most/core'\nimport $CreateTodo, { Todo } from './$CreateTodo'\nimport $TodoItem from './$TodoItem'\n\n\n\nexport const $label = $element('label')(\n  layoutSheet.row,\n  style({ cursor: 'pointer', alignItems: 'center', color: pallete.description })\n)\n\n\nexport default (todos: Todo[]) => component((\n  [sampleCreateTodo, newTodo]: Behavior<Todo, Todo>\n) => {\n\n  const [sampleShowCompletedList, showCompletedList] = state(false)\n\n  return [\n    $column(layoutSheet.spacingBig)(\n\n      $row(layoutSheet.spacingBig)(\n        $label(layoutSheet.spacing)(\n          $Checkbox({ value: showCompletedList })({\n            check: sampleShowCompletedList()\n          }),\n          $text('Show completped ')\n        ),\n        $CreateTodo({\n          add: sampleCreateTodo()\n        }),\n      ),\n\n      $column(layoutSheet.spacingSmall)(\n        chain((todo: Todo) => {\n\n          const [sampleRemove, remove] = behavior<MouseEvent, MouseEvent>()\n\n          const [sampleCompleted, completed] = state(todo.completed)\n\n          return until(remove)(\n            switchLatest(\n              combine(\n                (onlyCompleted, isCompleted) => onlyCompleted === isCompleted\n                  ? $TodoItem({ todo, completed })({\n                    remove: sampleRemove(),\n                    complete: sampleCompleted()\n                  })\n                  : empty(),\n                showCompletedList,\n                completed\n              )\n            )\n          )\n\n        }, mergeArray([newTodo, ...todos.map(now)]))\n      )\n\n    )\n  ]\n})\n\n\n","import { $node, $text, Behavior, component, style } from '@aelea/core'\nimport { contains, Route, match } from '@aelea/router'\nimport { $column, $row, layoutSheet } from '@aelea/ui-components'\nimport { pallete } from '@aelea/ui-components-theme'\nimport $Example from '../../components/$Example'\nimport { $Link } from '../../components/$Link'\nimport { fadeIn } from '../../components/transitions/enter'\nimport $Autocomplete from './autocomplete/$Autocomplete'\nimport $Calculator from './calculator/$Calculator'\nimport $CountCounters from './count-counters/$CountCounters'\nimport $DragList from './dragList/$DragList'\nimport $VirtualList from './quantum-list/$QuantumList'\nimport $Table from './table/$Table'\nimport { $Theme } from './theme/$Theme'\nimport { createTodo } from './todo-app/$CreateTodo'\nimport $TodoApp from './todo-app/$TodoApp'\n\n\n\n\ninterface Website {\n  router: Route\n}\n\nexport default ({ router }: Website) => component((\n  [sampleLinkClick, routeChanges]: Behavior<string, string>\n) => {\n\n  const dragAngDropRoute = router.create({ fragment: 'drag-and-sort', title: 'Drag N Drop' })\n  const todoAppRoute = router.create({ fragment: 'todo-app', title: 'Todo App' })\n  const countCountersRoute = router.create({ fragment: 'count-counters', title: 'Count Counters' })\n  const quantumListRoute = router.create({ fragment: 'quantum-list', title: 'Quantum List' })\n  const calculatorRoute = router.create({ fragment: 'calculator', title: 'Calculator' })\n  const tableRoute = router.create({ fragment: 'table', title: 'Table' })\n  const autocompleteRoute = router.create({ fragment: 'autocomplete', title: 'Autocomplete' })\n  const themeRoute = router.create({ fragment: 'theme', title: 'Theme' })\n\n  const $container = $row\n\n\n\n  return [\n\n    $row(layoutSheet.spacingBig, layoutSheet.flex, style({ placeContent: 'center' }))(\n\n      fadeIn(\n        $column(layoutSheet.spacing, style({ top: '10vh', placeContent: 'center flex-start' }))(\n\n          $column(layoutSheet.spacingSmall, style({ alignItems: 'flex-end' }))(\n            $Link({ $content: $text('Drag And Sort'), url: '/p/examples/drag-and-sort', route: dragAngDropRoute })({\n              click: sampleLinkClick()\n            }),\n            // $Link({ $content: $text('Autocomplete'), url: '/p/examples/autocomplete', route: autocompleteRoute })({\n            //   click: sampleLinkClick()\n            // }),\n            $Link({ $content: $text('Quantum List'), url: '/p/examples/quantum-list', route: quantumListRoute })({\n              click: sampleLinkClick()\n            }),\n            $Link({ $content: $text('Theme'), url: '/p/examples/theme', route: themeRoute })({\n              click: sampleLinkClick()\n            }),\n            $Link({ $content: $text('Count Counters'), url: '/p/examples/count-counters', route: countCountersRoute })({\n              click: sampleLinkClick()\n            }),\n            $Link({ $content: $text('Todo App'), url: '/p/examples/todo-app', route: todoAppRoute })({\n              click: sampleLinkClick()\n            }),\n            $Link({ $content: $text('Table'), url: '/p/examples/table', route: tableRoute })({\n              click: sampleLinkClick()\n            }),\n            $Link({ $content: $text('Calculator'), url: '/p/examples/calculator', route: calculatorRoute })({\n              click: sampleLinkClick()\n            }),\n          )\n\n        )\n      ),\n\n      $node(),\n\n      $column(style({ flex: 2 }))(\n\n        $container(\n          match(dragAngDropRoute)(\n            $Example({ file: 'src/components/$DragSort.ts' })(\n              $DragList({})\n            )({})\n          )\n        ),\n\n        // $container(\n        //   contains(autocompleteRoute)(\n        //     $Example({ file: 'src/components/$DragSort.ts' })(\n        //       $Autocomplete({})\n        //     )({})\n        //   )\n        // ),\n\n        $container(\n          match(tableRoute)(\n            $Example({ file: 'src/components/$Table.ts' })(\n              $column(style({ border: `1px solid ${pallete.middleground}` }))(\n                $Table({})\n              )\n            )({})\n          )\n        ),\n\n        $container(\n          match(themeRoute)(\n            $Example({ file: 'src/components/$Table.ts' })(\n              $column(\n                $Theme({})\n              )\n            )({})\n          )\n        ),\n\n        $container(\n          match(calculatorRoute)(\n            $Example({ file: 'src/components/$Calculator.ts' })(\n              $Calculator({})\n            )({})\n          )\n        ),\n\n        $container(\n          match(quantumListRoute)(\n            $Example({ file: 'src/components/$QuantumList.ts' })(\n              $VirtualList({})\n            )({})\n          )\n        ),\n\n        $container(\n          match(countCountersRoute)(\n            $Example({ file: 'src/components/$CountCounters.ts' })(\n              $CountCounters({})\n            )({})\n          )\n        ),\n\n        $container(\n          match(todoAppRoute)(\n            $Example({ file: 'src/components/todo-app/$TodoApp.ts' })(\n              $TodoApp(\n                Array(1e2).fill(null).map((x, i) => createTodo('t-' + (i + 1)))\n              )({})\n            )({})\n          )\n        ),\n\n      )\n\n    ),\n\n\n    {\n      routeChanges\n    }\n\n  ]\n})\n\n\n","import { disposeNone, disposeWith } from '@most/disposable';\n// copied & modified from https://github.com/mostjs/x-animation-frame/tree/master\nclass FromCallbackSource {\n    constructor(callbackFunction, context) {\n        this.callbackFunction = callbackFunction;\n        this.context = context;\n    }\n    run(sink, scheduler) {\n        // very common that callback functions returns a destructor, perhaps a Disposable in a \"most\" case\n        const maybeDisposable = this.callbackFunction.bind(this.context)((ev) => {\n            sink.event(scheduler.currentTime(), ev);\n        });\n        if (maybeDisposable instanceof Function) {\n            return disposeWith(maybeDisposable, null);\n        }\n        if (maybeDisposable && 'dispose' in maybeDisposable && (maybeDisposable === null || maybeDisposable === void 0 ? void 0 : maybeDisposable.dispose) instanceof Function) {\n            return maybeDisposable;\n        }\n        return disposeNone();\n    }\n}\nexport const fromCallback = (cbf, context = null) => new FromCallbackSource(cbf, context);\n//# sourceMappingURL=fromCallback.js.map","import { component, fromCallback, O, style, $wrapNativeElement, $node } from '@aelea/core';\nimport { at, awaitPromises, combine, continueWith, delay, empty, filter, fromPromise, join, map, merge, multicast, now, recoverWith, skipRepeatsWith, startWith, switchLatest, take } from '@most/core';\nimport layoutSheet from '../style/layoutSheet';\nimport * as observer from '../utils/elementObservers';\nconst fetchJson = async (input, init) => (await fetch(input, init)).json();\nconst fetchMeta = (dependency, version) => fetchJson(`https://data.jsdelivr.com/v1/package/npm/${dependency}@${version}/flat`);\nconst packageQueryCache = new Map();\nconst packageLocalCache = new Map();\nasync function cacheGet(key, queryStore) {\n    const locallyStoredItem = packageLocalCache.get(key);\n    if (locallyStoredItem)\n        return locallyStoredItem;\n    const storedItem = localStorage.getItem(key);\n    if (storedItem) {\n        const parsedItem = JSON.parse(storedItem);\n        packageLocalCache.set(key, parsedItem);\n        return parsedItem;\n    }\n    const pendingQuery = packageQueryCache.get(key);\n    if (pendingQuery)\n        return pendingQuery;\n    const query = queryStore();\n    packageQueryCache.set(key, query);\n    const resp = await query;\n    packageLocalCache.set(key, resp);\n    localStorage.setItem(key, JSON.stringify(resp));\n    return resp;\n}\nexport async function fetchFileListContent(name, version = 'latest') {\n    const meta = (await fetchMeta(name, version)).files;\n    let dtsFiles = meta.filter(metaFile => /\\.d\\.ts$/.test(metaFile.name));\n    if (dtsFiles.length === 0) {\n        // if no .d.ts files found, fallback to .ts files\n        dtsFiles = meta.filter(metaFile => /\\.ts$/.test(metaFile.name));\n    }\n    if (dtsFiles.length === 0) {\n        throw new Error('No inline typings found.');\n    }\n    const dtsQueries = dtsFiles.map(async (file) => {\n        const content = await fetch(`https://cdn.jsdelivr.net/npm/${name}@${version}${file.name}`).then(r => r.text());\n        return { ...file, content: content.replace(/(} from '@)/g, `} from '%40`) };\n    });\n    return Promise.all(dtsQueries);\n}\nexport async function fetchAndCacheDependancyTree(name, version = 'latest') {\n    const pkgPath = `https://cdn.jsdelivr.net/npm/${name}@${version}/package.json`;\n    const pkg = await cacheGet(pkgPath, async () => {\n        var _a, _b;\n        const pkgJson = await fetchJson(pkgPath);\n        const dependencies = (_a = pkgJson === null || pkgJson === void 0 ? void 0 : pkgJson.dependencies) !== null && _a !== void 0 ? _a : {};\n        const files = await fetchFileListContent(name, version);\n        const typings = (_b = pkgJson.typings) !== null && _b !== void 0 ? _b : pkgJson.types;\n        return { files, dependencies, name, version, typings };\n    });\n    const depsQueries = Object.entries(pkg.dependencies).map(([pkgName, version]) => fetchAndCacheDependancyTree(pkgName, version.replace(/[\\^*]/, '')));\n    const dependencies = await Promise.all(depsQueries);\n    return { ...pkg, dependencies };\n}\nexport function defineModel(pkg, monacoGlobal) {\n    const pkgModelUri = monacoGlobal.Uri.parse(`file://root/node_modules/${pkg.name}/package.json`);\n    const model = monacoGlobal.editor.getModel(pkgModelUri);\n    if (!model) {\n        const dependencies = Object.entries(pkg.dependencies).reduce(((acc, [key, val]) => ({ ...acc, [key.replace(/^@/, `%40`)]: val })), {}); // https://github.com/microsoft/monaco-editor/issues/1306\n        const pakgDefJsonStr = JSON.stringify({\n            name: pkg.name,\n            version: pkg.version,\n            typings: pkg.typings,\n            dependencies\n        });\n        monacoGlobal.editor.createModel(pakgDefJsonStr, \"typescript\", pkgModelUri);\n        pkg.files.forEach(file => {\n            monacoGlobal.editor.createModel(file.content, \"typescript\", monacoGlobal.Uri.parse(`file://root/node_modules/${pkg.name}${file.name}`));\n        });\n    }\n}\nexport function definePackageTree(pkg, monacoGlobal) {\n    defineModel(pkg, monacoGlobal);\n    pkg.dependencies.forEach(pkg => {\n        definePackageTree(pkg, monacoGlobal);\n    });\n}\nconst whitespaceRegexp = /[\\n\\r\\s\\t]+/g;\nconst elementBecameVisibleEvent = O(observer.intersection(), filter(intersectionEvent => intersectionEvent[0].intersectionRatio > 0), take(1));\n// Before loading vs/editor/editor.main, define a global MonacoEnvironment that overwrites\n// the default worker url location (used when creating WebWorkers). The problem here is that\n// HTML5 does not allow cross-domain web workers, so we need to proxy the instantiation of\n// a web worker through a same-domain script\n// @ts-ignore\nwindow.MonacoEnvironment = {\n    getWorkerUrl: function () {\n        return `data:text/javascriptcharset=utf-8,${encodeURIComponent(`\n        self.MonacoEnvironment = {\n          baseUrl: 'https://cdn.jsdelivr.net/npm/monaco-editor@0.23.0/min/'\n        }\n        importScripts('https://cdn.jsdelivr.net/npm/monaco-editor@0.23.0/min/vs/base/worker/workerMain.js')`)}`;\n    }\n};\nexport async function asyncloadMonacoEditor() {\n    // @ts-ignore\n    const monacoQuery = import(/* webpackIgnore: true */ 'https://cdn.skypack.dev/pin/monaco-editor@v0.23.0-nVyIshjiDqruq90zejl0/mode=imports,min/optimized/monaco-editor.js');\n    const precacheAeleaDependanciesQuery = fetchAndCacheDependancyTree('@aelea/core', '0.6.0');\n    // @ts-ignore\n    const codiConQuery = new FontFace('codicon', `url('https://cdn.jsdelivr.net/npm/monaco-editor@0.23.0/min/vs/base/browser/ui/codicons/codicon/codicon.ttf')`);\n    const monacoGlobal = await monacoQuery;\n    const codiConFont = await codiConQuery;\n    const pkg = await precacheAeleaDependanciesQuery;\n    definePackageTree(pkg, monacoGlobal);\n    // @ts-ignore\n    document.fonts.add(codiConFont);\n    return { monacoGlobal, pkg };\n}\nlet monacoQuery = null;\nexport async function loadMonacoTSEditor() {\n    if (monacoQuery)\n        return monacoQuery;\n    monacoQuery = asyncloadMonacoEditor();\n    return monacoQuery;\n}\nlet monacoEntryFileId = 0;\nexport const $MonacoEditor = ({ code, config, override, containerStyle = { flex: 1 } }) => component(([sampleChange, change]) => {\n    const editorload = fromPromise(loadMonacoTSEditor());\n    const $editor = map(({ monacoGlobal }) => {\n        const editorElement = document.createElement('div');\n        monacoGlobal.languages.typescript.typescriptDefaults.setCompilerOptions({\n            ...monacoGlobal.languages.typescript.typescriptDefaults.getCompilerOptions(),\n            module: monacoGlobal.languages.typescript.ModuleKind.ESNext,\n            moduleResolution: monacoGlobal.languages.typescript.ModuleResolutionKind.NodeJs\n        });\n        const model = monacoGlobal.editor.createModel(code.replace(/(} from '@)/g, `} from '%40`), \"typescript\", monacoGlobal.Uri.parse(`file://root/test${++monacoEntryFileId}.ts`));\n        const ops = {\n            theme: 'vs-dark',\n            \"semanticHighlighting.enabled\": true,\n            minimap: { enabled: false },\n            overviewRulerLanes: 0,\n            lineNumbers: 'off',\n            glyphMargin: false,\n            folding: false,\n            lineDecorationsWidth: 15,\n            lineNumbersMinChars: 0,\n            hover: { delay: 0 },\n            padding: { top: 16, bottom: 16 },\n            renderLineHighlight: 'none',\n            renderIndentGuides: false,\n            scrollBeyondLastLine: false,\n            automaticLayout: false,\n            model,\n            ...config,\n        };\n        const instance = monacoGlobal.editor.create(editorElement, ops, override);\n        const updateHeight = () => {\n            if (ops.automaticLayout) {\n                const contentHeight = instance.getContentHeight();\n                editorElement.style.minHeight = `${contentHeight}px`;\n                instance.layout({ width: editorElement.clientWidth, height: contentHeight });\n                instance.layout();\n            }\n            else\n                instance.layout();\n        };\n        instance.onDidContentSizeChange(updateHeight);\n        let attempDuration = 50;\n        const getWorkerStream = O(continueWith(() => {\n            return fromPromise(monacoGlobal.languages.typescript.getTypeScriptWorker());\n        }), recoverWith(err => {\n            console.error(err);\n            attempDuration += 100;\n            return join(at(attempDuration, getWorkerStream));\n        }))(empty());\n        const $editor = $wrapNativeElement(editorElement)(O(layoutSheet.column, style({ ...containerStyle }), sampleChange(\n        // ensure we load editor only when it's visible on the screen\n        elementBecameVisibleEvent, map(async (elEvents) => {\n            const node = elEvents[0].target;\n            const modelChangeWithDelay = delay(10, fromCallback(model.onDidChangeContent, model)); // delay is required because change emits an event before diagnostics and other stuff are finished\n            const editorChanges = map(() => model.getValue(), modelChangeWithDelay);\n            const changesWithInitial = merge(now(model.getValue()), editorChanges);\n            const ignoreWhitespaceChanges = skipRepeatsWith((prev, next) => prev.replace(whitespaceRegexp, '') === next.replace(whitespaceRegexp, ''), changesWithInitial);\n            const tsModelChanges = awaitPromises(combine(async (modelChange, getWorker) => {\n                const worker = await getWorker(model.uri);\n                const semanticDiagnosticsQuery = worker.getSemanticDiagnostics(model.uri.toString());\n                const syntacticDiagnosticsQuery = worker.getSyntacticDiagnostics(model.uri.toString());\n                const semanticDiagnostics = await semanticDiagnosticsQuery;\n                const syntacticDiagnostics = await syntacticDiagnosticsQuery;\n                return { node, instance, monacoGlobal, worker, model, modelChange, semanticDiagnostics, syntacticDiagnostics };\n            }, ignoreWhitespaceChanges, getWorkerStream));\n            return tsModelChanges;\n        }), awaitPromises, join, multicast)))();\n        const disposeMonacoStub = { run: () => instance };\n        return merge($editor, disposeMonacoStub);\n    }, editorload);\n    return [\n        switchLatest(startWith($node(style(containerStyle))(), $editor)),\n        { change }\n    ];\n});\n//# sourceMappingURL=$MonacoEditor.js.map","import { awaitPromises, empty, map, never, switchLatest, filter, now, debounce, startWith } from '@most/core'\nimport { $custom, $Node, $text, Behavior, component, motion, O, style, styleInline } from '@aelea/core'\n\nimport { $column, $MonacoEditor, $row, layoutSheet, ModelChangeBehavior } from '@aelea/ui-components'\nimport { pallete, theme } from '@aelea/ui-components-theme'\n\n\ninterface IMonaco {\n  code: string\n  readOnly?: boolean\n}\n\n\nexport default ({ code = '', readOnly = true }: IMonaco) => component((\n  [sampleChange, change]: Behavior<ModelChangeBehavior, ModelChangeBehavior>\n) => {\n\n  const $loader = $row(style({ width: '2px', backgroundColor: 'rgb(43 52 55)' }))(\n    $row(\n      styleInline(\n        map(({ semanticDiagnostics, syntacticDiagnostics }) => {\n          return { backgroundColor: semanticDiagnostics.length || syntacticDiagnostics.length ? pallete.negative : pallete.description }\n        }, change)\n      ),\n      styleInline(\n        map(\n          s => ({ height: s + '%' }),\n          switchLatest(\n            map(xxx => {\n              return motion({ stiffness: 160, damping: 36, precision: .1 }, 0, now(100))\n            }, change)\n          )\n        )\n      ),\n      layoutSheet.flex,\n      style({ backgroundColor: pallete.description })\n    )()\n  )\n\n  const initalCodeBlockHeight = 24 + 20 + (code.split('\\n').length * 18)\n\n\n  return [\n    $column(layoutSheet.flex)(\n      $MonacoEditor({ code, config: { readOnly, automaticLayout: true, theme: theme.name === 'light' ? 'vs-light': 'vs-dark' }, containerStyle: { height: initalCodeBlockHeight + 'px' } })({\n        change: sampleChange()\n      }),\n      $row(style({ backgroundColor: pallete.background, minHeight: '30px' }))(\n        $loader,\n\n        $custom('render-here')(style({ padding: '10px 15px' }))(\n          switchLatest(\n            O(\n              debounce(500),\n              map(async ({ model, worker, semanticDiagnostics, syntacticDiagnostics }: ModelChangeBehavior): Promise<$Node> => {\n\n                if (semanticDiagnostics.length || syntacticDiagnostics.length) {\n                  return never()\n                }\n\n                const emittedFiles = await worker.getEmitOutput(model.uri.toString())\n                const file = emittedFiles.outputFiles[0].text\n                const refImports = file.replace(/(} from '%40)/g, `} from 'https://esm.run/@`)\n\n                const esModuleBlobUrl = URL.createObjectURL(new Blob([refImports], { type: 'text/javascript' }))\n                const esModule = await import(/* webpackIgnore: true */esModuleBlobUrl)\n\n                const value: $Node = esModule.default ?? empty()\n\n                return value\n              }),\n              awaitPromises,\n              filter(node => node !== never()),\n              startWith($text(style({ color: pallete.description, fontSize: '75%' }))('Loading Typescript Service...'))\n            )(change)\n          )\n        )\n      )\n    ),\n\n    { change }\n  ]\n})\n\n\n\n","import { $element, $node, $text, attr, Behavior, component, style } from '@aelea/core'\nimport { Route } from '@aelea/router'\nimport { $column, $row, layoutSheet } from '@aelea/ui-components'\nimport { pallete } from '@aelea/ui-components-theme'\n\nimport $Example from '../../components/$Example'\nimport $TSPeep from '../../components/typescript-notebook/$TSPeep'\n\n\n\ninterface Guide {\n  parentRoute: Route\n}\n\nexport default ({ parentRoute }: Guide) => component((\n  // []: Behavior<NodeChild, any>,\n  [sampleLinkClick, routeChanges]: Behavior<string, string>\n) => {\n\n  return [\n\n    $column(layoutSheet.spacingBig, layoutSheet.flex, style({ alignItems: 'center' }))(\n\n      $Example({ file: 'src/components/$QuantumList.ts' })(\n        $row(style({ border: `1px solid ${pallete.negative}`, padding: '10px' }))(\n          $text(style({ fontSize: '75%' }))(`WIP: still in progress, external imports name have been encoded because of Monaco editor issue: https://github.com/microsoft/monaco-editor/issues/1306. `)\n        ),\n\n        $node(\n          $text(`aelea uses a reactive toolkit called `),\n          $element('a')(style({ color: pallete.primary }), attr({ href: 'https://mostcore.readthedocs.io/en/latest/index.html' }))(\n            $text('@most/core')\n          ),\n          $text(` Some basic understanding of functional programming and typescript is required, if you use Visual Studio Code IDE these code blocks will look familiar`)\n        ),\n\n        $text(`The ultimate way to learn is to get your hands a little dirty, any changes in the code below will reflect it visually right below the code block`),\n\n        $TSPeep({\n          readOnly: false,\n          code:\n`import { $text } from '@aelea/core'\n\nexport default $text('Yellow World')`\n        })({}),\n\n        $text(`Nothing fancy yet, the \"default export\" renders a message and there is this \"$text\" function, aelea semantically prefixes anything that will eventually emits elements with $ sign, this is jsut for readability, we see its usefulness later on`),\n\n        $TSPeep({\n          readOnly: false,\n          code:\n`import { $text, $node, style } from '@aelea/core'\n\nconst colorStyle = style({ color: 'yellow' })\nconst containerStyle = style({ padding: '10px', display: 'block', border: '1px dashed yellow', borderRadius: '50px' })\n\nconst $container = $node(containerStyle, colorStyle)\n\nexport default $container(style({alignSelf: 'center'}))(\n    $container(\n        $text('Yellow World')\n    )\n)`\n        })({}),\n\n        $text(`in this guide we will be creating different types of Counters in different levels of complexity`),\n\n\n        $TSPeep({\n          readOnly: false,\n          code:\n`import { $text, $node } from '@aelea/core'\nimport { constant, map, periodic, scan } from '@most/core'\n\nconst eventEverySecond = periodic(1000)       // stream of undefined every 1000 milliseconds\nconst mapTo1 = constant(1, eventEverySecond)  // map that undefined into 1\n\nconst accumulate = scan((acc, one) => acc + one, 0, mapTo1)\nconst toString = map(String, accumulate)\n\n\nexport default $node(\n  $text(toString)\n)`\n        })({}),\n\n        $TSPeep({\n          readOnly: false,\n          code:\n`import { constant, map, merge, scan } from '@most/core'\nimport { $custom, $element, $text, Behavior, component, style, event, INode, runBrowser } from '@aelea/core'\n\n// composable style\nconst displayFlex = style({ display: 'flex' })\nconst spacingStyle = style({ gap: '16px' })\n\n// composable elements\nconst $row = $custom('row')(displayFlex)\nconst $column = $custom('column')(displayFlex, style({ flexDirection: 'column' }))\n\n// Component that outputs state(optionally), this is currently not used anywhere, see next example to see it being consumed\nexport default component((\n    [sampleIncrement, increment]: Behavior<INode, 1>,\n    [sampleDecrement, decrement]: Behavior<INode, -1>\n  ) => {\n\n    return [ // Component has to return [$Node, Behavior(optionally)] in the next example we will use these outputted behaviors\n\n      $row(spacingStyle)(\n        $column(\n          $element('button')(sampleIncrement(event('click'), constant(1)))(\n            $text('+')\n          ),\n          $element('button')(sampleDecrement(event('click'), constant(-1)))(\n            $text('-')\n          )\n        ),\n        $text(style({ fontSize: '64px' }))(\n          map(String, scan((current: number, x: number) => current + x, 0, merge(increment, decrement)))\n        )\n      ),\n\n      { increment, decrement }\n    ]\n  }\n)({})`\n        })({})\n\n      )({}),\n\n\n    )\n\n  ]\n})\n\n","import { $element, $text, attr, Behavior, component, style, stylePseudo } from '@aelea/core'\nimport { $icon, $row, layoutSheet } from '@aelea/ui-components'\nimport { $Link } from '../components/$Link'\nimport { $github } from '../elements/$icons'\nimport { Route } from '@aelea/router'\nimport { pallete } from '@aelea/ui-components-theme'\n\n\n\n\ninterface MainMenu {\n  parentRoute: Route\n}\n\nexport default ({ parentRoute }: MainMenu) => component((\n  [sampleRouteChange, routeChange]: Behavior<string, string>\n) => {\n\n  const guideRoute = parentRoute.create({ fragment: 'guide', title: 'Guide' })\n  const examplesRoute = parentRoute.create({ fragment: 'examples', title: 'Examples' })\n\n  const $seperator = $text(style({ color: pallete.description, pointerEvents: 'none' }))('|')\n  return [\n    $row(layoutSheet.spacingSmall, style({ alignItems: 'center', placeContent: 'center' }))(\n\n      // $Link({ $content: $text('Why?!'), href: '/drag-and-sort', route: guideRoute })({\n      //   click: sampleLinkClick()\n      // }),\n\n      $Link({ $content: $text('Developer\\'s Guide'), url: '/p/guide', route: guideRoute })({\n        click: sampleRouteChange()\n      }),\n      $seperator,\n      $Link({ $content: $text('Examples'), url: '/p/examples/drag-and-sort', route: examplesRoute })({\n        click: sampleRouteChange()\n      }),\n      $seperator,\n\n      $element('a')(stylePseudo(':hover', { fill: pallete.primary }), layoutSheet.displayFlex, style({ padding: '0 4px' }), attr({ href: 'https://github.com/nissoh/aelea' }))(\n        $icon({ $content: $github, width: 25, viewBox: `0 0 1024 1024` })\n      ),\n\n    ),\n\n\n    { routeChange }\n  ]\n})\n\n\n","import { $node, $text, Behavior, component, eventElementTarget, style } from '@aelea/core'\nimport * as router from '@aelea/router'\nimport { $Anchor } from '@aelea/router'\nimport { $column, $icon, $row, layoutSheet } from '@aelea/ui-components'\nimport { map, merge, multicast, now } from '@most/core'\nimport { $aeleaLogo } from '../elements/$icons'\nimport { fadeIn } from '../components/transitions/enter'\nimport $Examples from './examples/$Examples'\nimport $Guide from './guide/$Guide'\nimport { designSheet } from '@aelea/ui-components'\nimport $MainMenu from './$MainMenu'\nimport { $Picker } from '../components/$ThemePicker'\nimport { dark, light } from '../common/theme'\nimport { pallete } from '@aelea/ui-components-theme'\n\n\n\n\nconst popStateEvent = eventElementTarget('popstate', window)\nconst initialLocation = now(document.location)\nconst requestRouteChange = merge(initialLocation, popStateEvent)\nconst locationChange = map((location) => {\n  return location\n}, requestRouteChange)\n\n\ninterface Website {\n  baseRoute: string\n}\n\nexport default ({ baseRoute }: Website) => component((\n  [sampleLinkClick, routeChanges]: Behavior<string, string>\n) => {\n\n  const changes = merge(locationChange, multicast(routeChanges))\n  const fragmentsChange = map(() => {\n    const trailingSlash = /\\/$/\n    const relativeUrl = location.href.replace(trailingSlash, '').split(document.baseURI.replace(trailingSlash, ''))[1]\n    const frags = relativeUrl.split('/')\n    frags.splice(0, 1, baseRoute)\n    return frags\n  }, changes)\n\n  const rootRoute = router.create({ fragment: baseRoute, title: 'aelea', fragmentsChange })\n  const pagesRoute = rootRoute.create({ fragment: 'p', title: 'aelea' })\n  const guideRoute = pagesRoute.create({ fragment: 'guide', title: 'Guide' })\n  const examplesRoute = pagesRoute.create({ fragment: 'examples', title: 'Examples' })\n\n  return [\n    $node(designSheet.main, style({ backgroundImage: `radial-gradient(at center center, ${pallete.middleground} 50vh, ${pallete.background})` }))(\n      router.match(rootRoute)(\n        $row(layoutSheet.flex, layoutSheet.spacingBig, style({ alignContent: 'center', alignItems: 'center', placeContent: 'center', textAlign: 'center', padding: '0 30px', }))(\n          fadeIn(\n            $column(style({ alignItems: 'center', maxWidth: '550px' }), layoutSheet.spacing)(\n              $Anchor({ $content: $icon({ $content: style({ fill: pallete.foreground }, $aeleaLogo), width: 237, height: 115, viewBox: `0 0 147 90` }), url: '/', route: rootRoute })({\n                click: sampleLinkClick()\n              }),\n              $text(`\"aelea\", is a UI Framework for reactive event programming`),\n              $text(`It helps you write composable and performant building blocks by composing functional event streams`),\n\n              $MainMenu({ parentRoute: pagesRoute })({\n                routeChange: sampleLinkClick()\n              })\n            )\n          )\n        )\n      ),\n\n      router.contains(pagesRoute)(\n        $column(layoutSheet.spacingBig, style({ maxWidth: '870px', width: '100%', margin: '0 auto', paddingBottom: '45px' }))(\n          $row(style({ placeContent: 'space-between', padding: '0 15px' }))(\n            $Anchor({ $content: $icon({ $content: $aeleaLogo, width: 137, height: 115, viewBox: `0 0 147 90` }), url: '/', route: rootRoute })({\n              click: sampleLinkClick()\n            }),\n            $MainMenu({ parentRoute: pagesRoute })({\n              routeChange: sampleLinkClick()\n            })\n          ),\n          router.match(guideRoute)(\n            $Guide({ parentRoute: rootRoute })({})\n          ),\n          router.contains(examplesRoute)(\n            $Examples({ router: examplesRoute })({\n              routeChanges: sampleLinkClick()\n            })\n          )\n        )\n      ),\n\n\n      $Picker([light, dark])({})\n    )\n\n  ]\n})\n\n\n","import './assignThemeSync'\n// @ts-ignore\nimport { } from 'global.d.ts'\n\nimport { runBrowser } from '@aelea/core'\nimport $Website from './pages/$Website'\n\n\nrunBrowser({ rootNode: document.body })(\n  $Website({ baseRoute: '' })({})\n)","import { $svg, attr, Behavior, component, event, O, style, stylePseudo } from \"@aelea/core\"\nimport { $icon } from \"@aelea/ui-components\"\nimport { changeTheme, pallete, Theme, THEME_PALLETE_SELECTED_KEY } from \"@aelea/ui-components-theme\"\nimport { merge, tap } from \"@most/core\"\n\n\n\n\nexport const $Picker = (themes: Theme[]) => component((\n  [sampleChangeThemeEffect, changeThemeEffect]: Behavior<any, any>\n) => {\n\n  const current = JSON.parse(localStorage.getItem(THEME_PALLETE_SELECTED_KEY)!) as Theme\n\n  const applyOps = O(\n    style({ position: 'absolute', left: '15px', top: '15px', cursor: 'pointer' }),\n    stylePseudo(':hover', { fill: pallete.primary }),\n    sampleChangeThemeEffect(\n      event('click'),\n      tap(() => {\n        const themeNameList = themes.map(t => t.name)\n        const toIdx = (themeNameList.indexOf(current.name) + 1) % themes.length\n        const toTheme = themes[toIdx]\n\n        changeTheme(toTheme.name, toTheme.pallete)\n      })\n    )\n  )\n\n  return [\n    merge(\n      applyOps(\n        $icon({\n          $content: $svg('path')(attr({ d: 'M22.8 11.039h-1.176c-.664 0-1.2.43-1.2.961 0 .53.536.959 1.2.959H22.8c.662 0 1.2-.429 1.2-.959s-.539-.961-1.2-.961zM12 5.4A6.58 6.58 0 005.4 12a6.58 6.58 0 006.6 6.6 6.58 6.58 0 006.6-6.6c0-3.661-2.941-6.6-6.6-6.6zm0 11.4c-2.653 0-4.8-2.15-4.8-4.8 0-2.653 2.147-4.8 4.8-4.8a4.8 4.8 0 010 9.6zM3.6 12c0-.53-.539-.961-1.2-.961H1.2c-.664 0-1.2.43-1.2.961 0 .53.536.959 1.2.959h1.2c.661 0 1.2-.43 1.2-.959zM12 3.6c.53 0 .959-.536.959-1.2V1.2c0-.664-.43-1.2-.959-1.2-.53 0-.961.536-.961 1.2v1.2c0 .664.43 1.2.961 1.2zm0 16.8c-.53 0-.961.536-.961 1.2v1.2c0 .664.43 1.2.961 1.2.53 0 .959-.536.959-1.2v-1.2c0-.664-.43-1.2-.959-1.2zm8.838-15.88c.47-.47.545-1.154.17-1.528-.374-.375-1.06-.298-1.526.171l-.84.839c-.47.47-.545 1.153-.17 1.528.374.374 1.06.297 1.527-.172l.839-.839zM4.001 18.64l-.84.84c-.47.47-.545 1.152-.17 1.526.374.374 1.059.3 1.526-.17.13-.128.711-.71.84-.838.469-.47.545-1.153.17-1.529-.374-.375-1.06-.296-1.526.17zm.517-15.478c-.468-.47-1.153-.546-1.528-.172-.374.375-.297 1.06.17 1.53.13.128.711.71.84.838.469.47 1.152.546 1.526.172.374-.375.299-1.06-.17-1.528-.128-.13-.708-.712-.838-.84zm14.123 16.837l.84.839c.469.47 1.152.544 1.526.172.375-.375.299-1.06-.17-1.528l-.839-.839c-.47-.469-1.153-.546-1.529-.171-.375.374-.297 1.058.172 1.527z' }))()\n        })\n      ),\n      changeThemeEffect\n    )\n    \n  ]\n})\n"],"sourceRoot":""}