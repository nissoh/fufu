{"version":3,"sources":["webpack://@aelea/website/./src/assignThemeSync.ts","webpack://@aelea/website/./src/common/theme.ts","webpack://@aelea/website/../.yarn/cache/construct-style-sheets-polyfill-npm-2.4.16-1c8c5de5af-340007116f.zip/node_modules/construct-style-sheets-polyfill/dist/adoptedStyleSheets.js","webpack://@aelea/website/webpack/bootstrap","webpack://@aelea/website/webpack/runtime/define property getters","webpack://@aelea/website/webpack/runtime/hasOwnProperty shorthand","webpack://@aelea/website/../.yarn/cache/@most-prelude-npm-1.8.0-f9da233011-64ef6318fd.zip/node_modules/@most/prelude/dist/index.es.js","webpack://@aelea/website/../.yarn/cache/@most-scheduler-npm-1.3.0-e34ae83921-942a3d0ac9.zip/node_modules/@most/scheduler/dist/index.es.js","webpack://@aelea/website/../.yarn/cache/@most-disposable-npm-1.3.0-e16fa0d39d-eb88a38a85.zip/node_modules/@most/disposable/dist/index.es.js","webpack://@aelea/website/../.yarn/cache/@most-core-npm-1.6.1-3baa05d523-bc452f048d.zip/node_modules/@most/core/dist/index.es.js","webpack://@aelea/website/../core/.dist/esm/utils/styleUtils.js","webpack://@aelea/website/../core/.dist/esm/utils.js","webpack://@aelea/website/../core/.dist/esm/utils/SettableDisposable.js","webpack://@aelea/website/../core/.dist/esm/run.js","webpack://@aelea/website/../core/.dist/esm/combinators/event.js","webpack://@aelea/website/../core/.dist/esm/combinators/tether.js","webpack://@aelea/website/../core/.dist/esm/source/behavior.js","webpack://@aelea/website/../core/.dist/esm/combinators/component.js","webpack://@aelea/website/../core/.dist/esm/source/node.js","webpack://@aelea/website/../core/.dist/esm/combinators/style.js","webpack://@aelea/website/../router/.dist/esm/resolveUrl.js","webpack://@aelea/website/../core/.dist/esm/combinators/attribute.js","webpack://@aelea/website/../router/.dist/esm/components/$Anchor.js","webpack://@aelea/website/../ui-components-theme/.dist/esm/staticThemeService.js","webpack://@aelea/website/../ui-components/.dist/esm/style/layoutSheet.js","webpack://@aelea/website/../ui-components/.dist/esm/elements/$elements.js","webpack://@aelea/website/../ui-components/.dist/esm/elements/$icon.js","webpack://@aelea/website/./src/elements/$icons.ts","webpack://@aelea/website/../core/.dist/esm/combinators/animate.js","webpack://@aelea/website/./src/components/transitions/enter.ts","webpack://@aelea/website/./src/components/$Example.ts","webpack://@aelea/website/./src/components/$Link.ts","webpack://@aelea/website/../ui-components/.dist/esm/utils/state.js","webpack://@aelea/website/../ui-components/.dist/esm/utils/elementObservers.js","webpack://@aelea/website/../ui-components/.dist/esm/utils/color.js","webpack://@aelea/website/../ui-components/.dist/esm/components/overlay/$Popover.js","webpack://@aelea/website/../ui-components/.dist/esm/components/form/form.js","webpack://@aelea/website/../ui-components/.dist/esm/style/designSheet.js","webpack://@aelea/website/../ui-components/.dist/esm/components/form/$Button.js","webpack://@aelea/website/./src/elements/$common.ts","webpack://@aelea/website/../ui-components/.dist/esm/components/form/$ButtonIcon.js","webpack://@aelea/website/../ui-components/.dist/esm/components/form/$Field.js","webpack://@aelea/website/../ui-components/.dist/esm/components/form/$TextField.js","webpack://@aelea/website/../ui-components/.dist/esm/components/$VirtualScroll.js","webpack://@aelea/website/./src/pages/examples/atomicSwap/common.ts","webpack://@aelea/website/./src/pages/examples/atomicSwap/state.ts","webpack://@aelea/website/./src/pages/examples/atomicSwap/$TokenInput.ts","webpack://@aelea/website/./src/pages/examples/atomicSwap/$TokenList.ts","webpack://@aelea/website/./src/pages/examples/atomicSwap/$AtomicSwap.ts","webpack://@aelea/website/../ui-components/.dist/esm/components/form/$Slider.js","webpack://@aelea/website/../ui-components/.dist/esm/components/$NumberTicker.js","webpack://@aelea/website/./src/pages/examples/calculator/$Calculator.ts","webpack://@aelea/website/./src/pages/examples/count-counters/$Counter.ts","webpack://@aelea/website/./src/pages/examples/count-counters/$CountCounters.ts","webpack://@aelea/website/../ui-components/.dist/esm/components/$Sortable.js","webpack://@aelea/website/./src/pages/examples/dragList/$DragList.ts","webpack://@aelea/website/./src/pages/examples/overlay/popoverExample.ts","webpack://@aelea/website/../ui-components/.dist/esm/components/$Table.js","webpack://@aelea/website/./src/pages/examples/table/$TableExample.ts","webpack://@aelea/website/./src/pages/examples/theme/$Theme.ts","webpack://@aelea/website/./src/pages/examples/todo-app/$CreateTodo.ts","webpack://@aelea/website/../ui-components/.dist/esm/components/form/$Checkbox.js","webpack://@aelea/website/./src/pages/examples/todo-app/$TodoItem.ts","webpack://@aelea/website/./src/pages/examples/todo-app/$TodoApp.ts","webpack://@aelea/website/./src/pages/examples/virtual-scroll/$VirtualScrollExample.ts","webpack://@aelea/website/./src/pages/examples/$Examples.ts","webpack://@aelea/website/../core/.dist/esm/source/fromCallback.js","webpack://@aelea/website/../ui-components/.dist/esm/components/$MonacoEditor.js","webpack://@aelea/website/./src/components/typescript-notebook/$TSPeep.ts","webpack://@aelea/website/./src/pages/guide/$Guide.ts","webpack://@aelea/website/./src/pages/$MainMenu.ts","webpack://@aelea/website/./src/pages/$Website.ts","webpack://@aelea/website/./src/website-run.ts","webpack://@aelea/website/./src/components/$ThemePicker.ts"],"names":["THEME_PALLETE_SELECTED_KEY","localStorage","getItem","preferance","self","matchMedia","matches","defaultTheme","setItem","JSON","stringify","light","name","pallete","primary","message","background","horizon","middleground","foreground","positive","negative","indeterminate","dark","document","hasShadyCss","window","ShadyCSS","nativeShadow","deferredStyleSheets","deferredDocumentStyleElements","deferredAdopters","adoptedSheetsRegistry","WeakMap","sheetMetadataRegistry","locationRegistry","shadowRootMap","observerRegistry","appliedActionsCursorRegistry","state","loaded","frame","body","CSSStyleSheet","OldCSSStyleSheet","importPattern","illegalInvocation","ConstructStyleSheet","basicStyleElement","createElement","appendChild","head","disabled","push","set","this","adopters","Map","actions","Constructor","protoProps","_proto","prototype","replace","contents","sanitized","rejectImports","has","TypeError","get","innerHTML","updateAdopters","Promise","resolve","ex","reject","replaceSync","key","sheet","cssRules","_defineProperties","forEach","method","args","arguments","_sheetMetadataRegistr5","result","apply","styleElement","Object","defineProperty","Symbol","hasInstance","configurable","value","instanceOfStyleSheet","updatePrototype","adoptedStyleSheetAccessors","sheets","oldSheets","container","locationType","Array","isArray","every","uniqueSheets","filter","index","indexOf","checkAndPrepare","location","isDocumentLoading","isConnected","contains","requestAnimationFrame","adoptStyleSheets","getAdoptedStyleSheet","i","len","length","observer","disconnect","parentNode","removeChild","observe","removeExcludedStyleSheets","Document","ShadowRoot","attachShadow","Element","createObserver","initAdoptedStyleSheets","addEventListener","initPolyfill","target","props","descriptor","enumerable","writable","readyState","documentElement","imports","match","sheetContent","console","warn","_import","proto","DOMException","_sheetMetadataRegistr","instance","constructor","newStyles","createDocumentFragment","elementToAdopt","cssText","insertBefore","lastChild","_i","_len","_sheetMetadataRegistr2","_adopters","adoptedStyleElement","cursor","_i2","_len2","_actions$_i","adoptAndRestoreStylesOnMutationCallback","mutations","_mutations$i","addedNodes","removedNodes","iter","createNodeIterator","NodeFilter","SHOW_ELEMENT","node","shadowRoot","adoptedStyleSheets","FILTER_ACCEPT","FILTER_REJECT","nextNode","MutationObserver","observerTool","childList","subtree","iframe","hidden","contentWindow","fragment","firstChild","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","d","definition","o","obj","prop","hasOwnProperty","call","append","x","a","l","b","reduce","f","z","r","remove","j","unsafeRemove","findIndex","id","g","curried","curry3","c","ScheduledTaskImpl","time","localOffset","period","task","scheduler","active","run","error","e","dispose","cancel","RelativeScheduler","origin","currentTime","scheduleTask","delay","relative","cancelAll","runTask","SchedulerImpl","timer","timeline","_this","_runReadyTasksBound","_runReadyTasks","_timer","_nextArrival","Infinity","now","Math","max","st","add","_scheduleNextRun","offset","_reschedule","removeAll","isEmpty","_unschedule","clearTimer","nextArrival","_scheduleNextArrival","setTimer","runTasks","TimelineImpl","tasks","insertByTime","binarySearch","getTime","events","at","splice","removeAllFrom","t","slice","runReadyTasks","timeslots","newTimeslot","timeslot","spliceEvent","addEvent","insertAtTimeslot","scheduledTask","floor","sortedArray","mid","y","lo","hi","ClockTimer","clock","_clock","dt","Asap","then","defer","runAsap","setTimeout","clearTimeout","RelativeClock","HRTimeClock","hrtime","hrt","clockRelativeTo","asap","cancelTask","schedulerRelativeTo","predicate","newDefaultTimer","performance","process","Date","NONE","DisposeNone","disposeOnce","disposable","DisposeOnce","disposed","resource","DisposeWithImpl","_dispose","_resource","disposeAll","ds","merged","DisposeAll","disposeBoth","d1","d2","isDisposeNone","al","bl","concat","disposables","throwIfErrors","disposeCollectErrors","appendIfError","errors","DisposeAllError","Error","captureStackTrace","stack","formatErrorStacks","create","formatErrorStack","s","tryDispose","sink","extendStatics","setPrototypeOf","__proto__","p","__extends","__","fatalError","rethrow","propagateTask","PropagateRunEventTask","propagateEventTask","PropagateEventTask","propagateEndTask","PropagateEndTask","propagateErrorTask","PropagateErrorTask","PropagateTask","runIfActive","_super","runEvent","event","end","empty","EMPTY","isCanonicalEmpty","stream","containsCanonicalEmpty","streams","some","Empty","NEVER","Never","At","runAt","SettableDisposable","setDisposable","RunEffectsSink","runStream","_end","_error","_disposable","_t","RelativeSink","withLocalTime","WithLocalTime","source","relativeSink","Pipe","Loop","stepper","seed","step","LoopSink","Scan","ScanSink","continueWith","ContinueWith","ContinueWithSink","startNext","continue","Filter","FilterSink","and","q","FilterMap","FilterMapSink","MapSink","Tap","TapSink","IndexSink","invoke","combine","stream1","stream2","combineArray","Combine","sources","sinks","mergeSink","CombineSink","indexSink","awaiting","values","hasValue","fill","activeCount","indexedValue","updateReady","mergeConcurrently","concurrency","mergeMapConcurrently","MergeConcurrently","Outer","pending","current","addInner","startInner","initInner","innerSink","Inner","mapAndRun","checkEnd","endInner","inner","shift","outer","join","mergeArray","mergeStreams","withoutCanonicalEmpty","Merge","appendSources","isNotCanonicalEmpty","MergeSink","indexValue","snapshot","sampler","Snapshot","sampleSink","SnapshotSink","valuesDisposable","latest","samplerDisposable","LatestValueSink","boundsFrom","unsafeMin","unsafeMax","min","take","n","start","sliceBounds","bounds","isSliceEmpty","commuteMapSlice","Slice","fuseSlice","createSlice","mapStream","sliceStream","b1","b2","sliceSink","SliceSink","skip","TakeWhile","takeWhileSink","TakeWhileSink","SkipWhile","SkipWhileSink","skipping","SkipAfter","SkipAfterSink","zipItems","items","ZipItems","keepLeft","ZipItemsSink","Queue","tail","capacityMask","list","growArray","shrinkArray","copyArray","newArray","zipArray","Zip","buffers","zipSink","ZipSink","buffer","ready","emitZipped","ended","map","switchLatest","Switch","switchSink","SwitchSink","disposeCurrent","Segment","disposeInner","errorInner","skipRepeats","skipRepeatsWith","same","equals","SkipRepeats","SkipRepeatsSink","init","until","signal","Until","since","Since","maxSignal","UntilSink","minSignal","LowerBoundSink","SinceSink","allow","Delay","delaySink","DelaySink","throttle","commuteMapThrottle","Throttle","fuseThrottle","throttleStream","ThrottleSink","Debounce","DebounceSink","DebounceTask","handleEventFromTask","awaitPromises","Await","fromPromise","promise","AwaitSink","eventBound","endBound","errorBound","queue","handlePromise","catch","SafeSink","disable","tryEvent","tryEnd","RecoverWith","RecoverWithSink","nextSink","_startNext","_continue","Multicast","MulticastSource","MulticastDisposable","err","loop$1","scan$1","initial","startWith$1","map$1","constant$1","tap$1","chain$1","fs","xs","continueWith$1","merge$1","combine$1","combineArray$1","sample$1","snapshot$1","filter$1","skipRepeatsWith$1","take$1","skip$1","skipAfter$1","until$1","delay$1","timeWindow","delayTime","debounce$1","recoverWith$1","styleObjectAsString","styleObj","entries","val","toLowerCase","useStyleRule","cacheService","styleDefinition","properties","cachedRuleIdx","cache","stylesheet","namespace","insertRule","isFunction","Function","nullSink","_","O","fns","reduceRight","initialDiposable","BranchEffectsSink","env","segmentPosition","segmentsCount","segmentsSlotsMap","element","slot","disposableBranch","delete","nodeName","sIdx","insertAt","insertAscending","parent","child","prepend","children","appendToSlot","style","keys","selector","classList","stylePseudo","styleDeclaration","pseudo","rule","useStylePseudoRule","class","attributes","applyAttrFn","styleBehavior","disposeStyle","sb","latestClass","previousCssRule","styleObject","cashedCssClas","attributesBehavior","attrs","attr","newDisp","BranchChildrenSinkList","$segments","$child","attrKey","removeAttribute","setAttribute","String","eventElementTarget","eventType","options","cb","removeEventListener","ns","capture","SourceSink","latestValue","tetherSinkList","TetherSink","super","Tether","sourceSinkList","disp","srcIdx","sourceTetherSink","sinkIdx","BehaviorSource","queuedSamplers","sample","ops","tetherSource","tether","bops","sourcesMap","runBehavior","sinkSrc","sinkMap","_a","behavior","ss","component","inputComp","outputTethers","behaviors","view","outputSources","outputDisposables","k","consumerSampler","outputDisposable","$svg","branch","createElementNS","$element","$custom","$node","$wrapNativeElement","rootNode","$text","$textFn","postOp","input","NodeSource","sourceValue","sourceOp","text","createTextNode","sourceOpValue","$branch","styleInline","applyInlineStyleStream","styleInput","pseudoClass","fragmentsChange","title","resolveRoute","next","prev","pathChange","parentFragments","fragments","fragIdx","diff","isMatched","evt","lastTarget","miss","frag","path","RegExp","Boolean","route","exactMatch","isMatch","unmatch","attrBehavior","$anchor","textDecoration","$Anchor","url","$content","click","clickTether","focus","focusTether","href","clickEv","preventDefault","pathName","currentTarget","HTMLAnchorElement","pathname","history","pushState","blur","selected","parse","theme","stretch","position","top","bottom","right","left","spacingTiny","gap","spacingSmall","spacing","spacingBig","flex","displayFlex","display","row","flexDirection","column","rowFlex","columnFlex","$row","layoutSheet","$column","elevation2","border","boxShadow","$card","padding","backgroundColor","$seperator","minHeight","minWidth","$icon","width","height","viewBox","$trash","$aeleaLogo","$github","AnimationFrameSource","afp","requestTime","rafId","eventThenEnd","fid","cancelAnimationFrame","responseTime","nextAnimationFrame","animationFrames","MOTION_NO_WOBBLE","stiffness","damping","precision","MOTION_STIFF","motion","motionEnvironment","initialState","change","motionEnv","ma","motionState","velocity","frames","fps","delta","acceleration","newVelocity","newPosition","settled","abs","stepFrame","fadeIn","slideIn","removeStyle","opacity","transform","slide","animation","config","$Link","styles","containsTether","color","isActive","isFocus","anchorOps","StateSink","latestvalue","ReplayLatest","hasInitial","startWithReplay","replayLatest","intersection","intersectionObserver","IntersectionObserver","el","unobserve","validRGB","hexAlpha","test","hexCode","hex","parseInt","substring","convertHexToRGBA","$Popover","$$popContent","dismiss","$target","overlayClick","overlayClickTether","targetIntersection","targetIntersectionTether","popoverContentDimension","popoverContentDimensionTether","popoverContentIntersection","popoverContentIntersectionTether","$$popContentMulticast","$overlay","streamList","combineArrayMap","contentResize","intersectionContentRect","IntersectiontargetRect","intersectionRect","contentRect","backgroundImage","contentOps","ro","ResizeObserver","rect","isUp","innerHeight","zIndex","dismissOverlay","$popover","targetOp","interactionOp","src","dismissOp","activeElement","$label","fontFamily","fontWeight","fontSize","customScroll","control","outline","flexShrink","main","overflowY","margin","scrollbarColor","scrollbarWidth","borderBottom","paddingBottom","marginTop","btn","alignItems","$Button","focusStyle","interactionTether","dismissstyle","dismissTether","designSheet","pointerEvents","borderColor","$button","$TrashBtn","borderRadius","iconOp","$alert","$Field","fieldStyle","validation","inputOp","blurTether","changeTether","alert","multicastValidation","arrgs","idx","combineState","inputEv","HTMLInputElement","$TextField","valueTether","hint","fieldOp","containerOp","$messageLabel","$hint","msg","negativeStyle","$message","alignSelf","labelStyle","label","$defaultLoader","$VirtualScroll","dataSource","containerOps","$loading","intersecting","intersectingTether","multicastDatasource","scrollReuqestWithInitial","$container","overflow","intersectedLoader","threshold","entryList","entry","isIntersecting","$observer","newLocal","loadState","data","$show","$itemLoader","pageSize","$items","scrollRequest","$path","$caretDown","$caretDblDown","$circle","$xrd","$btc","$bnb","$eth","$gaugeMetric","size","styleCSS","animateChange","attrAniamtion","strokeDasharray","stroke","strokeWidth","tokenList","address","symbol","balance","$TokenInput","token","changeInput","switchTokenPopover","switchTokenPopoverTether","switchToken","switchTokenTether","$tokenList","choose","chooseTether","scrollRequestTether","filterListInput","filterListInputTether","filterWithInitial","pageNumber","find","toLocaleLowerCase","objectValuesContainsText","changeTokenBehavior","toLocaleString","borderBottomColor","pattern","inputmode","placeholder","$AtomicSwapExample","fromInputValueChange","fromInputValueChangeTether","clickOnDivide","clickOnDivideTether","divideBySlider","divideByPercentageTether","switchTokenSource","switchTokenSourceTether","balanceChange","fromInputValueChangeWithInitial","divideByInput","Number","divideBalanceBySlider","divide","replayDivideControls","$allocateDivisionPopover","sliderThunmbStyle","appearance","transition","type","$Slider","placeContent","Direction","getDetlaSlotIdex","$NumberTicker","value$","incrementColor","decrementColor","textStyle","slots","uniqueValues$","incrementMulticast","changeStr","dir","pos","INCREMENT","DECREMENT","currentStr","split","dirStyleMap","decayColor","extractValue","str","$plus","justifyContent","placeholderZero","XTether","YTether","increment","incrementTether","decrement","decrementTether","$AddBtn","sumAdd","addedCounter","addedCounterTether","disposeCounter","disposeCounterTether","counterIncrement","countersIncrementTether","counterDecrement","countersDecrementTether","disposedCounterCount","disposedCounterCountTether","sumWithInitial","totalCount","addCounter","removeTether","valueChange","valueChangeTether","$Counter","swap","arr","currentIdx","newArr","$dragItem","order","orderTether","$list","itemHeight","orderChange","orderChangeTether","listLength","containerHeight","orderMulticat","$listChangesWithInitial","draggingMotion","userSelect","$item","dragY","dragYTether","multicastedDrag","isDraggingStream","isDragging","iHeight","yMotion","$draggedItem","yDragPosition","applyTransformStyle","ypos","scale","applyBoxShadowStyle","shadow","startEv","drag","move","ev","pointerEvent","from","clientY","to","round","isPositionChange","$PopoverExample","pop","popTether","popCard","popCardTether","countUp","countUpTether","countDown","countDownTether","count","$popContent","$$popContentCard","elipsisTextOverflow","textOverflow","whiteSpace","tableCellStyle","$headerCell","$bodyCell","$rowContainer","$rowHeaderContainer","$TableExample","requestList","requestListTether","columns","$header","col","_b","cellStyle","header","rowData","$body","getPallete","colors","$Theme","themeDef","$Pallete","iid","addTether","inputChange","inputChangeTether","inputState","valueChahnges","completed","$Checkbox","check","checkTether","ch","$checkInput","checked","containerStyle","rowStyle","$VirtualScrollExample","delayResponse","delayResponseTether","filterTether","PAGE_SIZE","formatNumber","Intl","NumberFormat","format","initialDelayResponse","delayWithInitial","stubbedData","random","toString","dataSourceFilter","requestNumber","pageStart","pageEnd","array","filterLowercase","filterArrayByText","filterText","debouncedFilterText","maxHeight","router","routeChanges","linkClickTether","dragAngDropRoute","todoAppRoute","countCountersRoute","virtualScrollRoute","calculatorRoute","tableRoute","popoverRoute","themeRoute","atomicSwapRoute","$Example","$DragList","$Calculator","$CountCounters","todos","newTodo","createTodoTether","showCompletedList","showCompletedListTether","showCompleteState","$CreateTodo","todo","completedTether","todoCompleted","onlyCompleted","isCompleted","complete","completeTether","textTether","$TodoItem","FromCallbackSource","callbackFunction","context","maybeDisposable","bind","fetchJson","async","fetch","json","packageQueryCache","packageLocalCache","fetchAndCacheDependancyTree","version","pkgPath","pkg","queryStore","locallyStoredItem","storedItem","parsedItem","pendingQuery","query","pkgJson","dependencies","files","meta","dependency","fetchMeta","dtsFiles","metaFile","dtsQueries","file","content","all","fetchFileListContent","typings","types","resp","cacheGet","depsQueries","pkgName","definePackageTree","monacoGlobal","pkgModelUri","Uri","editor","getModel","acc","pakgDefJsonStr","createModel","defineModel","whitespaceRegexp","elementBecameVisibleEvent","intersectionEvent","intersectionRatio","MonacoEnvironment","getWorkerUrl","encodeURIComponent","monacoQuery","loadMonacoTSEditor","import","precacheAeleaDependanciesQuery","codiConQuery","FontFace","codiConFont","fonts","asyncloadMonacoEditor","monacoEntryFileId","$MonacoEditor","code","override","editorload","$editor","editorElement","languages","typescript","typescriptDefaults","setCompilerOptions","getCompilerOptions","ModuleKind","ESNext","moduleResolution","ModuleResolutionKind","NodeJs","model","minimap","enabled","overviewRulerLanes","lineNumbers","glyphMargin","folding","lineDecorationsWidth","lineNumbersMinChars","hover","renderLineHighlight","renderIndentGuides","scrollBeyondLastLine","automaticLayout","onDidContentSizeChange","contentHeight","getContentHeight","layout","clientWidth","attempDuration","getWorkerStream","getTypeScriptWorker","elEvents","modelChangeWithDelay","cbf","fromCallback","onDidChangeContent","editorChanges","getValue","changesWithInitial","ignoreWhitespaceChanges","modelChange","getWorker","worker","uri","semanticDiagnosticsQuery","getSemanticDiagnostics","syntacticDiagnosticsQuery","getSyntacticDiagnostics","semanticDiagnostics","syntacticDiagnostics","readOnly","$loader","xxx","initalCodeBlockHeight","refImports","getEmitOutput","outputFiles","esModuleBlobUrl","URL","createObjectURL","Blob","default","parentRoute","$TSPeep","routeChange","routeChangeTether","guideRoute","examplesRoute","popStateEvent","initialLocation","requestRouteChange","locationChange","composedConfig","behaviorStylesheet","$root","runBrowser","baseRoute","changes","trailingSlash","frags","baseURI","rootRoute","pagesRoute","alignContent","textAlign","maxWidth","$MainMenu","$Guide","$Examples","themes","changeThemeEffect","changeThemeEffectTether","applyOps","toIdx","toTheme","newTheme","assign","reload","changeTheme","$Website"],"mappings":";mDAIA,MAAMA,EAA6B,+BAGnC,GAAsB,OAFAC,aAAaC,QAAQF,GAEf,CAC1B,MACMG,EADqBC,MAAMC,WAAW,gCAAgCC,QACpC,EAAI,EAEtCC,EADY,CAAC,IAAM,KACMJ,GAE/BF,aAAaO,QAAQR,EAA4BS,KAAKC,UAAUH,M,oDCT3D,MAAMI,EAAe,CAC1BC,KAAM,QACNC,QAAS,CACPC,QAAS,OAETC,QAAS,UAETC,WAAY,UACZC,QAAS,UACTC,aAAc,UACdC,WAAY,UAEZC,SAAU,UACVC,SAAU,UACVC,cAAe,YAGNC,EAAc,CACzBX,KAAM,OACNC,QAAS,CACPC,QAAS,UAETC,QAAS,UAETC,WAAY,UACZC,QAAS,UACTC,aAAc,UACdC,WAAY,UAEZC,SAAU,UACVC,SAAU,UACVC,cAAe,a,UCnClB,WACC,aAEA,KAAI,uBAAwBE,UAA5B,CAkBA,IAAIC,EAAc,aAAcC,SAAWA,OAAOC,SAASC,aACvDC,EAAsB,GACtBC,EAAgC,GAChCC,EAAmB,GACnBC,EAAwB,IAAIC,QAC5BC,EAAwB,IAAID,QAC5BE,EAAmB,IAAIF,QACvBG,EAAgB,IAAIH,QACpBI,EAAmB,IAAIJ,QACvBK,EAA+B,IAAIL,QACnCM,EAAQ,CACVC,QAAQ,GAENC,EAAQ,CACVC,KAAM,KACNC,cAAe,MAEbC,EAAmBD,cAEnBE,EAAgB,UAqChBC,EAAoB,qBAiBpBC,EACJ,WACE,SAASA,IACP,IAAIC,EAAoBxB,SAASyB,cAAc,SAC3CV,EAAMC,OACRC,EAAMC,KAAKQ,YAAYF,IAEvBxB,SAAS2B,KAAKD,YAAYF,GAC1BA,EAAkBI,UAAW,EAC7BvB,EAAoBwB,KAAKL,IAE3Bd,EAAsBoB,IAAIC,KAAM,CAC9BC,SAAU,IAAIC,IACdC,QAAS,GACTV,kBAAmBA,IAGvB,IAhGoBW,EAAaC,EAgG7BC,EAASd,EAAoBe,UAsCjC,OArCAD,EAAOE,QAAU,SAAiBC,GAChC,IAAIC,EAAYC,EAAcF,GAC9B,IACE,IAAK9B,EAAsBiC,IAAIZ,MAC7B,MAAM,IAAIa,UAAUtB,GAMtB,OAJ6BZ,EAAsBmC,IAAId,MACRP,kBAC7BsB,UAAYL,EAC9BM,EAAehB,MACRiB,QAAQC,QAAQlB,MACvB,MAAOmB,GACP,OAAOF,QAAQG,OAAOD,KAG1Bb,EAAOe,YAAc,SAAqBZ,GACxC,IAAIC,EAAYC,EAAcF,GAC9B,IAAK9B,EAAsBiC,IAAIZ,MAC7B,MAAM,IAAIa,UAAUtB,GAMtB,OAJ6BZ,EAAsBmC,IAAId,MACRP,kBAC7BsB,UAAYL,EAC9BM,EAAehB,MACRA,MAzHWI,EA2HPZ,GA3HoBa,EA2HC,CAAC,CACjCiB,IAAK,WACLR,IAAK,WACH,IAAKnC,EAAsBiC,IAAIZ,MAC7B,MAAM,IAAIa,UAAUtB,GAItB,OAF6BZ,EAAsBmC,IAAId,MACRP,kBACtB8B,MAAMC,cAlInBC,EAAkBrB,EAAYG,UAAWF,GAqIlDb,EAtDT,GAnB2B,CAAC,YAAa,cAAe,UAAW,aAAc,aAAc,eAAgB,cA2E1FkC,SAAQ,SAAUC,GACrCnC,EAAoBe,UAAUoB,GAAU,WACtC,IAAKhD,EAAsBiC,IAAIZ,MAC7B,MAAM,IAAIa,UAAUtB,GAEtB,IAAIqC,EAAOC,UACPC,EAAyBnD,EAAsBmC,IAAId,MACnDC,EAAW6B,EAAuB7B,SAClCE,EAAU2B,EAAuB3B,QACjCV,EAAoBqC,EAAuBrC,kBAC3CsC,EAAStC,EAAkB8B,MAAMI,GAAQK,MAAMvC,EAAkB8B,MAAOK,GAO5E,OANA3B,EAASyB,SAAQ,SAAUO,GACrBA,EAAaV,OACfU,EAAaV,MAAMI,GAAQK,MAAMC,EAAaV,MAAOK,MAGzDzB,EAAQL,KAAK,CAAC6B,EAAQC,IACfG,MAMXG,OAAOC,eAAe3C,EAAqB4C,OAAOC,YAAa,CAC7DC,cAAc,EACdC,MAAOC,IA+KTC,EAAgBpD,EAAiBkB,WACjCpC,OAAOiB,cAAgBI,EApCvB,WACE,IAAIkD,EAA6B,CAC/BJ,cAAc,EACdxB,IAAK,WACH,OAAOrC,EAAsBqC,IAAId,OAAS,IAE5CD,IAAK,SAAa4C,GAChB,IAAIC,EAAYnE,EAAsBqC,IAAId,OAAS,IA1RzD,SAAyB2C,EAAQE,GAC/B,IAAIC,EAAeD,IAAc5E,SAAW,WAAa,aACzD,IAAK8E,MAAMC,QAAQL,GACjB,MAAM,IAAI9B,UAAU,sDAAwDiC,EAAe,sCAE7F,IAAKH,EAAOM,MAAMT,GAChB,MAAM,IAAI3B,UAAU,sDAAwDiC,EAAe,gDAE7F,IAAII,EAAeP,EAAOQ,QAAO,SAAUZ,EAAOa,GAChD,OAAOT,EAAOU,QAAQd,KAAWa,KAEnC3E,EAAsBsB,IAAI8C,EAAWK,GAgRjCI,CAAgBX,EAAQ3C,MACxB,IAAIuD,EAAWvD,OAAS/B,SACxBuF,IAAsBxD,KAAKJ,KAAOI,KAAKb,KAAOa,MAC5B,gBAAiBuD,EAAWA,EAASE,YAAcxF,SAASkB,KAAKuE,SAASH,IAE1FpF,OAAOwF,uBAAsB,WAC3BC,EAAiBL,GAzG3B,SAAmCA,EAAUX,GAE3C,IADA,IAAID,EAASkB,EAAqBN,GACzBO,EAAI,EAAGC,EAAMnB,EAAUoB,OAAQF,EAAIC,EAAKD,IAC/C,KAAInB,EAAOU,QAAQT,EAAUkB,KAAO,GAApC,CAGA,IACI7D,EADyBtB,EAAsBmC,IAAI8B,EAAUkB,IAC3B7D,SAClCgE,EAAWnF,EAAiBgC,IAAIyC,GAChCtB,EAAehC,EAASa,IAAIyC,GAC3BtB,IACHA,EAAehC,EAASa,IAAI7C,SAAS2B,OAEvCqE,EAASC,aACTjC,EAAakC,WAAWC,YAAYnC,GACpCgC,EAASI,WA2FHC,CAA0Bf,EAAUX,MAGtCpE,EAAiBsB,KAAKyD,KAK5B,GADArB,OAAOC,eAAeoC,SAAShE,UAAW,qBAAsBmC,GACtC,oBAAf8B,WAA4B,CACrC,IAAIC,EAAeC,QAAQnE,UAAUkE,aACrCC,QAAQnE,UAAUkE,aAAe,WAC/B,IAAIlB,EAAWrF,EAAc8B,KAAOyE,EAAazC,MAAMhC,KAAM6B,WAG7D,OAFAhD,EAAckB,IAAIC,KAAMuD,GACxBoB,EAAepB,GACRA,GAETrB,OAAOC,eAAeqC,WAAWjE,UAAW,qBAAsBmC,IAMtEkC,GACIpB,IACFvF,SAAS4G,iBAAiB,mBAAoBC,GAE9CA,IAhWF,SAASrD,EAAkBsD,EAAQC,GACjC,IAAK,IAAIlB,EAAI,EAAGA,EAAIkB,EAAMhB,OAAQF,IAAK,CACrC,IAAImB,EAAaD,EAAMlB,GACvBmB,EAAWC,WAAaD,EAAWC,aAAc,EACjDD,EAAW3C,cAAe,EACtB,UAAW2C,IAAYA,EAAWE,UAAW,GACjDjD,OAAOC,eAAe4C,EAAQE,EAAW3D,IAAK2D,IA4ClD,SAASzB,IACP,MAA+B,YAAxBvF,SAASmH,WAElB,SAASvB,EAAqBN,GAC5B,OAAO9E,EAAsBqC,IAAIyC,EAASY,aAAelG,SAASoH,gBAAkBpH,SAAWsF,GAEjG,SAAS5C,EAAcF,QACJ,IAAbA,IACFA,EAAW,IAEb,IAAI6E,EAAU7E,EAAS8E,MAAMjG,IAAkB,GAC3CkG,EAAe/E,EAOnB,OANI6E,EAAQtB,SACVyB,QAAQC,KAAK,2HACbJ,EAAQ5D,SAAQ,SAAUiE,GACxBH,EAAeA,EAAahF,QAAQmF,EAAS,QAG1CH,EAKT,SAAS/C,EAAgBmD,GACvBA,EAAMpF,QAAU,WACd,OAAOS,QAAQG,OAAO,IAAIyE,aAAa,2DAEzCD,EAAMvE,YAAc,WAClB,MAAM,IAAIwE,aAAa,kHAG3B,SAAS7E,EAAeO,GACtB,IAAIuE,EAAwBnH,EAAsBmC,IAAIS,GAClDtB,EAAW6F,EAAsB7F,SACjCR,EAAoBqG,EAAsBrG,kBAC9CQ,EAASyB,SAAQ,SAAUO,GACzBA,EAAalB,UAAYtB,EAAkBsB,aAgF/C,SAASyB,EAAqBuD,GAC5B,OAAOA,GAAYA,EAASC,cAAgBxG,GAAuBuG,aAAoB1G,GAAoB0G,aAAoB7G,EAAME,cAOvI,SAASwE,EAAiBL,GAIxB,IAHA,IAAI0C,EAAYhI,SAASiI,yBACrBvD,EAASkB,EAAqBN,GAC9BU,EAAWnF,EAAiBgC,IAAIyC,GAC3BO,EAAI,EAAGC,EAAMpB,EAAOqB,OAAQF,EAAIC,EAAKD,IAAK,CACjD,IAAIgC,EAAwBnH,EAAsBmC,IAAI6B,EAAOmB,IACzD7D,EAAW6F,EAAsB7F,SACjCR,EAAoBqG,EAAsBrG,kBAC1C0G,EAAiBlG,EAASa,IAAIyC,GAC9B4C,GACFlC,EAASC,aACT+B,EAAUtG,YAAYwG,KACjBA,EAAepF,WAAaoF,EAAe5E,QAAU4E,EAAe5E,MAAM6E,WAC7ED,EAAepF,UAAYtB,EAAkBsB,WAE/CkD,EAASI,aAET8B,EAAiBlI,SAASyB,cAAc,UACzBqB,UAAYtB,EAAkBsB,UAC7CnC,EAAiBmB,IAAIoG,EAAgB5C,GACrCxE,EAA6BgB,IAAIoG,EAAgB,GACjDlG,EAASF,IAAIwD,EAAU4C,GACvBF,EAAUtG,YAAYwG,IAEpB5C,IAAatF,SAAS2B,MACxBrB,EAA8BuB,KAAKqG,GAGvC5C,EAAS8C,aAAaJ,EAAW1C,EAAS+C,WAC1C,IAAK,IAAIC,EAAK,EAAGC,EAAO7D,EAAOqB,OAAQuC,EAAKC,EAAMD,IAAM,CACtD,IAAIE,EAAyB9H,EAAsBmC,IAAI6B,EAAO4D,IAC1DG,EAAYD,EAAuBxG,SACnCE,EAAUsG,EAAuBtG,QACjCwG,EAAsBD,EAAU5F,IAAIyC,GACpCqD,EAAS7H,EAA6B+B,IAAI6F,GAC9C,GAAIxG,EAAQ6D,OAAS,EAAG,CACtB,IAAK,IAAI6C,EAAMD,EAAQE,EAAQ3G,EAAQ6D,OAAQ6C,EAAMC,EAAOD,IAAO,CACjE,IAAIE,EAAc5G,EAAQ0G,GACtBvF,EAAMyF,EAAY,GAClBnF,EAAOmF,EAAY,GACvBJ,EAAoBpF,MAAMD,GAAKU,MAAM2E,EAAoBpF,MAAOK,GAElE7C,EAA6BgB,IAAI4G,EAAqBxG,EAAQ6D,OAAS,KAuB7E,SAASgD,EAAwCC,GAC/C,GAAKhJ,SAGL,IAAK,IAAI6F,EAAI,EAAGC,EAAMkD,EAAUjD,OAAQF,EAAIC,EAAKD,IAAK,CAIpD,IAHA,IAAIoD,EAAeD,EAAUnD,GACzBqD,EAAaD,EAAaC,WAC1BC,EAAeF,EAAaE,aACvBb,EAAK,EAAGC,EAAOY,EAAapD,OAAQuC,EAAKC,EAAMD,IAAM,CAC5D,IAAIhD,EAAW3E,EAAiBkC,IAAIsG,EAAab,IAC7ChD,GACFK,EAAiBL,GAGrB,IAAKrF,EACH,IAAK,IAAI2I,EAAM,EAAGC,EAAQK,EAAWnD,OAAQ6C,EAAMC,EAAOD,IAOxD,IANA,IAAIQ,EAAOpJ,SAASqJ,mBAAmBH,EAAWN,GAAMU,WAAWC,cAAc,SAAUC,GACzF,IAAIC,EAAa7I,EAAciC,IAAI2G,GACnC,OAAOC,GAAcA,EAAWC,mBAAmB3D,OAAS,EAAIuD,WAAWK,cAAgBL,WAAWM,gBAExG,MAAM,GACFJ,OAAO,EACJA,EAAOJ,EAAKS,YACjBlE,EAAiB/E,EAAciC,IAAI2G,KAM7C,SAAS9C,EAAepB,GACtB,IAAIU,EAAW,IAAI8D,iBAAiBf,GAChCgB,EAAe,CACjB3D,QAAS,WACPJ,EAASI,QAAQd,EAAU,CACzB0E,WAAW,EACXC,SAAS,KAGbhE,WAAY,WACVD,EAASC,eAGbpF,EAAiBiB,IAAIwD,EAAUyE,GAC/BA,EAAa3D,UAGf,SAASS,IACP,IAAIqD,EAASlK,SAASyB,cAAc,UACpCyI,EAAOC,QAAS,EAChBnK,SAASkB,KAAKQ,YAAYwI,GAC1BjJ,EAAMC,KAAOgJ,EAAOE,cAAcpK,SAASkB,KAC3CD,EAAME,cAAgB+I,EAAOE,cAAcjJ,cAC3CqD,EAAgB0F,EAAOE,cAAcjJ,cAAcmB,WACnDoE,EAAe1G,SAASkB,MACxBH,EAAMC,QAAS,EAEf,IADA,IAAIqJ,EAAWrK,SAASiI,yBACfpC,EAAI,EAAGC,EAAMzF,EAAoB0F,OAAQF,EAAIC,EAAKD,IACzDxF,EAAoBwF,GAAGjE,UAAW,EAClCyI,EAAS3I,YAAYrB,EAAoBwF,IAE3C5E,EAAMC,KAAKQ,YAAY2I,GACvB,IAAK,IAAI/B,EAAK,EAAGC,EAAOjI,EAA8ByF,OAAQuC,EAAKC,EAAMD,IACvE+B,EAAS3I,YAAYpB,EAA8BgI,IAErDtI,SAASkB,KAAKkH,aAAaiC,EAAUrK,SAASkB,KAAKoJ,YACnD,IAAK,IAAI1B,EAAM,EAAGC,EAAQtI,EAAiBwF,OAAQ6C,EAAMC,EAAOD,IAC9DjD,EAAiBpF,EAAiBqI,IAEpCrI,EAAiBwF,OAAS,EAC1B1F,EAAoB0F,OAAS,EAC7BzF,EAA8ByF,OAAS,GA1T3C,KCCIwE,EAA2B,GAG/B,SAASC,EAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqBE,IAAjBD,EACH,OAAOA,EAAaE,QAGrB,IAAIC,EAASN,EAAyBE,GAAY,CAGjDG,QAAS,IAOV,OAHAE,EAAoBL,GAAUI,EAAQA,EAAOD,QAASJ,GAG/CK,EAAOD,QCpBfJ,EAAoBO,EAAI,CAACH,EAASI,KACjC,IAAI,IAAI3H,KAAO2H,EACXR,EAAoBS,EAAED,EAAY3H,KAASmH,EAAoBS,EAAEL,EAASvH,IAC5EY,OAAOC,eAAe0G,EAASvH,EAAK,CAAE4D,YAAY,EAAMpE,IAAKmI,EAAW3H,MCJ3EmH,EAAoBS,EAAI,CAACC,EAAKC,IAAUlH,OAAO3B,UAAU8I,eAAeC,KAAKH,EAAKC,G,mBCiBlF,SAASG,EAAOC,EAAGC,GAGf,IAFA,IAAIC,EAAID,EAAEzF,OACN2F,EAAI,IAAI5G,MAAM2G,EAAI,GACb5F,EAAI,EAAGA,EAAI4F,IAAK5F,EACrB6F,EAAE7F,GAAK2F,EAAE3F,GAGb,OADA6F,EAAED,GAAKF,EACAG,EA4EX,SAASC,EAAOC,EAAGC,EAAGL,GAElB,IADA,IAAIM,EAAID,EACChG,EAAI,EAAG4F,EAAID,EAAEzF,OAAQF,EAAI4F,IAAK5F,EACnCiG,EAAIF,EAAEE,EAAGN,EAAE3F,GAAIA,GAEnB,OAAOiG,EAoBX,SAASC,EAAOlG,EAAG2F,GACf,GAAI3F,EAAI,EACJ,MAAM,IAAIjD,UAAU,kBAExB,IAAI6I,EAAID,EAAEzF,OACV,OAAU,IAAN0F,GAAW5F,GAAK4F,EACTD,EAED,IAANC,EACO,GAOf,SAAsB5F,EAAG2F,EAAGC,GACxB,IACIO,EADAN,EAAI,IAAI5G,MAAM2G,GAElB,IAAKO,EAAI,EAAGA,EAAInG,IAAKmG,EACjBN,EAAEM,GAAKR,EAAEQ,GAEb,IAAKA,EAAInG,EAAGmG,EAAIP,IAAKO,EACjBN,EAAEM,GAAKR,EAAEQ,EAAI,GAEjB,OAAON,EAdAO,CAAapG,EAAG2F,EAAGC,EAAI,GAqClC,SAASS,EAAUX,EAAGC,GAClB,IAAK,IAAI3F,EAAI,EAAG4F,EAAID,EAAEzF,OAAQF,EAAI4F,IAAK5F,EACnC,GAAI0F,IAAMC,EAAE3F,GACR,OAAOA,EAGf,OAAQ,E,YAUZ,IAAIsG,EAAK,SAAUZ,GAAK,OAAOA,GAC3B,EAAU,SAAUK,EAAGQ,GAAK,OAAO,SAAUb,GAAK,OAAOK,EAAEQ,EAAEb,MAC7DxH,EAAQ,SAAU6H,EAAGL,GAAK,OAAOK,EAAEL,IACvC,SAAS,EAAOK,GAQZ,OAPA,SAASS,EAAQb,EAAGE,GAChB,OAAQ9H,UAAUmC,QACd,KAAK,EAAG,OAAOsG,EACf,KAAK,EAAG,OAAO,SAAUX,GAAK,OAAOE,EAAEJ,EAAGE,IAC1C,QAAS,OAAOE,EAAEJ,EAAGE,KAKjC,SAASY,EAAOV,GASZ,OARA,SAASS,EAAQb,EAAGE,EAAGa,GACnB,OAAQ3I,UAAUmC,QACd,KAAK,EAAG,OAAOsG,EACf,KAAK,EAAG,OAAO,GAAO,SAAUX,EAAGa,GAAK,OAAOX,EAAEJ,EAAGE,EAAGa,MACvD,KAAK,EAAG,OAAO,SAAUA,GAAK,OAAOX,EAAEJ,EAAGE,EAAGa,IAC7C,QAAS,OAAOX,EAAEJ,EAAGE,EAAGa,KC9MpC,IAAIC,EAAmC,WACnC,SAASA,EAAkBC,EAAMC,EAAaC,EAAQC,EAAMC,GACxD9K,KAAK0K,KAAOA,EACZ1K,KAAK2K,YAAcA,EACnB3K,KAAK4K,OAASA,EACd5K,KAAK6K,KAAOA,EACZ7K,KAAK8K,UAAYA,EACjB9K,KAAK+K,QAAS,EAalB,OAXAN,EAAkBlK,UAAUyK,IAAM,WAC9B,OAAOhL,KAAK6K,KAAKG,IAAIhL,KAAK0K,KAAO1K,KAAK2K,cAE1CF,EAAkBlK,UAAU0K,MAAQ,SAAUC,GAC1C,OAAOlL,KAAK6K,KAAKI,MAAMjL,KAAK0K,KAAO1K,KAAK2K,YAAaO,IAEzDT,EAAkBlK,UAAU4K,QAAU,WAGlC,OAFAnL,KAAK+K,QAAS,EACd/K,KAAK8K,UAAUM,OAAOpL,MACfA,KAAK6K,KAAKM,WAEdV,EApB2B,GAuBlCY,EAAmC,WACnC,SAASA,EAAkBC,EAAQR,GAC/B9K,KAAKsL,OAASA,EACdtL,KAAK8K,UAAYA,EAiBrB,OAfAO,EAAkB9K,UAAUgL,YAAc,WACtC,OAAOvL,KAAK8K,UAAUS,cAAgBvL,KAAKsL,QAE/CD,EAAkB9K,UAAUiL,aAAe,SAAUb,EAAac,EAAOb,EAAQC,GAC7E,OAAO7K,KAAK8K,UAAUU,aAAab,EAAc3K,KAAKsL,OAAQG,EAAOb,EAAQC,IAEjFQ,EAAkB9K,UAAUmL,SAAW,SAAUJ,GAC7C,OAAO,IAAID,EAAkBC,EAAStL,KAAKsL,OAAQtL,KAAK8K,YAE5DO,EAAkB9K,UAAU6K,OAAS,SAAUP,GAC3C,OAAO7K,KAAK8K,UAAUM,OAAOP,IAEjCQ,EAAkB9K,UAAUoL,UAAY,SAAU9B,GAC9C,OAAO7J,KAAK8K,UAAUa,UAAU9B,IAE7BwB,EApB2B,GA2BtC,SAASO,EAAQf,GACb,IACI,OAAOA,EAAKG,MAEhB,MAAOE,GACH,OAAOL,EAAKI,MAAMC,IAK1B,IAAIW,EAA+B,WAC/B,SAASA,EAAcC,EAAOC,GAC1B,IAAIC,EAAQhM,KACZA,KAAKiM,oBAAsB,WAAc,OAAOD,EAAME,kBACtDlM,KAAK8L,MAAQA,EACb9L,KAAK+L,SAAWA,EAChB/L,KAAKmM,OAAS,KACdnM,KAAKoM,aAAeC,IA6DxB,OA3DAR,EAActL,UAAUgL,YAAc,WAClC,OAAOvL,KAAK8L,MAAMQ,OAEtBT,EAActL,UAAUiL,aAAe,SAAUb,EAAac,EAAOb,EAAQC,GACzE,IAAIH,EAAO1K,KAAKuL,cAAgBgB,KAAKC,IAAI,EAAGf,GACxCgB,EAAK,IAAIhC,EAAkBC,EAAMC,EAAaC,EAAQC,EAAM7K,MAGhE,OAFAA,KAAK+L,SAASW,IAAID,GAClBzM,KAAK2M,mBACEF,GAEXZ,EAActL,UAAUmL,SAAW,SAAUkB,GACzC,OAAO,IAAIvB,EAAkBuB,EAAQ5M,OAEzC6L,EAActL,UAAU6K,OAAS,SAAUP,GACvCA,EAAKE,QAAS,EACV/K,KAAK+L,SAAS/B,OAAOa,IACrB7K,KAAK6M,eAIbhB,EAActL,UAAUoL,UAAY,SAAU9B,GAC1C7J,KAAK+L,SAASe,UAAUjD,GACxB7J,KAAK6M,eAEThB,EAActL,UAAUsM,YAAc,WAC9B7M,KAAK+L,SAASgB,UACd/M,KAAKgN,cAGLhN,KAAK2M,oBAGbd,EAActL,UAAUyM,YAAc,WAClChN,KAAK8L,MAAMmB,WAAWjN,KAAKmM,QAC3BnM,KAAKmM,OAAS,MAElBN,EAActL,UAAUoM,iBAAmB,WACvC,IAAI3M,KAAK+L,SAASgB,UAAlB,CAGA,IAAIG,EAAclN,KAAK+L,SAASmB,cACZ,OAAhBlN,KAAKmM,OACLnM,KAAKmN,qBAAqBD,GAErBA,EAAclN,KAAKoM,eACxBpM,KAAKgN,cACLhN,KAAKmN,qBAAqBD,MAGlCrB,EAActL,UAAU4M,qBAAuB,SAAUD,GACrDlN,KAAKoM,aAAec,EACpB,IAAIzB,EAAQc,KAAKC,IAAI,EAAGU,EAAclN,KAAKuL,eAC3CvL,KAAKmM,OAASnM,KAAK8L,MAAMsB,SAASpN,KAAKiM,oBAAqBR,IAEhEI,EAActL,UAAU2L,eAAiB,WACrClM,KAAKmM,OAAS,KACdnM,KAAK+L,SAASsB,SAASrN,KAAKuL,cAAeK,GAC3C5L,KAAK2M,oBAEFd,EApEuB,GAwE9ByB,EAA8B,WAC9B,SAASA,IACLtN,KAAKuN,MAAQ,GA+CjB,OA7CAD,EAAa/M,UAAU2M,YAAc,WACjC,OAAOlN,KAAK+M,UAAYV,IAAWrM,KAAKuN,MAAM,GAAG7C,MAErD4C,EAAa/M,UAAUwM,QAAU,WAC7B,OAA6B,IAAtB/M,KAAKuN,MAAMvJ,QAEtBsJ,EAAa/M,UAAUmM,IAAM,SAAUD,GACnCe,EAAaf,EAAIzM,KAAKuN,QAE1BD,EAAa/M,UAAUyJ,OAAS,SAAUyC,GACtC,IAAI3I,EAAI2J,EAAaC,EAAQjB,GAAKzM,KAAKuN,OACvC,GAAIzJ,GAAK,GAAKA,EAAI9D,KAAKuN,MAAMvJ,OAAQ,CACjC,IAAI2J,EAAS3N,KAAKuN,MAAMzJ,GAAG6J,OACvBC,EAAKzD,EAAUsC,EAAIkB,GACvB,GAAIC,GAAM,EAKN,OAJAD,EAAOE,OAAOD,EAAI,GACI,IAAlBD,EAAO3J,QACPhE,KAAKuN,MAAMM,OAAO/J,EAAG,IAElB,EAGf,OAAO,GAKXwJ,EAAa/M,UAAUuM,UAAY,SAAUjD,GACzC,IAAK,IAAI/F,EAAI,EAAGA,EAAI9D,KAAKuN,MAAMvJ,SAAUF,EACrCgK,EAAcjE,EAAG7J,KAAKuN,MAAMzJ,KAGpCwJ,EAAa/M,UAAU8M,SAAW,SAAUU,EAAGnC,GAI3C,IAHA,IAAI2B,EAAQvN,KAAKuN,MACb7D,EAAI6D,EAAMvJ,OACVF,EAAI,EACDA,EAAI4F,GAAK6D,EAAMzJ,GAAG4G,MAAQqD,KAC3BjK,EAEN9D,KAAKuN,MAAQA,EAAMS,MAAMlK,GAEzB,IAAK,IAAImG,EAAI,EAAGA,EAAInG,IAAKmG,EACrBjK,KAAKuN,MAAQU,EAAcrC,EAAS2B,EAAMtD,GAAG0D,OAAQ3N,KAAKuN,QAG3DD,EAjDsB,GAmDjC,SAASW,EAAcrC,EAAS+B,EAAQJ,GACpC,IAAK,IAAIzJ,EAAI,EAAGA,EAAI6J,EAAO3J,SAAUF,EAAG,CACpC,IAAI+G,EAAO8C,EAAO7J,GACd+G,EAAKE,SACLa,EAAQf,GAGJA,EAAKD,QAAU,GAAKC,EAAKE,SACzBF,EAAKH,KAAOG,EAAKH,KAAOG,EAAKD,OAC7B4C,EAAa3C,EAAM0C,KAI/B,OAAOA,EAEX,SAASC,EAAa3C,EAAMqD,GACxB,IAAIxE,EAAIwE,EAAUlK,OACd0G,EAAOgD,EAAQ7C,GACnB,GAAU,IAANnB,EAAJ,CAIA,IAAI5F,EAAI2J,EAAa/C,EAAMwD,GACvBpK,GAAK4F,EACLwE,EAAUpO,KAAKqO,EAAYzD,EAAM,CAACG,KAM1C,SAA0BA,EAAMqD,EAAWxD,EAAM5G,GAC7C,IAAIsK,EAAWF,EAAUpK,GACrB4G,IAAS0D,EAAS1D,KAO1B,SAAkBG,EAAM8C,GACE,IAAlBA,EAAO3J,QAAgB6G,EAAKH,MAAQiD,EAAOA,EAAO3J,OAAS,GAAG0G,KAC9DiD,EAAO7N,KAAK+K,GAMpB,SAAqBA,EAAM8C,GACvB,IAAK,IAAI1D,EAAI,EAAGA,EAAI0D,EAAO3J,OAAQiG,IAC/B,GAAIY,EAAKH,KAAOiD,EAAO1D,GAAGS,KAAM,CAC5BiD,EAAOE,OAAO5D,EAAG,EAAGY,GACpB,OAPJwD,CAAYxD,EAAM8C,GAXlBW,CAASzD,EAAMuD,EAAST,QAGxBO,EAAUL,OAAO/J,EAAG,EAAGqK,EAAYzD,EAAM,CAACG,KAT1C0D,CAAiB1D,EAAMqD,EAAWxD,EAAM5G,QARxCoK,EAAUpO,KAAKqO,EAAYzD,EAAM,CAACG,KAoC1C,SAAS6C,EAAQc,GACb,OAAOjC,KAAKkC,MAAMD,EAAc9D,MAKpC,SAASoD,EAAcjE,EAAGuE,GACtBA,EAAST,OD3Fb,SAAmB9D,EAAGJ,GAIlB,IAHA,IAAIC,EAAID,EAAEzF,OACN2F,EAAI,IAAI5G,MAAM2G,GACdO,EAAI,EACCT,OAAI,EAAQ1F,EAAI,EAAGA,EAAI4F,IAAK5F,EAE5B+F,EADLL,EAAIC,EAAE3F,MAEF6F,EAAEM,GAAKT,IACLS,GAIV,OADAN,EAAE3F,OAASiG,EACJN,EC+EWmD,CAAUjD,EAAGuE,EAAST,QAE5C,SAASF,EAAaM,EAAGW,GAIrB,IAHA,IAEIC,EAAKC,EAFLC,EAAK,EACLC,EAAKJ,EAAY1K,OAEd6K,EAAKC,GAAI,CAGZ,GAAIf,KADJa,EAAIF,EADJC,EAAMpC,KAAKkC,OAAOI,EAAKC,GAAM,KAEjBpE,KACR,OAAOiE,EAEFZ,EAAIa,EAAElE,KACXoE,EAAKH,EAGLE,EAAKF,EAAM,EAGnB,OAAOG,EAEX,IAAIX,EAAc,SAAUJ,EAAGJ,GAAU,MAAO,CAAGjD,KAAMqD,EAAGJ,OAAQA,IAIhEoB,EAA4B,WAC5B,SAASA,EAAWC,GAChBhP,KAAKiP,OAASD,EAWlB,OATAD,EAAWxO,UAAU+L,IAAM,WACvB,OAAOtM,KAAKiP,OAAO3C,OAEvByC,EAAWxO,UAAU6M,SAAW,SAAUvD,EAAGqF,GACzC,OAAOA,GAAM,EAyBrB,SAAiBrF,GACb,IAAIgB,EAAO,IAAIsE,EAAKtF,GAEpB,OAnQQ,SAAUgB,GACX5J,QAAQC,QAAQ2J,GAAMuE,KAAKxD,GAiQlCyD,CAAMxE,GACCA,EA5BcyE,CAAQzF,GAAK0F,WAAW1F,EAAGqF,IAEhDH,EAAWxO,UAAU0M,WAAa,SAAUc,GACxC,OAAOA,aAAaoB,EAAOpB,EAAE3C,SAAWoE,aAAazB,IAElDgB,EAboB,GAe3BI,EAAsB,WACtB,SAASA,EAAKtF,GACV7J,KAAK6J,EAAIA,EACT7J,KAAK+K,QAAS,EAalB,OAXAoE,EAAK5O,UAAUyK,IAAM,WACjB,GAAIhL,KAAK+K,OACL,OAAO/K,KAAK6J,KAGpBsF,EAAK5O,UAAU0K,MAAQ,SAAUC,GAC7B,MAAMA,GAEViE,EAAK5O,UAAU6K,OAAS,WACpBpL,KAAK+K,QAAS,GAEXoE,EAhBc,GAyBrBM,EAA+B,WAC/B,SAASA,EAAcT,EAAO1D,GAC1BtL,KAAKsL,OAASA,EACdtL,KAAKgP,MAAQA,EAKjB,OAHAS,EAAclP,UAAU+L,IAAM,WAC1B,OAAOtM,KAAKgP,MAAM1C,MAAQtM,KAAKsL,QAE5BmE,EARuB,GAU9BC,EAA6B,WAC7B,SAASA,EAAYC,EAAQrE,GACzBtL,KAAKsL,OAASA,EACdtL,KAAK2P,OAASA,EAMlB,OAJAD,EAAYnP,UAAU+L,IAAM,WACxB,IAAIsD,EAAM5P,KAAK2P,OAAO3P,KAAKsL,QAC3B,OAAiB,IAATsE,EAAI,GAAWA,EAAI,IAAM,KAE9BF,EATqB,GAW5BG,EAAkB,SAAUb,GAC5B,OAAO,IAAIS,EAAcT,EAAOA,EAAM1C,QA6BtCf,EAAc,SAAUT,GACxB,OAAOA,EAAUS,eAMjBuE,EAAO,GAAO,SAAUjF,EAAMC,GAC9B,OAAOA,EAAUU,aAAa,EAAG,GAAI,EAAGX,MAKxCY,EAAQlB,GAAO,SAAUkB,EAAOZ,EAAMC,GACtC,OAAOA,EAAUU,aAAa,EAAGC,GAAQ,EAAGZ,MAY5CkF,GANWxF,GAAO,SAAUK,EAAQC,EAAMC,GAC1C,OAAOA,EAAUU,aAAa,EAAG,EAAGZ,EAAQC,MAK/B,SAAU2D,GACvB,OAAOA,EAAcrD,YAWrB6E,GALiB,GAAO,SAAUC,EAAWnF,GAE7C,OADArF,QAAQC,KAAK,oDACNoF,EAAUa,UAAUsE,MAGL,GAAO,SAAUrD,EAAQ9B,GAC/C,OAAO,IAAIO,EAAkBuB,EAAQ9B,OAMrCoF,GAFe,GAAO,SAAUpE,EAAOC,GAAY,OAAO,IAAIF,EAAcC,EAAOC,MAEjE,WAAc,OAAO,IAAIgD,EAzDhB,oBAAhBoB,aAA0D,mBAApBA,YAAY7D,IAdtDuD,EAAgBM,aAiBK,oBAAZC,SAAqD,mBAAnBA,QAAQT,OANnD,IAAID,EAAYU,QAAQT,OAAQS,QAAQT,UAHxCE,EAAgBQ,SCnVvB,EAAc,WAAc,OAAOC,GACnCA,EAAO,IAAoB,WAC3B,SAASC,KAGT,OADAA,EAAYhQ,UAAU4K,QAAU,aACzBoF,EAJI,IAcXC,EAAc,SAAUC,GACxB,OAAO,IAAIC,EAAYD,IAEvBC,EAA6B,WAC7B,SAASA,EAAYD,GACjBzQ,KAAK2Q,UAAW,EAChB3Q,KAAKyQ,WAAaA,EAWtB,OATAC,EAAYnQ,UAAU4K,QAAU,WACvBnL,KAAK2Q,WACN3Q,KAAK2Q,UAAW,EACZ3Q,KAAKyQ,aACLzQ,KAAKyQ,WAAWtF,UAChBnL,KAAKyQ,gBAAa7H,KAIvB8H,EAdqB,GAsB5B,EAAc,GAAO,SAAUvF,EAASyF,GACxC,OAAOJ,EAAY,IAAIK,EAAgB1F,EAASyF,OAQhDC,EAAiC,WACjC,SAASA,EAAgB1F,EAASyF,GAC9B5Q,KAAK8Q,SAAW3F,EAChBnL,KAAK+Q,UAAYH,EAKrB,OAHAC,EAAgBtQ,UAAU4K,QAAU,WAChCnL,KAAK8Q,SAAS9Q,KAAK+Q,YAEhBF,EARyB,GAehCG,EAAa,SAAUC,GACvB,IAAIC,EAAStH,EAAO,EAAO,GAAIqH,GAC/B,OAAyB,IAAlBC,EAAOlN,OAAe,IAAgB,IAAImN,EAAWD,IAK5DE,EAAc,GAAO,SAAUC,EAAIC,GACnC,OAAON,EAAW,CAACK,EAAIC,OAEvB,EAAQ,SAAUL,EAAIjI,GACtB,OApEgB,SAAUA,GAC1B,OAAOA,IAAMsH,EAmENiB,CAAcvI,GAAKiI,EACpBjI,aAAamI,EFrDvB,SAAgB1H,EAAGE,GACf,IAAI6H,EAAK/H,EAAEzF,OACPyN,EAAK9H,EAAE3F,OACP+F,EAAI,IAAIhH,MAAMyO,EAAKC,GACnB3N,EAAI,EACR,IAAKA,EAAI,EAAGA,EAAI0N,EAAI1N,IAChBiG,EAAEjG,GAAK2F,EAAE3F,GAEb,IAAK,IAAImG,EAAI,EAAGA,EAAIwH,EAAIxH,IACpBF,EAAEjG,KAAO6F,EAAEM,GAEf,OAAOF,EE0CyB2H,CAAOT,EAAIjI,EAAE2I,aACnCpI,EAAOP,EAAGiI,IAEpBE,EAA4B,WAC5B,SAASA,EAAWQ,GAChB3R,KAAK2R,YAAcA,EAKvB,OAHAR,EAAW5Q,UAAU4K,QAAU,WAC3ByG,EAAcC,EAAqB7R,KAAK2R,eAErCR,EAPoB,GAY3BU,EAAuB,SAAUF,GACjC,OAAO/H,EAAOkI,EAAe,GAAIH,IAKjCG,EAAgB,SAAUC,EAAQ/I,GAClC,IACIA,EAAEmC,UAEN,MAAOD,GACH6G,EAAOjS,KAAKoL,GAEhB,OAAO6G,GAMPH,EAAgB,SAAUG,GAC1B,GAAIA,EAAO/N,OAAS,EAChB,MAAM,IAAIgO,EAAgBD,EAAO/N,OAAS,UAAW+N,IAGzDC,EACA,SAASA,EAAgBxU,EAASuU,GAC9B/R,KAAK3C,KAAO,kBACZ2C,KAAKxC,QAAUA,EACfwC,KAAK+R,OAASA,EACdE,MAAM3I,KAAKtJ,KAAMxC,GACbyU,MAAMC,mBACND,MAAMC,kBAAkBlS,KAAMgS,GAElChS,KAAKmS,MAAQ,GAAKnS,KAAKmS,MAAQC,EAAkBpS,KAAK+R,SAI9DC,EAAgBzR,UAAY2B,OAAOmQ,OAAOJ,MAAM1R,WAChD,IAAI6R,EAAoB,SAAUL,GAC9B,OAAOnI,EAAO0I,EAAkB,GAAIP,IAEpCO,EAAmB,SAAUC,EAAGrH,EAAGpH,GACnC,OAAOyO,EAAK,OAASzO,EAAI,GAAK,KAAOoH,EAAEiH,OAMvCK,EAAajI,GAAO,SAAUwD,EAAG0C,EAAYgC,GAC7C,IACIhC,EAAWtF,UAEf,MAAOD,GACHuH,EAAKxH,MAAM8C,EAAG7C,OClIlBwH,EAAgB,SAAS1J,EAAGW,GAI5B,OAHA+I,EAAgBxQ,OAAOyQ,gBAClB,CAAEC,UAAW,cAAgB7P,OAAS,SAAUiG,EAAGW,GAAKX,EAAE4J,UAAYjJ,IACvE,SAAUX,EAAGW,GAAK,IAAK,IAAIkJ,KAAKlJ,EAAOA,EAAEN,eAAewJ,KAAI7J,EAAE6J,GAAKlJ,EAAEkJ,MACpD7J,EAAGW,IAG5B,SAASmJ,EAAU9J,EAAGW,GAElB,SAASoJ,IAAO/S,KAAKgG,YAAcgD,EADnC0J,EAAc1J,EAAGW,GAEjBX,EAAEzI,UAAkB,OAANoJ,EAAazH,OAAOmQ,OAAO1I,IAAMoJ,EAAGxS,UAAYoJ,EAAEpJ,UAAW,IAAIwS,GAMnF,SAASC,EAAW9H,GAChBqE,WAAW0D,EAAS,EAAG/H,GAE3B,SAAS+H,EAAQ/H,GACb,MAAMA,EAIV,IAAIgI,EAAgB,SAAUlI,EAAKzI,EAAOkQ,GAAQ,OAAO,IAAIU,GAAsBnI,EAAKzI,EAAOkQ,IAC3FW,GAAqB,SAAU7Q,EAAOkQ,GAAQ,OAAO,IAAIY,GAAmB9Q,EAAOkQ,IACnFa,GAAmB,SAAUb,GAAQ,OAAO,IAAIc,GAAiBd,IACjEe,GAAqB,SAAUjR,EAAOkQ,GAAQ,OAAO,IAAIgB,GAAmBlR,EAAOkQ,IACnFiB,GAA+B,WAC/B,SAASA,EAAcjB,GACnBzS,KAAKyS,KAAOA,EACZzS,KAAK+K,QAAS,EAkBlB,OAhBA2I,EAAcnT,UAAU4K,QAAU,WAC9BnL,KAAK+K,QAAS,GAElB2I,EAAcnT,UAAUyK,IAAM,SAAU+C,GAC/B/N,KAAK+K,QAGV/K,KAAK2T,YAAY5F,IAErB2F,EAAcnT,UAAU0K,MAAQ,SAAU8C,EAAG7C,GAEzC,IAAKlL,KAAK+K,OACN,OAAOiI,EAAW9H,GAEtBlL,KAAKyS,KAAKxH,MAAM8C,EAAG7C,IAEhBwI,EArBuB,GAuB9BP,GAAuC,SAAUS,GAEjD,SAAST,EAAsBU,EAAUtR,EAAOkQ,GAC5C,IAAIzG,EAAQ4H,EAAOtK,KAAKtJ,KAAMyS,IAASzS,KAGvC,OAFAgM,EAAM6H,SAAWA,EACjB7H,EAAMzJ,MAAQA,EACPyJ,EAKX,OAVA8G,EAAUK,EAAuBS,GAOjCT,EAAsB5S,UAAUoT,YAAc,SAAU5F,GACpD/N,KAAK6T,SAAS9F,EAAG/N,KAAKuC,MAAOvC,KAAKyS,OAE/BU,EAX+B,CAYxCO,IACEL,GAAoC,SAAUO,GAE9C,SAASP,EAAmB9Q,EAAOkQ,GAC/B,IAAIzG,EAAQ4H,EAAOtK,KAAKtJ,KAAMyS,IAASzS,KAEvC,OADAgM,EAAMzJ,MAAQA,EACPyJ,EAKX,OATA8G,EAAUO,EAAoBO,GAM9BP,EAAmB9S,UAAUoT,YAAc,SAAU5F,GACjD/N,KAAKyS,KAAKqB,MAAM/F,EAAG/N,KAAKuC,QAErB8Q,EAV4B,CAWrCK,IACEH,GAAkC,SAAUK,GAE5C,SAASL,IACL,OAAkB,OAAXK,GAAmBA,EAAO5R,MAAMhC,KAAM6B,YAAc7B,KAK/D,OAPA8S,EAAUS,EAAkBK,GAI5BL,EAAiBhT,UAAUoT,YAAc,SAAU5F,GAC/C/N,KAAKyS,KAAKsB,IAAIhG,IAEXwF,EAR0B,CASnCG,IACED,GAAoC,SAAUG,GAE9C,SAASH,EAAmBlR,EAAOkQ,GAC/B,IAAIzG,EAAQ4H,EAAOtK,KAAKtJ,KAAMyS,IAASzS,KAEvC,OADAgM,EAAMzJ,MAAQA,EACPyJ,EAKX,OATA8G,EAAUW,EAAoBG,GAM9BH,EAAmBlT,UAAUoT,YAAc,SAAU5F,GACjD/N,KAAKyS,KAAKxH,MAAM8C,EAAG/N,KAAKuC,QAErBkR,EAV4B,CAWrCC,IAGEM,GAAQ,WAAc,OAAOC,IAC7BC,GAAmB,SAAUC,GAC7B,OAAOA,IAAWF,IAElBG,GAAyB,SAAUC,GACnC,OAAOA,EAAQC,KAAKJ,KAUpBD,GAAQ,IARe,WACvB,SAASM,KAKT,OAHAA,EAAMhU,UAAUyK,IAAM,SAAUyH,EAAM3H,GAClC,OAAOgF,EAAKwD,GAAiBb,GAAO3H,IAEjCyJ,EANe,IAWtB,GAAQ,WAAc,OAAOC,IAS7BA,GAAQ,IARe,WACvB,SAASC,KAKT,OAHAA,EAAMlU,UAAUyK,IAAM,WAClB,OAAO,KAEJyJ,EANe,IAWtB7G,GAAK,SAAUG,EAAGvE,GAAK,OAAO,IAAIkL,GAAG3G,EAAGvE,IACxCkL,GAAoB,WACpB,SAASA,EAAG3G,EAAGvE,GACXxJ,KAAK0K,KAAOqD,EACZ/N,KAAKuC,MAAQiH,EAKjB,OAHAkL,EAAGnU,UAAUyK,IAAM,SAAUyH,EAAM3H,GAC/B,OAAOW,EAAQzL,KAAK0K,KAAMwI,EAAcyB,GAAO3U,KAAKuC,MAAOkQ,GAAO3H,IAE/D4J,EARY,GAUvB,SAASC,GAAM5G,EAAGvE,EAAGiJ,GACjBA,EAAKqB,MAAM/F,EAAGvE,GACdiJ,EAAKsB,IAAIhG,GAIb,IAAIzB,GAAM,SAAU9C,GAAK,OAAOoE,GAAG,EAAGpE,IA6BlCoL,GAAoC,WACpC,SAASA,IACL5U,KAAKyQ,gBAAa7H,EAClB5I,KAAK2Q,UAAW,EAoBpB,OAlBAiE,EAAmBrU,UAAUsU,cAAgB,SAAUpE,GACnD,QAAwB7H,IAApB5I,KAAKyQ,WACL,MAAM,IAAIwB,MAAM,uCAEpBjS,KAAKyQ,WAAaA,EACdzQ,KAAK2Q,UACLF,EAAWtF,WAGnByJ,EAAmBrU,UAAU4K,QAAU,WAC/BnL,KAAK2Q,WAGT3Q,KAAK2Q,UAAW,OACQ/H,IAApB5I,KAAKyQ,YACLzQ,KAAKyQ,WAAWtF,YAGjByJ,EAvB4B,GA2BtB,GAAO,SAAUT,EAAQrJ,GACtC,OAAO,IAAI7J,SAAQ,SAAUC,EAASE,GAClC,OAGR,SAAmB+S,EAAQrJ,EAAW5J,EAASE,GAC3C,IAAIqP,EAAa,IAAImE,GACjB3Q,EAAW,IAAI6Q,GAAe5T,EAASE,EAAQqP,GACnDA,EAAWoE,cAAcV,EAAOnJ,IAAI/G,EAAU6G,IANnCiK,CAAUZ,EAAQrJ,EAAW5J,EAASE,SAQrD,IAAI0T,GAAgC,WAChC,SAASA,EAAef,EAAK9I,EAAOwF,GAChCzQ,KAAKgV,KAAOjB,EACZ/T,KAAKiV,OAAShK,EACdjL,KAAKkV,YAAczE,EACnBzQ,KAAK+K,QAAS,EAgBlB,OAdA+J,EAAevU,UAAUuT,MAAQ,aACjCgB,EAAevU,UAAUwT,IAAM,WACtB/T,KAAK+K,QAGV/K,KAAKmL,QAAQnL,KAAKiV,OAAQjV,KAAKgV,UAAMpM,IAEzCkM,EAAevU,UAAU0K,MAAQ,SAAUkK,EAAIjK,GAC3ClL,KAAKmL,QAAQnL,KAAKiV,OAAQjV,KAAKiV,OAAQ/J,IAE3C4J,EAAevU,UAAU4K,QAAU,SAAUF,EAAO8I,EAAKvK,GACrDxJ,KAAK+K,QAAS,EAKtB,SAAoBE,EAAO8I,EAAKvK,EAAGiH,GAC/B,IACIA,EAAWtF,UAEf,MAAOD,GAEH,YADAD,EAAMC,GAGV6I,EAAIvK,GAZA,CAAWyB,EAAO8I,EAAKvK,EAAGxJ,KAAKkV,cAE5BJ,EArBwB,GAqC/B,GAAM,SAAUrC,EAAM3H,EAAWqJ,GACjC,OAAOA,EAAOnJ,IAAIyH,EAAM3H,IAGxBsK,GAA8B,WAC9B,SAASA,EAAaxI,EAAQ6F,GAC1BzS,KAAKyS,KAAOA,EACZzS,KAAK4M,OAASA,EAWlB,OATAwI,EAAa7U,UAAUuT,MAAQ,SAAU/F,EAAGvE,GACxCxJ,KAAKyS,KAAKqB,MAAM/F,EAAI/N,KAAK4M,OAAQpD,IAErC4L,EAAa7U,UAAU0K,MAAQ,SAAU8C,EAAG7C,GACxClL,KAAKyS,KAAKxH,MAAM8C,EAAI/N,KAAK4M,OAAQ1B,IAErCkK,EAAa7U,UAAUwT,IAAM,SAAUhG,GACnC/N,KAAKyS,KAAKsB,IAAIhG,EAAI/N,KAAK4M,SAEpBwI,EAdsB,GAwB7BC,GAAgB,SAAU/J,EAAQ6I,GAClC,OAAO,IAAImB,GAAchK,EAAQ6I,IAEjCmB,GAA+B,WAC/B,SAASA,EAAchK,EAAQiK,GAC3BvV,KAAKsL,OAASA,EACdtL,KAAKuV,OAASA,EAKlB,OAHAD,EAAc/U,UAAUyK,IAAM,SAAUyH,EAAM3H,GAC1C,OAAO9K,KAAKuV,OAAOvK,IAAIwK,GAAaxV,KAAKsL,OAAQmH,GAAOzC,EAAoBhQ,KAAKsL,OAAQR,KAEtFwK,EARuB,GAe9BE,GAAe,SAAUlK,EAAQmH,GACjC,OAAOA,aAAgB2C,GACjB,IAAIA,GAAa9J,EAASmH,EAAK7F,OAAQ6F,EAAKA,MAC5C,IAAI2C,GAAa9J,EAAQmH,IAG/BgD,GAAsB,WACtB,SAASA,EAAKhD,GACVzS,KAAKyS,KAAOA,EAQhB,OANAgD,EAAKlV,UAAUwT,IAAM,SAAUhG,GAC3B,OAAO/N,KAAKyS,KAAKsB,IAAIhG,IAEzB0H,EAAKlV,UAAU0K,MAAQ,SAAU8C,EAAG7C,GAChC,OAAOlL,KAAKyS,KAAKxH,MAAM8C,EAAG7C,IAEvBuK,EAVc,GA6BrBC,GAAsB,WACtB,SAASA,EAAKC,EAASC,EAAML,GACzBvV,KAAK6V,KAAOF,EACZ3V,KAAK4V,KAAOA,EACZ5V,KAAKuV,OAASA,EAKlB,OAHAG,EAAKnV,UAAUyK,IAAM,SAAUyH,EAAM3H,GACjC,OAAO9K,KAAKuV,OAAOvK,IAAI,IAAI8K,GAAS9V,KAAK6V,KAAM7V,KAAK4V,KAAMnD,GAAO3H,IAE9D4K,EATc,GAWrBI,GAA0B,SAAUlC,GAEpC,SAASkC,EAASH,EAASC,EAAMnD,GAC7B,IAAIzG,EAAQ4H,EAAOtK,KAAKtJ,KAAMyS,IAASzS,KAGvC,OAFAgM,EAAM6J,KAAOF,EACb3J,EAAM4J,KAAOA,EACN5J,EAOX,OAZA8G,EAAUgD,EAAUlC,GAOpBkC,EAASvV,UAAUuT,MAAQ,SAAU/F,EAAGvE,GACpC,IAAIzH,EAAS/B,KAAK6V,KAAK7V,KAAK4V,KAAMpM,GAClCxJ,KAAK4V,KAAO7T,EAAO6T,KACnB5V,KAAKyS,KAAKqB,MAAM/F,EAAGhM,EAAOQ,QAEvBuT,EAbkB,CAc3BL,IAcEM,GAAsB,WACtB,SAASA,EAAKlM,EAAGC,EAAGyL,GAChBvV,KAAKuV,OAASA,EACdvV,KAAK6J,EAAIA,EACT7J,KAAKuC,MAAQuH,EAOjB,OALAiM,EAAKxV,UAAUyK,IAAM,SAAUyH,EAAM3H,GACjC,IAAIuG,EAAKvB,EAAKsD,GAAmBpT,KAAKuC,MAAOkQ,GAAO3H,GAChDwG,EAAKtR,KAAKuV,OAAOvK,IAAI,IAAIgL,GAAShW,KAAK6J,EAAG7J,KAAKuC,MAAOkQ,GAAO3H,GACjE,OAAOsG,EAAYC,EAAIC,IAEpByE,EAXc,GAarBC,GAA0B,SAAUpC,GAEpC,SAASoC,EAASnM,EAAGC,EAAG2I,GACpB,IAAIzG,EAAQ4H,EAAOtK,KAAKtJ,KAAMyS,IAASzS,KAGvC,OAFAgM,EAAMnC,EAAIA,EACVmC,EAAMzJ,MAAQuH,EACPkC,EAOX,OAZA8G,EAAUkD,EAAUpC,GAOpBoC,EAASzV,UAAUuT,MAAQ,SAAU/F,EAAGvE,GACpC,IAAIK,EAAI7J,KAAK6J,EACb7J,KAAKuC,MAAQsH,EAAE7J,KAAKuC,MAAOiH,GAC3BxJ,KAAKyS,KAAKqB,MAAM/F,EAAG/N,KAAKuC,QAErByT,EAbkB,CAc3BP,IAGEQ,GAAe,SAAUpM,EAAGsK,GAC5B,OAAO,IAAI+B,GAAarM,EAAGsK,IAE3B+B,GAA8B,WAC9B,SAASA,EAAarM,EAAG0L,GACrBvV,KAAK6J,EAAIA,EACT7J,KAAKuV,OAASA,EAKlB,OAHAW,EAAa3V,UAAUyK,IAAM,SAAUyH,EAAM3H,GACzC,OAAO,IAAIqL,GAAiBnW,KAAK6J,EAAG7J,KAAKuV,OAAQ9C,EAAM3H,IAEpDoL,EARsB,GAU7BC,GAAkC,SAAUvC,GAE5C,SAASuC,EAAiBtM,EAAG0L,EAAQ9C,EAAM3H,GACvC,IAAIkB,EAAQ4H,EAAOtK,KAAKtJ,KAAMyS,IAASzS,KAKvC,OAJAgM,EAAMnC,EAAIA,EACVmC,EAAMlB,UAAYA,EAClBkB,EAAMjB,QAAS,EACfiB,EAAMyE,WAAaD,EAAY+E,EAAOvK,IAAIgB,EAAOlB,IAC1CkB,EA8BX,OArCA8G,EAAUqD,EAAkBvC,GAS5BuC,EAAiB5V,UAAUuT,MAAQ,SAAU/F,EAAGvE,GACvCxJ,KAAK+K,QAGV/K,KAAKyS,KAAKqB,MAAM/F,EAAGvE,IAEvB2M,EAAiB5V,UAAUwT,IAAM,SAAUhG,GAClC/N,KAAK+K,SAGVyH,EAAazE,EAAG/N,KAAKyQ,WAAYzQ,KAAKyS,MACtCzS,KAAKoW,UAAUrI,EAAG/N,KAAKyS,QAE3B0D,EAAiB5V,UAAU6V,UAAY,SAAUrI,EAAG0E,GAChD,IACIzS,KAAKyQ,WAAazQ,KAAKqW,SAASrW,KAAK6J,EAAGkE,EAAG0E,GAE/C,MAAOvH,GACHuH,EAAKxH,MAAM8C,EAAG7C,KAGtBiL,EAAiB5V,UAAU8V,SAAW,SAAUxM,EAAGkE,EAAG0E,GAClD,OAAO,GAAIA,EAAMzS,KAAK8K,UAAWuK,GAActH,EAAGlE,OAEtDsM,EAAiB5V,UAAU4K,QAAU,WAEjC,OADAnL,KAAK+K,QAAS,EACP/K,KAAKyQ,WAAWtF,WAEpBgL,EAtC0B,CAuCnCV,IAQEa,GAAwB,WACxB,SAASA,EAAOzD,EAAG0C,GACfvV,KAAK6S,EAAIA,EACT7S,KAAKuV,OAASA,EAoBlB,OAlBAe,EAAO/V,UAAUyK,IAAM,SAAUyH,EAAM3H,GACnC,OAAO9K,KAAKuV,OAAOvK,IAAI,IAAIuL,GAAWvW,KAAK6S,EAAGJ,GAAO3H,IAQzDwL,EAAOjE,OAAS,SAAUQ,EAAG0C,GACzB,OAAIrB,GAAiBqB,GACVA,EAEPA,aAAkBe,EACX,IAAIA,EAAOE,GAAIjB,EAAO1C,EAAGA,GAAI0C,EAAOA,QAExC,IAAIe,EAAOzD,EAAG0C,IAElBe,EAvBgB,GAyBvBC,GAA4B,SAAU3C,GAEtC,SAAS2C,EAAW1D,EAAGJ,GACnB,IAAIzG,EAAQ4H,EAAOtK,KAAKtJ,KAAMyS,IAASzS,KAEvC,OADAgM,EAAM6G,EAAIA,EACH7G,EAMX,OAVA8G,EAAUyD,EAAY3C,GAMtB2C,EAAWhW,UAAUuT,MAAQ,SAAU/F,EAAGvE,IAEtCqJ,EADQ7S,KAAK6S,GACXrJ,IAAMxJ,KAAKyS,KAAKqB,MAAM/F,EAAGvE,IAExB+M,EAXoB,CAY7Bd,IACEe,GAAM,SAAU3D,EAAG4D,GAAK,OAAO,SAAUjN,GAAK,OAAOqJ,EAAErJ,IAAMiN,EAAEjN,KAG/DkN,GAA2B,WAC3B,SAASA,EAAU7D,EAAGhJ,EAAG0L,GACrBvV,KAAK6S,EAAIA,EACT7S,KAAK6J,EAAIA,EACT7J,KAAKuV,OAASA,EAKlB,OAHAmB,EAAUnW,UAAUyK,IAAM,SAAUyH,EAAM3H,GACtC,OAAO9K,KAAKuV,OAAOvK,IAAI,IAAI2L,GAAc3W,KAAK6S,EAAG7S,KAAK6J,EAAG4I,GAAO3H,IAE7D4L,EATmB,GAW1BC,GAA+B,SAAU/C,GAEzC,SAAS+C,EAAc9D,EAAGhJ,EAAG4I,GACzB,IAAIzG,EAAQ4H,EAAOtK,KAAKtJ,KAAMyS,IAASzS,KAGvC,OAFAgM,EAAM6G,EAAIA,EACV7G,EAAMnC,EAAIA,EACHmC,EAOX,OAZA8G,EAAU6D,EAAe/C,GAOzB+C,EAAcpW,UAAUuT,MAAQ,SAAU/F,EAAGvE,GACzC,IAAIK,EAAI7J,KAAK6J,GAEbgJ,EADQ7S,KAAK6S,GACXrJ,IAAMxJ,KAAKyS,KAAKqB,MAAM/F,EAAGlE,EAAEL,KAE1BmN,EAbuB,CAchClB,IAGE,GAAqB,WACrB,SAASvV,EAAI2J,EAAG0L,GACZvV,KAAK6J,EAAIA,EACT7J,KAAKuV,OAASA,EAwBlB,OAtBArV,EAAIK,UAAUyK,IAAM,SAAUyH,EAAM3H,GAChC,OAAO9K,KAAKuV,OAAOvK,IAAI,IAAI4L,GAAQ5W,KAAK6J,EAAG4I,GAAO3H,IAStD5K,EAAImS,OAAS,SAAUxI,EAAG0L,GACtB,OAAIrB,GAAiBqB,GACVvB,KAEPuB,aAAkBrV,EACX,IAAIA,EAAI,EAAQ2J,EAAG0L,EAAO1L,GAAI0L,EAAOA,QAE5CA,aAAkBe,GACX,IAAII,GAAUnB,EAAO1C,EAAGhJ,EAAG0L,EAAOA,QAEtC,IAAIrV,EAAI2J,EAAG0L,IAEfrV,EA3Ba,GA6BpB0W,GAAyB,SAAUhD,GAEnC,SAASgD,EAAQ/M,EAAG4I,GAChB,IAAIzG,EAAQ4H,EAAOtK,KAAKtJ,KAAMyS,IAASzS,KAEvC,OADAgM,EAAMnC,EAAIA,EACHmC,EAMX,OAVA8G,EAAU8D,EAAShD,GAMnBgD,EAAQrW,UAAUuT,MAAQ,SAAU/F,EAAGvE,GACnC,IAAIK,EAAI7J,KAAK6J,EACb7J,KAAKyS,KAAKqB,MAAM/F,EAAGlE,EAAEL,KAElBoN,EAXiB,CAY1BnB,IASE,GAAM,SAAU5L,EAAGsK,GACnB,OAAO,GAAI9B,OAAOxI,EAAGsK,IAoBrB0C,GAAqB,WACrB,SAASA,EAAIhN,EAAG0L,GACZvV,KAAKuV,OAASA,EACdvV,KAAK6J,EAAIA,EAKb,OAHAgN,EAAItW,UAAUyK,IAAM,SAAUyH,EAAM3H,GAChC,OAAO9K,KAAKuV,OAAOvK,IAAI,IAAI8L,GAAQ9W,KAAK6J,EAAG4I,GAAO3H,IAE/C+L,EARa,GAUpBC,GAAyB,SAAUlD,GAEnC,SAASkD,EAAQjN,EAAG4I,GAChB,IAAIzG,EAAQ4H,EAAOtK,KAAKtJ,KAAMyS,IAASzS,KAEvC,OADAgM,EAAMnC,EAAIA,EACHmC,EAOX,OAXA8G,EAAUgE,EAASlD,GAMnBkD,EAAQvW,UAAUuT,MAAQ,SAAU/F,EAAGvE,IAEnCK,EADQ7J,KAAK6J,GACXL,GACFxJ,KAAKyS,KAAKqB,MAAM/F,EAAGvE,IAEhBsN,EAZiB,CAa1BrB,IAGEsB,GAA2B,SAAUnD,GAErC,SAASmD,EAAUjT,EAAG2O,GAClB,IAAIzG,EAAQ4H,EAAOtK,KAAKtJ,KAAMyS,IAASzS,KAIvC,OAHAgM,EAAM5I,MAAQU,EACdkI,EAAMjB,QAAS,EACfiB,EAAMzJ,WAAQqG,EACPoD,EAgBX,OAtBA8G,EAAUiE,EAAWnD,GAQrBmD,EAAUxW,UAAUuT,MAAQ,SAAU/F,EAAGvE,GAChCxJ,KAAK+K,SAGV/K,KAAKuC,MAAQiH,EACbxJ,KAAKyS,KAAKqB,MAAM/F,EAAG/N,QAEvB+W,EAAUxW,UAAUwT,IAAM,SAAUhG,GAC3B/N,KAAK+K,SAGV/K,KAAK+K,QAAS,EACd/K,KAAKyS,KAAKqB,MAAM/F,EAAG/N,QAEhB+W,EAvBmB,CAwB5BtB,IAQF,SAASuB,GAAOnN,EAAGjI,GAEf,OAAQA,EAAKoC,QACT,KAAK,EAAG,OAAO6F,IACf,KAAK,EAAG,OAAOA,EAAEjI,EAAK,IACtB,KAAK,EAAG,OAAOiI,EAAEjI,EAAK,GAAIA,EAAK,IAC/B,KAAK,EAAG,OAAOiI,EAAEjI,EAAK,GAAIA,EAAK,GAAIA,EAAK,IACxC,KAAK,EAAG,OAAOiI,EAAEjI,EAAK,GAAIA,EAAK,GAAIA,EAAK,GAAIA,EAAK,IACjD,KAAK,EAAG,OAAOiI,EAAEjI,EAAK,GAAIA,EAAK,GAAIA,EAAK,GAAIA,EAAK,GAAIA,EAAK,IAC1D,QACI,OAAOiI,EAAE7H,WAAM4G,EAAWhH,IAatC,IAAIqV,GAAU,SAAUpN,EAAGqN,EAASC,GAChC,OAAOC,GAAavN,EAAG,CAACqN,EAASC,KASjCC,GAAe,SAAUvN,EAAGwK,GAC5B,OAA0B,IAAnBA,EAAQrQ,QAAgBoQ,GAAuBC,GAAWL,KACxC,IAAnBK,EAAQrQ,OAAe,GAAI6F,EAAGwK,EAAQ,IAClC,IAAIgD,GAAQxN,EAAGwK,IAEzBgD,GAAyB,WACzB,SAASA,EAAQxN,EAAGyN,GAChBtX,KAAK6J,EAAIA,EACT7J,KAAKsX,QAAUA,EAanB,OAXAD,EAAQ9W,UAAUyK,IAAM,SAAUyH,EAAM3H,GAKpC,IAJA,IAAIpB,EAAI1J,KAAKsX,QAAQtT,OACjB2N,EAAc,IAAI5O,MAAM2G,GACxB6N,EAAQ,IAAIxU,MAAM2G,GAClB8N,EAAY,IAAIC,GAAY9F,EAAa4F,EAAMvT,OAAQyO,EAAMzS,KAAK6J,GAC7D6N,OAAY,EAAQ5T,EAAI,EAAGA,EAAI4F,IAAK5F,EACzC4T,EAAYH,EAAMzT,GAAK,IAAIiT,GAAUjT,EAAG0T,GACxC7F,EAAY7N,GAAK9D,KAAKsX,QAAQxT,GAAGkH,IAAI0M,EAAW5M,GAEpD,OAAOkG,EAAWW,IAEf0F,EAhBiB,GAkBxBI,GAA6B,SAAU7D,GAEvC,SAAS6D,EAAY9F,EAAa3N,EAAQyO,EAAM5I,GAC5C,IAAImC,EAAQ4H,EAAOtK,KAAKtJ,KAAMyS,IAASzS,KAOvC,OANAgM,EAAM2F,YAAcA,EACpB3F,EAAMnC,EAAIA,EACVmC,EAAM2L,SAAW3T,EACjBgI,EAAM4L,OAAS,IAAI7U,MAAMiB,GACzBgI,EAAM6L,SAAW,IAAI9U,MAAMiB,GAAQ8T,MAAK,GACxC9L,EAAM+L,YAAc/T,EACbgI,EA6BX,OAtCA8G,EAAU2E,EAAa7D,GAWvB6D,EAAYlX,UAAUuT,MAAQ,SAAU/F,EAAGiK,GACvC,GAAKA,EAAajN,OAAlB,CAIA,IAAIjH,EAAIkU,EAAa5U,MACjBuU,EAAW3X,KAAKiY,YAAYnU,GAChC9D,KAAK4X,OAAO9T,GAAKkU,EAAazV,MACb,IAAboV,GACA3X,KAAKyS,KAAKqB,MAAM/F,EAAGiJ,GAAOhX,KAAK6J,EAAG7J,KAAK4X,cAPvC5X,KAAKmL,QAAQ4C,EAAGiK,EAAa5U,QAUrCqU,EAAYlX,UAAU0X,YAAc,SAAU7U,GAO1C,OANIpD,KAAK2X,SAAW,IACX3X,KAAK6X,SAASzU,KACfpD,KAAK6X,SAASzU,IAAS,EACvBpD,KAAK2X,UAAY,IAGlB3X,KAAK2X,UAEhBF,EAAYlX,UAAU4K,QAAU,SAAU4C,EAAG3K,GACzCoP,EAAazE,EAAG/N,KAAK2R,YAAYvO,GAAQpD,KAAKyS,MACnB,KAArBzS,KAAK+X,aACP/X,KAAKyS,KAAKsB,IAAIhG,IAGf0J,EAvCqB,CAwC9BhC,IAkBEyC,GAAoB,SAAUC,EAAahE,GAC3C,OAAOiE,GAAqBhO,EAAI+N,EAAahE,IAE7CiE,GAAuB,SAAUvO,EAAGsO,EAAahE,GACjD,OAAOD,GAAiBC,GAAUH,KAC5B,IAAIqE,GAAkBxO,EAAGsO,EAAahE,IAE5CkE,GAAmC,WACnC,SAASA,EAAkBxO,EAAGsO,EAAa5C,GACvCvV,KAAK6J,EAAIA,EACT7J,KAAKmY,YAAcA,EACnBnY,KAAKuV,OAASA,EAKlB,OAHA8C,EAAkB9X,UAAUyK,IAAM,SAAUyH,EAAM3H,GAC9C,OAAO,IAAIwN,GAAMtY,KAAK6J,EAAG7J,KAAKmY,YAAanY,KAAKuV,OAAQ9C,EAAM3H,IAE3DuN,EAT2B,GAYlCC,GAAuB,WACvB,SAASA,EAAMzO,EAAGsO,EAAa5C,EAAQ9C,EAAM3H,GACzC9K,KAAK6J,EAAIA,EACT7J,KAAKmY,YAAcA,EACnBnY,KAAKyS,KAAOA,EACZzS,KAAK8K,UAAYA,EACjB9K,KAAKuY,QAAU,GACfvY,KAAKwY,QAAU,GACfxY,KAAKyQ,WAAaD,EAAY+E,EAAOvK,IAAIhL,KAAM8K,IAC/C9K,KAAK+K,QAAS,EA4DlB,OA1DAuN,EAAM/X,UAAUuT,MAAQ,SAAU/F,EAAGvE,GACjCxJ,KAAKyY,SAAS1K,EAAGvE,IAErB8O,EAAM/X,UAAUkY,SAAW,SAAU1K,EAAGvE,GAChCxJ,KAAKwY,QAAQxU,OAAShE,KAAKmY,YAC3BnY,KAAK0Y,WAAW3K,EAAGvE,GAGnBxJ,KAAKuY,QAAQzY,KAAK0J,IAG1B8O,EAAM/X,UAAUmY,WAAa,SAAU3K,EAAGvE,GACtC,IACIxJ,KAAK2Y,UAAU5K,EAAGvE,GAEtB,MAAO0B,GACHlL,KAAKiL,MAAM8C,EAAG7C,KAGtBoN,EAAM/X,UAAUoY,UAAY,SAAU5K,EAAGvE,GACrC,IAAIoP,EAAY,IAAIC,GAAM9K,EAAG/N,KAAMA,KAAKyS,MACxCmG,EAAUnI,WAAaqI,GAAU9Y,KAAK6J,EAAGkE,EAAGvE,EAAGoP,EAAW5Y,KAAK8K,WAC/D9K,KAAKwY,QAAQ1Y,KAAK8Y,IAEtBN,EAAM/X,UAAUwT,IAAM,SAAUhG,GAC5B/N,KAAK+K,QAAS,EACdyH,EAAazE,EAAG/N,KAAKyQ,WAAYzQ,KAAKyS,MACtCzS,KAAK+Y,SAAShL,IAElBuK,EAAM/X,UAAU0K,MAAQ,SAAU8C,EAAG7C,GACjClL,KAAK+K,QAAS,EACd/K,KAAKyS,KAAKxH,MAAM8C,EAAG7C,IAEvBoN,EAAM/X,UAAU4K,QAAU,WACtBnL,KAAK+K,QAAS,EACd/K,KAAKuY,QAAQvU,OAAS,EACtBhE,KAAKyQ,WAAWtF,UAChB6F,EAAWhR,KAAKwY,SAASrN,WAE7BmN,EAAM/X,UAAUyY,SAAW,SAAUjL,EAAGkL,GACpC,IAAInV,EAAI9D,KAAKwY,QAAQnV,QAAQ4V,GACzBnV,GAAK,GACL9D,KAAKwY,QAAQ3K,OAAO/J,EAAG,GAE3B0O,EAAazE,EAAGkL,EAAOjZ,MACvB,IAAIuY,EAAUvY,KAAKuY,QACJA,EA1D0BvU,OAAS,EA2D9ChE,KAAK0Y,WAAW3K,EAAGwK,EAAQW,SAG3BlZ,KAAK+Y,SAAShL,IAGtBuK,EAAM/X,UAAUwY,SAAW,SAAUhL,GAC5B/N,KAAK+K,QAAkC,IAAxB/K,KAAKwY,QAAQxU,QAC7BhE,KAAKyS,KAAKsB,IAAIhG,IAGfuK,EArEe,GAuEtBQ,GAAY,SAAUjP,EAAGkE,EAAGvE,EAAGiJ,EAAM3H,GACrC,OAAOjB,EAAEL,GAAGwB,IAAIyH,EAAMzC,EAAoBjC,EAAGjD,KAE7C+N,GAAuB,WACvB,SAASA,EAAMnO,EAAMyO,EAAO1G,GACxBzS,KAAK0K,KAAOA,EACZ1K,KAAKmZ,MAAQA,EACbnZ,KAAKyS,KAAOA,EACZzS,KAAKyQ,WAAa,IActB,OAZAoI,EAAMtY,UAAUuT,MAAQ,SAAU/F,EAAGvE,GACjCxJ,KAAKyS,KAAKqB,MAAM/F,EAAI/N,KAAK0K,KAAMlB,IAEnCqP,EAAMtY,UAAUwT,IAAM,SAAUhG,GAC5B/N,KAAKmZ,MAAMH,SAASjL,EAAI/N,KAAK0K,KAAM1K,OAEvC6Y,EAAMtY,UAAU0K,MAAQ,SAAU8C,EAAG7C,GACjClL,KAAKmZ,MAAMlO,MAAM8C,EAAI/N,KAAK0K,KAAMQ,IAEpC2N,EAAMtY,UAAU4K,QAAU,WACtB,OAAOnL,KAAKyQ,WAAWtF,WAEpB0N,EAnBe,GAqCtBO,GAAO,SAAUjF,GAAU,OAAO+D,GAAkB7L,IAAU8H,IAgC9DkF,GAAa,SAAUhF,GACvB,OAAOiF,GAAaC,GAAsBlF,KAY1CiF,GAAe,SAAUjF,GACzB,OAA0B,IAAnBA,EAAQrQ,OAAegQ,KACL,IAAnBK,EAAQrQ,OAAeqQ,EAAQ,GAC3B,IAAImF,GAAM5P,EAAO6P,GAAe,GAAIpF,KAE9CkF,GAAwB,SAAUlF,GAClC,OAAOA,EAAQlR,OAAOuW,KAEtBA,GAAsB,SAAUvF,GAChC,OAAQD,GAAiBC,IAEzBsF,GAAgB,SAAUnC,EAASnD,GACnC,OAAOmD,EAAQ5F,OAAOyC,aAAkBqF,GAAQrF,EAAOmD,QAAUnD,IAEjEqF,GAAuB,WACvB,SAASA,EAAMlC,GACXtX,KAAKsX,QAAUA,EAanB,OAXAkC,EAAMjZ,UAAUyK,IAAM,SAAUyH,EAAM3H,GAKlC,IAJA,IAAIpB,EAAI1J,KAAKsX,QAAQtT,OACjB2N,EAAc,IAAI5O,MAAM2G,GACxB6N,EAAQ,IAAIxU,MAAM2G,GAClB8N,EAAY,IAAImC,GAAUhI,EAAa4F,EAAO9E,GACzCiF,OAAY,EAAQ5T,EAAI,EAAGA,EAAI4F,IAAK5F,EACzC4T,EAAYH,EAAMzT,GAAK,IAAIiT,GAAUjT,EAAG0T,GACxC7F,EAAY7N,GAAK9D,KAAKsX,QAAQxT,GAAGkH,IAAI0M,EAAW5M,GAEpD,OAAOkG,EAAWW,IAEf6H,EAfe,GAiBtBG,GAA2B,SAAU/F,GAErC,SAAS+F,EAAUhI,EAAa4F,EAAO9E,GACnC,IAAIzG,EAAQ4H,EAAOtK,KAAKtJ,KAAMyS,IAASzS,KAGvC,OAFAgM,EAAM2F,YAAcA,EACpB3F,EAAM+L,YAAcR,EAAMvT,OACnBgI,EAeX,OApBA8G,EAAU6G,EAAW/F,GAOrB+F,EAAUpZ,UAAUuT,MAAQ,SAAU/F,EAAG6L,GAChCA,EAAW7O,OAIhB/K,KAAKyS,KAAKqB,MAAM/F,EAAG6L,EAAWrX,OAH1BvC,KAAKmL,QAAQ4C,EAAG6L,EAAWxW,QAKnCuW,EAAUpZ,UAAU4K,QAAU,SAAU4C,EAAG3K,GACvCoP,EAAazE,EAAG/N,KAAK2R,YAAYvO,GAAQpD,KAAKyS,MACnB,KAArBzS,KAAK+X,aACP/X,KAAKyS,KAAKsB,IAAIhG,IAGf4L,EArBmB,CAsB5BlE,IAMEoE,GAAW,SAAUhQ,EAAG+N,EAAQkC,GAChC,OAAO5F,GAAiB4F,IAAY5F,GAAiB0D,GAC/C5D,KACA,IAAI+F,GAASlQ,EAAG+N,EAAQkC,IAE9BC,GAA0B,WAC1B,SAASA,EAASlQ,EAAG+N,EAAQkC,GACzB9Z,KAAK6J,EAAIA,EACT7J,KAAK4X,OAASA,EACd5X,KAAK8Z,QAAUA,EAQnB,OANAC,EAASxZ,UAAUyK,IAAM,SAAUyH,EAAM3H,GACrC,IAAIkP,EAAa,IAAIC,GAAaja,KAAK6J,EAAG4I,GACtCyH,EAAmBla,KAAK4X,OAAO5M,IAAIgP,EAAWG,OAAQrP,GACtDsP,EAAoBpa,KAAK8Z,QAAQ9O,IAAIgP,EAAYlP,GACrD,OAAOsG,EAAYgJ,EAAmBF,IAEnCH,EAZkB,GAczBE,GAA8B,SAAUrG,GAExC,SAASqG,EAAapQ,EAAG4I,GACrB,IAAIzG,EAAQ4H,EAAOtK,KAAKtJ,KAAMyS,IAASzS,KAGvC,OAFAgM,EAAMnC,EAAIA,EACVmC,EAAMmO,OAAS,IAAIE,GAAgBrO,GAC5BA,EAUX,OAfA8G,EAAUmH,EAAcrG,GAOxBqG,EAAa1Z,UAAUuT,MAAQ,SAAU/F,EAAGvE,GACxC,GAAIxJ,KAAKma,OAAOtC,SAAU,CACtB,IAAIhO,EAAI7J,KAAK6J,EAGb7J,KAAKyS,KAAKqB,MAAM/F,EAAGlE,EAAE7J,KAAKma,OAAO5X,MAAOiH,MAGzCyQ,EAhBsB,CAiB/BxE,IACE4E,GAAiC,SAAUzG,GAE3C,SAASyG,EAAgB5H,GACrB,IAAIzG,EAAQ4H,EAAOtK,KAAKtJ,KAAMyS,IAASzS,KAEvC,OADAgM,EAAM6L,UAAW,EACV7L,EAOX,OAXA8G,EAAUuH,EAAiBzG,GAM3ByG,EAAgB9Z,UAAUuT,MAAQ,SAAUqB,EAAI3L,GAC5CxJ,KAAKuC,MAAQiH,EACbxJ,KAAK6X,UAAW,GAEpBwC,EAAgB9Z,UAAUwT,IAAM,aACzBsG,EAZyB,CAalC5E,IAIE6E,GAAa,SAAUC,EAAWC,GAClC,IAAIC,EAAMlO,KAAKC,IAAI,EAAG+N,GAEtB,MAAO,CAAEE,IAAKA,EAAKjO,IADTD,KAAKC,IAAIiO,EAAKD,KAsBxBE,GAAO,SAAUC,EAAGxG,GACpB,OAAOnG,GAAM,EAAG2M,EAAGxG,IAiBnBnG,GAAQ,SAAU4M,EAAO7G,EAAKI,GAC9B,OAAO0G,GAAYP,GAAWM,EAAO7G,GAAMI,IAE3C0G,GAAc,SAAUC,EAAQ3G,GAChC,OAAO4G,GAAaD,EAAQ3G,GAAUH,KAChCG,aAAkB,GAAM6G,GAAgBF,EAAQ3G,GAC5CA,aAAkB8G,GAAQC,GAAUJ,EAAQ3G,GACxCgH,GAAYL,EAAQ3G,IAElC4G,GAAe,SAAUD,EAAQ3G,GACjC,OAAOD,GAAiBC,KA1CAxK,EA0CuBmR,GAzCtCL,KAAO9Q,EAAE6C,IADJ,IAAU7C,GA4CxBwR,GAAc,SAAUL,EAAQ3G,GAChC,OAzC6BxK,EAyCLmR,GAxCfL,KAAO,GAAK9Q,EAAE6C,MAAQH,IAwCG8H,EAAS,IAAI8G,GAAMH,EAAQ3G,GAzC1C,IAAUxK,GA2C7BqR,GAAkB,SAAUF,EAAQM,GACpC,OAAO,GAAI/I,OAAO+I,EAAUvR,EAAGgR,GAAYC,EAAQM,EAAU7F,UAE7D2F,GAAY,SAAUJ,EAAQO,GAC9B,OAAOR,IAvDiBS,EAuDOD,EAAYP,OAvDfS,EAuDuBT,EAtD5CR,GAAWgB,EAAGb,IAAMc,EAAGd,IAAKlO,KAAKkO,IAAIa,EAAG9O,IAAK8O,EAAGb,IAAMc,EAAG/O,OAsDJ6O,EAAY9F,QAvD1D,IAAU+F,EAAIC,GAyD5BN,GAAuB,WACvB,SAASA,EAAMH,EAAQvF,GACnBvV,KAAKuV,OAASA,EACdvV,KAAK8a,OAASA,EAQlB,OANAG,EAAM1a,UAAUyK,IAAM,SAAUyH,EAAM3H,GAClC,IAAI2F,EAAa,IAAImE,GACjB4G,EAAY,IAAIC,GAAUzb,KAAK8a,OAAOL,IAAKza,KAAK8a,OAAOtO,IAAMxM,KAAK8a,OAAOL,IAAKhI,EAAMhC,GAExF,OADAA,EAAWoE,cAAc7U,KAAKuV,OAAOvK,IAAIwQ,EAAW1Q,IAC7C2F,GAEJwK,EAXe,GAatBQ,GAA2B,SAAU7H,GAErC,SAAS6H,EAAUC,EAAMhB,EAAMjI,EAAMhC,GACjC,IAAIzE,EAAQ4H,EAAOtK,KAAKtJ,KAAMyS,IAASzS,KAIvC,OAHAgM,EAAM0P,KAAOA,EACb1P,EAAM0O,KAAOA,EACb1O,EAAMyE,WAAaA,EACZzE,EAkBX,OAxBA8G,EAAU2I,EAAW7H,GAQrB6H,EAAUlb,UAAUuT,MAAQ,SAAU/F,EAAGvE,GAEjCxJ,KAAK0b,KAAO,EACZ1b,KAAK0b,MAAQ,EAGC,IAAd1b,KAAK0a,OAGT1a,KAAK0a,MAAQ,EACb1a,KAAKyS,KAAKqB,MAAM/F,EAAGvE,GACD,IAAdxJ,KAAK0a,OACL1a,KAAKyQ,WAAWtF,UAChBnL,KAAKyS,KAAKsB,IAAIhG,MAGf0N,EAzBmB,CA0B5BhG,IAKEkG,GAA2B,WAC3B,SAASA,EAAU9I,EAAG0C,GAClBvV,KAAK6S,EAAIA,EACT7S,KAAKuV,OAASA,EAQlB,OANAoG,EAAUpb,UAAUyK,IAAM,SAAUyH,EAAM3H,GACtC,IAAI2F,EAAa,IAAImE,GACjBgH,EAAgB,IAAIC,GAAc7b,KAAK6S,EAAGJ,EAAMhC,GAEpD,OADAA,EAAWoE,cAAc7U,KAAKuV,OAAOvK,IAAI4Q,EAAe9Q,IACjD2F,GAEJkL,EAXmB,GAa1BE,GAA+B,SAAUjI,GAEzC,SAASiI,EAAchJ,EAAGJ,EAAMhC,GAC5B,IAAIzE,EAAQ4H,EAAOtK,KAAKtJ,KAAMyS,IAASzS,KAIvC,OAHAgM,EAAM6G,EAAIA,EACV7G,EAAMjB,QAAS,EACfiB,EAAMyE,WAAaA,EACZzE,EAgBX,OAtBA8G,EAAU+I,EAAejI,GAQzBiI,EAActb,UAAUuT,MAAQ,SAAU/F,EAAGvE,GACzC,GAAKxJ,KAAK+K,OAAV,CAGA,IAAI8H,EAAI7S,KAAK6S,EACb7S,KAAK+K,OAAS8H,EAAErJ,GACZxJ,KAAK+K,OACL/K,KAAKyS,KAAKqB,MAAM/F,EAAGvE,IAGnBxJ,KAAKyQ,WAAWtF,UAChBnL,KAAKyS,KAAKsB,IAAIhG,MAGf8N,EAvBuB,CAwBhCpG,IAKEqG,GAA2B,WAC3B,SAASA,EAAUjJ,EAAG0C,GAClBvV,KAAK6S,EAAIA,EACT7S,KAAKuV,OAASA,EAKlB,OAHAuG,EAAUvb,UAAUyK,IAAM,SAAUyH,EAAM3H,GACtC,OAAO9K,KAAKuV,OAAOvK,IAAI,IAAI+Q,GAAc/b,KAAK6S,EAAGJ,GAAO3H,IAErDgR,EARmB,GAU1BC,GAA+B,SAAUnI,GAEzC,SAASmI,EAAclJ,EAAGJ,GACtB,IAAIzG,EAAQ4H,EAAOtK,KAAKtJ,KAAMyS,IAASzS,KAGvC,OAFAgM,EAAM6G,EAAIA,EACV7G,EAAMgQ,UAAW,EACVhQ,EAYX,OAjBA8G,EAAUiJ,EAAenI,GAOzBmI,EAAcxb,UAAUuT,MAAQ,SAAU/F,EAAGvE,GACzC,GAAIxJ,KAAKgc,SAAU,CACf,IAAInJ,EAAI7S,KAAK6S,EAEb,GADA7S,KAAKgc,SAAWnJ,EAAErJ,GACdxJ,KAAKgc,SACL,OAGRhc,KAAKyS,KAAKqB,MAAM/F,EAAGvE,IAEhBuS,EAlBuB,CAmBhCtG,IAKEwG,GAA2B,WAC3B,SAASA,EAAUpJ,EAAG0C,GAClBvV,KAAK6S,EAAIA,EACT7S,KAAKuV,OAASA,EAKlB,OAHA0G,EAAU1b,UAAUyK,IAAM,SAAUyH,EAAM3H,GACtC,OAAO9K,KAAKuV,OAAOvK,IAAI,IAAIkR,GAAclc,KAAK6S,EAAGJ,GAAO3H,IAErDmR,EARmB,GAU1BC,GAA+B,SAAUtI,GAEzC,SAASsI,EAAcrJ,EAAGJ,GACtB,IAAIzG,EAAQ4H,EAAOtK,KAAKtJ,KAAMyS,IAASzS,KAGvC,OAFAgM,EAAM6G,EAAIA,EACV7G,EAAMgQ,UAAW,EACVhQ,EAaX,OAlBA8G,EAAUoJ,EAAetI,GAOzBsI,EAAc3b,UAAUuT,MAAQ,SAAU/F,EAAGvE,GACzC,IAAIxJ,KAAKgc,SAAT,CAGA,IAAInJ,EAAI7S,KAAK6S,EACb7S,KAAKgc,SAAWnJ,EAAErJ,GAClBxJ,KAAKyS,KAAKqB,MAAM/F,EAAGvE,GACfxJ,KAAKgc,UACLhc,KAAKyS,KAAKsB,IAAIhG,KAGfmO,EAnBuB,CAoBhCzG,IAME0G,GAAW,SAAUtS,EAAGuS,EAAOjI,GAC/B,OAAOD,GAAiBC,IAA4B,IAAjBiI,EAAMpY,OACnCgQ,KACA,IAAIqI,GAASxS,EAAGuS,EAAO1B,GAAK0B,EAAMpY,OAAQmQ,KAEhDmI,GAAW,SAAU7S,GAAK,OAAOA,GACjC4S,GAA0B,WAC1B,SAASA,EAASxS,EAAGuS,EAAO7G,GACxBvV,KAAK6J,EAAIA,EACT7J,KAAKoc,MAAQA,EACbpc,KAAKuV,OAASA,EAKlB,OAHA8G,EAAS9b,UAAUyK,IAAM,SAAUyH,EAAM3H,GACrC,OAAO9K,KAAKuV,OAAOvK,IAAI,IAAIuR,GAAavc,KAAK6J,EAAG7J,KAAKoc,MAAO3J,GAAO3H,IAEhEuR,EATkB,GAWzBE,GAA8B,SAAU3I,GAExC,SAAS2I,EAAa1S,EAAGuS,EAAO3J,GAC5B,IAAIzG,EAAQ4H,EAAOtK,KAAKtJ,KAAMyS,IAASzS,KAIvC,OAHAgM,EAAMnC,EAAIA,EACVmC,EAAMoQ,MAAQA,EACdpQ,EAAM5I,MAAQ,EACP4I,EAOX,OAbA8G,EAAUyJ,EAAc3I,GAQxB2I,EAAahc,UAAUuT,MAAQ,SAAU/F,EAAGpE,GACxC,IAAIE,EAAI7J,KAAK6J,EACb7J,KAAKyS,KAAKqB,MAAM/F,EAAGlE,EAAE7J,KAAKoc,MAAMpc,KAAKoD,OAAQuG,IAC7C3J,KAAKoD,OAAS,GAEXmZ,EAdsB,CAe/B9G,IAcE+G,GAAuB,WACvB,SAASA,IACLxc,KAAKJ,KAAO,EACZI,KAAKyc,KAAO,EACZzc,KAAK0c,aAAe,EACpB1c,KAAK2c,KAAO,IAAI5Z,MAAM,GAyE1B,OAvEAyZ,EAAMjc,UAAUT,KAAO,SAAU0J,GAC7B,IAAIiT,EAAOzc,KAAKyc,KAMhB,OALAzc,KAAK2c,KAAKF,GAAQjT,EAClBxJ,KAAKyc,KAAQA,EAAO,EAAKzc,KAAK0c,aAC1B1c,KAAKyc,OAASzc,KAAKJ,MACnBI,KAAK4c,YAEL5c,KAAKJ,KAAOI,KAAKyc,KACVzc,KAAKyc,KAAOzc,KAAKJ,KAGjBI,KAAK0c,aAAe,GAAK1c,KAAKJ,KAAOI,KAAKyc,OAGzDD,EAAMjc,UAAU2Y,MAAQ,WACpB,IAAItZ,EAAOI,KAAKJ,KAChB,GAAIA,IAASI,KAAKyc,KAAlB,CAGA,IAAIjT,EAAIxJ,KAAK2c,KAAK/c,GAQlB,OAPAI,KAAK2c,KAAK/c,QAAQgJ,EAClB5I,KAAKJ,KAAQA,EAAO,EAAKI,KAAK0c,aAC1B9c,EAjCU,GAkCVI,KAAKyc,KA/BK,KAgCVzc,KAAKyc,MAAQzc,KAAK2c,KAAK3Y,SAAW,GAClChE,KAAK6c,cAEFrT,IAEXgT,EAAMjc,UAAUwM,QAAU,WACtB,OAAO/M,KAAKJ,OAASI,KAAKyc,MAE9BD,EAAMjc,UAAUyD,OAAS,WACrB,OAAIhE,KAAKJ,OAASI,KAAKyc,KACZ,EAEFzc,KAAKJ,KAAOI,KAAKyc,KACfzc,KAAKyc,KAAOzc,KAAKJ,KAGjBI,KAAK0c,aAAe,GAAK1c,KAAKJ,KAAOI,KAAKyc,OAGzDD,EAAMjc,UAAUqc,UAAY,WACpB5c,KAAKJ,OAELI,KAAK2c,KAAO3c,KAAK8c,YACjB9c,KAAKJ,KAAO,GAGhBI,KAAKyc,KAAOzc,KAAK2c,KAAK3Y,OACtBhE,KAAK2c,KAAK3Y,QAAU,EACpBhE,KAAK0c,aAAgB1c,KAAK0c,cAAgB,EAAK,GAEnDF,EAAMjc,UAAUsc,YAAc,WAC1B7c,KAAK2c,KAAK3Y,UAAY,EACtBhE,KAAK0c,gBAAkB,GAE3BF,EAAMjc,UAAUuc,UAAY,WACxB,IAGIhZ,EAHAiZ,EAAW,GACXJ,EAAO3c,KAAK2c,KACZ5Y,EAAM4Y,EAAK3Y,OAEf,IAAKF,EAAI9D,KAAKJ,KAAMkE,EAAIC,EAAKD,IACzBiZ,EAASjd,KAAK6c,EAAK7Y,IAEvB,IAAKA,EAAI,EAAGA,EAAI9D,KAAKyc,KAAM3Y,IACvBiZ,EAASjd,KAAK6c,EAAK7Y,IAEvB,OAAOiZ,GAEJP,EA9Ee,GAqGtBQ,GAAW,SAAUnT,EAAGwK,GACxB,OAA0B,IAAnBA,EAAQrQ,QAAgBoQ,GAAuBC,GAAWL,KACxC,IAAnBK,EAAQrQ,OAAe,GAAI6F,EAAGwK,EAAQ,IAClC,IAAI4I,GAAIpT,EAAGwK,IAErB4I,GAAqB,WACrB,SAASA,EAAIpT,EAAGyN,GACZtX,KAAK6J,EAAIA,EACT7J,KAAKsX,QAAUA,EAenB,OAbA2F,EAAI1c,UAAUyK,IAAM,SAAUyH,EAAM3H,GAMhC,IALA,IAAIpB,EAAI1J,KAAKsX,QAAQtT,OACjB2N,EAAc,IAAI5O,MAAM2G,GACxB6N,EAAQ,IAAIxU,MAAM2G,GAClBwT,EAAU,IAAIna,MAAM2G,GACpByT,EAAU,IAAIC,GAAQpd,KAAK6J,EAAGqT,EAAS3F,EAAO9E,GACzCiF,OAAY,EAAQ5T,EAAI,EAAGA,EAAI4F,IAAK5F,EACzCoZ,EAAQpZ,GAAK,IAAI0Y,GACjB9E,EAAYH,EAAMzT,GAAK,IAAIiT,GAAUjT,EAAGqZ,GACxCxL,EAAY7N,GAAK9D,KAAKsX,QAAQxT,GAAGkH,IAAI0M,EAAW5M,GAEpD,OAAOkG,EAAWW,IAEfsL,EAlBa,GAoBpBG,GAAyB,SAAUxJ,GAEnC,SAASwJ,EAAQvT,EAAGqT,EAAS3F,EAAO9E,GAChC,IAAIzG,EAAQ4H,EAAOtK,KAAKtJ,KAAMyS,IAASzS,KAIvC,OAHAgM,EAAMnC,EAAIA,EACVmC,EAAMuL,MAAQA,EACdvL,EAAMkR,QAAUA,EACTlR,EA2BX,OAjCA8G,EAAUsK,EAASxJ,GAQnBwJ,EAAQ7c,UAAUuT,MAAQ,SAAU/F,EAAGiK,GAEnC,GAAKA,EAAajN,OAAlB,CAIA,IAAImS,EAAUld,KAAKkd,QACfG,EAASH,EAAQlF,EAAa5U,OAElC,GADAia,EAAOvd,KAAKkY,EAAazV,OACD,IAApB8a,EAAOrZ,SAAgB,CACvB,IA6BZ,SAAekZ,GACX,IAAK,IAAIpZ,EAAI,EAAG4F,EAAIwT,EAAQlZ,OAAQF,EAAI4F,IAAK5F,EACzC,GAAIoZ,EAAQpZ,GAAGiJ,UACX,OAAO,EAGf,OAAO,EAnCMuQ,CAAMJ,GACP,OAEJK,GAAWvd,KAAK6J,EAAGkE,EAAGmP,EAASld,KAAKyS,MAkBhD,SAAeyK,EAAS3F,GACpB,IAAK,IAAIzT,EAAI,EAAG4F,EAAIwT,EAAQlZ,OAAQF,EAAI4F,IAAK5F,EACzC,GAAIoZ,EAAQpZ,GAAGiJ,YAAcwK,EAAMzT,GAAGiH,OAClC,OAAO,EAGf,OAAO,EAvBKyS,CAAMxd,KAAKkd,QAASld,KAAKuX,QACzBvX,KAAKyS,KAAKsB,IAAIhG,SAZlB/N,KAAKmL,QAAQ4C,EAAGiK,EAAa5U,QAgBrCga,EAAQ7c,UAAU4K,QAAU,SAAU4C,EAAG3K,GACxBpD,KAAKkd,QAAQ9Z,GACf2J,WACP/M,KAAKyS,KAAKsB,IAAIhG,IAGfqP,EAlCiB,CAmC1B3H,IACE8H,GAAa,SAAU1T,EAAGkE,EAAGmP,EAASzK,GACtC,OAAOA,EAAKqB,MAAM/F,EAAGiJ,GAAOnN,EH34ChC,SAAaA,EAAGJ,GAGZ,IAFA,IAAIC,EAAID,EAAEzF,OACN2F,EAAI,IAAI5G,MAAM2G,GACT5F,EAAI,EAAGA,EAAI4F,IAAK5F,EACrB6F,EAAE7F,GAAK+F,EAAEJ,EAAE3F,IAEf,OAAO6F,EGq4CwB8T,CAAM7d,GAAMsd,MAE3Ctd,GAAO,SAAUyd,GAAU,OAAOA,EAAOnE,SAyBzCwE,GAAe,SAAUvJ,GACzB,OAAOD,GAAiBC,GAClBH,KACA,IAAI2J,GAAOxJ,IAEjBwJ,GAAwB,WACxB,SAASA,EAAOpI,GACZvV,KAAKuV,OAASA,EAMlB,OAJAoI,EAAOpd,UAAUyK,IAAM,SAAUyH,EAAM3H,GACnC,IAAI8S,EAAa,IAAIC,GAAWpL,EAAM3H,GACtC,OAAOsG,EAAYwM,EAAY5d,KAAKuV,OAAOvK,IAAI4S,EAAY9S,KAExD6S,EARgB,GAUvBE,GAA4B,WAC5B,SAASA,EAAWpL,EAAM3H,GACtB9K,KAAKyS,KAAOA,EACZzS,KAAK8K,UAAYA,EACjB9K,KAAKwY,QAAU,KACfxY,KAAKwd,OAAQ,EAyCjB,OAvCAK,EAAWtd,UAAUuT,MAAQ,SAAU/F,EAAGoG,GACtCnU,KAAK8d,eAAe/P,GACpB/N,KAAKwY,QAAU,IAAIuF,GAAQ5J,EAAQpG,EAAG1B,IAAUrM,KAAMA,KAAKyS,KAAMzS,KAAK8K,YAE1E+S,EAAWtd,UAAUwT,IAAM,SAAUhG,GACjC/N,KAAKwd,OAAQ,EACbxd,KAAK+Y,SAAShL,IAElB8P,EAAWtd,UAAU0K,MAAQ,SAAU8C,EAAG7C,GACtClL,KAAKwd,OAAQ,EACbxd,KAAKyS,KAAKxH,MAAM8C,EAAG7C,IAEvB2S,EAAWtd,UAAU4K,QAAU,WAC3B,OAAOnL,KAAK8d,eAAevS,EAAYvL,KAAK8K,aAEhD+S,EAAWtd,UAAUud,eAAiB,SAAU/P,GAC5C,GAAqB,OAAjB/N,KAAKwY,QACL,OAAOxY,KAAKwY,QAAQrN,QAAQ4C,IAGpC8P,EAAWtd,UAAUyd,aAAe,SAAUjQ,EAAGkL,GAC7CA,EAAM9N,QAAQ4C,GACVkL,IAAUjZ,KAAKwY,UACfxY,KAAKwY,QAAU,OAGvBqF,EAAWtd,UAAUwY,SAAW,SAAUhL,GAClC/N,KAAKwd,OAA0B,OAAjBxd,KAAKwY,SACnBxY,KAAKyS,KAAKsB,IAAIhG,IAGtB8P,EAAWtd,UAAUyY,SAAW,SAAUjL,EAAGkL,GACzCjZ,KAAKge,aAAajQ,EAAGkL,GACrBjZ,KAAK+Y,SAAShL,IAElB8P,EAAWtd,UAAU0d,WAAa,SAAUlQ,EAAG7C,EAAG+N,GAC9CjZ,KAAKge,aAAajQ,EAAGkL,GACrBjZ,KAAKyS,KAAKxH,MAAM8C,EAAG7C,IAEhB2S,EA9CoB,GAgD3BE,GAAyB,WACzB,SAASA,EAAQxI,EAAQkF,EAAKjO,EAAK2M,EAAO1G,EAAM3H,GAC5C9K,KAAKya,IAAMA,EACXza,KAAKwM,IAAMA,EACXxM,KAAKmZ,MAAQA,EACbnZ,KAAKyS,KAAOA,EACZzS,KAAKyQ,WAAa8E,EAAOvK,IAAIhL,KAAMgQ,EAAoByK,EAAK3P,IAiBhE,OAfAiT,EAAQxd,UAAUuT,MAAQ,SAAU/F,EAAGvE,GACnC,IAAIkB,EAAO6B,KAAKC,IAAI,EAAGuB,EAAI/N,KAAKya,KAC5B/P,EAAO1K,KAAKwM,KACZxM,KAAKyS,KAAKqB,MAAMpJ,EAAMlB,IAG9BuU,EAAQxd,UAAUwT,IAAM,SAAUhG,GAC9B/N,KAAKmZ,MAAMH,SAASjL,EAAI/N,KAAKya,IAAKza,OAEtC+d,EAAQxd,UAAU0K,MAAQ,SAAU8C,EAAG7C,GACnClL,KAAKmZ,MAAM8E,WAAWlQ,EAAI/N,KAAKya,IAAKvP,EAAGlL,OAE3C+d,EAAQxd,UAAU4K,QAAU,SAAU4C,GAClCyE,EAAazE,EAAG/N,KAAKyQ,WAAYzQ,KAAKyS,OAEnCsL,EAvBiB,GAmCxBG,GAAc,SAAU/J,GACxB,OAAOgK,GAAgBC,GAAMjK,IAQ7BgK,GAAkB,SAAUE,EAAQlK,GACpC,OAAOD,GAAiBC,GAAUH,KAC5B,IAAIsK,GAAYD,EAAQlK,IAE9BmK,GAA6B,WAC7B,SAASA,EAAYD,EAAQ9I,GACzBvV,KAAKqe,OAASA,EACdre,KAAKuV,OAASA,EAKlB,OAHA+I,EAAY/d,UAAUyK,IAAM,SAAUyH,EAAM3H,GACxC,OAAO9K,KAAKuV,OAAOvK,IAAI,IAAIuT,GAAgBve,KAAKqe,OAAQ5L,GAAO3H,IAE5DwT,EARqB,GAU5BC,GAAiC,SAAU3K,GAE3C,SAAS2K,EAAgBF,EAAQ5L,GAC7B,IAAIzG,EAAQ4H,EAAOtK,KAAKtJ,KAAMyS,IAASzS,KAIvC,OAHAgM,EAAMqS,OAASA,EACfrS,EAAMzJ,WAAQqG,EACdoD,EAAMwS,MAAO,EACNxS,EAeX,OArBA8G,EAAUyL,EAAiB3K,GAQ3B2K,EAAgBhe,UAAUuT,MAAQ,SAAU/F,EAAGvE,GACvCxJ,KAAKwe,MACLxe,KAAKwe,MAAO,EACZxe,KAAKuC,MAAQiH,EACbxJ,KAAKyS,KAAKqB,MAAM/F,EAAGvE,IAIbxJ,KAAKqe,OAAOre,KAAKuC,MAAOiH,KAC9BxJ,KAAKuC,MAAQiH,EACbxJ,KAAKyS,KAAKqB,MAAM/F,EAAGvE,KAGpB+U,EAtByB,CAuBlC9I,IACF,SAAS2I,GAAK3U,EAAGE,GACb,OAAOF,IAAME,EAIjB,IAAI8U,GAAQ,SAAUC,EAAQvK,GAC1B,OAAO,IAAIwK,GAAMD,EAAQvK,IAEzByK,GAAQ,SAAUF,EAAQvK,GAC1B,OAAO,IAAI0K,GAAMH,EAAQvK,IAKzBwK,GAAuB,WACvB,SAASA,EAAMG,EAAWvJ,GACtBvV,KAAK8e,UAAYA,EACjB9e,KAAKuV,OAASA,EASlB,OAPAoJ,EAAMpe,UAAUyK,IAAM,SAAUyH,EAAM3H,GAClC,IAAI2F,EAAa,IAAImE,GACjBvD,EAAKrR,KAAKuV,OAAOvK,IAAIyH,EAAM3H,GAC3BwG,EAAKtR,KAAK8e,UAAU9T,IAAI,IAAI+T,GAAUtM,EAAMhC,GAAa3F,GAE7D,OADA2F,EAAWoE,cAAczD,EAAYC,EAAIC,IAClCb,GAEJkO,EAZe,GActBE,GAAuB,WACvB,SAASA,EAAMG,EAAWzJ,GACtBvV,KAAKgf,UAAYA,EACjBhf,KAAKuV,OAASA,EAOlB,OALAsJ,EAAMte,UAAUyK,IAAM,SAAUyH,EAAM3H,GAClC,IAAI2P,EAAM,IAAIwE,GAAejf,KAAKgf,UAAWvM,EAAM3H,GAC/C9B,EAAIhJ,KAAKuV,OAAOvK,IAAI,IAAIkU,GAAUzE,EAAKhI,GAAO3H,GAClD,OAAOsG,EAAYqJ,EAAKzR,IAErB6V,EAVe,GAYtBK,GAA2B,SAAUtL,GAErC,SAASsL,EAAUzE,EAAKhI,GACpB,IAAIzG,EAAQ4H,EAAOtK,KAAKtJ,KAAMyS,IAASzS,KAEvC,OADAgM,EAAMyO,IAAMA,EACLzO,EAOX,OAXA8G,EAAUoM,EAAWtL,GAMrBsL,EAAU3e,UAAUuT,MAAQ,SAAU/F,EAAGvE,GACjCxJ,KAAKya,IAAI0E,OACTnf,KAAKyS,KAAKqB,MAAM/F,EAAGvE,IAGpB0V,EAZmB,CAa5BzJ,IACEwJ,GAAgC,SAAUrL,GAE1C,SAASqL,EAAeP,EAAQjM,EAAM3H,GAClC,IAAIkB,EAAQ4H,EAAOtK,KAAKtJ,KAAMyS,IAASzS,KAGvC,OAFAgM,EAAMmT,OAAQ,EACdnT,EAAMyE,WAAaiO,EAAO1T,IAAIgB,EAAOlB,GAC9BkB,EAUX,OAfA8G,EAAUmM,EAAgBrL,GAO1BqL,EAAe1e,UAAUuT,MAAQ,WAC7B9T,KAAKmf,OAAQ,EACbnf,KAAKmL,WAET8T,EAAe1e,UAAUwT,IAAM,aAC/BkL,EAAe1e,UAAU4K,QAAU,WAC/BnL,KAAKyQ,WAAWtF,WAEb8T,EAhBwB,CAiBjCxJ,IACEsJ,GAA2B,SAAUnL,GAErC,SAASmL,EAAUtM,EAAMhC,GACrB,IAAIzE,EAAQ4H,EAAOtK,KAAKtJ,KAAMyS,IAASzS,KAEvC,OADAgM,EAAMyE,WAAaA,EACZzE,EAOX,OAXA8G,EAAUiM,EAAWnL,GAMrBmL,EAAUxe,UAAUuT,MAAQ,SAAU/F,GAClC/N,KAAKyQ,WAAWtF,UAChBnL,KAAKyS,KAAKsB,IAAIhG,IAElBgR,EAAUxe,UAAUwT,IAAM,aACnBgL,EAZmB,CAa5BtJ,IAWE2J,GAAuB,WACvB,SAASA,EAAMlQ,EAAIqG,GACfvV,KAAKkP,GAAKA,EACVlP,KAAKuV,OAASA,EAMlB,OAJA6J,EAAM7e,UAAUyK,IAAM,SAAUyH,EAAM3H,GAClC,IAAIuU,EAAY,IAAIC,GAAUtf,KAAKkP,GAAIuD,EAAM3H,GAC7C,OAAOsG,EAAYiO,EAAWrf,KAAKuV,OAAOvK,IAAIqU,EAAWvU,KAEtDsU,EATe,GAWtBE,GAA2B,SAAU1L,GAErC,SAAS0L,EAAUpQ,EAAIuD,EAAM3H,GACzB,IAAIkB,EAAQ4H,EAAOtK,KAAKtJ,KAAMyS,IAASzS,KAIvC,OAHAgM,EAAMkD,GAAKA,EACXlD,EAAMlB,UAAYA,EAClBkB,EAAMuB,MAAQ,GACPvB,EAWX,OAjBA8G,EAAUwM,EAAW1L,GAQrB0L,EAAU/e,UAAU4K,QAAU,WAC1BnL,KAAKuN,MAAM7L,QAAQqO,IAEvBuP,EAAU/e,UAAUuT,MAAQ,SAAUqB,EAAI3L,GACtCxJ,KAAKuN,MAAMzN,KAAK2L,EAAQzL,KAAKkP,GAAIkE,GAAmB5J,EAAGxJ,KAAKyS,MAAOzS,KAAK8K,aAE5EwU,EAAU/e,UAAUwT,IAAM,WACtB/T,KAAKuN,MAAMzN,KAAK2L,EAAQzL,KAAKkP,GAAIoE,GAAiBtT,KAAKyS,MAAOzS,KAAK8K,aAEhEwU,EAlBmB,CAmB5B7J,IAQE8J,GAAW,SAAU3U,EAAQuJ,GAC7B,OAAOD,GAAiBC,GAAUH,KAC5BG,aAAkB,GAAMqL,GAAmB5U,EAAQuJ,GAC/CA,aAAkBsL,GAAWC,GAAa9U,EAAQuJ,GAC9C,IAAIsL,GAAS7U,EAAQuJ,IAEnCqL,GAAqB,SAAU5U,EAAQwQ,GACvC,OAAO,GAAI/I,OAAO+I,EAAUvR,EAAG0V,GAAS3U,EAAQwQ,EAAU7F,UAE1DmK,GAAe,SAAU9U,EAAQ+U,GACjC,OAAO,IAAIF,GAASlT,KAAKC,IAAI5B,EAAQ+U,EAAe/U,QAAS+U,EAAepK,SAE5EkK,GAA0B,WAC1B,SAASA,EAAS7U,EAAQ2K,GACtBvV,KAAK4K,OAASA,EACd5K,KAAKuV,OAASA,EAKlB,OAHAkK,EAASlf,UAAUyK,IAAM,SAAUyH,EAAM3H,GACrC,OAAO9K,KAAKuV,OAAOvK,IAAI,IAAI4U,GAAa5f,KAAK4K,OAAQ6H,GAAO3H,IAEzD2U,EARkB,GAUzBG,GAA8B,SAAUhM,GAExC,SAASgM,EAAahV,EAAQ6H,GAC1B,IAAIzG,EAAQ4H,EAAOtK,KAAKtJ,KAAMyS,IAASzS,KAGvC,OAFAgM,EAAMtB,KAAO,EACbsB,EAAMpB,OAASA,EACRoB,EAQX,OAbA8G,EAAU8M,EAAchM,GAOxBgM,EAAarf,UAAUuT,MAAQ,SAAU/F,EAAGvE,GACpCuE,GAAK/N,KAAK0K,OACV1K,KAAK0K,KAAOqD,EAAI/N,KAAK4K,OACrB5K,KAAKyS,KAAKqB,MAAM/F,EAAGvE,KAGpBoW,EAdsB,CAe/BnK,IAWEoK,GAA0B,WAC1B,SAASA,EAAS3Q,EAAIqG,GAClBvV,KAAKkP,GAAKA,EACVlP,KAAKuV,OAASA,EAKlB,OAHAsK,EAAStf,UAAUyK,IAAM,SAAUyH,EAAM3H,GACrC,OAAO,IAAIgV,GAAa9f,KAAKkP,GAAIlP,KAAKuV,OAAQ9C,EAAM3H,IAEjD+U,EARkB,GAUzBC,GAA8B,WAC9B,SAASA,EAAa5Q,EAAIqG,EAAQ9C,EAAM3H,GACpC9K,KAAKkP,GAAKA,EACVlP,KAAKyS,KAAOA,EACZzS,KAAK8K,UAAYA,EACjB9K,KAAK8L,MAAQ,KACb9L,KAAKyQ,WAAa8E,EAAOvK,IAAIhL,KAAM8K,GAoCvC,OAlCAgV,EAAavf,UAAUuT,MAAQ,SAAUqB,EAAI3L,GACzCxJ,KAAKiN,aACLjN,KAAKuC,MAAQiH,EACbxJ,KAAK8L,MAAQL,EAAQzL,KAAKkP,GAAI,IAAI6Q,GAAa/f,KAAMwJ,GAAIxJ,KAAK8K,YAElEgV,EAAavf,UAAUyf,oBAAsB,SAAUjS,EAAGvE,GACtDxJ,KAAKiN,aACLjN,KAAKyS,KAAKqB,MAAM/F,EAAGvE,IAEvBsW,EAAavf,UAAUwT,IAAM,SAAUhG,GAC/B/N,KAAKiN,eAGLjN,KAAKyS,KAAKqB,MAAM/F,EAAG/N,KAAKuC,OACxBvC,KAAKuC,WAAQqG,GAEjB5I,KAAKyS,KAAKsB,IAAIhG,IAElB+R,EAAavf,UAAU0K,MAAQ,SAAU8C,EAAGvE,GACxCxJ,KAAKiN,aACLjN,KAAKyS,KAAKxH,MAAM8C,EAAGvE,IAEvBsW,EAAavf,UAAU4K,QAAU,WAC7BnL,KAAKiN,aACLjN,KAAKyQ,WAAWtF,WAEpB2U,EAAavf,UAAU0M,WAAa,WAChC,OAAmB,OAAfjN,KAAK8L,QAGT9L,KAAK8L,MAAMX,UACXnL,KAAK8L,MAAQ,MACN,IAEJgU,EA1CsB,GA4C7BC,GAA8B,WAC9B,SAASA,EAAatN,EAAMlQ,GACxBvC,KAAKyS,KAAOA,EACZzS,KAAKuC,MAAQA,EASjB,OAPAwd,EAAaxf,UAAUyK,IAAM,SAAU+C,GACnC/N,KAAKyS,KAAKuN,oBAAoBjS,EAAG/N,KAAKuC,QAE1Cwd,EAAaxf,UAAU0K,MAAQ,SAAU8C,EAAG7C,GACxClL,KAAKyS,KAAKxH,MAAM8C,EAAG7C,IAEvB6U,EAAaxf,UAAU4K,QAAU,aAC1B4U,EAZsB,GAoB7BE,GAAgB,SAAU9L,GAC1B,OAAOD,GAAiBC,GAAUH,KAAU,IAAIkM,GAAM/L,IAStDgM,GAAc,SAAUC,GAAW,OAAOH,GAAc3T,GAAI8T,KAC5DF,GAAuB,WACvB,SAASA,EAAM3K,GACXvV,KAAKuV,OAASA,EAKlB,OAHA2K,EAAM3f,UAAUyK,IAAM,SAAUyH,EAAM3H,GAClC,OAAO9K,KAAKuV,OAAOvK,IAAI,IAAIqV,GAAU5N,EAAM3H,GAAYA,IAEpDoV,EAPe,GAStBG,GAA2B,WAC3B,SAASA,EAAU5N,EAAM3H,GACrB,IAAIkB,EAAQhM,KAEZA,KAAKsgB,WAAa,SAAU9W,GAAK,OAAOwC,EAAMyG,KAAKqB,MAAMvI,EAAYS,EAAMlB,WAAYtB,IACvFxJ,KAAKugB,SAAW,WAAc,OAAOvU,EAAMyG,KAAKsB,IAAIxI,EAAYS,EAAMlB,aACtE9K,KAAKwgB,WAAa,SAAUtV,GAAK,OAAOc,EAAMyG,KAAKxH,MAAMM,EAAYS,EAAMlB,WAAYI,IACvFlL,KAAKyS,KAAOA,EACZzS,KAAK8K,UAAYA,EACjB9K,KAAKygB,MAAQxf,QAAQC,UAoBzB,OAlBAmf,EAAU9f,UAAUuT,MAAQ,SAAUqB,EAAIiL,GACtC,IAAIpU,EAAQhM,KACZA,KAAKygB,MAAQzgB,KAAKygB,MAAMrR,MAAK,WAAc,OAAOpD,EAAM0U,cAAcN,MACjEO,MAAM3gB,KAAKwgB,aAEpBH,EAAU9f,UAAUwT,IAAM,WACtB/T,KAAKygB,MAAQzgB,KAAKygB,MAAMrR,KAAKpP,KAAKugB,UAC7BI,MAAM3gB,KAAKwgB,aAEpBH,EAAU9f,UAAU0K,MAAQ,SAAUkK,EAAIjK,GACtC,IAAIc,EAAQhM,KAEZA,KAAKygB,MAAQzgB,KAAKygB,MAAMrR,MAAK,WAAc,OAAOpD,EAAMwU,WAAWtV,MAC9DyV,MAAM3N,IAEfqN,EAAU9f,UAAUmgB,cAAgB,SAAUN,GAC1C,OAAOA,EAAQhR,KAAKpP,KAAKsgB,aAEtBD,EA7BmB,GAgC1BO,GAA0B,WAC1B,SAASA,EAASnO,GACdzS,KAAKyS,KAAOA,EACZzS,KAAK+K,QAAS,EAuBlB,OArBA6V,EAASrgB,UAAUuT,MAAQ,SAAU/F,EAAGvE,GAC/BxJ,KAAK+K,QAGV/K,KAAKyS,KAAKqB,MAAM/F,EAAGvE,IAEvBoX,EAASrgB,UAAUwT,IAAM,SAAUhG,GAC1B/N,KAAK+K,SAGV/K,KAAK6gB,UACL7gB,KAAKyS,KAAKsB,IAAIhG,KAElB6S,EAASrgB,UAAU0K,MAAQ,SAAU8C,EAAG7C,GACpClL,KAAK6gB,UACL7gB,KAAKyS,KAAKxH,MAAM8C,EAAG7C,IAEvB0V,EAASrgB,UAAUsgB,QAAU,WAEzB,OADA7gB,KAAK+K,QAAS,EACP/K,KAAKyS,MAETmO,EA1BkB,GAgC7B,SAASE,GAAS/S,EAAGvE,EAAGiJ,GACpB,IACIA,EAAKqB,MAAM/F,EAAGvE,GAElB,MAAO0B,GACHuH,EAAKxH,MAAM8C,EAAG7C,IAGtB,SAAS6V,GAAOhT,EAAG0E,GACf,IACIA,EAAKsB,IAAIhG,GAEb,MAAO7C,GACHuH,EAAKxH,MAAM8C,EAAG7C,IAYtB,IAqBI8V,GAA6B,WAC7B,SAASA,EAAYnX,EAAG0L,GACpBvV,KAAK6J,EAAIA,EACT7J,KAAKuV,OAASA,EAKlB,OAHAyL,EAAYzgB,UAAUyK,IAAM,SAAUyH,EAAM3H,GACxC,OAAO,IAAImW,GAAgBjhB,KAAK6J,EAAG7J,KAAKuV,OAAQ9C,EAAM3H,IAEnDkW,EARqB,GAU5BC,GAAiC,WACjC,SAASA,EAAgBpX,EAAG0L,EAAQ9C,EAAM3H,GACtC9K,KAAK6J,EAAIA,EACT7J,KAAKyS,KAAO,IAAImO,GAASnO,GACzBzS,KAAK8K,UAAYA,EACjB9K,KAAKyQ,WAAa8E,EAAOvK,IAAIhL,KAAM8K,GA2BvC,OAzBAmW,EAAgB1gB,UAAUuT,MAAQ,SAAU/F,EAAGvE,GAC3CsX,GAAS/S,EAAGvE,EAAGxJ,KAAKyS,OAExBwO,EAAgB1gB,UAAUwT,IAAM,SAAUhG,GACtCgT,GAAOhT,EAAG/N,KAAKyS,OAEnBwO,EAAgB1gB,UAAU0K,MAAQ,SAAU8C,EAAG7C,GAC3C,IAAIgW,EAAWlhB,KAAKyS,KAAKoO,UACzBrO,EAAazE,EAAG/N,KAAKyQ,WAAYzQ,KAAKyS,MACtCzS,KAAKmhB,WAAWpT,EAAG7C,EAAGgW,IAE1BD,EAAgB1gB,UAAU4gB,WAAa,SAAUpT,EAAGvE,EAAGiJ,GACnD,IACIzS,KAAKyQ,WAAazQ,KAAKohB,UAAUphB,KAAK6J,EAAGkE,EAAGvE,EAAGiJ,GAEnD,MAAOvH,GACHuH,EAAKxH,MAAM8C,EAAG7C,KAGtB+V,EAAgB1gB,UAAU6gB,UAAY,SAAUvX,EAAGkE,EAAGvE,EAAGiJ,GACrD,OAAO,GAAIA,EAAMzS,KAAK8K,UAAWuK,GAActH,EAAGlE,EAAEL,MAExDyX,EAAgB1gB,UAAU4K,QAAU,WAChC,OAAOnL,KAAKyQ,WAAWtF,WAEpB8V,EAhCyB,GAmChC,GAAY,SAAU9M,GACtB,OAAOA,aAAkBkN,IAAanN,GAAiBC,GACjDA,EACA,IAAIkN,GAAUlN,IAEpBkN,GAA2B,WAC3B,SAASA,EAAU9L,GACfvV,KAAKuV,OAAS,IAAI+L,GAAgB/L,GAKtC,OAHA8L,EAAU9gB,UAAUyK,IAAM,SAAUyH,EAAM3H,GACtC,OAAO9K,KAAKuV,OAAOvK,IAAIyH,EAAM3H,IAE1BuW,EAPmB,GAS1BC,GAAiC,WACjC,SAASA,EAAgB/L,GACrBvV,KAAKuV,OAASA,EACdvV,KAAKuX,MAAQ,GACbvX,KAAKyQ,WAAa,IA+CtB,OA7CA6Q,EAAgB/gB,UAAUyK,IAAM,SAAUyH,EAAM3H,GAK5C,OAHU,IADF9K,KAAK0M,IAAI+F,KAEbzS,KAAKyQ,WAAazQ,KAAKuV,OAAOvK,IAAIhL,KAAM8K,IAErC0F,EAAY,IAAI+Q,GAAoBvhB,KAAMyS,KAErD6O,EAAgB/gB,UAAU4K,QAAU,WAChC,IAAIsF,EAAazQ,KAAKyQ,WAEtB,OADAzQ,KAAKyQ,WAAa,IACXA,EAAWtF,WAEtBmW,EAAgB/gB,UAAUmM,IAAM,SAAU+F,GAEtC,OADAzS,KAAKuX,MAAQhO,EAAOkJ,EAAMzS,KAAKuX,OACxBvX,KAAKuX,MAAMvT,QAEtBsd,EAAgB/gB,UAAUyJ,OAAS,SAAUyI,GACzC,IAAI3O,EAAIqG,EAAUsI,EAAMzS,KAAKuX,OAK7B,OAHIzT,GAAK,IACL9D,KAAKuX,MAAQvN,EAAOlG,EAAG9D,KAAKuX,QAEzBvX,KAAKuX,MAAMvT,QAEtBsd,EAAgB/gB,UAAUuT,MAAQ,SAAUpJ,EAAMnI,GAC9C,IAAIgQ,EAAIvS,KAAKuX,MACb,GAAiB,IAAbhF,EAAEvO,OACF,OAAOuO,EAAE,GAAGuB,MAAMpJ,EAAMnI,GAE5B,IAAK,IAAIuB,EAAI,EAAGA,EAAIyO,EAAEvO,SAAUF,EAC5Bgd,GAASpW,EAAMnI,EAAOgQ,EAAEzO,KAGhCwd,EAAgB/gB,UAAUwT,IAAM,SAAUrJ,GAEtC,IADA,IAAI6H,EAAIvS,KAAKuX,MACJzT,EAAI,EAAGA,EAAIyO,EAAEvO,SAAUF,EAC5Bid,GAAOrW,EAAM6H,EAAEzO,KAGvBwd,EAAgB/gB,UAAU0K,MAAQ,SAAUP,EAAM8W,GAE9C,IADA,IAAIjP,EAAIvS,KAAKuX,MACJzT,EAAI,EAAGA,EAAIyO,EAAEvO,SAAUF,EAC5ByO,EAAEzO,GAAGmH,MAAMP,EAAM8W,IAGlBF,EAnDyB,GAqDhCC,GAAqC,WACrC,SAASA,EAAoBhM,EAAQ9C,GACjCzS,KAAKuV,OAASA,EACdvV,KAAKyS,KAAOA,EAOhB,OALA8O,EAAoBhhB,UAAU4K,QAAU,WACE,IAAlCnL,KAAKuV,OAAOvL,OAAOhK,KAAKyS,OACxBzS,KAAKuV,OAAOpK,WAGboW,EAV6B,GAgBpCE,IAFQlX,EAAO,IACG,EAAO8K,IAChB9K,GAvzDF,SAAUoL,EAASC,EAAMzB,GAChC,OAAOD,GAAiBC,GAAUH,KAC5B,IAAI0B,GAAKC,EAASC,EAAMzB,OAszD9BuN,GAASnX,GAhxDF,SAAUV,EAAG8X,EAASxN,GAC7B,OAAO,IAAI4B,GAAKlM,EAAG8X,EAASxN,MAgxD5ByN,GAAc,GAzrDF,SAAUpY,EAAG2K,GACzB,OAAO8B,IAAa,WAAc,OAAO9B,IAAW7H,GAAI9C,OAyrDxDqY,GAAQ,EAAO,IACfC,GAAa,GAtjDF,SAAUtY,EAAG2K,GACxB,OAAO,IAAI,WAAc,OAAO3K,IAAM2K,MAsjDtC4N,GAAQ,GA9iDF,SAAUlY,EAAGsK,GACnB,OAAO,IAAI0C,GAAIhN,EAAGsK,MA+iDlB6N,IADO,GAr4CX,SAAYC,EAAIC,GACZ,OAAOjL,GAAQjV,EAAOigB,EAAIC,MAq4ChB,GAtwCF,SAAUrY,EAAGsK,GAAU,OAAOiE,GAAqBvO,EAAGwC,IAAU8H,OAuwCxEgO,GAAiB,EAAOlM,IAIxBmM,IAHc,GAnvCF,SAAUvY,EAAGsK,GACzB,OAAOiE,GAAqBvO,EAAG,EAAGsK,MAmvCZ,EAAO+D,IACJ3N,EAAO6N,IACtB,GA7uCd,SAAelB,EAASC,GACpB,OAAOkC,GAAW,CAACnC,EAASC,QA6uC5BkL,GAAY9X,EAAO0M,IACnBqL,GAAiB,EAAOlL,IACxBmL,GAAW,GAlqCF,SAAU3K,EAAQkC,GAC3B,OAAOD,IAAS,SAAUrQ,GAAK,OAAOA,IAAMoO,EAAQkC,MAkqCpD0I,GAAajY,EAAOsP,IAKpB4I,IAJalY,EAAO4R,IACN,GAp5BF,SAAUC,EAAOjI,GAC7B,OAAOgI,GAASG,GAAUF,EAAOjI,MAo5BzB5J,GA3wBZ,SAAaV,EAAGqN,EAASC,GACrB,OAAO6F,GAASnT,EAAG,CAACqN,EAASC,OA2wBhB,EAAO6F,IACT,GA9kBf,SAAgBnK,EAAGsB,GACf,OAAOmC,GAAOjE,OAAOQ,EAAGsB,OA8kBxBuO,GAAoB,EAAOvE,IAC3BwE,GAAS,EAAOjI,IAChBkI,GAAS,GAllCF,SAAUjI,EAAGxG,GACpB,OAAOnG,GAAM2M,EAAGtO,IAAU8H,MAqlC1B0O,IAHUtY,EAAOyD,IACH,GA7gCF,SAAU6E,EAAGsB,GACzB,OAAOD,GAAiBC,GAAUH,KAC5B,IAAI2H,GAAU9I,EAAGsB,MA4gCT,GAp+BF,SAAUtB,EAAGsB,GACzB,OAAOD,GAAiBC,GAAUH,KAC5B,IAAI8H,GAAUjJ,EAAGsB,MAm+BT,GAn8BF,SAAUtB,EAAGsB,GACzB,OAAOD,GAAiBC,GAAUH,KAC5B,IAAIiI,GAAUpJ,EAAGsB,OAk8BvB2O,GAAU,EAAOrE,IAGjBsE,IAFU,EAAOnE,IACN,GAthBF,SAAUoE,EAAY7O,GAC/B,OAAOsK,GAAMrF,GAAK4J,GAAapE,GAAMoE,EAAY7O,OAshBvC,GArcF,SAAU8O,EAAW9O,GAC7B,OAAO8O,GAAa,EAAI9O,EAAS,IAAIiL,GAAM6D,EAAW9O,OAsctD+O,IADa,EAAO3D,IACP,GAlXF,SAAU3U,EAAQuJ,GAC7B,OAAOD,GAAiBC,GAAUH,KAC5B,IAAI6L,GAASjV,EAAQuJ,OAiX3BgP,GAAgB,GAxLF,SAAUtZ,EAAGsK,GAC3B,OAAOD,GAAiBC,GAAUH,KAC5B,IAAIgN,GAAYnX,EAAGsK,MCp+D7B,SAASiP,GAAoBC,GACzB,OAAOnhB,OAAOohB,QAAQD,GACjB5F,KAAI,EAAEnc,EAAKiiB,KAEL,GADcjiB,EAAId,QAAQ,kBAAmB,SAASgjB,iBACnCD,OAEzBnK,KAAK,IAEP,SAASqK,GAAaC,EAAcC,GACvC,MAAMC,EAAaR,GAAoBO,GACjCE,EAAgBH,EAAaI,MAAMzgB,QAAQugB,GACjD,IAAuB,IAAnBC,EAAsB,CACtB,MAAMzgB,EAAQsgB,EAAaK,WAAWviB,SAASwC,OACzCggB,EAAYN,EAAaM,UAAY5gB,EAG3C,OAFAsgB,EAAaI,MAAMhkB,KAAK8jB,GACxBF,EAAaK,WAAWE,WAAW,IAAID,MAAcJ,KAAexgB,GAC7D,GAAGsgB,EAAaM,UAAY5gB,IAEvC,MAAO,GAAGsgB,EAAaM,UAAYH,ICnChC,SAASK,GAAW3R,GACvB,OAAOA,aAAa4R,SF2qEF5Z,EAAO2I,GACF,EAAOE,IACP,EAAOI,IE3qEpBQ,KAIP,MAAM,GACT,YAAYvB,GACRzS,KAAKyS,KAAOA,EAEhB,IAAI1E,GACA,OAAO/N,KAAKyS,KAAKsB,IAAIhG,GAEzB,MAAMA,EAAG7C,GACL,OAAOlL,KAAKyS,KAAKxH,MAAM8C,EAAG7C,IAY3B,MAAMkZ,GAAW,CAEpB,UAEA,QAEA,MAAMC,EAAG7a,GAEL/D,QAAQwF,MAAMzB,KAQf,SAAS8a,MAAKC,GAEjB,OAAOA,EAAIvgB,OAASugB,EAAIC,YAAY,GAAWpa,ECtDpC,MAAM,GACjB,YAAYqa,EAAmB,KAC3BzkB,KAAKykB,iBAAmBA,EACxBzkB,KAAK2Q,UAAW,EAEpB,cAAcF,GACV,QAAwB7H,IAApB5I,KAAKyQ,WACL,MAAM,IAAIwB,MAAM,uCAEpBjS,KAAKyQ,WAAaA,EACdzQ,KAAK2Q,UACLF,EAAWtF,UAGnB,UACQnL,KAAK2Q,WAGT3Q,KAAK2Q,UAAW,OACQ/H,IAApB5I,KAAKyQ,aACLzQ,KAAKykB,iBAAiBtZ,UACtBnL,KAAKyQ,WAAWtF,aCqB5B,MAAMuZ,GACF,YAAYC,EAAKxgB,EAAYygB,EAAiBC,GAC1C7kB,KAAK2kB,IAAMA,EACX3kB,KAAKmE,WAAaA,EAClBnE,KAAK4kB,gBAAkBA,EACvB5kB,KAAK6kB,cAAgBA,EACrB7kB,KAAK2R,YAAc,GACnB3R,KAAK8kB,iBAAmB,GAE5B,MAAMT,EAAG5c,GACL,IACIA,SAA4CA,EAAKgJ,WAAWoE,cAAc,GAAYpN,IAClFzH,KAAK6kB,cAAc7kB,KAAK4kB,mBACxBnd,EAAKsd,QAAQ/a,SACb,MAAMgb,EAAOhlB,KAAK8kB,iBAAiB9kB,KAAK4kB,iBAClCK,EAAmBD,EAAKlkB,IAAI2G,GAClCud,EAAKE,OAAOzd,GACZwd,SAAoEA,EAAiB9Z,YACtF1D,IAEP,MAAOyD,GAEH,MADAzF,QAAQwF,MAAMxD,EAAKsd,QAAQI,UACrB,IAAIlT,MAAM,6FAEpB,IAAI+S,EAAO,EACX,IAAK,IAAII,EAAO,EAAGA,EAAOplB,KAAK4kB,gBAAiBQ,IAC5CJ,GAAQhlB,KAAK6kB,cAAcO,GAE/B,MAAMC,EAAWrlB,KAAKmE,WAAWmhB,gBAC3BN,EACAA,EAAOhlB,KAAK6kB,cAAc7kB,KAAK4kB,iBAGrC,GAtER,SAAsBW,EAAQC,EAAOH,GACjC,GAAiB,IAAbA,EACA,OAAOE,EAAOE,QAAQD,GAC1BD,EAAOlf,aAAamf,EAAOD,EAAOG,SAASL,IAiEvCM,CAAa3lB,KAAKmE,WAAW4gB,QAAStd,EAAKsd,QAASM,GACpDrlB,KAAK6kB,cAAc7kB,KAAK4kB,mBACpB,UAAWnd,GAAQA,EAAKme,OAAS1jB,OAAO2jB,KAAKpe,EAAKme,OAAO5hB,OAAQ,CACjE,MAAM8hB,EAAWrC,GAAazjB,KAAK2kB,IAAIiB,MAAOne,EAAKme,OACnDne,EAAKsd,QAAQgB,UAAUrZ,IAAIoZ,GAa/B,GAXI,gBAAiBre,GACjBA,EAAKue,YAAYtkB,SAAQukB,IACrB,MAAMH,EHnCf,SAA4BpC,EAAcC,EAAiBuC,EAAS,IACvE,MAAMtC,EAAaR,GAAoBO,GACjCvgB,EAAQsgB,EAAaK,WAAWviB,SAASwC,OACzCmiB,EAAO,IAAIzC,EAAaM,UAAY5gB,EAAQ8iB,MAAWtC,KACvDC,EAAgBH,EAAaI,MAAMzgB,QAAQ8iB,GACjD,OAAuB,IAAnBtC,GACAH,EAAaI,MAAMhkB,KAAKqmB,GACxBzC,EAAaK,WAAWE,WAAWkC,EAAM/iB,GAClC,GAAGsgB,EAAaM,UAAY5gB,KAEhC,GAAGsgB,EAAaM,UAAYH,IGyBNuC,CAAmBpmB,KAAK2kB,IAAIiB,MAAOK,EAAiBL,MAAOK,EAAiBI,OAC7F5e,EAAKsd,QAAQgB,UAAUrZ,IAAIoZ,MAG/B,eAAgBre,GAAQA,EAAK6e,YACe,IAAxCpkB,OAAO2jB,KAAKpe,EAAK6e,YAAYtiB,QAC7BuiB,GAAY9e,EAAK6e,WAAY7e,EAAKsd,SAGtC,kBAAmBtd,GAAQA,EAAK+e,cAAe,CAC/C,MAAMC,EAAepN,GAAW5R,EAAK+e,cAAc/I,KAAIiJ,GA6CnE,SAAuBF,EAAe/e,EAAMic,GACxC,IAAIiD,EACJ,OAAO,IAAK,CAACC,EAAiBC,KAC1B,GAAID,EAAiB,CACjB,GAAoB,OAAhBC,EAEA,OADApf,EAAKsd,QAAQgB,UAAU/b,OAAO4c,GACvB,CAAEhR,KAAM,KAAMrT,MAAO,IAE3B,CACD,MAAMukB,EAAgBrD,GAAaC,EAAcmD,GACjD,GAAID,IAAoBE,EAGpB,OAFArf,EAAKsd,QAAQgB,UAAUvlB,QAAQmmB,EAAaG,GAC5CH,EAAcG,EACP,CAAElR,KAAMkR,EAAevkB,MAAOukB,IAIjD,GAAID,EAAa,CACb,MAAMC,EAAgBrD,GAAaC,EAAcmD,GAGjD,OAFApf,EAAKsd,QAAQgB,UAAUrZ,IAAIoa,GAC3BH,EAAcG,EACP,CAAElR,KAAMkR,EAAevkB,MAAOukB,GAEzC,MAAO,CAAElR,KAAMgR,EAAiBrkB,MAAO,MACxC,KAAMikB,GArE4DA,CAAcE,EAAIjf,EAAMzH,KAAK2kB,IAAIiB,UAAS5a,IAAIoZ,GAAUpkB,KAAK2kB,IAAI7Z,WAC9H9K,KAAK2R,YAAY7R,KAAK2mB,GAE1B,GAAI,uBAAwBhf,GAAQA,EAAKsf,mBAAoB,CACzD,MAAMN,EAAepN,GAAW5R,EAAKsf,mBAAmBtJ,KAAIuJ,GACjD,IAAKC,IACRV,GAAYU,EAAMxf,EAAKsd,WACxBiC,MACHhc,IAAIoZ,GAAUpkB,KAAK2kB,IAAI7Z,WAC3B9K,KAAK2R,YAAY7R,KAAK2mB,GAE1B,MAAMS,EAAU,cAAezf,EACzB,IAAI0f,GAAuB1f,EAAK2f,UAAWpnB,KAAK2kB,IAAKld,GACrD,IACDzH,KAAK8kB,iBAAiB9kB,KAAK4kB,mBAC5B5kB,KAAK8kB,iBAAiB9kB,KAAK4kB,iBAAmB,IAAI1kB,KAEtDF,KAAK8kB,iBAAiB9kB,KAAK4kB,iBAAiB7kB,IAAI0H,EAAMuJ,EAAW,IAAIhR,KAAK2R,YAAauV,KAE3F,IAAI/R,GACAnV,KAAK8kB,iBAAiBpjB,SAAQ6Q,IAC1BA,EAAE7Q,SAAQsH,GAAKA,EAAEmC,eAGzB,MAAM4C,EAAGyT,GACL/b,QAAQwF,MAAMuW,IAGtB,MAAM2F,GACF,YAAYC,EAAWzC,EAAKld,GACxBzH,KAAK2kB,IAAMA,EACX3kB,KAAKyH,KAAOA,EACZzH,KAAK2R,YAAc,IAAIzR,IACvB,MAAMwJ,EAAI0d,EAAUpjB,OACd6gB,EAAgB,IAAI9hB,MAAM2G,GAAGoO,KAAK,GACxC,IAAK,IAAIhU,EAAI,EAAGA,EAAI4F,IAAK5F,EAAG,CACxB,MAAMujB,EAASD,EAAUtjB,GACnB2O,EAAO,IAAIiS,GAAkB1kB,KAAK2kB,IAAKld,EAAM3D,EAAG+gB,GACtD7kB,KAAK2R,YAAY5R,IAAIsnB,EAAQA,EAAOrc,IAAIyH,EAAMzS,KAAK2kB,IAAI7Z,aAG/D,UACI9K,KAAK2R,YAAYjQ,SAAQsH,GAAKA,EAAEmC,aA6BjC,SAASob,GAAYS,EAAOvf,GAW/B,OAVIuf,GACA9kB,OAAOohB,QAAQ0D,GAAOtlB,SAAQ,EAAE4lB,EAAS/kB,MACjCA,QACAkF,EAAK8f,gBAAgBD,GAGrB7f,EAAK+f,aAAaF,EAASG,OAAOllB,OAIvCkF,EC5KJ,SAASigB,GAAmBC,EAAW5C,EAAS6C,GAAU,GAC7D,MAAO,CACH,IAAInV,EAAM3H,GACN,MAAM+c,EAAM3c,GAAMuH,EAAKqB,MAAMhJ,EAAUS,cAAeL,GAGtD,OADA6Z,EAAQlgB,iBAAiB8iB,EAAWE,EAAID,GACjC,CACH,UAHyB7C,EAAQ+C,oBAAoBH,EAAWE,EAAID,OAU7E,MAAM,GAAQ,GAAO,CAACD,EAAWlgB,IAC7B2R,GAAK,IAAI2O,GAAML,GAAmBC,EAAWI,EAAGhD,QAAS,CAAEiD,SAAS,KAASvgB,MCdxF,MAAMwgB,GACF,YAAY1C,EAAQ9S,GAChBzS,KAAKulB,OAASA,EACdvlB,KAAKyS,KAAOA,EACZzS,KAAK6X,UAAW,EAEpB,MAAM9J,EAAGvE,GACLxJ,KAAKkoB,YAAc1e,EACnBxJ,KAAK6X,UAAW,EAChB7X,KAAKyS,KAAKqB,MAAM/F,EAAGvE,GACnBxJ,KAAKulB,OAAO4C,eAAezmB,SAAQ6Q,GAAKA,EAAEuB,MAAM/F,EAAGvE,KAEvD,IAAIuE,GACA/N,KAAKyS,KAAKsB,IAAIhG,GAElB,MAAMA,EAAG7C,GACLlL,KAAKyS,KAAKxH,MAAM8C,EAAG7C,IAG3B,MAAMkd,WAAmB,GACrB,YAAY3V,GACR4V,MAAM5V,GACNzS,KAAKyS,KAAOA,EAEhB,MAAM1E,EAAGvE,GACLxJ,KAAKyS,KAAKqB,MAAM/F,EAAGvE,IAG3B,MAAM8e,GACF,YAAY/S,GACRvV,KAAKuV,OAASA,EACdvV,KAAKuoB,eAAiB,GACtBvoB,KAAKmoB,eAAiB,GACtBnoB,KAAKwoB,KAAO,IAEhB,IAAI/V,EAAM3H,GACN,GAAI2H,aAAgBwV,GAAY,CAC5BjoB,KAAKuoB,eAAezoB,KAAK2S,GACzBzS,KAAKwoB,KAAKrd,UACV,MAAMsF,EAAazQ,KAAKuV,OAAOvK,IAAIyH,EAAM3H,GAEzC,OADA9K,KAAKwoB,KAAO/X,EACL,CACHtF,QAAS,KACL,MAAMsd,EAASzoB,KAAKuoB,eAAellB,QAAQoP,GAC3CzS,KAAKuoB,eAAe1a,OAAO4a,EAAQ,GACnChY,EAAWtF,YAUvB,OANAnL,KAAKmoB,eAAeroB,KAAK2S,GACzBzS,KAAKuoB,eAAe7mB,SAAQ6Q,IACpBA,EAAEsF,UACFpF,EAAKqB,MAAMhJ,EAAUS,cAAegH,EAAE2V,gBAGvC,GAAY,EAAEC,EAAgBO,MACjCA,EAAiB3U,IAAIjJ,EAAUS,eAC/B,MAAMod,EAAUR,EAAe9kB,QAAQqlB,GACnCC,GAAW,GACX3e,EAAO2e,EAASR,KAErB,CAACnoB,KAAKmoB,eAAgB1V,KC7D1B,MAAMmW,GACT,cACI5oB,KAAK6oB,eAAiB,GACtB7oB,KAAKuX,MAAQ,IAAIrX,IACjBF,KAAK8oB,OAAS,IAAIC,IACNrC,IACJ,MAAOnR,EAAQyT,GD0DT,CAACzT,IACnB,MAAMyT,EAAe,IAAIV,GAAO/S,GAChC,MAAO,CACH,CACIvK,IAAG,CAACyH,EAAM3H,IACCke,EAAahe,IAAI,IAAIid,GAAWe,EAAcvW,GAAO3H,IAGpE,CACIE,IAAG,CAACyH,EAAM3H,IACCke,EAAahe,IAAI,IAAIod,GAAW3V,GAAO3H,MCpEfme,CAAOvC,GAEhCwC,EAAOH,EAAI/kB,OAASsgB,MAAKyE,EAALzE,CAAU0E,GAAgBA,EAKpD,OAJAhpB,KAAK6oB,eAAe/oB,KAAKopB,GACzBlpB,KAAKuX,MAAM7V,SAAQ,CAACynB,EAAY1W,KAC5B0W,EAAWppB,IAAImpB,EAAMlpB,KAAKopB,YAAY3W,EAAMyW,OAEzC3T,GAInB,IAAI9C,EAAM3H,GACN9K,KAAK8K,UAAYA,EACjB,MAAMqe,EAAa,IAAIjpB,IAKvB,OAJAF,KAAKuX,MAAMxX,IAAI0S,EAAM0W,GACrBnpB,KAAK6oB,eAAennB,SAAQ6Q,IACxB4W,EAAWppB,IAAIwS,EAAGvS,KAAKopB,YAAY3W,EAAMF,OAEtC,GAAY,EAAE8W,EAASC,MAC1B,IAAIC,EACJF,EAAQtV,IAAIjJ,EAAUS,eACU,QAA/Bge,EAAKD,EAAQxoB,IAAIuoB,UAA6B,IAAPE,GAAyBA,EAAG7nB,SAAQ8H,GAAKA,aAA6B,EAASA,EAAE2B,YACzHme,EAAQpE,OAAOmE,KAChB,CAAC5W,EAAMzS,KAAKuX,QAEnB,YAAY9E,EAAMjJ,GACd,OAAOA,EAAEwB,IAAIyH,EAAMzS,KAAK8K,YAGzB,SAAS0e,KACZ,MAAMC,EAAK,IAAIb,GACf,MAAO,CAACa,EAAIA,EAAGX,QCPZ,MAAMY,GAAY,GA7BlB,SAAqBC,EAAWC,GACnC,MAAO,CACH,IAAInX,EAAM3H,GAEN,MAAM+e,EAAY9mB,MAAM4mB,EAAU3lB,QAAQ8T,KAAK,MAAM2F,IAAI+L,KAClDM,EAAMC,GAAiBJ,KAAaE,GACrCG,EAAoB,GAC1B,GAAIJ,EACA,IAAK,MAAMK,KAAKL,EACZ,GAAIA,EAAcK,IAAMF,EAAe,CACnC,MAAMG,EAAkBN,EAAcK,GACtC,GAAIC,EAAiB,CACjB,MACMC,EAAmBD,EADOH,EAAcE,IACoBjf,IAAIoZ,GAAUtZ,GAChFkf,EAAkBlqB,KAAKqqB,IAKvC,OAAOnZ,EAAW,CACd,GAAY,KACRyB,EAAKsB,IAAIjJ,EAAUS,iBACpB,MACHue,EAAK9e,IAAIyH,EAAM3H,MACZkf,SCxBNI,GAAOC,IAAQ5gB,GAAMxL,SAASqsB,gBAAgB,6BAA8B7gB,KAC5E8gB,GAAWF,IAAQ5gB,GAAMxL,SAASyB,cAAc+J,KAChD+gB,GAAUH,IAAQ5gB,GAAMxL,SAASyB,cAAc+J,KAC/CghB,GAAQD,GAAQ,QAChBE,GAAqBL,IAAQM,GAAaA,IAE1CC,GA2Cb,SAASC,EAAQC,EAASxG,IAAE9a,GAAKA,KAC7B,OAAO,YAAqBuhB,GACxB,GAAIA,EAAMzW,KAAK4P,IAEX,OAAO2G,EAAQvG,GAAEwG,KAAWC,IAChC,MAAMrF,EAAWqF,EAAMtN,KAAKjU,GACJ,iBAANA,EAAiB/B,GAAK+B,GAAKkU,GAAa,GAAIjW,GAAM+B,MAEpE,OAAO6gB,IAAO,IAAMpsB,SAASyB,cAAc,SAASorB,EAA7CT,CAAqD,KAArDA,IAA8D3E,IAnDxDmF,CAAQzgB,GACtB,MAAM4gB,GACT,YAAYC,EAAaC,EAAU9D,GAC/BpnB,KAAKirB,YAAcA,EACnBjrB,KAAKkrB,SAAWA,EAChBlrB,KAAKonB,UAAYA,EAErB,IAAI3U,EAAM3H,GACN,MAAMia,EAAU/kB,KAAKkrB,SAASlrB,KAAKirB,aAC7B7D,EAAYpnB,KAAKonB,UACjB3W,EAAa,IAAI,GAQvB,OAPAgC,EAAKqB,MAAMhJ,EAAUS,cAAe,CAChC6b,YAAWrC,UAAStU,aACpB+V,cAAe,GACflB,iBAAiB,EACjByB,mBAAoB,GACpBf,YAAa,KAEVvV,GAGf,SAAShJ,GAAK0jB,GACV,MAAO,CACH,IAAI1Y,EAAM3H,GACN,MAAMia,EAAU9mB,SAASmtB,eAAeD,GAClC1a,EAAa,IAAI,GAEvB,OADAgC,EAAKqB,MAAMhJ,EAAUS,cAAe,CAAEwZ,UAAStU,eACxCA,IAIZ,SAAS4Z,GAAOa,EAAUJ,EAAS1gB,GACtC,OAAQihB,GACG,YAA0BN,GAC7B,GAAIA,EAAMzW,KAAK4P,IAEX,OAAOmG,GAAOa,EAAU5G,GAAEwG,KAAWC,GAA9BV,CAAsCgB,GACjD,MAAMjE,EAAY2D,EAAM/mB,OAAS+mB,EAAQ,CAAC,MACpCO,EAAU,IAAIN,GAAWK,EAAeH,EAAU9D,GACxD,OAAO0D,EAAOQ,IC7BnB,MAAMC,GAAe3F,GAAW6E,GAC5B,IAAIhjB,IACP,MAAM+jB,EAAyB,IAAKnI,IAChC,IAAK,MAAMja,KAAQia,EACf,GAAInhB,OAAO3B,UAAU8I,eAAeC,KAAK+Z,EAAUja,GAAO,CAEtD,MAAMma,EAAMF,EAASja,GAErB3B,EAAKsd,QAAQa,MAAMxc,GAAQma,KAGpCqC,GACH,MAAO,IAAKne,EAAM+e,cAAe,IAAI/e,EAAK+e,cAAe,IAAO,KAAM,GAAOgF,OAC9Ef,GAGM7E,GAAQ,GAlCrB,SAAiB6F,EAAYlW,GACzB,OAAO,IAAI9N,IAAQ,IAAMA,EAAMme,MAAO,IAAKne,EAAKme,SAAU6F,MAAiBlW,MAkClEyQ,GAAczb,GAhC3B,SAAuBmhB,EAAaD,EAAYlW,GAC5C,OAAO,IAAI9N,IAAQ,IACZA,EACHue,YAAa,IACNve,EAAKue,YACR,CACIK,MAAOqF,EACP9F,MAAO6F,OAGflW,MAuBK,GAAgB,GArB7B,SAAyBqQ,EAAO6E,GAC5B,OAAO,IAAIhjB,IAAQ,IAAMA,EAAM+e,cAAe,IAAI/e,EAAK+e,cAAeZ,MAAW6E,MChBxEpY,GAAS,EAAG/J,WAAW,GAAIqjB,kBAAiBC,WAI9CC,GAHyB,IAAgB,CAACC,EAAMC,IAC5CD,EAAK9nB,SAAW+nB,EAAK/nB,QAAU8nB,EAAK7oB,OAAM,CAAC4G,EAAG/F,IAAM+F,IAAMkiB,EAAKjoB,MACvE6nB,GAC0C,GAAtCE,CAA0C,CAAEvjB,WAAUsjB,UAEjE,SAASC,GAAaG,EAAYC,GAC9B,MAAO,EAAG3jB,WAAUsjB,YAChB,MAAMM,EAAY,IAAID,EAAiB3jB,GACjC6jB,EAAUF,EAAgBjoB,OAC1BooB,EAAO9H,GAAE,IAAgB,CAACyH,EAAMD,IAC3BA,EAAKK,KAAaJ,EAAKI,MAE5BzoB,EAAW4gB,GAAE8H,EAAM,IAAON,GACrBO,GAAU/jB,EAAUwjB,EAAKK,OAE9B5mB,EAAQ+e,GAAE,IAAKgI,IACjB,MAAMC,EAAaD,EAAIte,OAAO,GAAG,GACjC,OAAOqe,GAAU/jB,EAAUikB,MAC3B,IAAIF,IACAA,IACApuB,SAAS2tB,MAAQA,GAAS,QAG5BY,EAAOlI,GAAE8H,EAAM,IAAON,IAASO,GAAU/jB,EAAUwjB,EAAKK,OAC9D,MAAO,CACH9Z,OAAQwZ,GAAaG,EAAYE,GACjCxoB,SAAUA,EAASsoB,GACnBzmB,MAAOA,EAAMymB,GACbQ,KAAMA,EAAKR,GACXE,cAIL,SAASG,GAAUI,EAAMC,GAC5B,OAAID,aAAgBE,OACTC,QAAQF,aAAmC,EAASA,EAAKnnB,MAAMknB,IAEnEA,IAASC,EAEb,MAAMhpB,GAAYmpB,GAAW9E,GACzBrK,GAAa,GAAS,GAAMmP,EAAML,KAAMzE,GAAK8E,EAAMnpB,WAEjD6B,GAASsnB,GAAW9E,IAC7B,MAAM+E,EAAa,IAAOC,GAAWA,GAASF,EAAMtnB,OAC9CynB,EAAU,IAAOD,IAAYA,GAASF,EAAMtnB,OAClD,OAAO6T,GAAK,GAAS,GAAM4T,EAASjF,GAAK+E,KC9ChC7F,GAAO,GAAO,CAACD,EAAOzR,IAAW,IAAIwS,IAAM,IAAMA,EAAIzB,WAAY,IAAKyB,EAAGzB,cAAeU,MAAYzR,KACpG0X,GAAe,GAAO,CAACjG,EAAOzR,IAAW,IAAIwS,IAAM,IAAMA,EAAIhB,mBAAoB,IAAIgB,EAAGhB,mBAAoBC,MAAWzR,KCD9H2X,GAAU3C,GAAS,IAATA,CAAc3E,GAAM,CAAEuH,eAAgB,UACzCC,GAAU,EAAGC,MAAKR,QAAOS,cAAe5D,IAAU,EAAE6D,EAAOC,IAAeC,EAAOC,MAC1F,MACMC,EAAON,EAAI7sB,QADK,MACkB,IAClCkD,EAAW,GAAM,IAAS,EAAMmpB,EAAMnpB,UAAW,IAAS,EAAOmpB,EAAML,OAC7E,MAAO,CACHU,GAAQjG,GAAK,CAAE0G,SAASH,EAAY,GAAM,SAAU,IAAKI,IACrDA,EAAQC,iBACR,MAAMC,EAAWF,EAAQG,yBAAyBC,kBAAoBJ,EAAQG,cAAcE,SAAW,KACvG,GAAIH,EAKA,OAHIvqB,SAAS0qB,WAAaH,GACtBI,QAAQC,UAAU,KAAM,GAAIL,GAEzBA,EAGP,MAAM,IAAI7b,MAAM,sCAEnByb,GAAYR,IACb,MAAMO,EAAQ,IAAS,EAAM,GAAM,GAAM,QAASP,GAAU,GAAM,eAAgBA,KAC5EkB,EAAO,IAAS,EAAO,GAAM,GAAM,OAAQlB,GAAU,GAAM,eAAgBA,KACjF,OAAO,IAAU,EAAO,GAAMO,EAAOW,OAhBzClB,CAiBII,GACJ,CAAEC,QAAOhoB,MAAOsnB,EAAMtnB,MAAO7B,WAAU+pB,aC1BlChxB,GAA6B,+BAO7B4xB,GAAWnxB,KAAKoxB,MAAM5xB,aAAaC,QAAQF,KACvC,OAAb4xB,IACA5oB,QAAQwF,MAAM,6CAGX,MAAMsjB,GAAQF,GACR/wB,GAAUixB,GAAMjxB,QCZvBkxB,GAAU5I,GAAM,CAClB6I,SAAU,WACVC,IAAK,IACLC,OAAQ,IACRC,MAAO,IACPC,KAAM,MAEJC,GAAclJ,GAAM,CACtBmJ,IAAK,QAEHC,GAAepJ,GAAM,CACvBmJ,IAAK,QAEHE,GAAUrJ,GAAM,CAClBmJ,IAAK,SAEHG,GAAatJ,GAAM,CACrBmJ,IAAK,SAEHI,GAAOvJ,GAAM,CAAEuJ,KAAM,IACrBC,GAAcxJ,GAAM,CAAEyJ,QAAS,SAC/BC,GAAMhL,GAAE8K,GAAaxJ,GAAM,CAAE2J,cAAe,SAC5CC,GAASlL,GAAE8K,GAAaxJ,GAAM,CAAE2J,cAAe,YAGrD,IACIf,WAASM,eAAaE,gBAAcC,WAASC,cAAYC,QAAMC,eAAaE,OAAKE,UAAQC,QAH7EnL,GAAEgL,GAAKH,IAG+EO,WAFnFpL,GAAEkL,GAAQL,KCtBhBQ,GAAOnF,GAAQ,MAARA,CAAeoF,GAAYN,KAClCO,GAAUrF,GAAQ,SAARA,CAAkBoF,GAAYJ,QAExCM,IADalK,GAAM,CAAEmK,OAAQ,aAAazyB,GAAQI,YACrCkoB,GAAM,CAAEoK,UAAW,sGAKhCC,IAJarK,GAAM,CAAEoK,UAAW,qGACnBpK,GAAM,CAAEoK,UAAW,qGACnBpK,GAAM,CAAEoK,UAAW,uGAClBpK,GAAM,CAAEoK,UAAW,wGACzBH,GAAQC,GAAYlK,GAAM,CAC3CsK,QAAS,OACTC,gBAAiB7yB,GAAQG,eAEhB2yB,GAAa3F,GAAM7E,GAAM,CAClCyK,UAAW,MACXC,SAAU,MACV7yB,WAAYH,GAAQM,aAHE6sB,GCdb8F,GAAQ,EAAGjD,WAAUkD,QAAQ,GAAIC,SAASD,EAAOE,UAAU,OAAOF,KAASC,IAAU3Y,OAAO,aAAiBsS,GAAK,MAALA,CAAYnD,GAAK,CAAEyJ,UAASF,QAAOC,WAAW7K,GAAM,CAAE9N,SAAvD,CAAgEwV,GCG5KqD,GAASvG,GAAK,OAALA,CACpBnD,GAAK,CACHje,EAAG,8TAFeohB,GAMTwG,GAAaxG,GAAK,OAALA,CACxBnD,GAAK,CACHje,EAAG,q6HAFmBohB,GAMbyG,GAAUzG,GAAK,OAALA,CACrBnD,GAAK,CACHje,EAAG,m0BAFgBohB,GCVvB,MAAM0G,GACF,YAAYC,GACR/wB,KAAK+wB,IAAMA,EAEf,IAAIte,EAAM3H,GACN,MAAMkmB,EAAczlB,EAAYT,GAE1BmmB,EAAQjxB,KAAK+wB,IAAIptB,uBADL,IAAMutB,GAAaF,EAAazlB,EAAYT,GAAY2H,KAE1E,OAAO,GAAY0e,GAAOnxB,KAAK+wB,IAAIK,qBAAqBD,IAAMF,IAGtE,MAAMC,GAAe,CAACF,EAAaK,EAAc5e,KAC7CA,EAAKqB,MAAMkd,EAAa,CAAEA,cAAaK,iBACvC5e,EAAKsB,IAAIid,IAEAM,GAAqB,CAACP,EAAM5yB,SAAW,IAAI2yB,GAAqBC,GAChEQ,GAAkB,CAACR,EAAM5yB,SAAW,IAAa,IAAMozB,GAAgBR,IAAMO,GAAmBP,IAIhGS,IAHa,EAE1B9T,GAAc,IAAIlU,GAAK,GAASA,EAAG8nB,GAAmBnzB,YACtB,CAAEszB,UAAW,IAAKC,QAAS,GAAIC,UAAW,MAG7DC,GAAe,CAAEH,UAAW,IAAKC,QAAS,GAAIC,UAAW,KAiBzDE,GAAStnB,GAAO,CAACunB,EAAmBC,EAAcC,KAC3D,MAAMC,EAAY,IAAKL,MAAiBE,GAClCI,EAAKC,GAAYF,EAAW,CAAExD,SAAUsD,EAAcK,SAAU,GAAKJ,GAC3E,OAAO,IAAIzf,GAAKA,EAAEkc,UAAUyD,MAGnBC,GAAc5nB,GAAO,CAACunB,EAAmBC,EAAcC,KAChE,MAAMC,EAAY,IAAKL,MAAiBE,GACxC,OAAOxN,GAAE,IAAK,CAAC1O,EAAM7Q,KACjB,MAAMstB,EAAS/N,GAAE,IAAI,IAI7B,SAAmBvf,EAAQ/F,EAAOizB,GAC9B,MAAMK,EAAM,EAAI,GACVC,EAAQxtB,EAAS/F,EAAMyvB,SAGvB+D,EAFSP,EAAUR,UAAYc,EACtBN,EAAUP,QAAU1yB,EAAMozB,SAEnCK,EAAczzB,EAAMozB,SAAYI,EAAeF,EAC/CI,EAAc1zB,EAAMyvB,SAAYgE,EAAcH,EAC9CK,EAAUpmB,KAAKqmB,IAAIH,GAAeR,EAAUN,WAAaplB,KAAKqmB,IAAIL,GAASN,EAAUN,UAG3F,OAFA3yB,EAAMozB,SAAWK,EACjBzzB,EAAMyvB,SAAWkE,EAAU5tB,EAAS2tB,EAC7B1zB,EAfwB6zB,CAAU9tB,EAAQ6Q,EAAMqc,KAAa,IAAUtX,GAAKA,EAAE8T,WAAa1pB,KAC9F,MAAO,CAAE6Q,OAAMrT,MAAO8vB,EAAOd,SAC9BQ,GAAerU,GAAc,GAAUqU,GAHnCzN,CAGkD0N,MCtDtD,SAASc,GAAOxF,GACrB,MAAMwF,EAASjB,GAAO,CAAEJ,UAAW,GAAIC,QAAS,GAAIC,UAAW,GAAK,EAAGrlB,GAAI,MACrEymB,EAAUlB,GAAO,CAAEJ,UAAW,IAAKC,QAAS,GAAIC,UAAW,GAAK,GAAIrlB,GAAI,IAExE0mB,EAAc,IAAa,IAAM1mB,GAAI,CAAE2mB,QAAS,KAAMC,UAAW,SAQvE,OANkB3H,GAChByH,EACE,IAAQ,CAACC,EAASE,KAAU,CAAGF,QAAS,GAAGA,KAAYC,UAAW,gBAAgBC,UAAeL,EAAQC,IAItGK,CACL9F,GCNJ,SAAgB+F,GAAoB,IAAI/F,IAAwB5D,IAAU,IAEjE,CACLoJ,GACEjD,GAAQD,GAAYV,WAAYtJ,GAAM,CAAEuJ,KAAM,IAA9CU,IACKvC,OCJEgG,GAAQ,EAAGjG,MAAKR,QAAOS,WAAUiG,SAAS,MAAgB7J,IAAU,EAC9E6D,EAAOC,IACPziB,EAAQyoB,IACR/F,EAAOC,KAkBD,CAfWpJ,GAChBsB,GAAM,CACJ6N,MAAOn2B,GAAQE,QACf0yB,QAAS,aACNqD,IAEL,GACE,IAAQ,CAACG,EAAUC,IACVD,EAAW,CAAED,MAAOn2B,GAAQC,QAASqJ,OAAQ,WAChD+sB,EAAU,CAAExD,gBAAiB7yB,GAAQC,SACnC,MACLwN,EAAQ0iB,IAKbmG,CACExG,GAAQ,CAAEE,WAAUD,MAAKR,SAAzBO,CAAkC,CAChCG,MAAOC,IACPC,MAAOC,IACPhqB,SAAU8vB,OAId,CAAEjG,QAAOxiB,SAAQ0iB,YCpCrB,MAAMoG,WAAkB,GACpB,YAAYtO,EAAQ9S,GAChB4V,MAAM5V,GACNzS,KAAKulB,OAASA,EACdvlB,KAAKyS,KAAOA,EAEhB,MAAM1E,EAAGvE,GACLxJ,KAAKulB,OAAOuO,YAActqB,EAC1BxJ,KAAKulB,OAAO1N,UAAW,EACvB7X,KAAKyS,KAAKqB,MAAM/F,EAAGvE,IAGpB,MAAMuqB,GACT,YAAYxe,EAAQwc,GAChB/xB,KAAKuV,OAASA,EACdvV,KAAK+xB,aAAeA,EACpB/xB,KAAK6X,UAAW,EAChB7X,KAAKg0B,WAAkC,IAArBnyB,UAAUmC,OAEhC,IAAIyO,EAAM3H,GACN,MAAMmpB,EAAkBj0B,KAAK6X,SACvB,GAAU7X,KAAK8zB,aACf9zB,KAAKg0B,WACD,GAAUh0B,KAAK+xB,cACf,KAEV,OAD0BkC,EAAkBA,EAAgBj0B,KAAKuV,QAAUvV,KAAKuV,QACvDvK,IAAI,IAAI6oB,GAAU7zB,KAAMyS,GAAO3H,IAGzD,SAASopB,GAAa3hB,EAAGwf,GAC5B,OAAyB,IAArBlwB,UAAUmC,OACH,IAAI+vB,GAAaxhB,GAGjB,IAAIwhB,GAAaxhB,EAAGwf,GAmB5B,MCxDMoC,GAAe,CAACd,EAAS,KAAO,IAAO5rB,IAAS,CACzD,IAAIgL,EAAM3H,GACN,MAAMspB,EAAuB,IAAIC,sBAAqB/Q,IAClD7Q,EAAKqB,MAAMhJ,EAAUS,cAAe+X,KACrC+P,GAEH,OADAe,EAAqB/vB,QAAQoD,EAAKsd,SAC3B,GAAY,EAAEhf,EAAUuuB,KAAQvuB,EAASwuB,UAAUD,IAAK,CAACF,EAAsB3sB,EAAKsd,eCE7FyP,GAAW,gCACV,SAASC,GAAShB,EAAOR,GAE5B,OADcuB,GAASE,KAAKjB,GAEjBA,EAAMjzB,QAAQ,cAAeinB,OAAOwL,IAGpCwB,GAjBR,SAA0BE,EAAS1B,EAAU,GAChD,IAAI2B,EAAMD,EAAQn0B,QAAQ,IAAK,IAO/B,OANmB,IAAfo0B,EAAI5wB,SACJ4wB,EAAM,GAAGA,EAAI,KAAKA,EAAI,KAAKA,EAAI,KAAKA,EAAI,KAAKA,EAAI,KAAKA,EAAI,MAKvD,QAHGC,SAASD,EAAIE,UAAU,EAAG,GAAI,OAC9BD,SAASD,EAAIE,UAAU,EAAG,GAAI,OAC9BD,SAASD,EAAIE,UAAU,EAAG,GAAI,OACV7B,EAAU,OASpB8B,CAAiBtB,GAAQR,GCX1C,MAAM+B,GAAW,EAAGC,eAAcroB,SAAS,GAAIsjB,UAAU,GAAIgF,UAAUlhB,QAAemhB,GAAYzL,IAAU,EAAE0L,EAAcC,IAAsBC,EAAoBC,IAA4BC,EAAyBC,IAAiCC,EAA4BC,MAC3R,MAAMC,EAAwB,GAAUX,GAClCY,EAAWpL,GAAM7E,GAAM,CACzB6I,SAAU,WACVC,IAAK,EAAGG,KAAM,EAAGD,MAAO,EAAGD,OAAQ,IACnC0G,EAAmB,GAAM,UAAW,GH4CrC,SAAyBxN,KAAOiO,GACnC,OAAO,GAAajO,EAAIiO,GG7C8BC,EAAgB,EAAEC,IAAiBC,IAA2BC,MAChH,MAAM,EAAEtnB,EAAC,EAAEpF,GAAM0sB,EAAuBC,iBAClC3F,EAAQjkB,KAAKC,IAAIwpB,EAAcI,YAAY5F,MAAO0F,EAAuBC,iBAAiB3F,OAAoB,EAAVN,EAAetjB,EACnH6jB,EAASuF,EAAcI,YAAY3F,OAASyF,EAAuBC,iBAAiB1F,OAAS7jB,EAGnG,MAAO,CACHypB,gBAAiB,mBAAmB7F,OAAWC,cAFvC7hB,EAAK6hB,EAAS,EAAK,aADlBjnB,EAAK0sB,EAAuBC,iBAAiB3F,MAAQ,EAAK,SAGoBlzB,GAAQG,cAAc+yB,EAAQ,QAAQiE,GAASn3B,GAAQI,QAAS,WAG5J83B,EAAyBE,EAA4BJ,KAClDgB,EAAahS,GAAEqR,EAAiC,MAA0BF,EFX9D,EAACpC,EAAS,KAAO,IAAO5rB,IAAS,CACnD,IAAIgL,EAAM3H,GACN,MAAMyrB,EAAK,IAAIC,gBAAelT,IAC1B7Q,EAAKqB,MAAMhJ,EAAUS,cAAe+X,MAGxC,OADAiT,EAAGlyB,QAAQoD,EAAKsd,QAASsO,GAClB,GAAY,EAAEttB,EAAUuuB,KAAQvuB,EAASwuB,UAAUD,IAAK,CAACiC,EAAI9uB,EAAKsd,eEKiC,CAAgB,KAAM,GAAc,IAAI,EAAE0R,MACpJ,MAAM,EAAE7nB,EAAC,EAAEpF,EAAC,MAAEgnB,EAAK,OAAE7B,GAAW8H,EAAKN,iBAG/BO,EAFcv4B,OAAOw4B,YAAchI,EACxBA,EAIjB,MAAO,CACHD,KAHSgI,EAFI/H,EAEc/hB,EAASgC,EAAIhC,GAAU,KAG7CiiB,KAFIrlB,EAAKgnB,EAAQ,EAAK,KAG3ByC,QAAS,EACTC,UAAW,mBAAmBwD,EAAO,IAAM,cAEhDpB,IAAsB1P,GAAM,CAAEgR,OAAQ,IAAMnI,SAAU,WAAYwE,QAAS,KACxE4D,EAAiB,GAAM,GAAMzB,EAAcF,IAC3C4B,EAAWpZ,GAAa,IAAI4P,GACvBuJ,EAAe,GAAMP,EAAWhJ,GAAWuI,OACnDD,IACGmB,EAAWzS,GAAEiR,EAAyB,MAA0B,GAAc,GAAM,GAAS,CAAEqB,OAAQ,IAAMnI,SAAU,YAAcmH,GAAwB,GAAS,KAAMR,MAClL,MAAO,CACH3K,GAAM,IAAIhjB,IAAQ,IAAMA,EAAM6d,iBAAiB,MAA/CmF,CAAyDsM,EAAS5B,GAAU2B,GAC5E,CAAE1B,oBCtCG4B,GAAgB1S,IAAG2S,GAAQ,GAAM,GAAM,QAASA,GAAM,GAAM,cAAeA,KAAO,IAAS,IAC3FC,GAAY5S,IAAG2S,GAAQ,GAAM,GAAM,OAAQA,GAAM,GAAM,aAAcA,KAAO,IAAOztB,GAAKvL,SAASk5B,gBAAkB3tB,EAAEzE,SAClI,IAAS,IAEIqyB,IADQ7M,GAAS,OAATA,CAAiBqF,GAAYJ,QAC5BjF,GAAS,QAATA,CAAkBqF,GAAYJ,OAAQ5J,GAAM,CAAEhf,OAAQ,UAAW6sB,MAAOn2B,GAAQM,eCNhG,GAAOgoB,GAAM,CACfyR,WAAY,sBACZC,WAAY,IACZC,SAAU,YAERC,GAAelT,GAAE0B,GAAY,4BAA6B,CAC5DmK,gBAAiB7yB,GAAQM,aACzBooB,GAAY,sBAAuB,CACnCmK,gBAAiB,cACjBK,MAAO,MACPC,OAAQ,QACRzK,GAAY,kCAAmC,CAC/CmK,gBAAiB7yB,GAAQC,WAEvBk6B,GAAUnT,GAAE,GAAMsB,GAAM,CAC1BmK,OAAQ,wBACR0D,MAAOn2B,GAAQE,QACfk6B,QAAS,OACTC,WAAY,KAEhB,IACIH,gBACArM,KAAI,GACJyM,KAAMtT,GAAE,GAAMsB,GAAM,CAChB6K,OAAQ,QACRgD,MAAOn2B,GAAQE,QACfsa,KAAMxa,GAAQE,QACdq6B,UAAW,SACX1H,gBAAiB7yB,GAAQG,WACzBq6B,OAAQ,IACRC,eAAgB,OAChBC,eAAgB,OAChB3I,QAAS,UACTmI,IACJC,WACA1M,MAAOzG,GAAEmT,GAAS7R,GAAM,CACpB0K,SAAU,QACVH,gBAAiB,cACjBJ,OAAQ,OACRkI,aAAc,aAAa36B,GAAQE,UACnC06B,cAAe,MACf/I,KAAM,EACNe,QAAS,EACTiI,UAAW,QACXnS,GAAY,gBAAiB,CAC7ByN,MAAOn2B,GAAQM,cAEnBw6B,IAAK9T,GAAEmT,GAAS7R,GAAM,CAClBhf,OAAQ,UACRupB,gBAAiB,cACjBJ,OAAQ,aAAazyB,GAAQE,UAC7Bi2B,MAAOn2B,GAAQE,QACf0yB,QAAS,WACTb,QAAS,OACTgJ,WAAY,aCnDPC,GAAU,EAAGz4B,WAAW,KAASytB,cAAe5D,IAAU,EAAE6O,EAAYC,IAAqBC,EAAcC,IAAiBnL,EAAOC,KAErI,CADSjD,GAAS,SAATA,CAAmBoO,GAAYP,IAAK5K,EAAY,GAAM,cAAe,GAAc,IAAI3tB,GAAYA,EAAW,CAAEozB,QAAS,GAAI2F,cAAe,QAAW,MAAM/4B,IAAYotB,GAAa,IAAIptB,IAAY,CAAGA,cAAaA,IAAY,GAAc,IAAIkL,GAAUA,EAAS,CAAE8tB,YAAav7B,GAAQC,SAAY,MAAM8b,GAAW,CAACkf,EAAYE,MAAkBD,EAAkBxB,IAAgB0B,EAAcxB,IAEtZ4B,CAAQxL,GACR,CACIC,YCJCwL,ICAezL,GDASqD,GCAIjH,IAAU,EAAE6O,EAAYC,IAAqBC,EAAcC,IAAiBnL,EAAOC,KAGjH,CAFQlJ,GAAEqU,GAAYlB,QAAS7R,GAAM,CAAEhf,OAAQ,UAAWkR,KAAMxa,GAAQE,QAASw7B,aAAc,QAAWR,EAAkBxB,IAAgB0B,EAAcxB,IAAY1J,EAAY,GAAM,cAAe,GAAc,IAAIziB,GAAUA,EAAS,CAAE8tB,YAAav7B,GAAQC,SAAY,MAAM8b,GAAW,CAACkf,EAAYE,MAChSQ,CAAO1I,GAAM,CAAEjD,eAG/B,CAAEC,aALiB,IAACD,GDEPuC,GAAQD,GAAYV,WAAYtJ,GAAM,CACzDsK,QAAS,OAAQC,gBAAiB7yB,GAAQG,WAC1CuyB,UAAW,sGAFN,MAKMkJ,GAAU/N,GAAkCwE,GAAK/J,GAAM,CAAEmK,OAAQ,aAAazyB,GAAQQ,WAAYoyB,QAAS,SAA/DP,CACvD/E,GAAMhF,GAAM,CAAE2R,SAAU,QAAxB3M,CAAkCO,IELvBgO,GAAS,EAAG52B,QAAQyR,KAASolB,aAAa,GAAIC,aAAa,GAAOC,UAAUhV,QAAUoF,IAAU,EAAE6O,EAAYC,IAAqBC,EAAcC,IAAiBtK,EAAMmL,IAAcvH,EAAQwH,MACvM,MACMC,EADsBnV,GAAE+U,EAAY,GAAU,IAAK,GAC3CK,CAAoB1H,GAE5BhzB,ET6BH,SAAsBA,GACzB,MAAMskB,EAAUphB,OAAOohB,QAAQtkB,GACzBqV,EAAUiP,EAAQ7F,KAAI,EAAE4G,EAAGlQ,KAAYA,IAQ7C,OAP4B,IAAa,IAAIwlB,IAClCA,EAAM/vB,QAAO,CAACgM,EAAM2N,EAAKqW,KAE5BhkB,EADY0N,EAAQsW,GAAK,IACbrW,EACL3N,IACR,KACJvB,GStCWwlB,CAAa,CAAEpM,MADf,GAAM8K,EAAYE,GACIgB,UACpC,MAAO,CACHlP,GAAS,QAATA,CAAkBoO,GAAY5N,MAAOnF,GAAMwT,GAAaI,EAAa,GAAM,SAAU,IAAIM,GACjFA,EAAQ/0B,kBAAkBg1B,kBACbD,EAAQ/0B,OAAOxC,OAGzB,MACN+2B,EAAS,GAAc,IAAI,EAAG7L,QAAOgM,WAClCA,EACO,CAAExB,aAAc,aAAa36B,GAAQQ,YAEzC2vB,EAAQ,CAAEwK,aAAc,aAAa36B,GAAQC,WAAc,MACnEyB,IAASw5B,EAAkBxB,IAAgB0B,EAAcxB,IAAYqC,EAAW,GAAM,SAAUjV,GAAE,IAAI7c,GAAQ,GAAM6E,GAAI7E,GAAO,IAAO,KAAM,GAAO,IAAI8b,IAEtJ9b,EAAKsd,QAAQxiB,MAAQklB,OAAOlE,KAC7BhhB,OAAWmb,IAdd6M,GAeA,CACIyH,SACA5D,YCzBC4L,GAAc3G,GAAW3J,IAAU,EAAEsI,EAAQiI,IAAe7L,EAAMmL,MAC3E,IAAIhQ,EACJ,MAAM,KAAE2Q,GAAS7G,EACXqG,EAAsBrG,EAAOgG,WAAa/U,GAAE+O,EAAOgG,YAAYpC,GAAO,GAAOA,EAAK7I,IAAO,SAAaxlB,EACtGuxB,EAAwC,QAA7B5Q,EAAK8J,EAAO+G,mBAAgC,IAAP7Q,EAAgBA,EAAKjF,KACrE+U,EAAaK,EAAsBxb,GAAYwb,EAAoB1H,IAAW,KAC9EqI,EAAgBzP,GAAMhF,GAAM,CAAE2R,SAAU,MAAO/G,MAAO,UACtD8J,EAAQJ,EAAO5tB,GAAI+tB,EAAcH,IAAS,KAC1ChB,EAAS,IAAIqB,GACXA,EACsB3U,GAAM,CAAE6N,MAAOn2B,GAAQQ,UACtC08B,CAAcH,EAAcE,IAEhCL,EAAOG,EAAcH,GAAQlmB,MACrCqlB,GACGoB,EAAW/c,GAAa,GAAM4c,EAAOpB,IAC3C,MAAO,CACHvJ,GAAKwK,EAASvU,GAAM,CAAEyS,WAAY,eAAlC1I,CAAmDyH,GAAOxH,GAAYT,KAAMS,GAAYd,YAArCsI,CAAkDzH,GAAKC,GAAYT,KAAMS,GAAYZ,aAAnCW,CAAiD/E,GAAMhF,GAAM,CAAE8U,UAAW,WAAYxC,cAAe,SAAU7E,EAAOsH,aAArE/P,CAAoFyI,EAAOuH,OAAQzB,GAAO,IAAK9F,EAAQgG,WAAYK,GAAhCP,CAAuD,CAC5SnH,OAAQiI,IACR7L,KAAMmL,OACLkB,IACL,CAAEzI,cCtBJ6I,GAAiBjQ,GAAMhF,GAAM,CAAE6N,MAAOn2B,GAAQM,WAAYsyB,QAAS,aAAlDtF,CAAiE,cAC3EkQ,GAAiB,EAAGC,aAAYC,eAAe1W,KAAK2W,WAAWJ,MAAqBnR,IAAU,EAAEwR,EAAcC,MACvH,MAAMC,EAAsB,GAAUL,GAChCM,EAA2B,GAAK,EAAG,IAAKzlB,GAAQA,EAAO,IAAI,EAAGslB,IAC9DI,EAAazL,GAAQ8I,GAAYnB,aAAc5R,GAAM,CAAE2V,SAAU,SAAW,IAAI9zB,IAAQ,IAAMA,EAAM6d,iBAAiB,MAAW0V,GAChIQ,EAAoBL,EAAmB,GAAsB,CAAEM,UAAW,IAAM,IAAIC,GAAaA,EAAU,KAAK,IAAOC,IACzF,IAAzBA,EAAMC,kBAEXC,EAAYrR,GAAQ,WAARA,CAAoBgR,EAApBhR,GACZsR,EAAW,GAAM,GAAIV,GACrBW,EAAY,GAAM,IAAIC,IAAQ,CAAGC,MAAOJ,EAAWG,UAASF,GAAW,IAAI,KAAM,CAAGG,MAAOhB,KAAcI,IACzGa,EAAc,IAAK,CAACtmB,EAAM5W,IACxB,SAAUA,GAASA,EAAMg9B,KAGlB,CAAEpmB,OAAMrT,MAFMvD,EAAMg9B,KAAKG,WAAan9B,EAAMg9B,KAAKI,OAAOp4B,OAClChF,EAAMi9B,MAAQjoB,MAGxC,CAAE4B,OAAMrT,MAAOvD,EAAMi9B,QAC7B,GAAIF,GACP,MAAO,CACHT,EAAW,IAAM7zB,GACN4R,GAAW5R,EAAK20B,SACxBhB,GAAsB1d,GAAa,GAAUme,EAAWK,KAC3D,CAAEG,cAAehB,OCtBZiB,GAAQlS,GAAK,QAEbmS,GAAaD,GAAMrV,GAAK,CAAEje,EAAG,+eAAhBszB,GACbE,GAAgBF,GAAMrV,GAAK,CAAEje,EAAG,0eAAhBszB,GAGhBG,GAAUH,GAAMrV,GAAK,CAAEje,EAAG,mFAG1B0zB,GAAOJ,GAAMrV,GAAK,CAAEje,EAAG,kRAAhBszB,GACPK,GAAOL,GAAMrV,GAAK,CAAEje,EAAG,k0BAAhBszB,GACPM,GAAON,GAAMrV,GAAK,CAAEje,EAAG,gcAAhBszB,GAEPO,IADOP,GAAMrV,GAAK,CAAE,YAAa,UAAW,YAAa,UAAWje,EAAG,69CAAhEszB,GACAlS,GAAK,IAALA,CAClBkS,GAAMrV,GAAK,CAAEje,EAAG,6LAAhBszB,GACAA,GAAMrV,GAAK,CAAE,eAAgB,OAAQje,EAAG,yDAAxCszB,GACAA,GAAMrV,GAAK,CAAE,eAAgB,OAAQje,EAAG,4CAAxCszB,GACAA,GAAMrV,GAAK,CAAE,eAAgB,OAAQje,EAAG,iCAAxCszB,KAUWQ,GAAe,EAAGv6B,QAAOw6B,OAAO,OAAQC,eAEnD,MAAMC,EAAgBpL,GAAOL,GAAkB,EAAGjvB,GAC5C26B,EAAgB3R,GAAY,IAAI5Q,IAAK,CACzCwiB,gBAAwB,IAAJxiB,EAAH,QACjByiB,OAAQziB,EAAI,EAAIrd,GAAQQ,SAAW,MACjCm/B,IAEJ,OAAO7S,GAAK,MAALA,CAAYxE,GAAM,CAAEyJ,QAAS,QAASmB,MAAOuM,EAAMtM,OAAQsM,KAASC,IAAa/V,GAAK,CAAEyJ,QAAS,cAAjGtG,CACLqS,GAAQ7W,GAAM,CAAE9N,KAAM,OAAQslB,OAAQ9/B,GAAQK,aAAc0/B,YAAa,QAAzEZ,GACAA,GAAQ7W,GAAM,CAAE9N,KAAM,OAAQslB,OAAQ9/B,GAAQM,WAAYy/B,YAAa,QAAUH,EAAjFT,KCvCSa,GAAqB,CAChC,CAAEC,QAAS,MAAOhN,MAAOmM,GAAM9B,MAAO,QAAS4C,OAAQ,MAAOC,QAAS,KACvE,CAAEF,QAAS,MAAOhN,MAAOoM,GAAM/B,MAAO,UAAW4C,OAAQ,MAAOC,QAAS,IACzE,CAAEF,QAAS,MAAOhN,MAAOsM,GAAMjC,MAAO,WAAY4C,OAAQ,MAAOC,QAAS,IAC1E,CAAEF,QAAS,MAAOhN,MAAOqM,GAAMhC,MAAO,eAAgB4C,OAAQ,MAAOC,QAAS,KCUnEC,GAAc,EAAGC,QAAOC,iBAA6BlU,IAAU,EACzEsI,EAAQwH,IACRqE,EAAoBC,IACpBC,EAAaC,MAGd,MAAMC,GCXoCthB,EDWZ2gB,GCX0B5T,IAAU,EACjEwU,EAAQC,IACR9B,EAAe+B,IACfC,EAAiBC,MAIlB,MAAMC,EAAoB,GAAU,GAAIF,GAExC,MAAO,CACLxO,GAAQD,GAAYV,WAApBW,CACEmK,GAAW,CAAEY,MAAO,SAAUr4B,MAAOyR,MAArCgmB,CAAgD,CAC9ChI,OAAQsM,MAGV5gB,GACE,IAAIva,GACF23B,GAAe,CACbE,aAAc1W,GAAEsL,GAAYX,QAASrJ,GAAM,CAAE4K,MAAO,WACpDuK,WAAY,IAAKyD,IAcR,CAAEpC,OAbMzf,EAAKxZ,QAAOgG,GA5BzC,SAAqCA,EAAQgiB,GAK3C,YAAiBviB,IAJH1G,OAAO0V,OAAOzO,GAAKs1B,MAAKl8B,GACZ,iBAAVA,IAAuF,IAAjEA,EAAMm8B,oBAAoBr7B,QAAQ8nB,EAAKuT,uBA0B/BC,CAAyBx1B,EAAKhG,KAASsa,KAAIkgB,IAC3E,MAAMiB,EAAsBT,EAAa,GAAM,SAAU,GAASR,IAElE,OAAOhO,GAAKiP,EAAqBhP,GAAYX,QAASrJ,GAAM,CAAEhf,OAAQ,UAAWyxB,WAAY,WAAtF1I,CACLY,GAAM,CAAEjD,SAAUqQ,EAAMpN,MAAOzY,KAAMxa,GAAQE,QAASgzB,MAAO,GAAIE,QAAS,cAC1Eb,GAAQD,GAAYT,KAApBU,CACEjF,GAAMhF,GAAM,CAAE0R,WAAY,SAA1B1M,CAAqC+S,EAAMH,QAC3C5S,GAAMhF,GAAM,CAAE2R,SAAU,MAAO9D,MAAOn2B,GAAQM,aAA9CgtB,CAA6D+S,EAAM/C,QAErEhQ,GAAM+S,EAAMF,QAAQoB,sBAIP1C,SAAU,MAC1B,GAAUE,KAjBfvB,CAkBG,CACDuB,cAAe+B,OAEjBG,KAKN,CAAEL,eDhCqC,CACvCA,OAAQF,EAAkB,MAGtBz7B,EAAQ,GAAM,GAAS,GAAIo7B,GAAQC,GCfjB,IAAkBjhB,EDiB1C,MAAO,CACLgT,GAAKC,GAAYV,WAAYtJ,GAAM,CAAEyS,WAAY,SAAUlJ,KAAM,IAAjEQ,CAEEqF,GAAS,CACPC,aAAc,GAASgJ,EAAYJ,GACnC3I,QAAS6I,GAFX/I,CAKErF,GAAKmO,EAAyB,GAAM,UAAWlO,GAAYZ,aAAcpJ,GAAM,CAAEyS,WAAY,SAAUzxB,OAAQ,YAA/G+oB,CACEY,GAAM,CAAEjD,SAAU5P,GAAa,IAAI3P,GAAKA,EAAEwiB,OAAOoN,IAAS7lB,KAAMxa,GAAQE,QAASgzB,MAAO,GAAIE,QAAS,cACrGH,GAAM,CAAEjD,SAAUiP,GAAY/L,MAAO,GAAIE,QAAS,kBAPtDsE,CASE,IAEFmE,GAAO,CACL52B,QACA62B,WAAY,CAAE0F,kBAAmB,cAAexH,WAAY,SAAUC,SAAU,QAChF+B,QAAShV,GACP2C,GAAK,CAAE8X,QAAS,sBAAuBC,UAAW,YAClD/R,GACE,IAAIlf,IAAK,CAAGkxB,YAAalxB,EAAE0vB,WAAYE,MAN7CxE,CASG,CACDnH,OAAQwH,OAIZ,CAAExH,SAAQ+L,mBENDmB,GAAqBxV,IAAU,EACzCyV,EAAsBC,IACtBC,EAAsBC,IACtBC,EAAsBC,IACtBC,EAAsBC,MAIvB,MACM/B,EAAQ,GAAmB8B,EADPnC,GAAU,IAE9BqC,EAAgB,IAAI5xB,GAAKA,EAAE0vB,SAASE,GAEpCiC,EAAkC,GAAMT,EAAsB,GAAS,EAAGM,IAE1EI,EAAgB,IAAS,CAACpC,EAASzL,IACvC,GAAKyL,EAAUqC,OAAO9N,IAAWyL,GACjCkC,EAAeC,GAEXG,EAAwB,IAAS,CAACtC,EAASuC,IAAWvC,EAAUuC,GAAQL,EAAeJ,GAKvFU,EAAuB,GAHH,GAAMV,EAAgBM,GAGmB,GAG7DK,EAA2BrQ,GC5EZ,GAAGttB,QAAOsT,OAAO,OAAU6T,IAAU,EAAEsI,EAAQwH,MAClE,MAAM2G,EAAoB,CACtBv5B,OAAQ,UACRupB,gBAAiB7yB,GAAQC,QACzBy7B,aAAc,MACdxI,MAAO,OACPC,OAAQ,OACR2P,WAAY,QAEhB,MAAO,CACH7V,GAAS,QAATA,CAAkB3E,GAAM,CAAE4K,MAAO,OAAQC,OAAQ,MAAOqH,OAAQ,IAAKuI,WAAY,cAAeD,WAAY,OAAQ1I,QAAS,OAAQj6B,WAAYH,GAAQE,UAAYwoB,GAAY,yBAA0Bma,GAE3M3G,EAAa,GAAM,SAAU,IAAIlN,IAC7B,MAAMvnB,EAASunB,EAAIvnB,OACnB,OAAO+6B,OAAO/6B,EAAOxC,WACpB0kB,GAAK,CAAEqZ,KAAM,QAAS7lB,IAAK,EAAGjO,IAAK,EAAGqJ,SAASyO,GAAE,IAAI7c,GAAQ,GAAM6E,GAAI7E,GAAO,IAAO,KAAM,GAAO,IAAI8b,IAEvG9b,EAAKsd,QAAQxiB,MAAQklB,OAAOlE,KAC7BhhB,OAAWmb,IARd6M,GASA,CAAEyH,cD0DNuO,CAAQ,CAAEh+B,MAAO09B,GAAjBM,CAAyC,CACvCvO,OAAQwN,OAKZ,MAAO,CACL3P,GAAQD,GAAYX,QAApBY,CAEEqJ,GAAO,uEACPtO,GAAM,0IAENqF,GAAML,GAAYV,WAAYY,GAAYlK,GAAM,CAAEoT,aAAc,OAAQ9I,QAAS,SAAjFD,CAEE+E,GAAS,CAAEC,aAAc,GAASiL,EAA0Bb,IAA5DrK,CACErF,GAAK/J,GAAM,CAAEyS,WAAY,WAAzB1I,CACE+N,GAAY,CAAEC,MAAOA,EAAOC,YAAamC,GAAzCrC,CAAkE,CAChE1L,OAAQoN,IACRrB,YAAa2B,MAEfJ,EAAoB,GAAM,SAA1BA,CACExC,GAAa,CAAEv6B,MAAO09B,EAAsBlD,KAAM,OAAQC,SAAU,CAAEvM,OAAQ,OAAQ7pB,OAAQ,eAPpGouB,CAUE,IAEFrF,GAAKC,GAAYX,QAASrJ,GAAM,CAAE4a,aAAc,SAAUnI,WAAY,WAAtE1I,CACEE,GAAQjK,GAAM,CAAEuJ,KAAM,EAAG8I,aAAc,aAAa36B,GAAQK,iBAA5DkyB,GACAF,GAAKC,GAAYZ,aAAcpJ,GAAM,CAAEyS,WAAY,WAAnD1I,CACE/E,GAAMhF,GAAM,CAAE6N,MAAOn2B,GAAQM,WAAY25B,SAAU,QAAnD3M,CAA6D,aAC7D2F,GAAM,CAAEjD,SAAUkP,GAAehM,MAAO,GAAIE,QAAS,eAEvDb,GAAQjK,GAAM,CAAEuJ,KAAM,EAAG8I,aAAc,aAAa36B,GAAQK,iBAA5DkyB,IAGF6N,GAAY,CAAEC,MAAOrxB,GAAIgxB,GAAU,IAAKM,YAAa5pB,MAArD0pB,CAAgE,IAEhE/N,GAAK/J,GAAM,CAAE4a,aAAc,WAA3B7Q,CACE2I,GAAQ,CAAEhL,SAAU1C,GAAM,SAA1B0N,CAAqC,WEnH/C,IAAImI,GAKJ,SAASC,GAAiBloB,EAASwZ,EAAQluB,GACvC,OAAI0U,EAAQ1U,KAAOkuB,EAAOluB,IAAMA,EAAIkuB,EAAOhuB,OAChCF,EACJ48B,GAAiBloB,EAASwZ,EAAQluB,EAAI,GATpB,IAAK,CAAC0U,EAAShP,IAAMgP,EAAUhP,GAAG,GAE/D,SAAWi3B,GACPA,EAAUA,EAAqB,UAAI,GAAK,YACxCA,EAAUA,EAAqB,UAAI,GAAK,YAF5C,CAGGA,KAAcA,GAAY,KAMtB,MAAME,GAAgB,EAAGC,SAAQC,iBAAgBC,iBAAgBC,YAAY,GAAIC,QAAQ,OAC5F,MAAMC,EAAgB/iB,GAAY0iB,GAC5BM,EAAqB5c,GAAE,IAAK,CAAC1O,EAAMoc,KACrC,MAAMmP,EAAYnP,EAAO6M,iBACzB,GAAa,OAATjpB,EACA,MAAO,CAAEoc,SAAQoP,IAAK,KAAMC,IAAKF,EAAUn9B,OAAQm9B,aAEvD,MAAMC,EAAMpP,EAASpc,EAAKoc,OAASyO,GAAUa,UAAYb,GAAUc,UAC7DC,EAAa5rB,EAAKoc,OAAO6M,iBAI/B,MAAO,CAAE7M,SAAQoP,MAAKC,IAHgC,IAAhCF,EAAUM,MAAM,KAAKz9B,QAEdm9B,EAAUn9B,OAASw9B,EAAWx9B,OAAS,EAAI08B,GAAiBc,EAAYL,EAAW,GACrFA,eAC5B,MAAO,GAAK,GACf,GAZ2B7c,CAYhB2c,GACLS,EAAc,CAChB,CAACjB,GAAUa,WAAY,CAAE7N,MAAOoN,GAChC,CAACJ,GAAUc,WAAY,CAAE9N,MAAOqN,IAEpC,OAAOrW,MAAS1nB,MAAMi+B,GAAOlpB,UAAKlP,GAAW6U,KAAI,CAAC4G,EAAGW,IAAS4F,GAAMhF,GAAM,CAAEya,WAAY,yBAA0BU,IAAc,GAAcrjB,GAAa4G,GAAE,IAAgB,CAAC9a,EAAGoF,IAAMpF,EAAE23B,UAAUnc,KAAUpW,EAAEuyB,UAAUnc,IAASA,EAAOpW,EAAEyyB,MAAM,IAAI,EAAGA,MAAKD,UACzP,MAAMO,EAAa/zB,GAAG,IAAM,IAC5B,OAAIoX,EAAOqc,EACAM,EAEJ,GAAMr1B,GAAIo1B,EAAYN,IAAOO,MALmHrd,CAMvJ4c,KAN0DtW,CAMnCtG,GAAE,IAAI,EAAG6c,gBAAkB,IAAI5X,EAAI,OAAkC,QAA1BA,EAAK4X,EAAUnc,UAA0B,IAAPuE,EAAgBA,EAAK,MAAQrL,GAA1GoG,CAAuH4c,QC/BhJx0B,GAAM,CAAClD,EAAWoF,IAAcpF,EAAIoF,EAGpCgzB,GAAetd,GACnB,IAAKud,GAAgB/B,OAAO+B,KAC5B,GAAU,IAGNC,GAAQrX,GACZ7E,GAAM,CACJmc,eAAgB,SAAU1J,WAAY,SACtC7H,MAAO,OAAQiD,MAAOn2B,GAAQM,aAEhCgyB,GAAYR,aAGR4S,GAAkB/a,GAAK,CAAEgY,YAAa,MAC5C,GAAevV,IAAU,EACtBlgB,EAAGy4B,IACHrzB,EAAGszB,KAEJ,CACErS,GAAQD,GAAYZ,aAApBa,CAEEF,GACEmS,GACElX,GAAM,MAERiF,GAAQD,GAAYd,YAApBe,CACEsJ,GAAO,CAAE52B,MAAOyR,KAASslB,QAAS0I,IAAlC7I,CAAqD,CACnDnH,OAAQiQ,EAAQL,MAElBzI,GAAO,CAAE52B,MAAOyR,KAASslB,QAAS0I,IAAlC7I,CAAqD,CACnDnH,OAAQkQ,EAAQN,QAKtBjS,GACElF,GAAM7E,GAAM,CAAE4K,MAAO,SAArB/F,GACAkW,GAAc,CACZC,OAAQ,GAAQl0B,GAAKlD,EAAGoF,GACxBkyB,eAAgBxjC,GAAQQ,SACxB+iC,eAAgBvjC,GAAQO,SACxBmjC,MAAO,UCxCjB,KAAkBz+B,WAAqBmnB,IAAU,EAC9CyY,EAAWC,IACXC,EAAWC,KAIL,CAEL3S,GAAK/J,GAAM,CAAEyS,WAAY,SAAUmI,aAAc,kBAAoB5Q,GAAYX,QAAjFU,CACEE,GAAQjK,GAAM,CAAEoT,aAAc,MAAOX,WAAY,WAAazI,GAAYX,QAA1EY,CACEyI,GAAQ,CAAEhL,SAAU1C,GAAM,MAA1B0N,CAAkC,CAChC/K,MAAO6U,EACL,GAAS,MAGb9J,GAAQ,CAAEhL,SAAU1C,GAAM,MAA1B0N,CAAkC,CAChC/K,MAAO+U,EACL,IAAU,OAKhB3B,GAAc,CACZC,OAAQr+B,EACRw+B,UAAW,CACTxJ,SAAU,QAEZuJ,eAAgBxjC,GAAQQ,SACxB+iC,eAAgBvjC,GAAQO,YAI5B,CAAEskC,YAAWE,gBCnCXE,GAAUjK,GAAQ,CACtBhL,SAAU1C,GAAM,aAEL4X,GAAS,IAAK,CAAChqB,EAAiBhP,IAAcgP,EAAUhP,IAErE,GAAekgB,IAAU,EACtB+Y,EAAcC,IACdC,EAAgBC,IAChBC,EAAkBC,IAClBC,EAAkBC,IAClBC,EAAsBC,MAGvB,MACMC,EAAiBX,GADF,GAIfY,EAAaD,EADF9pB,GAAW,CAAC4pB,EAAsBJ,EAAkBE,KAG/DM,EAAa,GAAMZ,EAAcn2B,GAAI,OAE3C,MAAO,CAELujB,GAAQD,GAAYX,QAApBY,CACEF,GAAK/J,GAAM,CAAE4a,aAAc,gBAAiBnI,WAAY,WAAazI,GAAYX,QAAjFU,CACEA,GAAKC,GAAYZ,aAAjBW,CACE/E,GAAMhF,GAAM,CAAE6N,MAAOn2B,GAAQM,aAA7BgtB,CAA4C,cAC5CA,GACE,GAAInD,OAAQ0b,EAAe,GAAM,GAAS,EAAGE,GAAa,IAAU,EAAGV,QAG3EhT,GAAKC,GAAYZ,aAAjBW,CACE/E,GAAMhF,GAAM,CAAE6N,MAAOn2B,GAAQM,aAA7BgtB,CAA4C,SAC5CA,GAAM,GAAInD,OAAQ2b,KAEpBb,GAAQ,CACNhV,MAAOmV,OAGX,IAAM,KAEJ,MAAO14B,EAAQs5B,GAAgB9Z,MACxB+Z,EAAaC,GAAqBha,KAEnCjnB,EAAQ,GAAmB,GAAUghC,GAAc,GAGzD,OAAO,GAAMv5B,EAAN,CACL6lB,GAAQD,GAAYX,QAApBY,CACEO,GACAT,GAAK/J,GAAM,CAAEyS,WAAY,WAAazI,GAAYV,WAAlDS,CACEoJ,GAAU,CACRxL,MAAOjJ,GACLgf,IACAV,IACAM,EACE,IAAS3f,IAAQA,GAAKhhB,OAI5BkhC,GAAS,CAAElhC,SAAXkhC,CAAoB,CAClBtB,UAAW7d,GACTwe,IACAU,EACE,IAAS,CAACjgB,EAAK4e,IAAc5e,EAAM4e,GAAW5/B,KAGlD8/B,UAAW/d,GACT0e,IACAQ,EACE,IAAS,CAACjgB,EAAK4e,IAAc5e,EAAM4e,GAAW5/B,YAOzD8gC,QC/EHK,GAAO,CAACj6B,EAAGmwB,EAAK+J,KAClB,MAAMC,EAAaD,EAAItgC,QAAQoG,GAC/B,IAAoB,IAAhBm6B,EACA,MAAM,IAAI3xB,MAAM,2CACpB,MAAM4xB,EAAS75B,EAAO45B,EAAYD,GAElC,OADAE,EAAOh2B,OAAO+rB,EAAK,EAAGnwB,GACfo6B,GAELC,GAAYnU,GAAK/J,GAAM,CAAEhf,OAAQ,OAAQ4pB,MAAO,OAAQ/B,SAAU,cCTxE,GAAe/E,IAAU,EAAEqa,EAAOC,MAEhC,MAAMC,EAAQlhC,MAAM,GAAG+U,KAAK,MAAM2F,KAAI,CAAC4G,EAAGvgB,IACxCmsB,GAAML,GAAYT,KAAMW,GAAYlK,GAAM,CAAEuK,gBAAiB7yB,GAAQG,WAAY+iC,aAAc,SAAU/P,OAAQ,OAAQ4H,WAAY,WAArIpI,CACErF,GAAM,SAAW9mB,MAIrB,MAAO,CACL6rB,GAAK/J,GAAM,CAAE4a,aAAc,YAA3B7Q,EDCsB0D,ECAV,CACR4Q,QACAC,WAAY,GACZnV,IAAK,IDHwBrF,IAAU,EAAEya,EAAaC,MAC1D,IAAI7a,EACJ,MAAMwF,EAA6B,QAArBxF,EAAK8J,EAAOtE,WAAwB,IAAPxF,EAAgBA,EAAK,EAC1D8a,EAAahR,EAAO4Q,MAAMjgC,OAC1BkgC,EAAanV,EAAMsE,EAAO6Q,WAC1BI,EAAkBD,EAAa,EAAKH,EAAaG,EAAchR,EAAO6Q,WACtEK,EAAgB,GAAUJ,GAC1BK,EAA0B,GAAUnR,EAAO4Q,MAAO,IAAI1xB,GAAKA,EAAEoK,MAAM4nB,IACnEE,EAAiB5S,GAAO,CAAEJ,UAAW,IAAKC,QAAS,KACzD,MAAO,CACH7B,GAAQD,GAAYT,KAAMvJ,GAAM,CAAEuJ,KAAM,EAAGuV,WAAY,OAAQjW,SAAU,WAAYgC,OAAQ6T,EAAkB,OAA/GzU,IAA2HwD,EAAO4Q,MAAMxmB,KAAI,CAACknB,EAAO7gC,KAChJ,IAAIylB,EACJ,MAAOqb,EAAOC,GAAerb,KACvBsb,EAAkB,GAAUF,GAC5BG,EAAmB7mB,GAAY,IAAI1U,GAAKA,EAAEw7B,YAAYF,IACtDG,EAAU5R,EAAO6Q,YAAoC,QAArB3a,EAAK8J,EAAOtE,WAAwB,IAAPxF,EAAgBA,EAAK,GAClF2b,EAAU5gB,GAAE,IAAO,EAAG6gB,kBAAmBA,IAAiBR,IAAQ,IAAI,EAAGhoB,UAAWA,EAAKtZ,QAAQshC,GAASM,IAAhG3gB,CAA0GigB,GACpHa,EAAgB,GAAM,IAAM7yB,GAC1BA,EAAEyyB,WACK14B,GAAIiG,EAAEggB,OAGNkS,EAAelyB,EAAEggB,MAAOjmB,GAAIiG,EAAEoK,KAAKtZ,QAAQshC,GAASM,KAEhEH,GAAkBL,EAAe3gC,EAAImhC,EAASC,IAC3CG,EAAsB,IAAQ,CAACC,EAAMC,KAAU,CAAGrS,UAAW,cAAcoS,cAAiBC,QAAaH,EAAeX,EAAe,EAAG,IAAIr6B,GAAMA,EAAK,IAAM,GAAG26B,KAClKS,EAAsB,IAAIC,IAAU,CAAGzV,UAAW,OAAOyV,OAAqB,EAATA,gCAA0ChB,EAAe,EAAG,IAAIr6B,GAAMA,EAAK,EAAI,GAAG26B,KAC7J,OAAOjB,GAAUe,EAAY,GAAM,eAEnC,IAAS,CAACloB,EAAM+oB,KACZ,MAAMC,EAAO,GAAMje,GAAmB,YAAavpB,QAASupB,GAAmB,cAAevpB,SACxFynC,EAAO,IAAUC,GAAkB,cAAZA,EAAGvF,MAAsBqF,GACtD,OAAO,IAAKG,IACR,MAAMC,EAAOppB,EAAKtZ,QAAQshC,GACpBpS,EAAQuT,EAAaE,SAAWN,EAAQM,QAAUD,EAAOd,GACzDgB,GAAwC,GA7CnD1iB,EA6CsBhX,KAAK25B,MAAM3T,EAAQ0S,KA7C/Bz4B,EA6C4CmQ,EAAK3Y,OAAS,GA7CtCwI,EAAM+W,EA6Ce,IA7CGA,GAAvD,IAACA,EAAU/W,EA8CL,MAAM25B,EAAmBF,IAAOF,EAC1Bf,EAAmC,gBAAtBc,EAAaxF,KAChC,MAAO,CACH/N,QAAOyS,aAAYiB,KACnBd,aAAcH,EAAaL,EAAQ,KACnChoB,KAAMwpB,EAAmBzC,GAAKiB,EAAOsB,EAAItpB,GAAQA,KAEtDipB,KACJpB,GAA0B9mB,GAAc0mB,KAAsB7Y,GAAY,GAAM8Z,EAAqBG,IAAuB,GAAc,IAAIh8B,IAAK,CAAGotB,OAAQptB,EAAI,IAAO,KAAMu7B,IAjB3KjB,CAiB+La,OAE1M,CAAER,YAAaK,QC1Cd,CAAEL,YAAaH,QDJC,IAAC3Q,KEFb+S,GAAkB1c,IAAU,EACtC2c,EAAKC,IACLC,EAASC,IACTC,EAASC,IACTC,EAAWC,MAGZ,MAAMC,EAAQ,GAAMJ,EAASE,GAEvBG,EAAcjX,GAAQD,GAAYX,QAApBY,CAClBjF,GAAM,mCACN+E,GAAK/J,GAAM,CAAE4a,aAAc,WAA3B7Q,CACE8T,GAAS,CAAElhC,MAAO,IAAK,CAACgQ,EAAGoI,IAAMpI,EAAIoI,GAAG,EAAGksB,IAA3CpD,CAAqD,CAAEpB,UAAWuE,IAAmBzE,UAAWuE,QAG9FzR,EAAe,GAAS6R,EAAaT,GACrCU,EAAmB,GAASD,EAAaP,GAG/C,MAAO,CACL1W,GAAQD,GAAYX,QAApBY,CACEjF,GAAM,gFACN+E,GAAKC,GAAYX,QAAjBU,CACE/E,GAAM,oCACNoK,GAAS,CAAEC,gBAAXD,CACEsD,GAAQ,CAAEhL,SAAU1C,GAAM,SAA1B0N,CAAqC,CACnC/K,MAAO+Y,MAFXtR,CAIE,KAEJA,GAAS,CAAEC,aAAc8R,GAAzB/R,CACEnF,GAAQjK,GAAM,CAAEuK,gBAAiB7yB,GAAQG,WAAYsyB,OAAQ,aAAazyB,GAAQI,UAAWwyB,QAAS,SAAtGL,CACEF,GAAKC,GAAYX,QAAjBU,CACEqK,GAAW,CAAEY,MAAO,MAAOr4B,MAAO+J,GAAI,KAAtC0tB,CAA6C,IAC7CA,GAAW,CAAEY,MAAO,MAAOr4B,MAAO+J,GAAI,KAAtC0tB,CAA6C,IAC7C1B,GAAQ,CAAEhL,SAAU1C,GAAM,aAA1B0N,CAAyC,CACvC/K,MAAOiZ,QANfxR,CAUE,SC/CFgS,GAAsBphB,GAAM,CAC9B2V,SAAU,SAAU0L,aAAc,WAAYC,WAAY,WAExDC,GAAiB7iB,GAAEsB,GAAM,CAAEsK,QAAS,YAAcN,GAAYT,MAC9DiY,GAAczX,GAAKwX,GAAgBvhB,GAAM,CAAE2R,SAAU,OAAQ9D,MAAOn2B,GAAQM,cAC5EypC,GAAY1X,GAAKwX,IACjBG,GAAgB3X,GAAKC,GAAYX,SACjCsY,GAAsBD,GAAc1hB,GAAM,CAAEiS,UAAW,WAAa7R,GAAY,sBAAuB,CAAEmK,gBAAiB,cAAeK,MAAO,SCRzIgX,GAAgB9d,IAAU,EACpC+d,EAAaC,MAId,IAAI5jC,EAAI,EAER,MAAMi3B,EAAa,IAAI,KACrB,MAAM3wB,IAAOtG,EAKb,MAAO,CAAEk4B,KAJIj5B,MALG,KAKc+U,KAAK,MAAM2F,KAAI,KACpC,CAAErT,GAAI,SAAWA,MAGX+xB,SATC,OAUfsL,GAEH,MAAO,CACLxX,IDRmBoD,ECSV,CACL0H,aACAC,aAAcpV,GAAM,CAClB6K,OAAQ,UAEVkX,QAAS,CACP,CACEv9B,GAAI,KACJ7H,MAAO,IAAMiH,GAAKohB,GAAMphB,EAAEY,OAE5B,CACEA,GAAI,KACJ7H,MAAO,IAAMiH,GAAKohB,GAAMphB,EAAEY,OAE5B,CACEA,GAAI,KACJ7H,MAAO,IAAMiH,GAAKohB,GAAMphB,EAAEY,SDzBJsf,IAAU,EAAE+d,EAAaC,MACvD,MAAME,EAAUL,MAAuBlU,EAAOsU,QAAQlqB,KAAIoqB,IACtD,IAAIte,EAAIue,EACR,OAAOV,GAAYxhB,GAA+B,QAAxB2D,EAAKse,EAAIE,iBAA8B,IAAPxe,EAAgBA,EAAK,IAAxE6d,CAAmG,QAArBU,EAAKD,EAAIG,cAA2B,IAAPF,EAAgBA,EAAKd,GAAoBpc,GAAMnD,OAAOogB,EAAIz9B,WAE1K2wB,EAAa,IAAI,EAAGiB,OAAMG,eAKrB,CAAEC,OAJMJ,EAAKve,KAAIwqB,GAAWX,MAAiBjU,EAAOsU,QAAQlqB,KAAIoqB,IACnE,IAAIte,EACJ,OAAO8d,GAAUzhB,GAA+B,QAAxB2D,EAAKse,EAAIE,iBAA8B,IAAPxe,EAAgBA,EAAK,IAAtE8d,CAA2EQ,EAAItlC,MAAM+J,GAAI27B,WAEnF9L,cAClB9I,EAAO0H,YACJmN,EAAQpN,GAAe,IACtBzH,EACH0H,cAFUD,CAGX,CACCuB,cAAeqL,MAEnB,MAAO,CACH,GAAMQ,EAAON,GACb,CAAEH,oBCQD,CACDA,YAAaC,QD7BC,IAACrU,K,cENvB,SAAS8U,GAAW5Z,EAAgBlxB,EAAc+qC,GAChD,OAAOvY,GAAQD,GAAYd,YAApBe,CACLjF,GAAMvtB,MAEH+qC,EAAO3qB,KAAI,EAAEpgB,EAAMo2B,KACpB9D,GAAKC,GAAYX,QAASrJ,GAAM,CAAE6K,OAAQ,OAAQ4H,WAAY,WAA9D1I,CACElF,GAAM7E,GAAM,CAAE4K,MAAO,OAAQC,OAAQ,OAAQN,gBAAiBsD,IAA9DhJ,GACAG,GAAMhF,GAAM,CAAEuJ,KAAM,EAAGsE,MAAOlF,EAAM3wB,WAAY25B,SAAU,SAA1D3M,CAAqE6I,GACrE7I,GAAMhF,GAAM,CAAEuJ,KAAM,IAApBvE,CAA0BvtB,OAM3B,MAeMgrC,GAAS3e,IAAU,IAIvB,CACLiG,GAAKC,GAAYV,WAAjBS,IACK,CAAC,KAAM,MAAOlS,KAAI6qB,GArBH,CAACA,GAAoB5e,IAAU,KACrD,MAAMpsB,EAAU4E,OAAOohB,QAAQglB,EAAShrC,SAClCixB,EAAQ+Z,EAAShrC,QAEvB,MAAO,CACL2yB,GAAML,GAAYV,WAAYU,GAAYT,KAAMW,GAAYlK,GAAM,CAAE6N,MAAOlF,EAAM/wB,QAAS0yB,QAAS,OAAQC,gBAAiB5B,EAAM9wB,aAAlIwyB,CACErF,GAAMhF,GAAM,CAAE2R,SAAU,SAAxB3M,CAAmC0d,EAASjrC,MAC5C8qC,GAAW5Z,EAAO,SAAUjxB,EAAQ0Q,MAAM,EAAG,IAC7Cm6B,GAAW5Z,EAAO,QAASjxB,EAAQ0Q,MAAM,EAAG,IAC5Cm6B,GAAW5Z,EAAO,YAAajxB,EAAQ0Q,MAAM,EAAG,IAChDm6B,GAAW5Z,EAAO,YAAajxB,EAAQ0Q,MAAM,EAAG,SAYvCu6B,CAASD,EAATC,CAAmB,UCxClC,IAAIC,GAAM,EAiBV,SAAe9e,IAAU,EACtBrX,EAAQo2B,IACRC,EAAaC,MAGd,MAAMC,EAAa,GAAU,GAAIF,GAC3BnmC,EAAQ,GAAS,GAAI,GAAM8P,EAAQ/F,GAAI,QACvCu8B,EAAgB,GAAMH,EAAanmC,GACnC1C,EAAW,IAAI2J,IAAMA,GAAGq/B,GAExBn8B,EAAM,IACTye,IAAS,CAAG/gB,GAAIo+B,KAAOrd,OAAM2d,WAAW,KACzCF,EAAYv2B,GAGd,MAAO,CACLsd,GAAKC,GAAYT,KAAjBQ,CACEwJ,GAAO,CAAE52B,SAAT42B,CAAkB,CAChBnH,OAAQ2W,MAEVrQ,GAAQ,CAAEhL,SAAU1C,GAAM,OAAQ/qB,YAAlCy4B,CAA8C,CAC5C/K,MAAOkb,OAIX,CAAE/7B,WCzCOq8B,GAAY,EAAGxmC,WAAYmnB,IAAU,EAAE6O,EAAYC,IAAqBC,EAAcC,IAAiBsQ,EAAOC,MACvH,MAAMpT,EAAWpL,GAAMmF,GAAYpB,QAAS5I,GAAM,CAAEuJ,KAAM,EAAG2I,OAAQ,QAAW,GAAc,IAAIoR,GAAMA,EAAK,CAAE/Y,gBAAiB7yB,GAAQE,SAAY,MAAM+E,KACpJ4mC,EAAc5e,GAAS,QAATA,CAAkB3E,GAAM,CAAEqN,QAAS,EAAGzC,MAAO,UAAWC,OAAQ,UAAWqH,OAAQ,IAAKlxB,OAAQ,YAAegpB,GAAYpB,QAASya,EAAY,GAAM,UAAW,IAAI3c,GAAOA,EAAIvnB,OAAOqkC,WAAWniB,GAAK,CAAEqZ,KAAM,aAAerT,GAAa,IAAImc,IAAW,CAAGA,UAASA,GAAiB,QAAS7mC,IAASi2B,EAAkBxB,IAAgB0B,EAAcxB,KACvWmS,EAAiB/kB,GAAE,GAAc,IAAIvZ,GAAUA,EAAS,CAAE8tB,YAAav7B,GAAQC,SAAY,MAAM8b,GAAW,CAACkf,EAAYE,MAAkB7S,GAAM,CAAE6I,SAAU,WAAY+B,MAAO,OAAQC,OAAQ,OAAQV,OAAQ,aAAazyB,GAAQE,aAC3O,MAAO,CACHitB,GAAM4e,EAAN5e,CAAsBoL,IAAYsT,KAClC,CAAEH,aCHJM,GAAWhlB,GACfsL,GAAYX,QACZrJ,GAAM,CAAEyS,WAAY,YCAT,GAAS9N,GAAS,QAATA,CACpBqF,GAAYN,IACZ1J,GAAM,CAAEhf,OAAQ,UAAWyxB,WAAY,SAAU5E,MAAOn2B,GAAQM,cCG5D,GAAS,CAACg9B,EAAer4B,IAAmCotB,GAAKC,GAAYZ,aAAjBW,CAChE/E,GAAMhF,GAAM,CAAE6N,MAAOn2B,GAAQM,aAA7BgtB,CAA4CgQ,GAC5ChQ,GAAMroB,IAGKgnC,GAAwB7f,IAAU,EAC5C2S,EAAe+B,IACfoL,EAAeC,IACftmC,EAAQumC,MAGT,MAAMC,EAAY,IAGZC,EAAeC,KAAKC,eAAeC,OACnCC,EAAuB19B,GAAI,MAC3B29B,EAAmB,GAAMD,EAAsBR,GAErD,IAAI1lC,EAAI,EACR,MAAM6gC,EAAQ/Z,GAAMhF,GAAM,CAAEsK,QAAS,cAE/Bga,EAAcnnC,MATA,KASmB+U,KAAK,MAAM2F,KAAI,IACpD,SAASlR,KAAK49B,SAASC,SAAS,IAAItV,UAAU,MAAM8U,IAAe9lC,OAI/DumC,EAAoBlnC,GAAmBiW,GAC3C,IAAS,CAAC3N,EAAO6+B,KACf,MAAMC,EAAYD,EAAgBX,EAC5Ba,EAAUD,EAAYZ,EAEtBvN,EAtCZ,SAA2BqO,EAAiBtnC,GAC1C,MAAMunC,EAAkBvnC,EAAOu7B,oBAC/B,OAAO+L,EAAMtnC,QAAOiH,GAClBA,EAAG/G,QAAQqnC,IAAoB,IAkCPC,CAAkBT,EAAa/mC,GACxB6K,MAAMu8B,EAAWC,GAAS/sB,KAAIrT,GAClDu6B,EAAMv6B,KAGf,OAAOwD,GAAGnC,EAAO,CAAE2wB,SAAQD,SAAUwN,MACpCM,EAAkB5N,IAKjBuO,EAAa,GAAU,GAAIznC,GAC3B0nC,EAAsB,GAAS,IAAKD,GAE1C,MAAO,CACL/a,GAAQD,GAAYV,WAApBW,CACEjF,GAAM,+KACN+E,GAAKC,GAAYV,WAAjBS,CAEE,GAAO,SAAU,IAAIjmB,GAAK+d,OAAO/d,IAAI2yB,IACrC,GAAO,aAAc5U,OAAOkiB,IAC5B,GAAO,eAAgBliB,OAvCT,OA2ChBkI,GAAKC,GAAYV,WAAjBS,CACEqK,GAAW,CACTY,MAAO,SACPr4B,MAAOyR,KACPkmB,KAAM,gGACNE,YAAaxK,GAAYT,MAJ3B6K,CAKG,CACDhI,OAAQ0X,MAEV1P,GAAW,CACTY,MAAO,qBACPr4B,MAAOynC,EACP9P,KAAM,8EACNE,YAAaxK,GAAYT,MAJ3B6K,CAKG,CACDhI,OAAQyX,EACN,GAAI3J,YAKV1P,GAEAH,GAAMrK,GAAM,CAAEsK,QAAS,IAAvBD,CACEvS,GACE,IAAI7T,GACFixB,GAAe,CACbC,WAAYsP,EAAiBxgC,GAC7BmxB,aAAcpV,GAAM,CAAEsK,QAAS,MAAO4a,UAAW,WAFnDhQ,CAGG,CACDuB,cAAe+B,OAEjByM,UC3EZ,KAAkBE,YAAsBrhB,IAAU,EAC/CshB,EAAcC,MAGf,MAAMC,EAAmBH,EAAO14B,OAAO,CAAE/J,SAAU,gBAAiBsjB,MAAO,gBACrEuf,EAAeJ,EAAO14B,OAAO,CAAE/J,SAAU,WAAYsjB,MAAO,aAC5Dwf,EAAqBL,EAAO14B,OAAO,CAAE/J,SAAU,iBAAkBsjB,MAAO,mBACxEyf,EAAqBN,EAAO14B,OAAO,CAAE/J,SAAU,iBAAkBsjB,MAAO,mBACxE0f,EAAkBP,EAAO14B,OAAO,CAAE/J,SAAU,aAAcsjB,MAAO,eACjE2f,EAAaR,EAAO14B,OAAO,CAAE/J,SAAU,QAASsjB,MAAO,UAEvD4f,EAAeT,EAAO14B,OAAO,CAAE/J,SAAU,UAAWsjB,MAAO,YAC3D6f,EAAaV,EAAO14B,OAAO,CAAE/J,SAAU,QAASsjB,MAAO,UACvD8f,EAAkBX,EAAO14B,OAAO,CAAE/J,SAAU,cAAesjB,MAAO,gBAKxE,MAAO,CAEL+D,GAAKC,GAAYV,WAAYU,GAAYT,KAAMvJ,GAAM,CAAE4a,aAAc,WAArE7Q,CAEEmD,GACEjD,GAAQD,GAAYX,QAASrJ,GAAM,CAAE8I,IAAK,OAAQ8R,aAAc,sBAAhE3Q,CAEEA,GAAQD,GAAYV,WAAYtJ,GAAM,CAAEshB,WAAY,WAApDrX,CACEA,GAAQD,GAAYd,YAApBe,CACEjF,GAAMhF,GAAM,CAAE6N,MAAOn2B,GAAQM,WAAY25B,SAAU,QAAnD3M,CAA6D,SAC7D0I,GAAM,CAAEhG,SAAU1C,GAAM,SAAUyC,IAAK,oBAAqBR,MAAO4e,GAAnEnY,CAAiF,CAC/E/F,MAAO0d,MAET3X,GAAM,CAAEhG,SAAU1C,GAAM,eAAgByC,IAAK,0BAA2BR,MAAO6e,GAA/EpY,CAAkG,CAChG/F,MAAO0d,MAET3X,GAAM,CAAEhG,SAAU1C,GAAM,iBAAkByC,IAAK,4BAA6BR,MAAOqe,GAAnF5X,CAAuG,CACrG/F,MAAO0d,MAET3X,GAAM,CAAEhG,SAAU1C,GAAM,kBAAmByC,IAAK,6BAA8BR,MAAOue,GAArF9X,CAA2G,CACzG/F,MAAO0d,MAET3X,GAAM,CAAEhG,SAAU1C,GAAM,YAAayC,IAAK,uBAAwBR,MAAOse,GAAzE7X,CAAyF,CACvF/F,MAAO0d,MAET3X,GAAM,CAAEhG,SAAU1C,GAAM,cAAeyC,IAAK,yBAA0BR,MAAOye,GAA7EhY,CAAgG,CAC9F/F,MAAO0d,OAIXpb,GAAQD,GAAYd,YAApBe,CACEjF,GAAMhF,GAAM,CAAE6N,MAAOn2B,GAAQM,WAAY25B,SAAU,QAAnD3M,CAA6D,iBAI7D0I,GAAM,CAAEhG,SAAU1C,GAAM,kBAAmByC,IAAK,6BAA8BR,MAAOwe,GAArF/X,CAA2G,CACzG/F,MAAO0d,MAET3X,GAAM,CAAEhG,SAAU1C,GAAM,WAAYyC,IAAK,sBAAuBR,MAAO2e,GAAvElY,CAAuF,CACrF/F,MAAO0d,MAET3X,GAAM,CAAEhG,SAAU1C,GAAM,SAAUyC,IAAK,oBAAqBR,MAAO0e,GAAnEjY,CAAiF,CAC/E/F,MAAO0d,UAQjBxgB,KAEAoF,GAAQjK,GAAM,CAAEuJ,KAAM,IAAtBU,CAEEtqB,GAAMkmC,EAANlmC,CACEomC,KACE9b,GACEwY,GAAO,KAFXsD,CAIE,KAGJpmC,GAAMmmC,EAANnmC,CACEomC,KACE9b,GACEqP,GAAmB,KAFvByM,CAIE,KAIJpmC,GAAM2lC,EAAN3lC,CACEomC,KACEC,GAAU,IADZD,CAEE,KAWJpmC,GAAMimC,EAANjmC,CACEomC,KACEvF,GAAgB,IADlBuF,CAEE,KAGJpmC,GAAMgmC,EAANhmC,CACEomC,KACE9b,GACE2X,GAAc,KAFlBmE,CAIE,KAGJpmC,GAAM+lC,EAAN/lC,CACEomC,KACEE,GAAY,IADdF,CAEE,KAGJpmC,GAAM8lC,EAAN9lC,CACEomC,KACEpC,GAAsB,IADxBoC,CAEE,KAGJpmC,GAAM6lC,EAAN7lC,CACEomC,KACEG,GAAe,IADjBH,CAEE,KAGJpmC,GAAM4lC,EAAN5lC,CACEomC,MFnJMI,EEqJFhpC,MAAM,KAAK+U,KAAK,MAAM2F,KAAI,CAACjU,EAAG1F,KLxJnC,CACLsG,GAAIo+B,KACJrd,KKsJyD,MAAQrnB,EAAI,GLrJrEglC,WAAW,MGAmBpf,IAAU,EACzCsiB,EAASC,IACTC,EAAmBC,MAGpB,MACMC,EAAoB,GAAmBF,GADd,GAG/B,MAAO,CACLrc,GAAQD,GAAYV,WAApBW,CAEEF,GAAKC,GAAYV,WAAjBS,CACE,GAAOC,GAAYX,QAAnB,CACE8Z,GAAU,CAAExmC,MAAO6pC,GAAnBrD,CAAwC,CACtCC,MAAOmD,MAETvhB,GAAM,qBAERyhB,GAAY,CACV3/B,IAAKu/B,OAITpc,GAAQD,GAAYZ,aAApBa,CACE,IAAOyc,IAEL,MAAOtiC,EAAQs5B,GAAgB9Z,MACxBsf,EAAWyD,GAAmB/iB,KAE/BgjB,EAAgB,GAAmB1D,EAAWwD,EAAKxD,WAEzD,OAAO,GAAM9+B,EAAN,CACL0T,GACE,IACE,CAAC+uB,EAAeC,IAAgBD,IAAkBC,EDhClE,GAAkBJ,OAAMxD,eAA0Bpf,IAAU,EACzD1f,EAAQs5B,IACRqJ,EAAUC,IACVzhB,EAAM0hB,KAGA,CACLld,GAAK2Z,GAAL3Z,CACEoZ,GAAU,CAAExmC,MAAOumC,GAAnBC,CAAgC,CAC9BC,MAAO4D,MAETzT,GAAO,CAAE52B,MAAO+J,GAAIggC,EAAKnhB,OAAzBgO,CAAkC,CAChCnH,OAAQ6a,MAEV9T,GAAU,CACRxL,MAAO+V,OAIX,CAAEnY,OAAMnhB,SAAQ2iC,eCcAG,CAAU,CAAER,OAAMxD,UAAW,GAAK,EAAG0D,IAArCM,CAAuD,CACvD9iC,OAAQs5B,IACRqJ,SAAUJ,MAEVv4B,MACJo4B,EACAI,OAKLnzB,GAAW,CAAC2yB,KAAYD,EAAMtuB,IAAInR,cEwG/B,IAHJq/B,CAIE,OAQR,CACEX,iBFhKN,IAAgBe,KGdhB,MAAMgB,GACF,YAAYC,EAAkBC,GAC1BjtC,KAAKgtC,iBAAmBA,EACxBhtC,KAAKitC,QAAUA,EAEnB,IAAIx6B,EAAM3H,GAEN,MAAMoiC,EAAkBltC,KAAKgtC,iBAAiBG,KAAKntC,KAAKitC,QAAhCjtC,EAA0C6lC,IAC9DpzB,EAAKqB,MAAMhJ,EAAUS,cAAes6B,MAExC,OAAIqH,aAA2B/oB,SACpB,EAAY+oB,EAAiB,MAEpCA,GAAmB,YAAaA,IAAoBA,aAAyD,EAASA,EAAgB/hC,mBAAoBgZ,SACnJ+oB,EAEJ,KAGR,MCjBDE,GAAYC,MAAOtiB,EAAOvM,WAAgB8uB,MAAMviB,EAAOvM,IAAO+uB,OAE9DC,GAAoB,IAAIttC,IACxButC,GAAoB,IAAIvtC,IAqCvBmtC,eAAeK,GAA4BrwC,EAAMswC,EAAU,UAC9D,MAAMC,EAAU,gCAAgCvwC,KAAQswC,iBAClDE,QAtCVR,eAAwB/rC,EAAKwsC,GACzB,MAAMC,EAAoBN,GAAkB3sC,IAAIQ,GAChD,GAAIysC,EACA,OAAOA,EACX,MAAMC,EAAatxC,aAAaC,QAAQ2E,GACxC,GAAI0sC,EAAY,CACZ,MAAMC,EAAa/wC,KAAKoxB,MAAM0f,GAE9B,OADAP,GAAkB1tC,IAAIuB,EAAK2sC,GACpBA,EAEX,MAAMC,EAAeV,GAAkB1sC,IAAIQ,GAC3C,GAAI4sC,EACA,OAAOA,EACX,MAAMC,EAyB8Bd,WAChC,IAAI9jB,EAAIue,EACR,MAAMsG,QAAgBhB,GAAUQ,GAC1BS,EAAiG,QAAjF9kB,EAAK6kB,aAAyC,EAASA,EAAQC,oBAAiC,IAAP9kB,EAAgBA,EAAK,GAC9H+kB,QAtBPjB,eAAoChwC,EAAMswC,EAAU,UACvD,MAAMY,QAxBQ,EAACC,EAAYb,IAAYP,GAAU,4CAA4CoB,KAAcb,UAwBvFc,CAAUpxC,EAAMswC,IAAUW,MAC9C,IAAII,EAAWH,EAAKprC,QAAOwrC,GAAY,WAAWja,KAAKia,EAAStxC,QAKhE,GAJwB,IAApBqxC,EAAS1qC,SAET0qC,EAAWH,EAAKprC,QAAOwrC,GAAY,QAAQja,KAAKia,EAAStxC,SAErC,IAApBqxC,EAAS1qC,OACT,MAAM,IAAIiO,MAAM,4BAEpB,MAAM28B,EAAaF,EAASjxB,KAAI4vB,MAAOwB,IACnC,MAAMC,QAAgBxB,MAAM,gCAAgCjwC,KAAQswC,IAAUkB,EAAKxxC,QAAQ+R,MAAKrF,GAAKA,EAAEohB,SACvG,MAAO,IAAK0jB,EAAMC,QAASA,EAAQtuC,QAAQ,eAAgB,mBAE/D,OAAOS,QAAQ8tC,IAAIH,GAQKI,CAAqB3xC,EAAMswC,GACzCsB,EAAqC,QAA1BnH,EAAKsG,EAAQa,eAA4B,IAAPnH,EAAgBA,EAAKsG,EAAQc,MAChF,MAAO,CAAEZ,QAAOD,eAAchxC,OAAMswC,UAASsB,YA/BnCnB,GACdN,GAAkBztC,IAAIuB,EAAK6sC,GAC3B,MAAMgB,QAAahB,EAGnB,OAFAV,GAAkB1tC,IAAIuB,EAAK6tC,GAC3BzyC,aAAaO,QAAQqE,EAAKpE,KAAKC,UAAUgyC,IAClCA,EAoBWC,CAASxB,GAQrByB,EAAcntC,OAAOohB,QAAQuqB,EAAIQ,cAAc5wB,KAAI,EAAE6xB,EAAS3B,KAAaD,GAA4B4B,EAAS3B,EAAQntC,QAAQ,QAAS,OACzI6tC,QAAqBptC,QAAQ8tC,IAAIM,GACvC,MAAO,IAAKxB,EAAKQ,gBAmBd,SAASkB,GAAkB1B,EAAK2B,IAjBhC,SAAqB3B,EAAK2B,GAC7B,MAAMC,EAAcD,EAAaE,IAAIphB,MAAM,4BAA4Buf,EAAIxwC,qBAE3E,IADcmyC,EAAaG,OAAOC,SAASH,GAC/B,CACR,MAAMpB,EAAensC,OAAOohB,QAAQuqB,EAAIQ,cAAczkC,QAAO,CAAEimC,GAAMvuC,EAAKiiB,MAAS,IAAMssB,EAAK,CAACvuC,EAAId,QAAQ,KAAM,QAAS+iB,KAAS,IAC7HusB,EAAiB5yC,KAAKC,UAAU,CAClCE,KAAMwwC,EAAIxwC,KACVswC,QAASE,EAAIF,QACbsB,QAASpB,EAAIoB,QACbZ,iBAEJmB,EAAaG,OAAOI,YAAYD,EAAgB,aAAcL,GAC9D5B,EAAIS,MAAM5sC,SAAQmtC,IACdW,EAAaG,OAAOI,YAAYlB,EAAKC,QAAS,aAAcU,EAAaE,IAAIphB,MAAM,4BAA4Buf,EAAIxwC,OAAOwxC,EAAKxxC,aAKvI2yC,CAAYnC,EAAK2B,GACjB3B,EAAIQ,aAAa3sC,SAAQmsC,IACrB0B,GAAkB1B,EAAK2B,MAG/B,MAAMS,GAAmB,eACnBC,GAA4B5rB,GAAE,KAAyB,IAAO6rB,GAAqBA,EAAkB,GAAGC,kBAAoB,IAAI,GAAK,IAM3IjyC,OAAOkyC,kBAAoB,CACvBC,aAAc,WACV,MAAO,qCAAqCC,mBAAmB,iPAqBvE,IAAIC,GAAc,KACXnD,eAAeoD,KAClB,OAAID,KAEJA,GAlBGnD,iBAEH,MAAMmD,EAAcE,OAAiC,sHAC/CC,EAAiCjD,GAA4B,cAAe,SAE5EkD,EAAe,IAAIC,SAAS,UAAW,gHACvCrB,QAAqBgB,EACrBM,QAAoBF,EACpB/C,QAAY8C,EAIlB,OAHApB,GAAkB1B,EAAK2B,GAEvBvxC,SAAS8yC,MAAMrkC,IAAIokC,GACZ,CAAEtB,eAAc3B,OAMTmD,GACPR,IAEX,IAAIS,GAAoB,EACjB,MAAMC,GAAgB,EAAGC,OAAM9d,SAAQ+d,WAAU/H,iBAAiB,CAAEla,KAAM,MAAUzF,IAAU,EAAEsI,EAAQwH,MAC3G,MAAM6X,EAAalxB,GAAYswB,MACzBa,EAAU,IAAI,EAAG9B,mBACnB,MAAM+B,EAAgBtzC,SAASyB,cAAc,OAC7C8vC,EAAagC,UAAUC,WAAWC,mBAAmBC,mBAAmB,IACjEnC,EAAagC,UAAUC,WAAWC,mBAAmBE,qBACxD9oC,OAAQ0mC,EAAagC,UAAUC,WAAWI,WAAWC,OACrDC,iBAAkBvC,EAAagC,UAAUC,WAAWO,qBAAqBC,SAE7E,MAAMC,EAAQ1C,EAAaG,OAAOI,YAAYoB,EAAK3wC,QAAQ,eAAgB,eAAgB,aAAcgvC,EAAaE,IAAIphB,MAAM,qBAAqB2iB,UAC/IloB,EAAM,CACRwF,MAAO,UACP,gCAAgC,EAChC4jB,QAAS,CAAEC,SAAS,GACpBC,mBAAoB,EACpBC,YAAa,MACbC,aAAa,EACbC,SAAS,EACTC,qBAAsB,GACtBC,oBAAqB,EACrBC,MAAO,CAAElnC,MAAO,GAChBykB,QAAS,CAAExB,IAAK,GAAIC,OAAQ,IAC5BikB,oBAAqB,OACrBC,oBAAoB,EACpBC,sBAAsB,EACtBC,iBAAiB,EACjBb,WACG7e,GAEDttB,EAAWypC,EAAaG,OAAOt9B,OAAOk/B,EAAexoB,EAAKqoB,GAWhErrC,EAASitC,wBAVY,KACjB,GAAIjqB,EAAIgqB,gBAAiB,CACrB,MAAME,EAAgBltC,EAASmtC,mBAC/B3B,EAAc3rB,MAAMyK,UAAY,GAAG4iB,MACnCltC,EAASotC,OAAO,CAAE3iB,MAAO+gB,EAAc6B,YAAa3iB,OAAQwiB,IAC5DltC,EAASotC,cAGTptC,EAASotC,YAGjB,IAAIE,EAAiB,GACrB,MAAMC,EAAkBhvB,GAAE,IAAa,IAC5BnE,GAAYqvB,EAAagC,UAAUC,WAAW8B,yBACrD,IAAY/xB,IACZ/b,QAAQwF,MAAMuW,GACd6xB,GAAkB,IACXj6B,GAAKxL,GAAGylC,EAAgBC,OALXhvB,CAMpBtQ,MACEs9B,EAAU5mB,GAAmB6mB,EAAnB7mB,CAAkCpG,GAAEsL,GAAYJ,OAAQ5J,GAAM,IAAKyjB,IAAmB7P,EAEtG0W,GAA2B,IAAI7C,MAAOmG,IAClC,MAAM/rC,EAAO+rC,EAAS,GAAGzuC,OACnB0uC,EAAuB,GAAM,GDvJnB,EAACC,EAAKzG,EAAU,OAAS,IAAIF,GAAmB2G,EAAKzG,GCuJ9B0G,CAAazB,EAAM0B,mBAAoB1B,IACxE2B,EAAgB,IAAI,IAAM3B,EAAM4B,YAAYL,GAC5CM,EAAqB,GAAMznC,GAAI4lC,EAAM4B,YAAaD,GAClDG,EAA0B,IAAgB,CAACjoB,EAAMD,IAASC,EAAKvrB,QAAQyvC,GAAkB,MAAQnkB,EAAKtrB,QAAQyvC,GAAkB,KAAK8D,GAS3I,OARuB9zB,GAAc,IAAQotB,MAAO4G,EAAaC,KAC7D,MAAMC,QAAeD,EAAUhC,EAAMkC,KAC/BC,EAA2BF,EAAOG,uBAAuBpC,EAAMkC,IAAIhK,YACnEmK,EAA4BJ,EAAOK,wBAAwBtC,EAAMkC,IAAIhK,YACrEqK,QAA4BJ,EAC5BK,QAA6BH,EACnC,MAAO,CAAE9sC,OAAM1B,WAAUypC,eAAc2E,SAAQjC,QAAO+B,cAAaQ,sBAAqBC,0BACzFV,EAAyBV,OAE5BrzB,GAAe7G,GAAM,KAjBTsR,GAmBhB,OAAO,GAAM4mB,EADa,CAAEtmC,IAAK,IAAMjF,MAExCsrC,GACH,MAAO,CACH3zB,GAAa,GAAU+M,GAAM7E,GAAMyjB,GAAZ5e,GAAgC6mB,IACvD,CAAEtf,cClLV,KAAkBmf,OAAO,GAAIwD,YAAW,KAAoBjrB,IAAU,EACnEsI,EAAQwH,MAGT,MAAMob,EAAUjlB,GAAK/J,GAAM,CAAE4K,MAAO,MAAOL,gBAAiB,kBAA5CR,CACdA,GACEpE,GACE,IAAI,EAAGkpB,sBAAqBC,2BACnB,CAAEvkB,gBAAiBskB,EAAoBzwC,QAAU0wC,EAAqB1wC,OAAS1G,GAAQQ,SAAWR,GAAQM,cAChHo0B,IAELzG,GACE,IACEhZ,IAAK,CAAGke,OAAQle,EAAI,OACpBmL,GACE,IAAIm3B,GACKhjB,GAAO,CAAEJ,UAAW,IAAKC,QAAS,GAAIC,UAAW,IAAM,EAAGrlB,GAAI,OACpE0lB,MAITpC,GAAYT,KACZvJ,GAAM,CAAEuK,gBAAiB7yB,GAAQM,aAjBnC+xB,IAqBImlB,EAAwB,GAAqC,GAA1B3D,EAAK1P,MAAM,MAAMz9B,OAG1D,MAAO,CACL6rB,GAAQD,GAAYT,KAApBU,CACEqhB,GAAc,CAAEC,OAAM9d,OAAQ,CAAEshB,WAAU5B,iBAAiB,EAAMxkB,MAAsB,UAAfA,GAAMlxB,KAAmB,WAAY,WAAagsC,eAAgB,CAAE5Y,OAAQqkB,EAAwB,OAA5K5D,CAAsL,CACpLlf,OAAQwH,MAEV7J,GAAK/J,GAAM,CAAEuK,gBAAiB7yB,GAAQG,WAAY4yB,UAAW,SAA7DV,CACEilB,EAEApqB,GAAQ,cAARA,CAAuB5E,GAAM,CAAEsK,QAAS,cAAxC1F,CACE9M,GACE4G,GACE,GAAS,KACT,IAAI+oB,OAAS6E,QAAOiC,SAAQM,sBAAqBC,2BAE/C,GAAID,EAAoBzwC,QAAU0wC,EAAqB1wC,OACrD,OAAO,KAGT,MAEM+wC,SAFqBZ,EAAOa,cAAc9C,EAAMkC,IAAIhK,aAChC6K,YAAY,GAAG9pB,KACjB3qB,QAAQ,iBAAkB,6BAE5C00C,EAAkBC,IAAIC,gBAAgB,IAAIC,KAAK,CAACN,GAAa,CAAEzU,KAAM,qBAK3E,aAJuBoQ,OAAgCwE,IAEzBI,SAAWthC,QAI3CiM,GACA,IAAOxY,GAAQA,IAAS,OACxB,GAAUmjB,GAAMhF,GAAM,CAAE6N,MAAOn2B,GAAQM,WAAY25B,SAAU,QAAnD3M,CAA6D,kCArBzEtG,CAsBE0N,OAMV,CAAEA,cCjEN,KAAkBujB,iBAAyB7rB,IAAU,EAElDshB,EAAcC,KAGR,CAELpb,GAAQD,GAAYV,WAAYU,GAAYT,KAAMvJ,GAAM,CAAEyS,WAAY,WAAtExI,CAEE8b,KACEzS,GAAO,4JAEPzO,GACEG,GAAM,yCACNL,GAAS,IAATA,CAAc3E,GAAM,CAAE6N,MAAOn2B,GAAQC,UAAY0pB,GAAK,CAAE0G,KAAM,yDAA9DpD,CACEK,GAAM,eAERA,GAAM,2JAGRA,GAAM,oJAEN4qB,GAAQ,CACNb,UAAU,EACVxD,KACV,+EAHQqE,CAMG,IAEH5qB,GAAM,uSAEN4qB,GAAQ,CACNb,UAAU,EACVxD,KACV,4YAHQqE,CAeG,IAEH5qB,GAAM,mGAGN4qB,GAAQ,CACNb,UAAU,EACVxD,KACV,gbAHQqE,CAgBG,IAEHA,GAAQ,CACNb,UAAU,EACVxD,KACV,i0CAHQqE,CAwCG,IArGL7J,CAuGE,QCjHR,KAAkB4J,iBAA4B7rB,IAAU,EACrD+rB,EAAaC,MAGd,MAAMC,EAAaJ,EAAYljC,OAAO,CAAE/J,SAAU,QAASsjB,MAAO,UAC5DgqB,EAAgBL,EAAYljC,OAAO,CAAE/J,SAAU,WAAYsjB,MAAO,aAElEwE,EAAaxF,GAAMhF,GAAM,CAAE6N,MAAOn2B,GAAQM,WAAYg7B,cAAe,SAAxDhO,CAAmE,KAEtF,MAAO,CACL+E,GAAKC,GAAYZ,aAAcpJ,GAAM,CAAEyS,WAAY,SAAUmI,aAAc,WAA3E7Q,CAME2D,GAAM,CAAEhG,SAAU1C,GAAM,qBAAuByC,IAAK,WAAYR,MAAO8oB,GAAvEriB,CAAqF,CACnF/F,MAAOmoB,MAETtlB,EACAkD,GAAM,CAAEhG,SAAU1C,GAAM,YAAayC,IAAK,oBAAqBR,MAAO+oB,GAAtEtiB,CAAuF,CACrF/F,MAAOmoB,MAETtlB,EAEA7F,GAAS,IAATA,CAAcvE,GAAY,SAAU,CAAElO,KAAMxa,GAAQC,UAAYqyB,GAAYR,YAAaxJ,GAAM,CAAEsK,QAAS,UAAYjJ,GAAK,CAAE0G,KAAM,oCAAnIpD,CACEgG,GAAM,CAAEjD,SAAUuD,GAASL,MAAO,GAAIE,QAAS,oBAMnD,CAAE+kB,mBC5BAI,GAAgBnuB,GAAmB,WAAYvpB,QAC/C23C,GAAkBxpC,GAAIrO,SAASsF,UAC/BwyC,GAAqB,GAAMD,GAAiBD,IAC5CG,GAAiB,IAAKzyC,GACnBA,GACNwyC,K1DZI,SAAoB1iB,EAAS,IAChC,MAAM4iB,EAAiB,CACnBrwB,MAAO,CACH5B,UAAW,IACXD,WAAY,IAAI3kB,cAChB82C,mBAAoB,IAAI92C,cACxB0kB,MAAO,IAEX6G,SAAU1sB,SAASkB,KACnB2L,UNmYuC,IAAIe,EAAcqE,IAAmB,IAAI5C,MMlY7E+lB,GAEPp1B,SAAS0J,mBAAqB,IACvB1J,SAAS0J,mBACZsuC,EAAerwB,MAAM7B,WACrBkyB,EAAerwB,MAAMswB,oBAEzB,MAAMvrB,EAAW,CACb5F,QAASkxB,EAAetrB,SACxBvD,UAAW,GACX3W,WAAY,IAAI,GAChB+V,cAAe,GACflB,iBAAiB,EACjByB,mBAAoB,GACpBf,YAAa,IAEjB,OAAQmwB,IACJ,MAAM5jC,EAAI,IAAImS,GAAkBuxB,EAAgBtrB,EAAU,EAAG,CAAC,IAC9D,IAAIljB,IAAQ,IAAMA,EAAMmd,gBAAiB,KAAMuxB,GAC1CnrC,IAAIuH,EAAG0jC,EAAenrC,Y2D/BnCsrC,CAAW,CAAEzrB,SAAU1sB,SAASkB,MAAhCi3C,CDqBA,GAAkBC,eAAyB3sB,IAAU,EAClDshB,EAAcC,MAGf,MAAMqL,EAAU,GAAMN,GAAgB,GAAUhL,IAC1Crf,EAAkB,IAAI,KAC1B,MAAM4qB,EAAgB,MAEhBC,EADcjzC,SAASoqB,KAAKntB,QAAQ+1C,EAAe,IAAI9U,MAAMxjC,SAASw4C,QAAQj2C,QAAQ+1C,EAAe,KAAK,GACtF9U,MAAM,KAEhC,OADA+U,EAAM3oC,OAAO,EAAG,EAAGwoC,GACZG,IACNF,GAEGI,EAAY,GAAc,CAAEpuC,SAAU+tC,EAAWzqB,MAAO,QAASD,oBACjEgrB,EAAaD,EAAUrkC,OAAO,CAAE/J,SAAU,IAAKsjB,MAAO,UACtD+pB,EAAagB,EAAWtkC,OAAO,CAAE/J,SAAU,QAASsjB,MAAO,UAC3DgqB,EAAgBe,EAAWtkC,OAAO,CAAE/J,SAAU,WAAYsjB,MAAO,aAEvE,MAAO,CACLnB,GAAMkO,GAAYf,KAAMhS,GAAM,CAAEyQ,gBAAiB,qCAAqC/4B,GAAQI,iBAAiBJ,GAAQG,gBAAvHgtB,CACE,GAAaisB,EAAb,CACE/mB,GAAKC,GAAYT,KAAMS,GAAYV,WAAYtJ,GAAM,CAAEyK,UAAW,OAAQumB,aAAc,SAAUve,WAAY,SAAUmI,aAAc,SAAUqW,UAAW,SAAU3mB,QAAS,WAA9KP,CACEmD,GACEjD,GAAQjK,GAAM,CAAEyS,WAAY,SAAUye,SAAU,UAAYlnB,GAAYX,QAAxEY,CACEzC,GAAQ,CAAEE,SAAUiD,GAAM,CAAEjD,SAAU1H,GAAM,CAAE9N,KAAMxa,GAAQE,SAAWozB,IAAaJ,MAAO,IAAKC,OAAQ,IAAKC,QAAS,eAAiBrD,IAAK,IAAKR,MAAO6pB,GAAxJtpB,CAAqK,CACnKG,MAAO0d,MAETrgB,GAAM,6DACNA,GAAM,sGAENmsB,GAAU,CAAExB,YAAaoB,GAAzBI,CAAuC,CACrCtB,YAAaxK,UAOvB,GAAgB0L,EAAhB,CACE9mB,GAAQD,GAAYV,WAAYtJ,GAAM,CAAEkxB,SAAU,QAAStmB,MAAO,OAAQsH,OAAQ,SAAUI,cAAe,SAA3GrI,CACEF,GAAK/J,GAAM,CAAE4a,aAAc,gBAAiBtQ,QAAS,WAArDP,CACEvC,GAAQ,CAAEE,SAAUiD,GAAM,CAAEjD,SAAUsD,GAAY9Y,KAAMxa,GAAQE,QAASgzB,MAAO,IAAKC,OAAQ,IAAKC,QAAS,eAAiBrD,IAAK,IAAKR,MAAO6pB,GAA7ItpB,CAA0J,CACxJG,MAAO0d,MAET8L,GAAU,CAAExB,YAAaoB,GAAzBI,CAAuC,CACrCtB,YAAaxK,OAGjB,GAAa0K,EAAb,CACEqB,GAAO,CAAEzB,YAAamB,GAAtBM,CAAmC,KAErC,GAAgBpB,EAAhB,CACEqB,GAAU,CAAElM,OAAQ6K,GAApBqB,CAAqC,CACnCjM,aAAcC,UE3EJiM,EFkFV,CAAC,KAAO,MElFsBxtB,IAAU,EACnDytB,EAAmBC,MAGpB,MAAM5+B,EAAUtb,KAAKoxB,MAAM5xB,aAAaC,QAAQF,KAE1C46C,EAAW/yB,GACfsB,GAAM,CAAE6I,SAAU,WAAYI,KAAM,OAAQH,IAAK,OAAQ9nB,OAAQ,YACjEof,GAAY,SAAU,CAAElO,KAAMxa,GAAQC,UACtC65C,EACE,GAAM,SACN,IAAI,KACF,MACME,GADgBJ,EAAOz5B,KAAI1P,GAAKA,EAAE1Q,OACXgG,QAAQmV,EAAQnb,MAAQ,GAAK65C,EAAOlzC,OAC3DuzC,EAAUL,EAAOI,IlDrBxB,SAAqBj6C,EAAMC,GAC9B,MAAMk6C,EAAW,CAAEn6C,OAAMC,WACzBZ,aAAaO,QAAQR,GAA4BS,KAAKC,UAAUq6C,IAChEt1C,OAAOu1C,OAAOlpB,GAAOipB,GACrB36C,KAAK0G,SAASm0C,SkDmBVC,CAAYJ,EAAQl6C,KAAMk6C,EAAQj6C,cAKxC,MAAO,CACL,GACE+5C,EACE9mB,GAAM,CACJjD,SAAUlD,GAAK,OAALA,CAAanD,GAAK,CAAEje,EAAG,0uCAAvBohB,MAGd+sB,QFsDuB,MElFN,IAACD,KDEtBU,CAAS,CAAEvB,UAAW,IAAtBuB,CAA4B,M","file":"main.6bbede70b38dcc5a9766.js","sourcesContent":["\nimport { dark, light } from \"./common/theme\"\n\n\nconst THEME_PALLETE_SELECTED_KEY = `!!THEME_PALLETE_SELECTED_KEY`\nconst selectedTheme = localStorage.getItem(THEME_PALLETE_SELECTED_KEY)\n\nif (selectedTheme === null) {\n  const darkModePreferance = self?.matchMedia('(prefers-color-scheme: dark)').matches\n  const preferance = darkModePreferance ? 0 : 1\n  const themePair = [dark, light]\n  const defaultTheme = themePair[preferance]\n\n  localStorage.setItem(THEME_PALLETE_SELECTED_KEY, JSON.stringify(defaultTheme))\n}\n\n\n","\nimport type { Theme } from \"@aelea/ui-components-theme\"\n\n\nexport const light: Theme = {\n  name: 'light',\n  pallete: {\n    primary: '#f00',\n\n    message: '#000000',\n\n    background: '#ffffff',\n    horizon: '#fff5de',\n    middleground: '#e0d0ab',\n    foreground: '#866724',\n\n    positive: '#0fd25e',\n    negative: '#b70636',\n    indeterminate: '#dccb07',\n  }\n}\nexport const dark: Theme = {\n  name: 'dark',\n  pallete: {\n    primary: '#ea607e',\n\n    message: '#ffffff',\n\n    background: '#151b1d',\n    horizon: '#1e282b',\n    middleground: '#2d363a',\n    foreground: '#a5b6bd',\n\n    positive: '#a6f5a6',\n    negative: '#de3434',\n    indeterminate: '#dccb07',\n  }\n}\n\n\n","(function () {\n  'use strict';\n\n  if ('adoptedStyleSheets' in document) { return; }\n\n  function _defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  function _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    return Constructor;\n  }\n\n  var hasShadyCss = 'ShadyCSS' in window && !window.ShadyCSS.nativeShadow;\n  var deferredStyleSheets = [];\n  var deferredDocumentStyleElements = [];\n  var deferredAdopters = [];\n  var adoptedSheetsRegistry = new WeakMap();\n  var sheetMetadataRegistry = new WeakMap();\n  var locationRegistry = new WeakMap();\n  var shadowRootMap = new WeakMap();\n  var observerRegistry = new WeakMap();\n  var appliedActionsCursorRegistry = new WeakMap();\n  var state = {\n    loaded: false\n  };\n  var frame = {\n    body: null,\n    CSSStyleSheet: null\n  };\n  var OldCSSStyleSheet = CSSStyleSheet;\n\n  var importPattern = /@import/;\n  function checkAndPrepare(sheets, container) {\n    var locationType = container === document ? 'Document' : 'ShadowRoot';\n    if (!Array.isArray(sheets)) {\n      throw new TypeError(\"Failed to set the 'adoptedStyleSheets' property on \" + locationType + \": Iterator getter is not callable.\");\n    }\n    if (!sheets.every(instanceOfStyleSheet)) {\n      throw new TypeError(\"Failed to set the 'adoptedStyleSheets' property on \" + locationType + \": Failed to convert value to 'CSSStyleSheet'\");\n    }\n    var uniqueSheets = sheets.filter(function (value, index) {\n      return sheets.indexOf(value) === index;\n    });\n    adoptedSheetsRegistry.set(container, uniqueSheets);\n    return uniqueSheets;\n  }\n  function isDocumentLoading() {\n    return document.readyState === 'loading';\n  }\n  function getAdoptedStyleSheet(location) {\n    return adoptedSheetsRegistry.get(location.parentNode === document.documentElement ? document : location);\n  }\n  function rejectImports(contents) {\n    if (contents === void 0) {\n      contents = '';\n    }\n    var imports = contents.match(importPattern) || [];\n    var sheetContent = contents;\n    if (imports.length) {\n      console.warn('@import rules are not allowed here. See https://github.com/WICG/construct-stylesheets/issues/119#issuecomment-588352418');\n      imports.forEach(function (_import) {\n        sheetContent = sheetContent.replace(_import, '');\n      });\n    }\n    return sheetContent;\n  }\n\n  var cssStyleSheetMethods = ['addImport', 'addPageRule', 'addRule', 'deleteRule', 'insertRule', 'removeImport', 'removeRule'];\n  var illegalInvocation = 'Illegal invocation';\n  function updatePrototype(proto) {\n    proto.replace = function () {\n      return Promise.reject(new DOMException(\"Can't call replace on non-constructed CSSStyleSheets.\"));\n    };\n    proto.replaceSync = function () {\n      throw new DOMException(\"Failed to execute 'replaceSync' on 'CSSStyleSheet': Can't call replaceSync on non-constructed CSSStyleSheets.\");\n    };\n  }\n  function updateAdopters(sheet) {\n    var _sheetMetadataRegistr = sheetMetadataRegistry.get(sheet),\n        adopters = _sheetMetadataRegistr.adopters,\n        basicStyleElement = _sheetMetadataRegistr.basicStyleElement;\n    adopters.forEach(function (styleElement) {\n      styleElement.innerHTML = basicStyleElement.innerHTML;\n    });\n  }\n  var ConstructStyleSheet =\n  function () {\n    function ConstructStyleSheet() {\n      var basicStyleElement = document.createElement('style');\n      if (state.loaded) {\n        frame.body.appendChild(basicStyleElement);\n      } else {\n        document.head.appendChild(basicStyleElement);\n        basicStyleElement.disabled = true;\n        deferredStyleSheets.push(basicStyleElement);\n      }\n      sheetMetadataRegistry.set(this, {\n        adopters: new Map(),\n        actions: [],\n        basicStyleElement: basicStyleElement\n      });\n    }\n    var _proto = ConstructStyleSheet.prototype;\n    _proto.replace = function replace(contents) {\n      var sanitized = rejectImports(contents);\n      try {\n        if (!sheetMetadataRegistry.has(this)) {\n          throw new TypeError(illegalInvocation);\n        }\n        var _sheetMetadataRegistr2 = sheetMetadataRegistry.get(this),\n            basicStyleElement = _sheetMetadataRegistr2.basicStyleElement;\n        basicStyleElement.innerHTML = sanitized;\n        updateAdopters(this);\n        return Promise.resolve(this);\n      } catch (ex) {\n        return Promise.reject(ex);\n      }\n    };\n    _proto.replaceSync = function replaceSync(contents) {\n      var sanitized = rejectImports(contents);\n      if (!sheetMetadataRegistry.has(this)) {\n        throw new TypeError(illegalInvocation);\n      }\n      var _sheetMetadataRegistr3 = sheetMetadataRegistry.get(this),\n          basicStyleElement = _sheetMetadataRegistr3.basicStyleElement;\n      basicStyleElement.innerHTML = sanitized;\n      updateAdopters(this);\n      return this;\n    };\n    _createClass(ConstructStyleSheet, [{\n      key: \"cssRules\",\n      get: function get() {\n        if (!sheetMetadataRegistry.has(this)) {\n          throw new TypeError(illegalInvocation);\n        }\n        var _sheetMetadataRegistr4 = sheetMetadataRegistry.get(this),\n            basicStyleElement = _sheetMetadataRegistr4.basicStyleElement;\n        return basicStyleElement.sheet.cssRules;\n      }\n    }]);\n    return ConstructStyleSheet;\n  }();\n  cssStyleSheetMethods.forEach(function (method) {\n    ConstructStyleSheet.prototype[method] = function () {\n      if (!sheetMetadataRegistry.has(this)) {\n        throw new TypeError(illegalInvocation);\n      }\n      var args = arguments;\n      var _sheetMetadataRegistr5 = sheetMetadataRegistry.get(this),\n          adopters = _sheetMetadataRegistr5.adopters,\n          actions = _sheetMetadataRegistr5.actions,\n          basicStyleElement = _sheetMetadataRegistr5.basicStyleElement;\n      var result = basicStyleElement.sheet[method].apply(basicStyleElement.sheet, args);\n      adopters.forEach(function (styleElement) {\n        if (styleElement.sheet) {\n          styleElement.sheet[method].apply(styleElement.sheet, args);\n        }\n      });\n      actions.push([method, args]);\n      return result;\n    };\n  });\n  function instanceOfStyleSheet(instance) {\n    return instance && instance.constructor === ConstructStyleSheet || instance instanceof OldCSSStyleSheet || instance instanceof frame.CSSStyleSheet;\n  }\n  Object.defineProperty(ConstructStyleSheet, Symbol.hasInstance, {\n    configurable: true,\n    value: instanceOfStyleSheet\n  });\n\n  function adoptStyleSheets(location) {\n    var newStyles = document.createDocumentFragment();\n    var sheets = getAdoptedStyleSheet(location);\n    var observer = observerRegistry.get(location);\n    for (var i = 0, len = sheets.length; i < len; i++) {\n      var _sheetMetadataRegistr = sheetMetadataRegistry.get(sheets[i]),\n          adopters = _sheetMetadataRegistr.adopters,\n          basicStyleElement = _sheetMetadataRegistr.basicStyleElement;\n      var elementToAdopt = adopters.get(location);\n      if (elementToAdopt) {\n        observer.disconnect();\n        newStyles.appendChild(elementToAdopt);\n        if (!elementToAdopt.innerHTML || elementToAdopt.sheet && !elementToAdopt.sheet.cssText) {\n          elementToAdopt.innerHTML = basicStyleElement.innerHTML;\n        }\n        observer.observe();\n      } else {\n        elementToAdopt = document.createElement('style');\n        elementToAdopt.innerHTML = basicStyleElement.innerHTML;\n        locationRegistry.set(elementToAdopt, location);\n        appliedActionsCursorRegistry.set(elementToAdopt, 0);\n        adopters.set(location, elementToAdopt);\n        newStyles.appendChild(elementToAdopt);\n      }\n      if (location === document.head) {\n        deferredDocumentStyleElements.push(elementToAdopt);\n      }\n    }\n    location.insertBefore(newStyles, location.lastChild);\n    for (var _i = 0, _len = sheets.length; _i < _len; _i++) {\n      var _sheetMetadataRegistr2 = sheetMetadataRegistry.get(sheets[_i]),\n          _adopters = _sheetMetadataRegistr2.adopters,\n          actions = _sheetMetadataRegistr2.actions;\n      var adoptedStyleElement = _adopters.get(location);\n      var cursor = appliedActionsCursorRegistry.get(adoptedStyleElement);\n      if (actions.length > 0) {\n        for (var _i2 = cursor, _len2 = actions.length; _i2 < _len2; _i2++) {\n          var _actions$_i = actions[_i2],\n              key = _actions$_i[0],\n              args = _actions$_i[1];\n          adoptedStyleElement.sheet[key].apply(adoptedStyleElement.sheet, args);\n        }\n        appliedActionsCursorRegistry.set(adoptedStyleElement, actions.length - 1);\n      }\n    }\n  }\n  function removeExcludedStyleSheets(location, oldSheets) {\n    var sheets = getAdoptedStyleSheet(location);\n    for (var i = 0, len = oldSheets.length; i < len; i++) {\n      if (sheets.indexOf(oldSheets[i]) > -1) {\n        continue;\n      }\n      var _sheetMetadataRegistr3 = sheetMetadataRegistry.get(oldSheets[i]),\n          adopters = _sheetMetadataRegistr3.adopters;\n      var observer = observerRegistry.get(location);\n      var styleElement = adopters.get(location);\n      if (!styleElement) {\n        styleElement = adopters.get(document.head);\n      }\n      observer.disconnect();\n      styleElement.parentNode.removeChild(styleElement);\n      observer.observe();\n    }\n  }\n\n  function adoptAndRestoreStylesOnMutationCallback(mutations) {\n    if (!document) {\n      return;\n    }\n    for (var i = 0, len = mutations.length; i < len; i++) {\n      var _mutations$i = mutations[i],\n          addedNodes = _mutations$i.addedNodes,\n          removedNodes = _mutations$i.removedNodes;\n      for (var _i = 0, _len = removedNodes.length; _i < _len; _i++) {\n        var location = locationRegistry.get(removedNodes[_i]);\n        if (location) {\n          adoptStyleSheets(location);\n        }\n      }\n      if (!hasShadyCss) {\n        for (var _i2 = 0, _len2 = addedNodes.length; _i2 < _len2; _i2++) {\n          var iter = document.createNodeIterator(addedNodes[_i2], NodeFilter.SHOW_ELEMENT, function (node) {\n            var shadowRoot = shadowRootMap.get(node);\n            return shadowRoot && shadowRoot.adoptedStyleSheets.length > 0 ? NodeFilter.FILTER_ACCEPT : NodeFilter.FILTER_REJECT;\n          },\n          null, false);\n          var node = void 0;\n          while (node = iter.nextNode()) {\n            adoptStyleSheets(shadowRootMap.get(node));\n          }\n        }\n      }\n    }\n  }\n  function createObserver(location) {\n    var observer = new MutationObserver(adoptAndRestoreStylesOnMutationCallback);\n    var observerTool = {\n      observe: function observe() {\n        observer.observe(location, {\n          childList: true,\n          subtree: true\n        });\n      },\n      disconnect: function disconnect() {\n        observer.disconnect();\n      }\n    };\n    observerRegistry.set(location, observerTool);\n    observerTool.observe();\n  }\n\n  function initPolyfill() {\n    var iframe = document.createElement('iframe');\n    iframe.hidden = true;\n    document.body.appendChild(iframe);\n    frame.body = iframe.contentWindow.document.body;\n    frame.CSSStyleSheet = iframe.contentWindow.CSSStyleSheet;\n    updatePrototype(iframe.contentWindow.CSSStyleSheet.prototype);\n    createObserver(document.body);\n    state.loaded = true;\n    var fragment = document.createDocumentFragment();\n    for (var i = 0, len = deferredStyleSheets.length; i < len; i++) {\n      deferredStyleSheets[i].disabled = false;\n      fragment.appendChild(deferredStyleSheets[i]);\n    }\n    frame.body.appendChild(fragment);\n    for (var _i = 0, _len = deferredDocumentStyleElements.length; _i < _len; _i++) {\n      fragment.appendChild(deferredDocumentStyleElements[_i]);\n    }\n    document.body.insertBefore(fragment, document.body.firstChild);\n    for (var _i2 = 0, _len2 = deferredAdopters.length; _i2 < _len2; _i2++) {\n      adoptStyleSheets(deferredAdopters[_i2]);\n    }\n    deferredAdopters.length = 0;\n    deferredStyleSheets.length = 0;\n    deferredDocumentStyleElements.length = 0;\n  }\n  function initAdoptedStyleSheets() {\n    var adoptedStyleSheetAccessors = {\n      configurable: true,\n      get: function get() {\n        return adoptedSheetsRegistry.get(this) || [];\n      },\n      set: function set(sheets) {\n        var oldSheets = adoptedSheetsRegistry.get(this) || [];\n        checkAndPrepare(sheets, this);\n        var location = this === document ?\n        isDocumentLoading() ? this.head : this.body : this;\n        var isConnected = 'isConnected' in location ? location.isConnected : document.body.contains(location);\n        if (isConnected) {\n          window.requestAnimationFrame(function () {\n            adoptStyleSheets(location);\n            removeExcludedStyleSheets(location, oldSheets);\n          });\n        } else {\n          deferredAdopters.push(location);\n        }\n      }\n    };\n    Object.defineProperty(Document.prototype, 'adoptedStyleSheets', adoptedStyleSheetAccessors);\n    if (typeof ShadowRoot !== 'undefined') {\n      var attachShadow = Element.prototype.attachShadow;\n      Element.prototype.attachShadow = function () {\n        var location = hasShadyCss ? this : attachShadow.apply(this, arguments);\n        shadowRootMap.set(this, location);\n        createObserver(location);\n        return location;\n      };\n      Object.defineProperty(ShadowRoot.prototype, 'adoptedStyleSheets', adoptedStyleSheetAccessors);\n    }\n  }\n\n  updatePrototype(OldCSSStyleSheet.prototype);\n  window.CSSStyleSheet = ConstructStyleSheet;\n  initAdoptedStyleSheets();\n  if (isDocumentLoading()) {\n    document.addEventListener('DOMContentLoaded', initPolyfill);\n  } else {\n    initPolyfill();\n  }\n\n}());\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\n// Non-mutating array operations\r\n/**\r\n * a with x prepended\r\n */\r\nfunction cons(x, a) {\r\n    var l = a.length;\r\n    var b = new Array(l + 1);\r\n    b[0] = x;\r\n    for (var i = 0; i < l; ++i) {\r\n        b[i + 1] = a[i];\r\n    }\r\n    return b;\r\n}\r\n/**\r\n * a with x appended\r\n */\r\nfunction append(x, a) {\r\n    var l = a.length;\r\n    var b = new Array(l + 1);\r\n    for (var i = 0; i < l; ++i) {\r\n        b[i] = a[i];\r\n    }\r\n    b[l] = x;\r\n    return b;\r\n}\r\n/**\r\n * Concats two `ArrayLike`s\r\n */\r\nfunction concat(a, b) {\r\n    var al = a.length;\r\n    var bl = b.length;\r\n    var r = new Array(al + bl);\r\n    var i = 0;\r\n    for (i = 0; i < al; i++) {\r\n        r[i] = a[i];\r\n    }\r\n    for (var j = 0; j < bl; j++) {\r\n        r[i++] = b[j];\r\n    }\r\n    return r;\r\n}\r\n//\r\n/**\r\n * drop first n elements\r\n */\r\nfunction drop(n, a) {\r\n    if (n < 0) {\r\n        throw new TypeError('n must be >= 0');\r\n    }\r\n    var l = a.length;\r\n    if (n === 0 || l === 0) {\r\n        return a;\r\n    }\r\n    if (n >= l) {\r\n        return [];\r\n    }\r\n    return unsafeDrop(n, a, l - n);\r\n}\r\n/**\r\n * Internal helper for drop\r\n */\r\nfunction unsafeDrop(n, a, l) {\r\n    var b = new Array(l);\r\n    for (var i = 0; i < l; ++i) {\r\n        b[i] = a[n + i];\r\n    }\r\n    return b;\r\n}\r\n/**\r\n * drop head element\r\n */\r\nfunction tail(a) {\r\n    return drop(1, a);\r\n}\r\n/**\r\n * duplicate a (shallow duplication)\r\n */\r\nfunction copy(a) {\r\n    var l = a.length;\r\n    var b = new Array(l);\r\n    for (var i = 0; i < l; ++i) {\r\n        b[i] = a[i];\r\n    }\r\n    return b;\r\n}\r\n/**\r\n * transform each element with f\r\n */\r\nfunction map(f, a) {\r\n    var l = a.length;\r\n    var b = new Array(l);\r\n    for (var i = 0; i < l; ++i) {\r\n        b[i] = f(a[i]);\r\n    }\r\n    return b;\r\n}\r\n/**\r\n * accumulate via left-fold\r\n */\r\nfunction reduce(f, z, a) {\r\n    var r = z;\r\n    for (var i = 0, l = a.length; i < l; ++i) {\r\n        r = f(r, a[i], i);\r\n    }\r\n    return r;\r\n}\r\n/**\r\n * replace element at index\r\n */\r\nfunction replace(x, i, a) {\r\n    if (i < 0) {\r\n        throw new TypeError('i must be >= 0');\r\n    }\r\n    var l = a.length;\r\n    var b = new Array(l);\r\n    for (var j = 0; j < l; ++j) {\r\n        b[j] = i === j ? x : a[j];\r\n    }\r\n    return b;\r\n}\r\n/**\r\n * remove element at index\r\n * @throws\r\n */\r\nfunction remove(i, a) {\r\n    if (i < 0) {\r\n        throw new TypeError('i must be >= 0');\r\n    }\r\n    var l = a.length;\r\n    if (l === 0 || i >= l) { // exit early if index beyond end of array\r\n        return a;\r\n    }\r\n    if (l === 1) { // exit early if index in bounds and length === 1\r\n        return [];\r\n    }\r\n    return unsafeRemove(i, a, l - 1);\r\n}\r\n/**\r\n * Internal helper to remove element at index\r\n */\r\nfunction unsafeRemove(i, a, l) {\r\n    var b = new Array(l);\r\n    var j;\r\n    for (j = 0; j < i; ++j) {\r\n        b[j] = a[j];\r\n    }\r\n    for (j = i; j < l; ++j) {\r\n        b[j] = a[j + 1];\r\n    }\r\n    return b;\r\n}\r\n/**\r\n * remove all elements matching a predicate\r\n * @deprecated\r\n */\r\nfunction removeAll(f, a) {\r\n    var l = a.length;\r\n    var b = new Array(l);\r\n    var j = 0;\r\n    for (var x = void 0, i = 0; i < l; ++i) {\r\n        x = a[i];\r\n        if (!f(x)) {\r\n            b[j] = x;\r\n            ++j;\r\n        }\r\n    }\r\n    b.length = j;\r\n    return b;\r\n}\r\n/**\r\n * find index of x in a, from the left\r\n */\r\nfunction findIndex(x, a) {\r\n    for (var i = 0, l = a.length; i < l; ++i) {\r\n        if (x === a[i]) {\r\n            return i;\r\n        }\r\n    }\r\n    return -1;\r\n}\r\n/**\r\n * Return true iff x is array-like\r\n */\r\nfunction isArrayLike(x) {\r\n    return x != null && typeof x.length === 'number' && typeof x !== 'function';\r\n}\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\nvar id = function (x) { return x; };\r\nvar compose = function (f, g) { return function (x) { return f(g(x)); }; };\r\nvar apply = function (f, x) { return f(x); };\r\nfunction curry2(f) {\r\n    function curried(a, b) {\r\n        switch (arguments.length) {\r\n            case 0: return curried;\r\n            case 1: return function (b) { return f(a, b); };\r\n            default: return f(a, b);\r\n        }\r\n    }\r\n    return curried;\r\n}\r\nfunction curry3(f) {\r\n    function curried(a, b, c) {\r\n        switch (arguments.length) {\r\n            case 0: return curried;\r\n            case 1: return curry2(function (b, c) { return f(a, b, c); });\r\n            case 2: return function (c) { return f(a, b, c); };\r\n            default: return f(a, b, c);\r\n        }\r\n    }\r\n    return curried;\r\n}\r\nfunction curry4(f) {\r\n    function curried(a, b, c, d) {\r\n        switch (arguments.length) {\r\n            case 0: return curried;\r\n            case 1: return curry3(function (b, c, d) { return f(a, b, c, d); });\r\n            case 2: return curry2(function (c, d) { return f(a, b, c, d); });\r\n            case 3: return function (d) { return f(a, b, c, d); };\r\n            default: return f(a, b, c, d);\r\n        }\r\n    }\r\n    return curried;\r\n}\n\nexport { append, apply, compose, concat, cons, copy, curry2, curry3, curry4, drop, findIndex, id, isArrayLike, map, reduce, remove, removeAll, replace, tail };\n//# sourceMappingURL=index.es.js.map\n","import { findIndex, removeAll, curry2, curry3 } from '@most/prelude';\n\nvar ScheduledTaskImpl = /** @class */ (function () {\r\n    function ScheduledTaskImpl(time, localOffset, period, task, scheduler) {\r\n        this.time = time;\r\n        this.localOffset = localOffset;\r\n        this.period = period;\r\n        this.task = task;\r\n        this.scheduler = scheduler;\r\n        this.active = true;\r\n    }\r\n    ScheduledTaskImpl.prototype.run = function () {\r\n        return this.task.run(this.time - this.localOffset);\r\n    };\r\n    ScheduledTaskImpl.prototype.error = function (e) {\r\n        return this.task.error(this.time - this.localOffset, e);\r\n    };\r\n    ScheduledTaskImpl.prototype.dispose = function () {\r\n        this.active = false;\r\n        this.scheduler.cancel(this);\r\n        return this.task.dispose();\r\n    };\r\n    return ScheduledTaskImpl;\r\n}());\n\nvar RelativeScheduler = /** @class */ (function () {\r\n    function RelativeScheduler(origin, scheduler) {\r\n        this.origin = origin;\r\n        this.scheduler = scheduler;\r\n    }\r\n    RelativeScheduler.prototype.currentTime = function () {\r\n        return this.scheduler.currentTime() - this.origin;\r\n    };\r\n    RelativeScheduler.prototype.scheduleTask = function (localOffset, delay, period, task) {\r\n        return this.scheduler.scheduleTask(localOffset + this.origin, delay, period, task);\r\n    };\r\n    RelativeScheduler.prototype.relative = function (origin) {\r\n        return new RelativeScheduler(origin + this.origin, this.scheduler);\r\n    };\r\n    RelativeScheduler.prototype.cancel = function (task) {\r\n        return this.scheduler.cancel(task);\r\n    };\r\n    RelativeScheduler.prototype.cancelAll = function (f) {\r\n        return this.scheduler.cancelAll(f);\r\n    };\r\n    return RelativeScheduler;\r\n}());\n\n/** @license MIT License (c) copyright 2010-2017 original author or authors */\r\nvar defer = function (task) {\r\n    return Promise.resolve(task).then(runTask);\r\n};\r\nfunction runTask(task) {\r\n    try {\r\n        return task.run();\r\n    }\r\n    catch (e) {\r\n        return task.error(e);\r\n    }\r\n}\n\n/** @license MIT License (c) copyright 2010-2017 original author or authors */\r\nvar SchedulerImpl = /** @class */ (function () {\r\n    function SchedulerImpl(timer, timeline) {\r\n        var _this = this;\r\n        this._runReadyTasksBound = function () { return _this._runReadyTasks(); };\r\n        this.timer = timer;\r\n        this.timeline = timeline;\r\n        this._timer = null;\r\n        this._nextArrival = Infinity;\r\n    }\r\n    SchedulerImpl.prototype.currentTime = function () {\r\n        return this.timer.now();\r\n    };\r\n    SchedulerImpl.prototype.scheduleTask = function (localOffset, delay, period, task) {\r\n        var time = this.currentTime() + Math.max(0, delay);\r\n        var st = new ScheduledTaskImpl(time, localOffset, period, task, this);\r\n        this.timeline.add(st);\r\n        this._scheduleNextRun();\r\n        return st;\r\n    };\r\n    SchedulerImpl.prototype.relative = function (offset) {\r\n        return new RelativeScheduler(offset, this);\r\n    };\r\n    SchedulerImpl.prototype.cancel = function (task) {\r\n        task.active = false;\r\n        if (this.timeline.remove(task)) {\r\n            this._reschedule();\r\n        }\r\n    };\r\n    // @deprecated\r\n    SchedulerImpl.prototype.cancelAll = function (f) {\r\n        this.timeline.removeAll(f);\r\n        this._reschedule();\r\n    };\r\n    SchedulerImpl.prototype._reschedule = function () {\r\n        if (this.timeline.isEmpty()) {\r\n            this._unschedule();\r\n        }\r\n        else {\r\n            this._scheduleNextRun();\r\n        }\r\n    };\r\n    SchedulerImpl.prototype._unschedule = function () {\r\n        this.timer.clearTimer(this._timer);\r\n        this._timer = null;\r\n    };\r\n    SchedulerImpl.prototype._scheduleNextRun = function () {\r\n        if (this.timeline.isEmpty()) {\r\n            return;\r\n        }\r\n        var nextArrival = this.timeline.nextArrival();\r\n        if (this._timer === null) {\r\n            this._scheduleNextArrival(nextArrival);\r\n        }\r\n        else if (nextArrival < this._nextArrival) {\r\n            this._unschedule();\r\n            this._scheduleNextArrival(nextArrival);\r\n        }\r\n    };\r\n    SchedulerImpl.prototype._scheduleNextArrival = function (nextArrival) {\r\n        this._nextArrival = nextArrival;\r\n        var delay = Math.max(0, nextArrival - this.currentTime());\r\n        this._timer = this.timer.setTimer(this._runReadyTasksBound, delay);\r\n    };\r\n    SchedulerImpl.prototype._runReadyTasks = function () {\r\n        this._timer = null;\r\n        this.timeline.runTasks(this.currentTime(), runTask);\r\n        this._scheduleNextRun();\r\n    };\r\n    return SchedulerImpl;\r\n}());\n\n/** @license MIT License (c) copyright 2010-2017 original author or authors */\r\nvar TimelineImpl = /** @class */ (function () {\r\n    function TimelineImpl() {\r\n        this.tasks = [];\r\n    }\r\n    TimelineImpl.prototype.nextArrival = function () {\r\n        return this.isEmpty() ? Infinity : this.tasks[0].time;\r\n    };\r\n    TimelineImpl.prototype.isEmpty = function () {\r\n        return this.tasks.length === 0;\r\n    };\r\n    TimelineImpl.prototype.add = function (st) {\r\n        insertByTime(st, this.tasks);\r\n    };\r\n    TimelineImpl.prototype.remove = function (st) {\r\n        var i = binarySearch(getTime(st), this.tasks);\r\n        if (i >= 0 && i < this.tasks.length) {\r\n            var events = this.tasks[i].events;\r\n            var at = findIndex(st, events);\r\n            if (at >= 0) {\r\n                events.splice(at, 1);\r\n                if (events.length === 0) {\r\n                    this.tasks.splice(i, 1);\r\n                }\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    /**\r\n     * @deprecated\r\n     */\r\n    TimelineImpl.prototype.removeAll = function (f) {\r\n        for (var i = 0; i < this.tasks.length; ++i) {\r\n            removeAllFrom(f, this.tasks[i]);\r\n        }\r\n    };\r\n    TimelineImpl.prototype.runTasks = function (t, runTask) {\r\n        var tasks = this.tasks;\r\n        var l = tasks.length;\r\n        var i = 0;\r\n        while (i < l && tasks[i].time <= t) {\r\n            ++i;\r\n        }\r\n        this.tasks = tasks.slice(i);\r\n        // Run all ready tasks\r\n        for (var j = 0; j < i; ++j) {\r\n            this.tasks = runReadyTasks(runTask, tasks[j].events, this.tasks);\r\n        }\r\n    };\r\n    return TimelineImpl;\r\n}());\r\nfunction runReadyTasks(runTask, events, tasks) {\r\n    for (var i = 0; i < events.length; ++i) {\r\n        var task = events[i];\r\n        if (task.active) {\r\n            runTask(task);\r\n            // Reschedule periodic repeating tasks\r\n            // Check active again, since a task may have canceled itself\r\n            if (task.period >= 0 && task.active) {\r\n                task.time = task.time + task.period;\r\n                insertByTime(task, tasks);\r\n            }\r\n        }\r\n    }\r\n    return tasks;\r\n}\r\nfunction insertByTime(task, timeslots) {\r\n    var l = timeslots.length;\r\n    var time = getTime(task);\r\n    if (l === 0) {\r\n        timeslots.push(newTimeslot(time, [task]));\r\n        return;\r\n    }\r\n    var i = binarySearch(time, timeslots);\r\n    if (i >= l) {\r\n        timeslots.push(newTimeslot(time, [task]));\r\n    }\r\n    else {\r\n        insertAtTimeslot(task, timeslots, time, i);\r\n    }\r\n}\r\nfunction insertAtTimeslot(task, timeslots, time, i) {\r\n    var timeslot = timeslots[i];\r\n    if (time === timeslot.time) {\r\n        addEvent(task, timeslot.events);\r\n    }\r\n    else {\r\n        timeslots.splice(i, 0, newTimeslot(time, [task]));\r\n    }\r\n}\r\nfunction addEvent(task, events) {\r\n    if (events.length === 0 || task.time >= events[events.length - 1].time) {\r\n        events.push(task);\r\n    }\r\n    else {\r\n        spliceEvent(task, events);\r\n    }\r\n}\r\nfunction spliceEvent(task, events) {\r\n    for (var j = 0; j < events.length; j++) {\r\n        if (task.time < events[j].time) {\r\n            events.splice(j, 0, task);\r\n            break;\r\n        }\r\n    }\r\n}\r\nfunction getTime(scheduledTask) {\r\n    return Math.floor(scheduledTask.time);\r\n}\r\n/**\r\n * @deprecated\r\n */\r\nfunction removeAllFrom(f, timeslot) {\r\n    timeslot.events = removeAll(f, timeslot.events);\r\n}\r\nfunction binarySearch(t, sortedArray) {\r\n    var lo = 0;\r\n    var hi = sortedArray.length;\r\n    var mid, y;\r\n    while (lo < hi) {\r\n        mid = Math.floor((lo + hi) / 2);\r\n        y = sortedArray[mid];\r\n        if (t === y.time) {\r\n            return mid;\r\n        }\r\n        else if (t < y.time) {\r\n            hi = mid;\r\n        }\r\n        else {\r\n            lo = mid + 1;\r\n        }\r\n    }\r\n    return hi;\r\n}\r\nvar newTimeslot = function (t, events) { return ({ time: t, events: events }); };\n\n/** @license MIT License (c) copyright 2010-2017 original author or authors */\r\n/* global setTimeout, clearTimeout */\r\nvar ClockTimer = /** @class */ (function () {\r\n    function ClockTimer(clock) {\r\n        this._clock = clock;\r\n    }\r\n    ClockTimer.prototype.now = function () {\r\n        return this._clock.now();\r\n    };\r\n    ClockTimer.prototype.setTimer = function (f, dt) {\r\n        return dt <= 0 ? runAsap(f) : setTimeout(f, dt);\r\n    };\r\n    ClockTimer.prototype.clearTimer = function (t) {\r\n        return t instanceof Asap ? t.cancel() : clearTimeout(t);\r\n    };\r\n    return ClockTimer;\r\n}());\r\nvar Asap = /** @class */ (function () {\r\n    function Asap(f) {\r\n        this.f = f;\r\n        this.active = true;\r\n    }\r\n    Asap.prototype.run = function () {\r\n        if (this.active) {\r\n            return this.f();\r\n        }\r\n    };\r\n    Asap.prototype.error = function (e) {\r\n        throw e;\r\n    };\r\n    Asap.prototype.cancel = function () {\r\n        this.active = false;\r\n    };\r\n    return Asap;\r\n}());\r\nfunction runAsap(f) {\r\n    var task = new Asap(f);\r\n    defer(task);\r\n    return task;\r\n}\n\n/* global performance, process */\r\nvar RelativeClock = /** @class */ (function () {\r\n    function RelativeClock(clock, origin) {\r\n        this.origin = origin;\r\n        this.clock = clock;\r\n    }\r\n    RelativeClock.prototype.now = function () {\r\n        return this.clock.now() - this.origin;\r\n    };\r\n    return RelativeClock;\r\n}());\r\nvar HRTimeClock = /** @class */ (function () {\r\n    function HRTimeClock(hrtime, origin) {\r\n        this.origin = origin;\r\n        this.hrtime = hrtime;\r\n    }\r\n    HRTimeClock.prototype.now = function () {\r\n        var hrt = this.hrtime(this.origin);\r\n        return (hrt[0] * 1e9 + hrt[1]) / 1e6;\r\n    };\r\n    return HRTimeClock;\r\n}());\r\nvar clockRelativeTo = function (clock) {\r\n    return new RelativeClock(clock, clock.now());\r\n};\r\nvar newPerformanceClock = function () {\r\n    return clockRelativeTo(performance);\r\n};\r\n/**\r\n * @deprecated will be removed in 2.0.0\r\n * Date.now is not monotonic, and performance.now is ubiquitous:\r\n * @see https://caniuse.com/#search=performance.now\r\n */\r\nvar newDateClock = function () {\r\n    return clockRelativeTo(Date);\r\n};\r\nvar newHRTimeClock = function () {\r\n    return new HRTimeClock(process.hrtime, process.hrtime());\r\n};\r\nvar newPlatformClock = function () {\r\n    if (typeof performance !== 'undefined' && typeof performance.now === 'function') {\r\n        return newPerformanceClock();\r\n    }\r\n    else if (typeof process !== 'undefined' && typeof process.hrtime === 'function') {\r\n        return newHRTimeClock();\r\n    }\r\n    return newDateClock();\r\n};\n\n/**\r\n * Read the current time from the provided Scheduler\r\n */\r\nvar currentTime = function (scheduler) {\r\n    return scheduler.currentTime();\r\n};\r\n/**\r\n * Schedule a task to run as soon as possible, but\r\n * not in the current call stack\r\n */\r\nvar asap = curry2(function (task, scheduler) {\r\n    return scheduler.scheduleTask(0, 0, -1, task);\r\n});\r\n/**\r\n * Schedule a task to run after a millisecond delay\r\n */\r\nvar delay = curry3(function (delay, task, scheduler) {\r\n    return scheduler.scheduleTask(0, delay, -1, task);\r\n});\r\n/**\r\n * Schedule a task to run periodically, with the\r\n * first run starting asap\r\n */\r\nvar periodic = curry3(function (period, task, scheduler) {\r\n    return scheduler.scheduleTask(0, 0, period, task);\r\n});\r\n/**\r\n * Cancel a scheduledTask\r\n */\r\nvar cancelTask = function (scheduledTask) {\r\n    return scheduledTask.dispose();\r\n};\r\n/**\r\n * Cancel all ScheduledTasks for which a predicate is true\r\n * @deprecated Will be removed in 2.0.0\r\n */\r\nvar cancelAllTasks = curry2(function (predicate, scheduler) {\r\n    console.warn(\"DEPRECATED cancelAllTasks to be removed in 2.0.0\");\r\n    return scheduler.cancelAll(predicate);\r\n});\n\nvar schedulerRelativeTo = curry2(function (offset, scheduler) {\r\n    return new RelativeScheduler(offset, scheduler);\r\n});\n\n/** @license MIT License (c) copyright 2010-2017 original author or authors */\r\nvar newScheduler = curry2(function (timer, timeline) { return new SchedulerImpl(timer, timeline); });\r\nvar newDefaultScheduler = function () { return new SchedulerImpl(newDefaultTimer(), new TimelineImpl()); };\r\nvar newDefaultTimer = function () { return new ClockTimer(newPlatformClock()); };\r\nvar newClockTimer = function (clock) { return new ClockTimer(clock); };\r\nvar newTimeline = function () { return new TimelineImpl(); };\n\nexport { HRTimeClock, RelativeClock, asap, cancelAllTasks, cancelTask, clockRelativeTo, currentTime, delay, newClockTimer, newDateClock, newDefaultScheduler, newDefaultTimer, newHRTimeClock, newPerformanceClock, newPlatformClock, newScheduler, newTimeline, periodic, schedulerRelativeTo };\n//# sourceMappingURL=index.es.js.map\n","import { curry2, reduce, concat, append, curry3 } from '@most/prelude';\n\nvar dispose = function (disposable) {\r\n    return disposable.dispose();\r\n};\n\nvar disposeNone = function () { return NONE; };\r\nvar NONE = new (/** @class */ (function () {\r\n    function DisposeNone() {\r\n    }\r\n    DisposeNone.prototype.dispose = function () { };\r\n    return DisposeNone;\r\n}()))();\r\nvar isDisposeNone = function (d) {\r\n    return d === NONE;\r\n};\n\n/**\r\n * Wrap an existing disposable (which may not already have been once()d)\r\n * so that it will only dispose its underlying resource at most once.\r\n */\r\nvar disposeOnce = function (disposable) {\r\n    return new DisposeOnce(disposable);\r\n};\r\nvar DisposeOnce = /** @class */ (function () {\r\n    function DisposeOnce(disposable) {\r\n        this.disposed = false;\r\n        this.disposable = disposable;\r\n    }\r\n    DisposeOnce.prototype.dispose = function () {\r\n        if (!this.disposed) {\r\n            this.disposed = true;\r\n            if (this.disposable) {\r\n                this.disposable.dispose();\r\n                this.disposable = undefined;\r\n            }\r\n        }\r\n    };\r\n    return DisposeOnce;\r\n}());\n\n/** @license MIT License (c) copyright 2010-2017 original author or authors */\r\n/**\r\n * Create a Disposable that will use the provided\r\n * dispose function to dispose the resource\r\n */\r\nvar disposeWith = curry2(function (dispose, resource) {\r\n    return disposeOnce(new DisposeWithImpl(dispose, resource));\r\n});\r\n/**\r\n * Disposable represents a resource that must be\r\n * disposed/released. It aggregates a function to dispose\r\n * the resource and a handle to a key/id/handle/reference\r\n * that identifies the resource\r\n */\r\nvar DisposeWithImpl = /** @class */ (function () {\r\n    function DisposeWithImpl(dispose, resource) {\r\n        this._dispose = dispose;\r\n        this._resource = resource;\r\n    }\r\n    DisposeWithImpl.prototype.dispose = function () {\r\n        this._dispose(this._resource);\r\n    };\r\n    return DisposeWithImpl;\r\n}());\n\n/** @license MIT License (c) copyright 2010 original author or authors */\r\n/**\r\n * Aggregate a list of disposables into a DisposeAll\r\n */\r\nvar disposeAll = function (ds) {\r\n    var merged = reduce(merge, [], ds);\r\n    return merged.length === 0 ? disposeNone() : new DisposeAll(merged);\r\n};\r\n/**\r\n * Convenience to aggregate 2 disposables\r\n */\r\nvar disposeBoth = curry2(function (d1, d2) {\r\n    return disposeAll([d1, d2]);\r\n});\r\nvar merge = function (ds, d) {\r\n    return isDisposeNone(d) ? ds\r\n        : d instanceof DisposeAll ? concat(ds, d.disposables)\r\n            : append(d, ds);\r\n};\r\nvar DisposeAll = /** @class */ (function () {\r\n    function DisposeAll(disposables) {\r\n        this.disposables = disposables;\r\n    }\r\n    DisposeAll.prototype.dispose = function () {\r\n        throwIfErrors(disposeCollectErrors(this.disposables));\r\n    };\r\n    return DisposeAll;\r\n}());\r\n/**\r\n * Dispose all, safely collecting errors into an array\r\n */\r\nvar disposeCollectErrors = function (disposables) {\r\n    return reduce(appendIfError, [], disposables);\r\n};\r\n/**\r\n * Call dispose and if throws, append thrown error to errors\r\n */\r\nvar appendIfError = function (errors, d) {\r\n    try {\r\n        d.dispose();\r\n    }\r\n    catch (e) {\r\n        errors.push(e);\r\n    }\r\n    return errors;\r\n};\r\n/**\r\n * Throw DisposeAllError if errors is non-empty\r\n * @throws\r\n */\r\nvar throwIfErrors = function (errors) {\r\n    if (errors.length > 0) {\r\n        throw new DisposeAllError(errors.length + \" errors\", errors);\r\n    }\r\n};\r\nvar DisposeAllError = /** @class */ (function () {\r\n    function DisposeAllError(message, errors) {\r\n        this.name = 'DisposeAllError';\r\n        this.message = message;\r\n        this.errors = errors;\r\n        Error.call(this, message);\r\n        if (Error.captureStackTrace) {\r\n            Error.captureStackTrace(this, DisposeAllError);\r\n        }\r\n        this.stack = \"\" + this.stack + formatErrorStacks(this.errors);\r\n    }\r\n    return DisposeAllError;\r\n}());\r\nDisposeAllError.prototype = Object.create(Error.prototype);\r\nvar formatErrorStacks = function (errors) {\r\n    return reduce(formatErrorStack, '', errors);\r\n};\r\nvar formatErrorStack = function (s, e, i) {\r\n    return s + (\"\\n[\" + (i + 1) + \"] \" + e.stack);\r\n};\n\n/** @license MIT License (c) copyright 2010-2017 original author or authors */\r\n// Try to dispose the disposable.  If it throws, send\r\n// the error to sink.error with the provided Time value\r\nvar tryDispose = curry3(function (t, disposable, sink) {\r\n    try {\r\n        disposable.dispose();\r\n    }\r\n    catch (e) {\r\n        sink.error(t, e);\r\n    }\r\n});\n\nexport { DisposeAllError, dispose, disposeAll, disposeBoth, disposeNone, disposeOnce, disposeWith, isDisposeNone, tryDispose };\n//# sourceMappingURL=index.es.js.map\n","import { curry2, compose, apply, id, reduce, map as map$2, append, findIndex, remove, curry3 } from '@most/prelude';\nimport { asap, delay as delay$2, periodic as periodic$1, schedulerRelativeTo, currentTime, cancelTask } from '@most/scheduler';\nimport { disposeNone, disposeBoth, tryDispose as tryDispose$1, disposeOnce, disposeAll } from '@most/disposable';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\n/** @author Brian Cavalier */\r\n/** @author John Hann */\r\nfunction fatalError(e) {\r\n    setTimeout(rethrow, 0, e);\r\n}\r\nfunction rethrow(e) {\r\n    throw e;\r\n}\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\nvar propagateTask = function (run, value, sink) { return new PropagateRunEventTask(run, value, sink); };\r\nvar propagateEventTask = function (value, sink) { return new PropagateEventTask(value, sink); };\r\nvar propagateEndTask = function (sink) { return new PropagateEndTask(sink); };\r\nvar propagateErrorTask = function (value, sink) { return new PropagateErrorTask(value, sink); };\r\nvar PropagateTask = /** @class */ (function () {\r\n    function PropagateTask(sink) {\r\n        this.sink = sink;\r\n        this.active = true;\r\n    }\r\n    PropagateTask.prototype.dispose = function () {\r\n        this.active = false;\r\n    };\r\n    PropagateTask.prototype.run = function (t) {\r\n        if (!this.active) {\r\n            return;\r\n        }\r\n        this.runIfActive(t);\r\n    };\r\n    PropagateTask.prototype.error = function (t, e) {\r\n        // TODO: Remove this check and just do this.sink.error(t, e)?\r\n        if (!this.active) {\r\n            return fatalError(e);\r\n        }\r\n        this.sink.error(t, e);\r\n    };\r\n    return PropagateTask;\r\n}());\r\nvar PropagateRunEventTask = /** @class */ (function (_super) {\r\n    __extends(PropagateRunEventTask, _super);\r\n    function PropagateRunEventTask(runEvent, value, sink) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.runEvent = runEvent;\r\n        _this.value = value;\r\n        return _this;\r\n    }\r\n    PropagateRunEventTask.prototype.runIfActive = function (t) {\r\n        this.runEvent(t, this.value, this.sink);\r\n    };\r\n    return PropagateRunEventTask;\r\n}(PropagateTask));\r\nvar PropagateEventTask = /** @class */ (function (_super) {\r\n    __extends(PropagateEventTask, _super);\r\n    function PropagateEventTask(value, sink) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.value = value;\r\n        return _this;\r\n    }\r\n    PropagateEventTask.prototype.runIfActive = function (t) {\r\n        this.sink.event(t, this.value);\r\n    };\r\n    return PropagateEventTask;\r\n}(PropagateTask));\r\nvar PropagateEndTask = /** @class */ (function (_super) {\r\n    __extends(PropagateEndTask, _super);\r\n    function PropagateEndTask() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    PropagateEndTask.prototype.runIfActive = function (t) {\r\n        this.sink.end(t);\r\n    };\r\n    return PropagateEndTask;\r\n}(PropagateTask));\r\nvar PropagateErrorTask = /** @class */ (function (_super) {\r\n    __extends(PropagateErrorTask, _super);\r\n    function PropagateErrorTask(value, sink) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.value = value;\r\n        return _this;\r\n    }\r\n    PropagateErrorTask.prototype.runIfActive = function (t) {\r\n        this.sink.error(t, this.value);\r\n    };\r\n    return PropagateErrorTask;\r\n}(PropagateTask));\n\n/** @license MIT License (c) copyright 2010-2017 original author or authors */\r\nvar empty = function () { return EMPTY; };\r\nvar isCanonicalEmpty = function (stream) {\r\n    return stream === EMPTY;\r\n};\r\nvar containsCanonicalEmpty = function (streams) {\r\n    return streams.some(isCanonicalEmpty);\r\n};\r\nvar Empty = /** @class */ (function () {\r\n    function Empty() {\r\n    }\r\n    Empty.prototype.run = function (sink, scheduler) {\r\n        return asap(propagateEndTask(sink), scheduler);\r\n    };\r\n    return Empty;\r\n}());\r\nvar EMPTY = new Empty();\n\n/** @license MIT License (c) copyright 2010-2017 original author or authors */\r\nvar never = function () { return NEVER; };\r\nvar Never = /** @class */ (function () {\r\n    function Never() {\r\n    }\r\n    Never.prototype.run = function () {\r\n        return disposeNone();\r\n    };\r\n    return Never;\r\n}());\r\nvar NEVER = new Never();\n\n/** @license MIT License (c) copyright 2010-2017 original author or authors */\r\nvar at = function (t, x) { return new At(t, x); };\r\nvar At = /** @class */ (function () {\r\n    function At(t, x) {\r\n        this.time = t;\r\n        this.value = x;\r\n    }\r\n    At.prototype.run = function (sink, scheduler) {\r\n        return delay$2(this.time, propagateTask(runAt, this.value, sink), scheduler);\r\n    };\r\n    return At;\r\n}());\r\nfunction runAt(t, x, sink) {\r\n    sink.event(t, x);\r\n    sink.end(t);\r\n}\n\n/** @license MIT License (c) copyright 2010-2017 original author or authors */\r\nvar now = function (x) { return at(0, x); };\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\n/**\r\n * Create a stream of events that occur at a regular period\r\n * @param {Number} period periodicity of events\r\n * @returns {Stream} new stream of periodic events, the event value is undefined\r\n */\r\nvar periodic = function (period) {\r\n    return new Periodic(period);\r\n};\r\nvar Periodic = /** @class */ (function () {\r\n    function Periodic(period) {\r\n        this.period = period;\r\n    }\r\n    Periodic.prototype.run = function (sink, scheduler) {\r\n        return periodic$1(this.period, propagateEventTask(undefined, sink), scheduler);\r\n    };\r\n    return Periodic;\r\n}());\n\nvar newStream = function (run) { return new StreamImpl(run); };\r\nvar StreamImpl = /** @class */ (function () {\r\n    function StreamImpl(run) {\r\n        this.run = run;\r\n    }\r\n    return StreamImpl;\r\n}());\n\nvar SettableDisposable = /** @class */ (function () {\r\n    function SettableDisposable() {\r\n        this.disposable = undefined;\r\n        this.disposed = false;\r\n    }\r\n    SettableDisposable.prototype.setDisposable = function (disposable) {\r\n        if (this.disposable !== undefined) {\r\n            throw new Error('setDisposable called more than once');\r\n        }\r\n        this.disposable = disposable;\r\n        if (this.disposed) {\r\n            disposable.dispose();\r\n        }\r\n    };\r\n    SettableDisposable.prototype.dispose = function () {\r\n        if (this.disposed) {\r\n            return;\r\n        }\r\n        this.disposed = true;\r\n        if (this.disposable !== undefined) {\r\n            this.disposable.dispose();\r\n        }\r\n    };\r\n    return SettableDisposable;\r\n}());\n\n/** @license MIT License (c) copyright 2010-2017 original author or authors */\r\nvar runEffects = curry2(function (stream, scheduler) {\r\n    return new Promise(function (resolve, reject) {\r\n        return runStream(stream, scheduler, resolve, reject);\r\n    });\r\n});\r\nfunction runStream(stream, scheduler, resolve, reject) {\r\n    var disposable = new SettableDisposable();\r\n    var observer = new RunEffectsSink(resolve, reject, disposable);\r\n    disposable.setDisposable(stream.run(observer, scheduler));\r\n}\r\nvar RunEffectsSink = /** @class */ (function () {\r\n    function RunEffectsSink(end, error, disposable) {\r\n        this._end = end;\r\n        this._error = error;\r\n        this._disposable = disposable;\r\n        this.active = true;\r\n    }\r\n    RunEffectsSink.prototype.event = function () { };\r\n    RunEffectsSink.prototype.end = function () {\r\n        if (!this.active) {\r\n            return;\r\n        }\r\n        this.dispose(this._error, this._end, undefined);\r\n    };\r\n    RunEffectsSink.prototype.error = function (_t, e) {\r\n        this.dispose(this._error, this._error, e);\r\n    };\r\n    RunEffectsSink.prototype.dispose = function (error, end, x) {\r\n        this.active = false;\r\n        tryDispose(error, end, x, this._disposable);\r\n    };\r\n    return RunEffectsSink;\r\n}());\r\nfunction tryDispose(error, end, x, disposable) {\r\n    try {\r\n        disposable.dispose();\r\n    }\r\n    catch (e) {\r\n        error(e);\r\n        return;\r\n    }\r\n    end(x);\r\n}\n\n/**\r\n * Run a Stream, sending all its events to the provided Sink.\r\n */\r\nvar run = function (sink, scheduler, stream) {\r\n    return stream.run(sink, scheduler);\r\n};\n\nvar RelativeSink = /** @class */ (function () {\r\n    function RelativeSink(offset, sink) {\r\n        this.sink = sink;\r\n        this.offset = offset;\r\n    }\r\n    RelativeSink.prototype.event = function (t, x) {\r\n        this.sink.event(t + this.offset, x);\r\n    };\r\n    RelativeSink.prototype.error = function (t, e) {\r\n        this.sink.error(t + this.offset, e);\r\n    };\r\n    RelativeSink.prototype.end = function (t) {\r\n        this.sink.end(t + this.offset);\r\n    };\r\n    return RelativeSink;\r\n}());\n\n/**\r\n * Create a stream with its own local clock\r\n * This transforms time from the provided scheduler's clock to a stream-local\r\n * clock (which starts at 0), and then *back* to the scheduler's clock before\r\n * propagating events to sink.  In other words, upstream sources will see local times,\r\n * and downstream sinks will see non-local (original) times.\r\n */\r\nvar withLocalTime = function (origin, stream) {\r\n    return new WithLocalTime(origin, stream);\r\n};\r\nvar WithLocalTime = /** @class */ (function () {\r\n    function WithLocalTime(origin, source) {\r\n        this.origin = origin;\r\n        this.source = source;\r\n    }\r\n    WithLocalTime.prototype.run = function (sink, scheduler) {\r\n        return this.source.run(relativeSink(this.origin, sink), schedulerRelativeTo(this.origin, scheduler));\r\n    };\r\n    return WithLocalTime;\r\n}());\r\n/**\r\n * Accumulate offsets instead of nesting RelativeSinks, which can happen\r\n * with higher-order stream and combinators like continueWith when they're\r\n * applied recursively.\r\n */\r\nvar relativeSink = function (origin, sink) {\r\n    return sink instanceof RelativeSink\r\n        ? new RelativeSink(origin + sink.offset, sink.sink)\r\n        : new RelativeSink(origin, sink);\r\n};\n\nvar Pipe = /** @class */ (function () {\r\n    function Pipe(sink) {\r\n        this.sink = sink;\r\n    }\r\n    Pipe.prototype.end = function (t) {\r\n        return this.sink.end(t);\r\n    };\r\n    Pipe.prototype.error = function (t, e) {\r\n        return this.sink.error(t, e);\r\n    };\r\n    return Pipe;\r\n}());\n\n/** @license MIT License (c) copyright 2010 original author or authors */\r\n/**\r\n * Generalized feedback loop. Call a stepper function for each event. The stepper\r\n * will be called with 2 params: the current seed and the an event value.  It must\r\n * return a new { seed, value } pair. The `seed` will be fed back into the next\r\n * invocation of stepper, and the `value` will be propagated as the event value.\r\n * @param stepper loop step function\r\n * @param seed initial seed value passed to first stepper call\r\n * @param stream event stream\r\n * @returns new stream whose values are the `value` field of the objects\r\n * returned by the stepper\r\n */\r\nvar loop = function (stepper, seed, stream) {\r\n    return isCanonicalEmpty(stream) ? empty()\r\n        : new Loop(stepper, seed, stream);\r\n};\r\nvar Loop = /** @class */ (function () {\r\n    function Loop(stepper, seed, source) {\r\n        this.step = stepper;\r\n        this.seed = seed;\r\n        this.source = source;\r\n    }\r\n    Loop.prototype.run = function (sink, scheduler) {\r\n        return this.source.run(new LoopSink(this.step, this.seed, sink), scheduler);\r\n    };\r\n    return Loop;\r\n}());\r\nvar LoopSink = /** @class */ (function (_super) {\r\n    __extends(LoopSink, _super);\r\n    function LoopSink(stepper, seed, sink) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.step = stepper;\r\n        _this.seed = seed;\r\n        return _this;\r\n    }\r\n    LoopSink.prototype.event = function (t, x) {\r\n        var result = this.step(this.seed, x);\r\n        this.seed = result.seed;\r\n        this.sink.event(t, result.value);\r\n    };\r\n    return LoopSink;\r\n}(Pipe));\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\n/**\r\n * Create a stream containing successive reduce results of applying f to\r\n * the previous reduce result and the current stream item.\r\n * @param f reducer function\r\n * @param initial initial value\r\n * @param stream stream to scan\r\n * @returns new stream containing successive reduce results\r\n */\r\nvar scan = function (f, initial, stream) {\r\n    return new Scan(f, initial, stream);\r\n};\r\nvar Scan = /** @class */ (function () {\r\n    function Scan(f, z, source) {\r\n        this.source = source;\r\n        this.f = f;\r\n        this.value = z;\r\n    }\r\n    Scan.prototype.run = function (sink, scheduler) {\r\n        var d1 = asap(propagateEventTask(this.value, sink), scheduler);\r\n        var d2 = this.source.run(new ScanSink(this.f, this.value, sink), scheduler);\r\n        return disposeBoth(d1, d2);\r\n    };\r\n    return Scan;\r\n}());\r\nvar ScanSink = /** @class */ (function (_super) {\r\n    __extends(ScanSink, _super);\r\n    function ScanSink(f, z, sink) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.f = f;\r\n        _this.value = z;\r\n        return _this;\r\n    }\r\n    ScanSink.prototype.event = function (t, x) {\r\n        var f = this.f;\r\n        this.value = f(this.value, x);\r\n        this.sink.event(t, this.value);\r\n    };\r\n    return ScanSink;\r\n}(Pipe));\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\nvar continueWith = function (f, stream) {\r\n    return new ContinueWith(f, stream);\r\n};\r\nvar ContinueWith = /** @class */ (function () {\r\n    function ContinueWith(f, source) {\r\n        this.f = f;\r\n        this.source = source;\r\n    }\r\n    ContinueWith.prototype.run = function (sink, scheduler) {\r\n        return new ContinueWithSink(this.f, this.source, sink, scheduler);\r\n    };\r\n    return ContinueWith;\r\n}());\r\nvar ContinueWithSink = /** @class */ (function (_super) {\r\n    __extends(ContinueWithSink, _super);\r\n    function ContinueWithSink(f, source, sink, scheduler) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.f = f;\r\n        _this.scheduler = scheduler;\r\n        _this.active = true;\r\n        _this.disposable = disposeOnce(source.run(_this, scheduler));\r\n        return _this;\r\n    }\r\n    ContinueWithSink.prototype.event = function (t, x) {\r\n        if (!this.active) {\r\n            return;\r\n        }\r\n        this.sink.event(t, x);\r\n    };\r\n    ContinueWithSink.prototype.end = function (t) {\r\n        if (!this.active) {\r\n            return;\r\n        }\r\n        tryDispose$1(t, this.disposable, this.sink);\r\n        this.startNext(t, this.sink);\r\n    };\r\n    ContinueWithSink.prototype.startNext = function (t, sink) {\r\n        try {\r\n            this.disposable = this.continue(this.f, t, sink);\r\n        }\r\n        catch (e) {\r\n            sink.error(t, e);\r\n        }\r\n    };\r\n    ContinueWithSink.prototype.continue = function (f, t, sink) {\r\n        return run(sink, this.scheduler, withLocalTime(t, f()));\r\n    };\r\n    ContinueWithSink.prototype.dispose = function () {\r\n        this.active = false;\r\n        return this.disposable.dispose();\r\n    };\r\n    return ContinueWithSink;\r\n}(Pipe));\n\n/** @license MIT License (c) copyright 2010-2017 original author or authors */\r\nvar startWith = function (x, stream) {\r\n    return continueWith(function () { return stream; }, now(x));\r\n};\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\nvar Filter = /** @class */ (function () {\r\n    function Filter(p, source) {\r\n        this.p = p;\r\n        this.source = source;\r\n    }\r\n    Filter.prototype.run = function (sink, scheduler) {\r\n        return this.source.run(new FilterSink(this.p, sink), scheduler);\r\n    };\r\n    /**\r\n     * Create a filtered source, fusing adjacent filter.filter if possible\r\n     * @param {function(x:*):boolean} p filtering predicate\r\n     * @param {{run:function}} source source to filter\r\n     * @returns {Filter} filtered source\r\n     */\r\n    Filter.create = function (p, source) {\r\n        if (isCanonicalEmpty(source)) {\r\n            return source;\r\n        }\r\n        if (source instanceof Filter) {\r\n            return new Filter(and(source.p, p), source.source);\r\n        }\r\n        return new Filter(p, source);\r\n    };\r\n    return Filter;\r\n}());\r\nvar FilterSink = /** @class */ (function (_super) {\r\n    __extends(FilterSink, _super);\r\n    function FilterSink(p, sink) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.p = p;\r\n        return _this;\r\n    }\r\n    FilterSink.prototype.event = function (t, x) {\r\n        var p = this.p;\r\n        p(x) && this.sink.event(t, x);\r\n    };\r\n    return FilterSink;\r\n}(Pipe));\r\nvar and = function (p, q) { return function (x) { return p(x) && q(x); }; };\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\nvar FilterMap = /** @class */ (function () {\r\n    function FilterMap(p, f, source) {\r\n        this.p = p;\r\n        this.f = f;\r\n        this.source = source;\r\n    }\r\n    FilterMap.prototype.run = function (sink, scheduler) {\r\n        return this.source.run(new FilterMapSink(this.p, this.f, sink), scheduler);\r\n    };\r\n    return FilterMap;\r\n}());\r\nvar FilterMapSink = /** @class */ (function (_super) {\r\n    __extends(FilterMapSink, _super);\r\n    function FilterMapSink(p, f, sink) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.p = p;\r\n        _this.f = f;\r\n        return _this;\r\n    }\r\n    FilterMapSink.prototype.event = function (t, x) {\r\n        var f = this.f;\r\n        var p = this.p;\r\n        p(x) && this.sink.event(t, f(x));\r\n    };\r\n    return FilterMapSink;\r\n}(Pipe));\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\nvar Map = /** @class */ (function () {\r\n    function Map(f, source) {\r\n        this.f = f;\r\n        this.source = source;\r\n    }\r\n    Map.prototype.run = function (sink, scheduler) {\r\n        return this.source.run(new MapSink(this.f, sink), scheduler);\r\n    };\r\n    /**\r\n     * Create a mapped source, fusing adjacent map.map, filter.map,\r\n     * and filter.map.map if possible\r\n     * @param {function(*):*} f mapping function\r\n     * @param {{run:function}} source source to map\r\n     * @returns {Map|FilterMap} mapped source, possibly fused\r\n     */\r\n    Map.create = function (f, source) {\r\n        if (isCanonicalEmpty(source)) {\r\n            return empty();\r\n        }\r\n        if (source instanceof Map) {\r\n            return new Map(compose(f, source.f), source.source);\r\n        }\r\n        if (source instanceof Filter) {\r\n            return new FilterMap(source.p, f, source.source);\r\n        }\r\n        return new Map(f, source);\r\n    };\r\n    return Map;\r\n}());\r\nvar MapSink = /** @class */ (function (_super) {\r\n    __extends(MapSink, _super);\r\n    function MapSink(f, sink) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.f = f;\r\n        return _this;\r\n    }\r\n    MapSink.prototype.event = function (t, x) {\r\n        var f = this.f;\r\n        this.sink.event(t, f(x));\r\n    };\r\n    return MapSink;\r\n}(Pipe));\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\n/**\r\n * Transform each value in the stream by applying f to each\r\n * @param f mapping function\r\n * @param stream stream to map\r\n * @returns stream containing items transformed by f\r\n */\r\nvar map = function (f, stream) {\r\n    return Map.create(f, stream);\r\n};\r\n/**\r\n* Replace each value in the stream with x\r\n* @param x\r\n* @param stream\r\n* @returns stream containing items replaced with x\r\n*/\r\nvar constant = function (x, stream) {\r\n    return map(function () { return x; }, stream);\r\n};\r\n/**\r\n* Perform a side effect for each item in the stream\r\n* @param f side effect to execute for each item. The return value will be discarded.\r\n* @param stream stream to tap\r\n* @returns new stream containing the same items as this stream\r\n*/\r\nvar tap = function (f, stream) {\r\n    return new Tap(f, stream);\r\n};\r\nvar Tap = /** @class */ (function () {\r\n    function Tap(f, source) {\r\n        this.source = source;\r\n        this.f = f;\r\n    }\r\n    Tap.prototype.run = function (sink, scheduler) {\r\n        return this.source.run(new TapSink(this.f, sink), scheduler);\r\n    };\r\n    return Tap;\r\n}());\r\nvar TapSink = /** @class */ (function (_super) {\r\n    __extends(TapSink, _super);\r\n    function TapSink(f, sink) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.f = f;\r\n        return _this;\r\n    }\r\n    TapSink.prototype.event = function (t, x) {\r\n        var f = this.f;\r\n        f(x);\r\n        this.sink.event(t, x);\r\n    };\r\n    return TapSink;\r\n}(Pipe));\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\nvar IndexSink = /** @class */ (function (_super) {\r\n    __extends(IndexSink, _super);\r\n    function IndexSink(i, sink) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.index = i;\r\n        _this.active = true;\r\n        _this.value = undefined;\r\n        return _this;\r\n    }\r\n    IndexSink.prototype.event = function (t, x) {\r\n        if (!this.active) {\r\n            return;\r\n        }\r\n        this.value = x;\r\n        this.sink.event(t, this);\r\n    };\r\n    IndexSink.prototype.end = function (t) {\r\n        if (!this.active) {\r\n            return;\r\n        }\r\n        this.active = false;\r\n        this.sink.event(t, this);\r\n    };\r\n    return IndexSink;\r\n}(Pipe));\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\n/** @author Brian Cavalier */\r\n/** @author John Hann */\r\n/**\r\n * TODO: find a better way (without `any`)\r\n */\r\nfunction invoke(f, args) {\r\n    /* eslint complexity: [2,7] */\r\n    switch (args.length) {\r\n        case 0: return f();\r\n        case 1: return f(args[0]);\r\n        case 2: return f(args[0], args[1]);\r\n        case 3: return f(args[0], args[1], args[2]);\r\n        case 4: return f(args[0], args[1], args[2], args[3]);\r\n        case 5: return f(args[0], args[1], args[2], args[3], args[4]);\r\n        default:\r\n            return f.apply(undefined, args);\r\n    }\r\n}\n\n/** @license MIT License (c) copyright 2010 original author or authors */\r\n/**\r\n * Combine latest events from two streams\r\n * @param f function to combine most recent events\r\n * @param stream1\r\n * @param stream2\r\n * @returns stream containing the result of applying f to the most recent\r\n *  event of each input stream, whenever a new event arrives on any stream.\r\n */\r\nvar combine = function (f, stream1, stream2) {\r\n    return combineArray(f, [stream1, stream2]);\r\n};\r\n/**\r\n* Combine latest events from all input streams\r\n* @param f function to combine most recent events\r\n* @param streams most recent events\r\n* @returns stream containing the result of applying f to the most recent\r\n*  event of each input stream, whenever a new event arrives on any stream.\r\n*/\r\nvar combineArray = function (f, streams) {\r\n    return streams.length === 0 || containsCanonicalEmpty(streams) ? empty()\r\n        : streams.length === 1 ? map(f, streams[0])\r\n            : new Combine(f, streams);\r\n};\r\nvar Combine = /** @class */ (function () {\r\n    function Combine(f, sources) {\r\n        this.f = f;\r\n        this.sources = sources;\r\n    }\r\n    Combine.prototype.run = function (sink, scheduler) {\r\n        var l = this.sources.length;\r\n        var disposables = new Array(l);\r\n        var sinks = new Array(l);\r\n        var mergeSink = new CombineSink(disposables, sinks.length, sink, this.f);\r\n        for (var indexSink = void 0, i = 0; i < l; ++i) {\r\n            indexSink = sinks[i] = new IndexSink(i, mergeSink);\r\n            disposables[i] = this.sources[i].run(indexSink, scheduler);\r\n        }\r\n        return disposeAll(disposables);\r\n    };\r\n    return Combine;\r\n}());\r\nvar CombineSink = /** @class */ (function (_super) {\r\n    __extends(CombineSink, _super);\r\n    function CombineSink(disposables, length, sink, f) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.disposables = disposables;\r\n        _this.f = f;\r\n        _this.awaiting = length;\r\n        _this.values = new Array(length);\r\n        _this.hasValue = new Array(length).fill(false);\r\n        _this.activeCount = length;\r\n        return _this;\r\n    }\r\n    CombineSink.prototype.event = function (t, indexedValue) {\r\n        if (!indexedValue.active) {\r\n            this.dispose(t, indexedValue.index);\r\n            return;\r\n        }\r\n        var i = indexedValue.index;\r\n        var awaiting = this.updateReady(i);\r\n        this.values[i] = indexedValue.value;\r\n        if (awaiting === 0) {\r\n            this.sink.event(t, invoke(this.f, this.values));\r\n        }\r\n    };\r\n    CombineSink.prototype.updateReady = function (index) {\r\n        if (this.awaiting > 0) {\r\n            if (!this.hasValue[index]) {\r\n                this.hasValue[index] = true;\r\n                this.awaiting -= 1;\r\n            }\r\n        }\r\n        return this.awaiting;\r\n    };\r\n    CombineSink.prototype.dispose = function (t, index) {\r\n        tryDispose$1(t, this.disposables[index], this.sink);\r\n        if (--this.activeCount === 0) {\r\n            this.sink.end(t);\r\n        }\r\n    };\r\n    return CombineSink;\r\n}(Pipe));\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\n/**\r\n * Assume fs is a stream containing functions, and apply the latest function\r\n * in fs to the latest value in xs.\r\n * fs:         --f---------g--------h------>\r\n * xs:         -a-------b-------c-------d-->\r\n * ap(fs, xs): --fa-----fb-gb---gc--hc--hd->\r\n * @param {Stream} fs stream of functions to apply to the latest x\r\n * @param {Stream} xs stream of values to which to apply all the latest f\r\n * @returns {Stream} stream containing all the applications of fs to xs\r\n */\r\nfunction ap(fs, xs) {\r\n    return combine(apply, fs, xs);\r\n}\n\n/** @license MIT License (c) copyright 2010 original author or authors */\r\nvar mergeConcurrently = function (concurrency, stream) {\r\n    return mergeMapConcurrently(id, concurrency, stream);\r\n};\r\nvar mergeMapConcurrently = function (f, concurrency, stream) {\r\n    return isCanonicalEmpty(stream) ? empty()\r\n        : new MergeConcurrently(f, concurrency, stream);\r\n};\r\nvar MergeConcurrently = /** @class */ (function () {\r\n    function MergeConcurrently(f, concurrency, source) {\r\n        this.f = f;\r\n        this.concurrency = concurrency;\r\n        this.source = source;\r\n    }\r\n    MergeConcurrently.prototype.run = function (sink, scheduler) {\r\n        return new Outer(this.f, this.concurrency, this.source, sink, scheduler);\r\n    };\r\n    return MergeConcurrently;\r\n}());\r\nvar isNonEmpty = function (array) { return array.length > 0; };\r\nvar Outer = /** @class */ (function () {\r\n    function Outer(f, concurrency, source, sink, scheduler) {\r\n        this.f = f;\r\n        this.concurrency = concurrency;\r\n        this.sink = sink;\r\n        this.scheduler = scheduler;\r\n        this.pending = [];\r\n        this.current = [];\r\n        this.disposable = disposeOnce(source.run(this, scheduler));\r\n        this.active = true;\r\n    }\r\n    Outer.prototype.event = function (t, x) {\r\n        this.addInner(t, x);\r\n    };\r\n    Outer.prototype.addInner = function (t, x) {\r\n        if (this.current.length < this.concurrency) {\r\n            this.startInner(t, x);\r\n        }\r\n        else {\r\n            this.pending.push(x);\r\n        }\r\n    };\r\n    Outer.prototype.startInner = function (t, x) {\r\n        try {\r\n            this.initInner(t, x);\r\n        }\r\n        catch (e) {\r\n            this.error(t, e);\r\n        }\r\n    };\r\n    Outer.prototype.initInner = function (t, x) {\r\n        var innerSink = new Inner(t, this, this.sink);\r\n        innerSink.disposable = mapAndRun(this.f, t, x, innerSink, this.scheduler);\r\n        this.current.push(innerSink);\r\n    };\r\n    Outer.prototype.end = function (t) {\r\n        this.active = false;\r\n        tryDispose$1(t, this.disposable, this.sink);\r\n        this.checkEnd(t);\r\n    };\r\n    Outer.prototype.error = function (t, e) {\r\n        this.active = false;\r\n        this.sink.error(t, e);\r\n    };\r\n    Outer.prototype.dispose = function () {\r\n        this.active = false;\r\n        this.pending.length = 0;\r\n        this.disposable.dispose();\r\n        disposeAll(this.current).dispose();\r\n    };\r\n    Outer.prototype.endInner = function (t, inner) {\r\n        var i = this.current.indexOf(inner);\r\n        if (i >= 0) {\r\n            this.current.splice(i, 1);\r\n        }\r\n        tryDispose$1(t, inner, this);\r\n        var pending = this.pending;\r\n        if (isNonEmpty(pending)) {\r\n            this.startInner(t, pending.shift());\r\n        }\r\n        else {\r\n            this.checkEnd(t);\r\n        }\r\n    };\r\n    Outer.prototype.checkEnd = function (t) {\r\n        if (!this.active && this.current.length === 0) {\r\n            this.sink.end(t);\r\n        }\r\n    };\r\n    return Outer;\r\n}());\r\nvar mapAndRun = function (f, t, x, sink, scheduler) {\r\n    return f(x).run(sink, schedulerRelativeTo(t, scheduler));\r\n};\r\nvar Inner = /** @class */ (function () {\r\n    function Inner(time, outer, sink) {\r\n        this.time = time;\r\n        this.outer = outer;\r\n        this.sink = sink;\r\n        this.disposable = disposeNone();\r\n    }\r\n    Inner.prototype.event = function (t, x) {\r\n        this.sink.event(t + this.time, x);\r\n    };\r\n    Inner.prototype.end = function (t) {\r\n        this.outer.endInner(t + this.time, this);\r\n    };\r\n    Inner.prototype.error = function (t, e) {\r\n        this.outer.error(t + this.time, e);\r\n    };\r\n    Inner.prototype.dispose = function () {\r\n        return this.disposable.dispose();\r\n    };\r\n    return Inner;\r\n}());\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\n/**\r\n * Map each value in the stream to a new stream, and merge it into the\r\n * returned outer stream. Event arrival times are preserved.\r\n * @param f chaining function, must return a Stream\r\n * @param stream\r\n * @returns new stream containing all events from each stream returned by f\r\n */\r\nvar chain = function (f, stream) { return mergeMapConcurrently(f, Infinity, stream); };\r\n/**\r\n * Monadic join. Flatten a Stream<Stream<X>> to Stream<X> by merging inner\r\n * streams to the outer. Event arrival times are preserved.\r\n * @param stream stream of streams\r\n * @returns new stream containing all events of all inner streams\r\n */\r\nvar join = function (stream) { return mergeConcurrently(Infinity, stream); };\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\n/**\r\n * Map each value in stream to a new stream, and concatenate them all\r\n * stream:              -a---b---cX\r\n * f(a):                 1-1-1-1X\r\n * f(b):                        -2-2-2-2X\r\n * f(c):                                -3-3-3-3X\r\n * stream.concatMap(f): -1-1-1-1-2-2-2-2-3-3-3-3X\r\n * @param f function to map each value to a stream\r\n * @param stream\r\n * @returns new stream containing all events from each stream returned by f\r\n */\r\nvar concatMap = function (f, stream) {\r\n    return mergeMapConcurrently(f, 1, stream);\r\n};\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\n/**\r\n * @returns stream containing events from two streams in time order.\r\n * If two events are simultaneous they will be merged in arbitrary order.\r\n */\r\nfunction merge(stream1, stream2) {\r\n    return mergeArray([stream1, stream2]);\r\n}\r\n/**\r\n * @param streams array of stream to merge\r\n * @returns stream containing events from all input observables\r\n * in time order.  If two events are simultaneous they will be merged in\r\n * arbitrary order.\r\n */\r\nvar mergeArray = function (streams) {\r\n    return mergeStreams(withoutCanonicalEmpty(streams));\r\n};\r\n/**\r\n * This implements fusion/flattening for merge.  It will\r\n * fuse adjacent merge operations.  For example:\r\n * - a.merge(b).merge(c) effectively becomes merge(a, b, c)\r\n * - merge(a, merge(b, c)) effectively becomes merge(a, b, c)\r\n * It does this by concatenating the sources arrays of\r\n * any nested Merge sources, in effect \"flattening\" nested\r\n * merge operations into a single merge.\r\n * TODO: use {@link MergeArray}\r\n */\r\nvar mergeStreams = function (streams) {\r\n    return streams.length === 0 ? empty()\r\n        : streams.length === 1 ? streams[0]\r\n            : new Merge(reduce(appendSources, [], streams));\r\n};\r\nvar withoutCanonicalEmpty = function (streams) {\r\n    return streams.filter(isNotCanonicalEmpty);\r\n};\r\nvar isNotCanonicalEmpty = function (stream) {\r\n    return !isCanonicalEmpty(stream);\r\n};\r\nvar appendSources = function (sources, stream) {\r\n    return sources.concat(stream instanceof Merge ? stream.sources : stream);\r\n};\r\nvar Merge = /** @class */ (function () {\r\n    function Merge(sources) {\r\n        this.sources = sources;\r\n    }\r\n    Merge.prototype.run = function (sink, scheduler) {\r\n        var l = this.sources.length;\r\n        var disposables = new Array(l);\r\n        var sinks = new Array(l);\r\n        var mergeSink = new MergeSink(disposables, sinks, sink);\r\n        for (var indexSink = void 0, i = 0; i < l; ++i) {\r\n            indexSink = sinks[i] = new IndexSink(i, mergeSink);\r\n            disposables[i] = this.sources[i].run(indexSink, scheduler);\r\n        }\r\n        return disposeAll(disposables);\r\n    };\r\n    return Merge;\r\n}());\r\nvar MergeSink = /** @class */ (function (_super) {\r\n    __extends(MergeSink, _super);\r\n    function MergeSink(disposables, sinks, sink) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.disposables = disposables;\r\n        _this.activeCount = sinks.length;\r\n        return _this;\r\n    }\r\n    MergeSink.prototype.event = function (t, indexValue) {\r\n        if (!indexValue.active) {\r\n            this.dispose(t, indexValue.index);\r\n            return;\r\n        }\r\n        this.sink.event(t, indexValue.value);\r\n    };\r\n    MergeSink.prototype.dispose = function (t, index) {\r\n        tryDispose$1(t, this.disposables[index], this.sink);\r\n        if (--this.activeCount === 0) {\r\n            this.sink.end(t);\r\n        }\r\n    };\r\n    return MergeSink;\r\n}(Pipe));\n\n/** @license MIT License (c) copyright 2010 original author or authors */\r\nvar sample = function (values, sampler) {\r\n    return snapshot(function (x) { return x; }, values, sampler);\r\n};\r\nvar snapshot = function (f, values, sampler) {\r\n    return isCanonicalEmpty(sampler) || isCanonicalEmpty(values)\r\n        ? empty()\r\n        : new Snapshot(f, values, sampler);\r\n};\r\nvar Snapshot = /** @class */ (function () {\r\n    function Snapshot(f, values, sampler) {\r\n        this.f = f;\r\n        this.values = values;\r\n        this.sampler = sampler;\r\n    }\r\n    Snapshot.prototype.run = function (sink, scheduler) {\r\n        var sampleSink = new SnapshotSink(this.f, sink);\r\n        var valuesDisposable = this.values.run(sampleSink.latest, scheduler);\r\n        var samplerDisposable = this.sampler.run(sampleSink, scheduler);\r\n        return disposeBoth(samplerDisposable, valuesDisposable);\r\n    };\r\n    return Snapshot;\r\n}());\r\nvar SnapshotSink = /** @class */ (function (_super) {\r\n    __extends(SnapshotSink, _super);\r\n    function SnapshotSink(f, sink) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.f = f;\r\n        _this.latest = new LatestValueSink(_this);\r\n        return _this;\r\n    }\r\n    SnapshotSink.prototype.event = function (t, x) {\r\n        if (this.latest.hasValue) {\r\n            var f = this.f;\r\n            // TODO: value should be boxed to avoid ! bang\r\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\r\n            this.sink.event(t, f(this.latest.value, x));\r\n        }\r\n    };\r\n    return SnapshotSink;\r\n}(Pipe));\r\nvar LatestValueSink = /** @class */ (function (_super) {\r\n    __extends(LatestValueSink, _super);\r\n    function LatestValueSink(sink) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.hasValue = false;\r\n        return _this;\r\n    }\r\n    LatestValueSink.prototype.event = function (_t, x) {\r\n        this.value = x;\r\n        this.hasValue = true;\r\n    };\r\n    LatestValueSink.prototype.end = function () { };\r\n    return LatestValueSink;\r\n}(Pipe));\n\n/** @license MIT License (c) copyright 2010 original author or authors */\r\n// Construct a constrained bounds\r\nvar boundsFrom = function (unsafeMin, unsafeMax) {\r\n    var min = Math.max(0, unsafeMin);\r\n    var max = Math.max(min, unsafeMax);\r\n    return { min: min, max: max };\r\n};\r\n// Combine 2 bounds by narrowing min and max\r\nvar mergeBounds = function (b1, b2) {\r\n    return boundsFrom(b1.min + b2.min, Math.min(b1.max, b1.min + b2.max));\r\n};\r\n// Nil bounds excludes all slice indices\r\nvar isNilBounds = function (b) {\r\n    return b.min >= b.max;\r\n};\r\n// Infinite bounds includes all slice indices\r\nvar isInfiniteBounds = function (b) {\r\n    return b.min <= 0 && b.max === Infinity;\r\n};\n\n// TODO: split into smaller files\r\n/**\r\n * @param n\r\n * @param stream\r\n * @returns new stream containing only up to the first n items from stream\r\n */\r\nvar take = function (n, stream) {\r\n    return slice(0, n, stream);\r\n};\r\n/**\r\n * @param n\r\n * @param stream\r\n * @returns new stream with the first n items removed\r\n */\r\nvar skip = function (n, stream) {\r\n    return slice(n, Infinity, stream);\r\n};\r\n/**\r\n * Slice a stream by index. Negative start/end indexes are not supported\r\n * @param start\r\n * @param end\r\n * @param stream\r\n * @returns stream containing items where start <= index < end\r\n */\r\nvar slice = function (start, end, stream) {\r\n    return sliceBounds(boundsFrom(start, end), stream);\r\n};\r\nvar sliceBounds = function (bounds, stream) {\r\n    return isSliceEmpty(bounds, stream) ? empty()\r\n        : stream instanceof Map ? commuteMapSlice(bounds, stream)\r\n            : stream instanceof Slice ? fuseSlice(bounds, stream)\r\n                : createSlice(bounds, stream);\r\n};\r\nvar isSliceEmpty = function (bounds, stream) {\r\n    return isCanonicalEmpty(stream) || isNilBounds(bounds);\r\n};\r\nvar createSlice = function (bounds, stream) {\r\n    return isInfiniteBounds(bounds) ? stream : new Slice(bounds, stream);\r\n};\r\nvar commuteMapSlice = function (bounds, mapStream) {\r\n    return Map.create(mapStream.f, sliceBounds(bounds, mapStream.source));\r\n};\r\nvar fuseSlice = function (bounds, sliceStream) {\r\n    return sliceBounds(mergeBounds(sliceStream.bounds, bounds), sliceStream.source);\r\n};\r\nvar Slice = /** @class */ (function () {\r\n    function Slice(bounds, source) {\r\n        this.source = source;\r\n        this.bounds = bounds;\r\n    }\r\n    Slice.prototype.run = function (sink, scheduler) {\r\n        var disposable = new SettableDisposable();\r\n        var sliceSink = new SliceSink(this.bounds.min, this.bounds.max - this.bounds.min, sink, disposable);\r\n        disposable.setDisposable(this.source.run(sliceSink, scheduler));\r\n        return disposable;\r\n    };\r\n    return Slice;\r\n}());\r\nvar SliceSink = /** @class */ (function (_super) {\r\n    __extends(SliceSink, _super);\r\n    function SliceSink(skip, take, sink, disposable) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.skip = skip;\r\n        _this.take = take;\r\n        _this.disposable = disposable;\r\n        return _this;\r\n    }\r\n    SliceSink.prototype.event = function (t, x) {\r\n        /* eslint complexity: [1, 4] */\r\n        if (this.skip > 0) {\r\n            this.skip -= 1;\r\n            return;\r\n        }\r\n        if (this.take === 0) {\r\n            return;\r\n        }\r\n        this.take -= 1;\r\n        this.sink.event(t, x);\r\n        if (this.take === 0) {\r\n            this.disposable.dispose();\r\n            this.sink.end(t);\r\n        }\r\n    };\r\n    return SliceSink;\r\n}(Pipe));\r\nvar takeWhile = function (p, stream) {\r\n    return isCanonicalEmpty(stream) ? empty()\r\n        : new TakeWhile(p, stream);\r\n};\r\nvar TakeWhile = /** @class */ (function () {\r\n    function TakeWhile(p, source) {\r\n        this.p = p;\r\n        this.source = source;\r\n    }\r\n    TakeWhile.prototype.run = function (sink, scheduler) {\r\n        var disposable = new SettableDisposable();\r\n        var takeWhileSink = new TakeWhileSink(this.p, sink, disposable);\r\n        disposable.setDisposable(this.source.run(takeWhileSink, scheduler));\r\n        return disposable;\r\n    };\r\n    return TakeWhile;\r\n}());\r\nvar TakeWhileSink = /** @class */ (function (_super) {\r\n    __extends(TakeWhileSink, _super);\r\n    function TakeWhileSink(p, sink, disposable) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.p = p;\r\n        _this.active = true;\r\n        _this.disposable = disposable;\r\n        return _this;\r\n    }\r\n    TakeWhileSink.prototype.event = function (t, x) {\r\n        if (!this.active) {\r\n            return;\r\n        }\r\n        var p = this.p;\r\n        this.active = p(x);\r\n        if (this.active) {\r\n            this.sink.event(t, x);\r\n        }\r\n        else {\r\n            this.disposable.dispose();\r\n            this.sink.end(t);\r\n        }\r\n    };\r\n    return TakeWhileSink;\r\n}(Pipe));\r\nvar skipWhile = function (p, stream) {\r\n    return isCanonicalEmpty(stream) ? empty()\r\n        : new SkipWhile(p, stream);\r\n};\r\nvar SkipWhile = /** @class */ (function () {\r\n    function SkipWhile(p, source) {\r\n        this.p = p;\r\n        this.source = source;\r\n    }\r\n    SkipWhile.prototype.run = function (sink, scheduler) {\r\n        return this.source.run(new SkipWhileSink(this.p, sink), scheduler);\r\n    };\r\n    return SkipWhile;\r\n}());\r\nvar SkipWhileSink = /** @class */ (function (_super) {\r\n    __extends(SkipWhileSink, _super);\r\n    function SkipWhileSink(p, sink) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.p = p;\r\n        _this.skipping = true;\r\n        return _this;\r\n    }\r\n    SkipWhileSink.prototype.event = function (t, x) {\r\n        if (this.skipping) {\r\n            var p = this.p;\r\n            this.skipping = p(x);\r\n            if (this.skipping) {\r\n                return;\r\n            }\r\n        }\r\n        this.sink.event(t, x);\r\n    };\r\n    return SkipWhileSink;\r\n}(Pipe));\r\nvar skipAfter = function (p, stream) {\r\n    return isCanonicalEmpty(stream) ? empty()\r\n        : new SkipAfter(p, stream);\r\n};\r\nvar SkipAfter = /** @class */ (function () {\r\n    function SkipAfter(p, source) {\r\n        this.p = p;\r\n        this.source = source;\r\n    }\r\n    SkipAfter.prototype.run = function (sink, scheduler) {\r\n        return this.source.run(new SkipAfterSink(this.p, sink), scheduler);\r\n    };\r\n    return SkipAfter;\r\n}());\r\nvar SkipAfterSink = /** @class */ (function (_super) {\r\n    __extends(SkipAfterSink, _super);\r\n    function SkipAfterSink(p, sink) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.p = p;\r\n        _this.skipping = false;\r\n        return _this;\r\n    }\r\n    SkipAfterSink.prototype.event = function (t, x) {\r\n        if (this.skipping) {\r\n            return;\r\n        }\r\n        var p = this.p;\r\n        this.skipping = p(x);\r\n        this.sink.event(t, x);\r\n        if (this.skipping) {\r\n            this.sink.end(t);\r\n        }\r\n    };\r\n    return SkipAfterSink;\r\n}(Pipe));\n\n/** @license MIT License (c) copyright 2017 original author or authors */\r\nvar withItems = function (items, stream) {\r\n    return zipItems(keepLeft, items, stream);\r\n};\r\nvar zipItems = function (f, items, stream) {\r\n    return isCanonicalEmpty(stream) || items.length === 0\r\n        ? empty()\r\n        : new ZipItems(f, items, take(items.length, stream));\r\n};\r\nvar keepLeft = function (a) { return a; };\r\nvar ZipItems = /** @class */ (function () {\r\n    function ZipItems(f, items, source) {\r\n        this.f = f;\r\n        this.items = items;\r\n        this.source = source;\r\n    }\r\n    ZipItems.prototype.run = function (sink, scheduler) {\r\n        return this.source.run(new ZipItemsSink(this.f, this.items, sink), scheduler);\r\n    };\r\n    return ZipItems;\r\n}());\r\nvar ZipItemsSink = /** @class */ (function (_super) {\r\n    __extends(ZipItemsSink, _super);\r\n    function ZipItemsSink(f, items, sink) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.f = f;\r\n        _this.items = items;\r\n        _this.index = 0;\r\n        return _this;\r\n    }\r\n    ZipItemsSink.prototype.event = function (t, b) {\r\n        var f = this.f;\r\n        this.sink.event(t, f(this.items[this.index], b));\r\n        this.index += 1;\r\n    };\r\n    return ZipItemsSink;\r\n}(Pipe));\n\n// Copied and modified from https://github.com/invertase/denque\r\n// MIT License\r\n// These constants were extracted directly from denque's shift()\r\n// It's not clear exactly why the authors chose these particular\r\n// values, but given denque's stated goals, it seems likely that\r\n// they were chosen for speed/memory reasons.\r\n// Max value of _head at which Queue is willing to shink\r\n// its internal array\r\nvar HEAD_MAX_SHRINK = 2;\r\n// Min value of _tail at which Queue is willing to shink\r\n// its internal array\r\nvar TAIL_MIN_SHRINK = 10000;\r\nvar Queue = /** @class */ (function () {\r\n    function Queue() {\r\n        this.head = 0;\r\n        this.tail = 0;\r\n        this.capacityMask = 0x3;\r\n        this.list = new Array(4);\r\n    }\r\n    Queue.prototype.push = function (x) {\r\n        var tail = this.tail;\r\n        this.list[tail] = x;\r\n        this.tail = (tail + 1) & this.capacityMask;\r\n        if (this.tail === this.head) {\r\n            this.growArray();\r\n        }\r\n        if (this.head < this.tail) {\r\n            return this.tail - this.head;\r\n        }\r\n        else {\r\n            return this.capacityMask + 1 - (this.head - this.tail);\r\n        }\r\n    };\r\n    Queue.prototype.shift = function () {\r\n        var head = this.head;\r\n        if (head === this.tail) {\r\n            return undefined;\r\n        }\r\n        var x = this.list[head];\r\n        this.list[head] = undefined;\r\n        this.head = (head + 1) & this.capacityMask;\r\n        if (head < HEAD_MAX_SHRINK &&\r\n            this.tail > TAIL_MIN_SHRINK &&\r\n            this.tail <= this.list.length >>> 2) {\r\n            this.shrinkArray();\r\n        }\r\n        return x;\r\n    };\r\n    Queue.prototype.isEmpty = function () {\r\n        return this.head === this.tail;\r\n    };\r\n    Queue.prototype.length = function () {\r\n        if (this.head === this.tail) {\r\n            return 0;\r\n        }\r\n        else if (this.head < this.tail) {\r\n            return this.tail - this.head;\r\n        }\r\n        else {\r\n            return this.capacityMask + 1 - (this.head - this.tail);\r\n        }\r\n    };\r\n    Queue.prototype.growArray = function () {\r\n        if (this.head) {\r\n            // copy existing data, head to end, then beginning to tail.\r\n            this.list = this.copyArray();\r\n            this.head = 0;\r\n        }\r\n        // head is at 0 and array is now full, safe to extend\r\n        this.tail = this.list.length;\r\n        this.list.length *= 2;\r\n        this.capacityMask = (this.capacityMask << 1) | 1;\r\n    };\r\n    Queue.prototype.shrinkArray = function () {\r\n        this.list.length >>>= 1;\r\n        this.capacityMask >>>= 1;\r\n    };\r\n    Queue.prototype.copyArray = function () {\r\n        var newArray = [];\r\n        var list = this.list;\r\n        var len = list.length;\r\n        var i;\r\n        for (i = this.head; i < len; i++) {\r\n            newArray.push(list[i]);\r\n        }\r\n        for (i = 0; i < this.tail; i++) {\r\n            newArray.push(list[i]);\r\n        }\r\n        return newArray;\r\n    };\r\n    return Queue;\r\n}());\n\n/** @license MIT License (c) copyright 2010 original author or authors */\r\n/**\r\n * Combine two streams pairwise by index by applying f to values at corresponding\r\n * indices.  The returned stream ends when either of the input streams ends.\r\n * @param {function} f function to combine values\r\n * @returns {Stream} new stream with items at corresponding indices combined\r\n *  using f\r\n */\r\nfunction zip(f, stream1, stream2) {\r\n    return zipArray(f, [stream1, stream2]);\r\n}\r\n/**\r\n* Combine streams pairwise (or tuple-wise) by index by applying f to values\r\n* at corresponding indices.  The returned stream ends when any of the input\r\n* streams ends.\r\n* @param {function} f function to combine values\r\n* @param {[Stream]} streams streams to zip using f\r\n* @returns {Stream} new stream with items at corresponding indices combined\r\n*  using f\r\n*/\r\nvar zipArray = function (f, streams) {\r\n    return streams.length === 0 || containsCanonicalEmpty(streams) ? empty()\r\n        : streams.length === 1 ? map(f, streams[0])\r\n            : new Zip(f, streams);\r\n};\r\nvar Zip = /** @class */ (function () {\r\n    function Zip(f, sources) {\r\n        this.f = f;\r\n        this.sources = sources;\r\n    }\r\n    Zip.prototype.run = function (sink, scheduler) {\r\n        var l = this.sources.length;\r\n        var disposables = new Array(l);\r\n        var sinks = new Array(l);\r\n        var buffers = new Array(l);\r\n        var zipSink = new ZipSink(this.f, buffers, sinks, sink);\r\n        for (var indexSink = void 0, i = 0; i < l; ++i) {\r\n            buffers[i] = new Queue();\r\n            indexSink = sinks[i] = new IndexSink(i, zipSink);\r\n            disposables[i] = this.sources[i].run(indexSink, scheduler);\r\n        }\r\n        return disposeAll(disposables);\r\n    };\r\n    return Zip;\r\n}());\r\nvar ZipSink = /** @class */ (function (_super) {\r\n    __extends(ZipSink, _super);\r\n    function ZipSink(f, buffers, sinks, sink) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.f = f;\r\n        _this.sinks = sinks;\r\n        _this.buffers = buffers;\r\n        return _this;\r\n    }\r\n    ZipSink.prototype.event = function (t, indexedValue) {\r\n        /* eslint complexity: [1, 5] */\r\n        if (!indexedValue.active) {\r\n            this.dispose(t, indexedValue.index);\r\n            return;\r\n        }\r\n        var buffers = this.buffers;\r\n        var buffer = buffers[indexedValue.index];\r\n        buffer.push(indexedValue.value);\r\n        if (buffer.length() === 1) {\r\n            if (!ready(buffers)) {\r\n                return;\r\n            }\r\n            emitZipped(this.f, t, buffers, this.sink);\r\n            if (ended(this.buffers, this.sinks)) {\r\n                this.sink.end(t);\r\n            }\r\n        }\r\n    };\r\n    ZipSink.prototype.dispose = function (t, index) {\r\n        var buffer = this.buffers[index];\r\n        if (buffer.isEmpty()) {\r\n            this.sink.end(t);\r\n        }\r\n    };\r\n    return ZipSink;\r\n}(Pipe));\r\nvar emitZipped = function (f, t, buffers, sink) {\r\n    return sink.event(t, invoke(f, map$2(head, buffers)));\r\n};\r\nvar head = function (buffer) { return buffer.shift(); };\r\nfunction ended(buffers, sinks) {\r\n    for (var i = 0, l = buffers.length; i < l; ++i) {\r\n        if (buffers[i].isEmpty() && !sinks[i].active) {\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n}\r\nfunction ready(buffers) {\r\n    for (var i = 0, l = buffers.length; i < l; ++i) {\r\n        if (buffers[i].isEmpty()) {\r\n            return false;\r\n        }\r\n    }\r\n    return true;\r\n}\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\n/**\r\n * Given a stream of streams, return a new stream that adopts the behavior\r\n * of the most recent inner stream.\r\n * @param stream of streams on which to switch\r\n * @returns switching stream\r\n */\r\nvar switchLatest = function (stream) {\r\n    return isCanonicalEmpty(stream)\r\n        ? empty()\r\n        : new Switch(stream);\r\n};\r\nvar Switch = /** @class */ (function () {\r\n    function Switch(source) {\r\n        this.source = source;\r\n    }\r\n    Switch.prototype.run = function (sink, scheduler) {\r\n        var switchSink = new SwitchSink(sink, scheduler);\r\n        return disposeBoth(switchSink, this.source.run(switchSink, scheduler));\r\n    };\r\n    return Switch;\r\n}());\r\nvar SwitchSink = /** @class */ (function () {\r\n    function SwitchSink(sink, scheduler) {\r\n        this.sink = sink;\r\n        this.scheduler = scheduler;\r\n        this.current = null;\r\n        this.ended = false;\r\n    }\r\n    SwitchSink.prototype.event = function (t, stream) {\r\n        this.disposeCurrent(t);\r\n        this.current = new Segment(stream, t, Infinity, this, this.sink, this.scheduler);\r\n    };\r\n    SwitchSink.prototype.end = function (t) {\r\n        this.ended = true;\r\n        this.checkEnd(t);\r\n    };\r\n    SwitchSink.prototype.error = function (t, e) {\r\n        this.ended = true;\r\n        this.sink.error(t, e);\r\n    };\r\n    SwitchSink.prototype.dispose = function () {\r\n        return this.disposeCurrent(currentTime(this.scheduler));\r\n    };\r\n    SwitchSink.prototype.disposeCurrent = function (t) {\r\n        if (this.current !== null) {\r\n            return this.current.dispose(t);\r\n        }\r\n    };\r\n    SwitchSink.prototype.disposeInner = function (t, inner) {\r\n        inner.dispose(t);\r\n        if (inner === this.current) {\r\n            this.current = null;\r\n        }\r\n    };\r\n    SwitchSink.prototype.checkEnd = function (t) {\r\n        if (this.ended && this.current === null) {\r\n            this.sink.end(t);\r\n        }\r\n    };\r\n    SwitchSink.prototype.endInner = function (t, inner) {\r\n        this.disposeInner(t, inner);\r\n        this.checkEnd(t);\r\n    };\r\n    SwitchSink.prototype.errorInner = function (t, e, inner) {\r\n        this.disposeInner(t, inner);\r\n        this.sink.error(t, e);\r\n    };\r\n    return SwitchSink;\r\n}());\r\nvar Segment = /** @class */ (function () {\r\n    function Segment(source, min, max, outer, sink, scheduler) {\r\n        this.min = min;\r\n        this.max = max;\r\n        this.outer = outer;\r\n        this.sink = sink;\r\n        this.disposable = source.run(this, schedulerRelativeTo(min, scheduler));\r\n    }\r\n    Segment.prototype.event = function (t, x) {\r\n        var time = Math.max(0, t + this.min);\r\n        if (time < this.max) {\r\n            this.sink.event(time, x);\r\n        }\r\n    };\r\n    Segment.prototype.end = function (t) {\r\n        this.outer.endInner(t + this.min, this);\r\n    };\r\n    Segment.prototype.error = function (t, e) {\r\n        this.outer.errorInner(t + this.min, e, this);\r\n    };\r\n    Segment.prototype.dispose = function (t) {\r\n        tryDispose$1(t, this.disposable, this.sink);\r\n    };\r\n    return Segment;\r\n}());\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\nfunction filter(p, stream) {\r\n    return Filter.create(p, stream);\r\n}\r\n/**\r\n * Skip repeated events, using === to detect duplicates\r\n * @param stream stream from which to omit repeated events\r\n * @returns stream without repeated events\r\n */\r\nvar skipRepeats = function (stream) {\r\n    return skipRepeatsWith(same, stream);\r\n};\r\n/**\r\n * Skip repeated events using the provided equals function to detect duplicates\r\n * @param equals optional function to compare items\r\n * @param stream stream from which to omit repeated events\r\n * @returns stream without repeated events\r\n */\r\nvar skipRepeatsWith = function (equals, stream) {\r\n    return isCanonicalEmpty(stream) ? empty()\r\n        : new SkipRepeats(equals, stream);\r\n};\r\nvar SkipRepeats = /** @class */ (function () {\r\n    function SkipRepeats(equals, source) {\r\n        this.equals = equals;\r\n        this.source = source;\r\n    }\r\n    SkipRepeats.prototype.run = function (sink, scheduler) {\r\n        return this.source.run(new SkipRepeatsSink(this.equals, sink), scheduler);\r\n    };\r\n    return SkipRepeats;\r\n}());\r\nvar SkipRepeatsSink = /** @class */ (function (_super) {\r\n    __extends(SkipRepeatsSink, _super);\r\n    function SkipRepeatsSink(equals, sink) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.equals = equals;\r\n        _this.value = undefined;\r\n        _this.init = true;\r\n        return _this;\r\n    }\r\n    SkipRepeatsSink.prototype.event = function (t, x) {\r\n        if (this.init) {\r\n            this.init = false;\r\n            this.value = x;\r\n            this.sink.event(t, x);\r\n            // TODO: value should be boxed to avoid ! bang\r\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\r\n        }\r\n        else if (!this.equals(this.value, x)) {\r\n            this.value = x;\r\n            this.sink.event(t, x);\r\n        }\r\n    };\r\n    return SkipRepeatsSink;\r\n}(Pipe));\r\nfunction same(a, b) {\r\n    return a === b;\r\n}\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\nvar until = function (signal, stream) {\r\n    return new Until(signal, stream);\r\n};\r\nvar since = function (signal, stream) {\r\n    return new Since(signal, stream);\r\n};\r\nvar during = function (timeWindow, stream) {\r\n    return until(join(timeWindow), since(timeWindow, stream));\r\n};\r\nvar Until = /** @class */ (function () {\r\n    function Until(maxSignal, source) {\r\n        this.maxSignal = maxSignal;\r\n        this.source = source;\r\n    }\r\n    Until.prototype.run = function (sink, scheduler) {\r\n        var disposable = new SettableDisposable();\r\n        var d1 = this.source.run(sink, scheduler);\r\n        var d2 = this.maxSignal.run(new UntilSink(sink, disposable), scheduler);\r\n        disposable.setDisposable(disposeBoth(d1, d2));\r\n        return disposable;\r\n    };\r\n    return Until;\r\n}());\r\nvar Since = /** @class */ (function () {\r\n    function Since(minSignal, source) {\r\n        this.minSignal = minSignal;\r\n        this.source = source;\r\n    }\r\n    Since.prototype.run = function (sink, scheduler) {\r\n        var min = new LowerBoundSink(this.minSignal, sink, scheduler);\r\n        var d = this.source.run(new SinceSink(min, sink), scheduler);\r\n        return disposeBoth(min, d);\r\n    };\r\n    return Since;\r\n}());\r\nvar SinceSink = /** @class */ (function (_super) {\r\n    __extends(SinceSink, _super);\r\n    function SinceSink(min, sink) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.min = min;\r\n        return _this;\r\n    }\r\n    SinceSink.prototype.event = function (t, x) {\r\n        if (this.min.allow) {\r\n            this.sink.event(t, x);\r\n        }\r\n    };\r\n    return SinceSink;\r\n}(Pipe));\r\nvar LowerBoundSink = /** @class */ (function (_super) {\r\n    __extends(LowerBoundSink, _super);\r\n    function LowerBoundSink(signal, sink, scheduler) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.allow = false;\r\n        _this.disposable = signal.run(_this, scheduler);\r\n        return _this;\r\n    }\r\n    LowerBoundSink.prototype.event = function () {\r\n        this.allow = true;\r\n        this.dispose();\r\n    };\r\n    LowerBoundSink.prototype.end = function () { };\r\n    LowerBoundSink.prototype.dispose = function () {\r\n        this.disposable.dispose();\r\n    };\r\n    return LowerBoundSink;\r\n}(Pipe));\r\nvar UntilSink = /** @class */ (function (_super) {\r\n    __extends(UntilSink, _super);\r\n    function UntilSink(sink, disposable) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.disposable = disposable;\r\n        return _this;\r\n    }\r\n    UntilSink.prototype.event = function (t) {\r\n        this.disposable.dispose();\r\n        this.sink.end(t);\r\n    };\r\n    UntilSink.prototype.end = function () { };\r\n    return UntilSink;\r\n}(Pipe));\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\n/**\r\n * @param delayTime milliseconds to delay each item\r\n * @param stream\r\n * @returns new stream containing the same items, but delayed by ms\r\n */\r\nvar delay = function (delayTime, stream) {\r\n    return delayTime <= 0 ? stream : new Delay(delayTime, stream);\r\n};\r\nvar Delay = /** @class */ (function () {\r\n    function Delay(dt, source) {\r\n        this.dt = dt;\r\n        this.source = source;\r\n    }\r\n    Delay.prototype.run = function (sink, scheduler) {\r\n        var delaySink = new DelaySink(this.dt, sink, scheduler);\r\n        return disposeBoth(delaySink, this.source.run(delaySink, scheduler));\r\n    };\r\n    return Delay;\r\n}());\r\nvar DelaySink = /** @class */ (function (_super) {\r\n    __extends(DelaySink, _super);\r\n    function DelaySink(dt, sink, scheduler) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.dt = dt;\r\n        _this.scheduler = scheduler;\r\n        _this.tasks = [];\r\n        return _this;\r\n    }\r\n    DelaySink.prototype.dispose = function () {\r\n        this.tasks.forEach(cancelTask);\r\n    };\r\n    DelaySink.prototype.event = function (_t, x) {\r\n        this.tasks.push(delay$2(this.dt, propagateEventTask(x, this.sink), this.scheduler));\r\n    };\r\n    DelaySink.prototype.end = function () {\r\n        this.tasks.push(delay$2(this.dt, propagateEndTask(this.sink), this.scheduler));\r\n    };\r\n    return DelaySink;\r\n}(Pipe));\n\n/** @license MIT License (c) copyright 2010-2017 original author or authors */\r\n/**\r\n * Limit the rate of events by suppressing events that occur too often\r\n * @param period time to suppress events\r\n * @param stream\r\n */\r\nvar throttle = function (period, stream) {\r\n    return isCanonicalEmpty(stream) ? empty()\r\n        : stream instanceof Map ? commuteMapThrottle(period, stream)\r\n            : stream instanceof Throttle ? fuseThrottle(period, stream)\r\n                : new Throttle(period, stream);\r\n};\r\nvar commuteMapThrottle = function (period, mapStream) {\r\n    return Map.create(mapStream.f, throttle(period, mapStream.source));\r\n};\r\nvar fuseThrottle = function (period, throttleStream) {\r\n    return new Throttle(Math.max(period, throttleStream.period), throttleStream.source);\r\n};\r\nvar Throttle = /** @class */ (function () {\r\n    function Throttle(period, source) {\r\n        this.period = period;\r\n        this.source = source;\r\n    }\r\n    Throttle.prototype.run = function (sink, scheduler) {\r\n        return this.source.run(new ThrottleSink(this.period, sink), scheduler);\r\n    };\r\n    return Throttle;\r\n}());\r\nvar ThrottleSink = /** @class */ (function (_super) {\r\n    __extends(ThrottleSink, _super);\r\n    function ThrottleSink(period, sink) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.time = 0;\r\n        _this.period = period;\r\n        return _this;\r\n    }\r\n    ThrottleSink.prototype.event = function (t, x) {\r\n        if (t >= this.time) {\r\n            this.time = t + this.period;\r\n            this.sink.event(t, x);\r\n        }\r\n    };\r\n    return ThrottleSink;\r\n}(Pipe));\r\n/**\r\n * Wait for a burst of events to subside and emit only the last event in the burst\r\n * @param period events occuring more frequently than this will be suppressed\r\n * @param stream stream to debounce\r\n * @returns new debounced stream\r\n */\r\nvar debounce = function (period, stream) {\r\n    return isCanonicalEmpty(stream) ? empty()\r\n        : new Debounce(period, stream);\r\n};\r\nvar Debounce = /** @class */ (function () {\r\n    function Debounce(dt, source) {\r\n        this.dt = dt;\r\n        this.source = source;\r\n    }\r\n    Debounce.prototype.run = function (sink, scheduler) {\r\n        return new DebounceSink(this.dt, this.source, sink, scheduler);\r\n    };\r\n    return Debounce;\r\n}());\r\nvar DebounceSink = /** @class */ (function () {\r\n    function DebounceSink(dt, source, sink, scheduler) {\r\n        this.dt = dt;\r\n        this.sink = sink;\r\n        this.scheduler = scheduler;\r\n        this.timer = null;\r\n        this.disposable = source.run(this, scheduler);\r\n    }\r\n    DebounceSink.prototype.event = function (_t, x) {\r\n        this.clearTimer();\r\n        this.value = x;\r\n        this.timer = delay$2(this.dt, new DebounceTask(this, x), this.scheduler);\r\n    };\r\n    DebounceSink.prototype.handleEventFromTask = function (t, x) {\r\n        this.clearTimer();\r\n        this.sink.event(t, x);\r\n    };\r\n    DebounceSink.prototype.end = function (t) {\r\n        if (this.clearTimer()) {\r\n            // TODO: value should be boxed to avoid ! bang\r\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\r\n            this.sink.event(t, this.value);\r\n            this.value = undefined;\r\n        }\r\n        this.sink.end(t);\r\n    };\r\n    DebounceSink.prototype.error = function (t, x) {\r\n        this.clearTimer();\r\n        this.sink.error(t, x);\r\n    };\r\n    DebounceSink.prototype.dispose = function () {\r\n        this.clearTimer();\r\n        this.disposable.dispose();\r\n    };\r\n    DebounceSink.prototype.clearTimer = function () {\r\n        if (this.timer === null) {\r\n            return false;\r\n        }\r\n        this.timer.dispose();\r\n        this.timer = null;\r\n        return true;\r\n    };\r\n    return DebounceSink;\r\n}());\r\nvar DebounceTask = /** @class */ (function () {\r\n    function DebounceTask(sink, value) {\r\n        this.sink = sink;\r\n        this.value = value;\r\n    }\r\n    DebounceTask.prototype.run = function (t) {\r\n        this.sink.handleEventFromTask(t, this.value);\r\n    };\r\n    DebounceTask.prototype.error = function (t, e) {\r\n        this.sink.error(t, e);\r\n    };\r\n    DebounceTask.prototype.dispose = function () { };\r\n    return DebounceTask;\r\n}());\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\n/**\r\n * Turn a Stream<Promise<T>> into Stream<T> by awaiting each promise.\r\n * Event order is preserved. The stream will fail if any promise rejects.\r\n */\r\nvar awaitPromises = function (stream) {\r\n    return isCanonicalEmpty(stream) ? empty() : new Await(stream);\r\n};\r\n/**\r\n * Create a stream containing only the promise's fulfillment\r\n * value at the time it fulfills.\r\n * @param promise\r\n * @return stream containing promise's fulfillment value.\r\n *  If the promise rejects, the stream will error\r\n */\r\nvar fromPromise = function (promise) { return awaitPromises(now(promise)); };\r\nvar Await = /** @class */ (function () {\r\n    function Await(source) {\r\n        this.source = source;\r\n    }\r\n    Await.prototype.run = function (sink, scheduler) {\r\n        return this.source.run(new AwaitSink(sink, scheduler), scheduler);\r\n    };\r\n    return Await;\r\n}());\r\nvar AwaitSink = /** @class */ (function () {\r\n    function AwaitSink(sink, scheduler) {\r\n        var _this = this;\r\n        // Pre-create closures, to avoid creating them per event\r\n        this.eventBound = function (x) { return _this.sink.event(currentTime(_this.scheduler), x); };\r\n        this.endBound = function () { return _this.sink.end(currentTime(_this.scheduler)); };\r\n        this.errorBound = function (e) { return _this.sink.error(currentTime(_this.scheduler), e); };\r\n        this.sink = sink;\r\n        this.scheduler = scheduler;\r\n        this.queue = Promise.resolve();\r\n    }\r\n    AwaitSink.prototype.event = function (_t, promise) {\r\n        var _this = this;\r\n        this.queue = this.queue.then(function () { return _this.handlePromise(promise); })\r\n            .catch(this.errorBound);\r\n    };\r\n    AwaitSink.prototype.end = function () {\r\n        this.queue = this.queue.then(this.endBound)\r\n            .catch(this.errorBound);\r\n    };\r\n    AwaitSink.prototype.error = function (_t, e) {\r\n        var _this = this;\r\n        // Don't resolve error values, propagate directly\r\n        this.queue = this.queue.then(function () { return _this.errorBound(e); })\r\n            .catch(fatalError);\r\n    };\r\n    AwaitSink.prototype.handlePromise = function (promise) {\r\n        return promise.then(this.eventBound);\r\n    };\r\n    return AwaitSink;\r\n}());\n\nvar SafeSink = /** @class */ (function () {\r\n    function SafeSink(sink) {\r\n        this.sink = sink;\r\n        this.active = true;\r\n    }\r\n    SafeSink.prototype.event = function (t, x) {\r\n        if (!this.active) {\r\n            return;\r\n        }\r\n        this.sink.event(t, x);\r\n    };\r\n    SafeSink.prototype.end = function (t) {\r\n        if (!this.active) {\r\n            return;\r\n        }\r\n        this.disable();\r\n        this.sink.end(t);\r\n    };\r\n    SafeSink.prototype.error = function (t, e) {\r\n        this.disable();\r\n        this.sink.error(t, e);\r\n    };\r\n    SafeSink.prototype.disable = function () {\r\n        this.active = false;\r\n        return this.sink;\r\n    };\r\n    return SafeSink;\r\n}());\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\n/** @author Brian Cavalier */\r\n/** @author John Hann */\r\nfunction tryEvent(t, x, sink) {\r\n    try {\r\n        sink.event(t, x);\r\n    }\r\n    catch (e) {\r\n        sink.error(t, e);\r\n    }\r\n}\r\nfunction tryEnd(t, sink) {\r\n    try {\r\n        sink.end(t);\r\n    }\r\n    catch (e) {\r\n        sink.error(t, e);\r\n    }\r\n}\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\n/**\r\n * If stream encounters an error, recover and continue with items from stream\r\n * returned by f.\r\n * @param f which returns a new stream\r\n * @param stream\r\n * @returns new stream which will recover from an error by calling f\r\n */\r\nvar recoverWith = function (f, stream) {\r\n    return isCanonicalEmpty(stream) ? empty()\r\n        : new RecoverWith(f, stream);\r\n};\r\n/**\r\n * Create a stream containing only an error\r\n * @param e error value, preferably an Error or Error subtype\r\n * @returns new stream containing only an error\r\n */\r\nvar throwError = function (e) {\r\n    return new ErrorStream(e);\r\n};\r\nvar ErrorStream = /** @class */ (function () {\r\n    function ErrorStream(e) {\r\n        this.value = e;\r\n    }\r\n    ErrorStream.prototype.run = function (sink, scheduler) {\r\n        return asap(propagateErrorTask(this.value, sink), scheduler);\r\n    };\r\n    return ErrorStream;\r\n}());\r\nvar RecoverWith = /** @class */ (function () {\r\n    function RecoverWith(f, source) {\r\n        this.f = f;\r\n        this.source = source;\r\n    }\r\n    RecoverWith.prototype.run = function (sink, scheduler) {\r\n        return new RecoverWithSink(this.f, this.source, sink, scheduler);\r\n    };\r\n    return RecoverWith;\r\n}());\r\nvar RecoverWithSink = /** @class */ (function () {\r\n    function RecoverWithSink(f, source, sink, scheduler) {\r\n        this.f = f;\r\n        this.sink = new SafeSink(sink);\r\n        this.scheduler = scheduler;\r\n        this.disposable = source.run(this, scheduler);\r\n    }\r\n    RecoverWithSink.prototype.event = function (t, x) {\r\n        tryEvent(t, x, this.sink);\r\n    };\r\n    RecoverWithSink.prototype.end = function (t) {\r\n        tryEnd(t, this.sink);\r\n    };\r\n    RecoverWithSink.prototype.error = function (t, e) {\r\n        var nextSink = this.sink.disable();\r\n        tryDispose$1(t, this.disposable, this.sink);\r\n        this._startNext(t, e, nextSink);\r\n    };\r\n    RecoverWithSink.prototype._startNext = function (t, x, sink) {\r\n        try {\r\n            this.disposable = this._continue(this.f, t, x, sink);\r\n        }\r\n        catch (e) {\r\n            sink.error(t, e);\r\n        }\r\n    };\r\n    RecoverWithSink.prototype._continue = function (f, t, x, sink) {\r\n        return run(sink, this.scheduler, withLocalTime(t, f(x)));\r\n    };\r\n    RecoverWithSink.prototype.dispose = function () {\r\n        return this.disposable.dispose();\r\n    };\r\n    return RecoverWithSink;\r\n}());\n\nvar multicast = function (stream) {\r\n    return stream instanceof Multicast || isCanonicalEmpty(stream)\r\n        ? stream\r\n        : new Multicast(stream);\r\n};\r\nvar Multicast = /** @class */ (function () {\r\n    function Multicast(source) {\r\n        this.source = new MulticastSource(source);\r\n    }\r\n    Multicast.prototype.run = function (sink, scheduler) {\r\n        return this.source.run(sink, scheduler);\r\n    };\r\n    return Multicast;\r\n}());\r\nvar MulticastSource = /** @class */ (function () {\r\n    function MulticastSource(source) {\r\n        this.source = source;\r\n        this.sinks = [];\r\n        this.disposable = disposeNone();\r\n    }\r\n    MulticastSource.prototype.run = function (sink, scheduler) {\r\n        var n = this.add(sink);\r\n        if (n === 1) {\r\n            this.disposable = this.source.run(this, scheduler);\r\n        }\r\n        return disposeOnce(new MulticastDisposable(this, sink));\r\n    };\r\n    MulticastSource.prototype.dispose = function () {\r\n        var disposable = this.disposable;\r\n        this.disposable = disposeNone();\r\n        return disposable.dispose();\r\n    };\r\n    MulticastSource.prototype.add = function (sink) {\r\n        this.sinks = append(sink, this.sinks);\r\n        return this.sinks.length;\r\n    };\r\n    MulticastSource.prototype.remove = function (sink) {\r\n        var i = findIndex(sink, this.sinks);\r\n        // istanbul ignore next\r\n        if (i >= 0) {\r\n            this.sinks = remove(i, this.sinks);\r\n        }\r\n        return this.sinks.length;\r\n    };\r\n    MulticastSource.prototype.event = function (time, value) {\r\n        var s = this.sinks;\r\n        if (s.length === 1) {\r\n            return s[0].event(time, value);\r\n        }\r\n        for (var i = 0; i < s.length; ++i) {\r\n            tryEvent(time, value, s[i]);\r\n        }\r\n    };\r\n    MulticastSource.prototype.end = function (time) {\r\n        var s = this.sinks;\r\n        for (var i = 0; i < s.length; ++i) {\r\n            tryEnd(time, s[i]);\r\n        }\r\n    };\r\n    MulticastSource.prototype.error = function (time, err) {\r\n        var s = this.sinks;\r\n        for (var i = 0; i < s.length; ++i) {\r\n            s[i].error(time, err);\r\n        }\r\n    };\r\n    return MulticastSource;\r\n}());\r\nvar MulticastDisposable = /** @class */ (function () {\r\n    function MulticastDisposable(source, sink) {\r\n        this.source = source;\r\n        this.sink = sink;\r\n    }\r\n    MulticastDisposable.prototype.dispose = function () {\r\n        if (this.source.remove(this.sink) === 0) {\r\n            this.source.dispose();\r\n        }\r\n    };\r\n    return MulticastDisposable;\r\n}());\n\n/** @license MIT License (c) copyright 2016 original author or authors */\r\nvar run$1 = curry3(run);\r\nvar withLocalTime$1 = curry2(withLocalTime);\r\nvar loop$1 = curry3(loop);\r\nvar scan$1 = curry3(scan);\r\nvar startWith$1 = curry2(startWith);\r\nvar map$1 = curry2(map);\r\nvar constant$1 = curry2(constant);\r\nvar tap$1 = curry2(tap);\r\nvar ap$1 = curry2(ap);\r\nvar chain$1 = curry2(chain);\r\nvar continueWith$1 = curry2(continueWith);\r\nvar concatMap$1 = curry2(concatMap);\r\nvar mergeConcurrently$1 = curry2(mergeConcurrently);\r\nvar mergeMapConcurrently$1 = curry3(mergeMapConcurrently);\r\nvar merge$1 = curry2(merge);\r\nvar combine$1 = curry3(combine);\r\nvar combineArray$1 = curry2(combineArray);\r\nvar sample$1 = curry2(sample);\r\nvar snapshot$1 = curry3(snapshot);\r\nvar zipItems$1 = curry3(zipItems);\r\nvar withItems$1 = curry2(withItems);\r\nvar zip$1 = curry3(zip);\r\nvar zipArray$1 = curry2(zipArray);\r\nvar filter$1 = curry2(filter);\r\nvar skipRepeatsWith$1 = curry2(skipRepeatsWith);\r\nvar take$1 = curry2(take);\r\nvar skip$1 = curry2(skip);\r\nvar slice$1 = curry3(slice);\r\nvar takeWhile$1 = curry2(takeWhile);\r\nvar skipWhile$1 = curry2(skipWhile);\r\nvar skipAfter$1 = curry2(skipAfter);\r\nvar until$1 = curry2(until);\r\nvar since$1 = curry2(since);\r\nvar during$1 = curry2(during);\r\nvar delay$1 = curry2(delay);\r\nvar throttle$1 = curry2(throttle);\r\nvar debounce$1 = curry2(debounce);\r\nvar recoverWith$1 = curry2(recoverWith);\r\nvar propagateTask$1 = curry3(propagateTask);\r\nvar propagateEventTask$1 = curry2(propagateEventTask);\r\nvar propagateErrorTask$1 = curry2(propagateErrorTask);\n\nexport { MulticastSource, ap$1 as ap, at, awaitPromises, chain$1 as chain, combine$1 as combine, combineArray$1 as combineArray, concatMap$1 as concatMap, constant$1 as constant, continueWith$1 as continueWith, debounce$1 as debounce, delay$1 as delay, during$1 as during, empty, filter$1 as filter, fromPromise, join, loop$1 as loop, map$1 as map, merge$1 as merge, mergeArray, mergeConcurrently$1 as mergeConcurrently, mergeMapConcurrently$1 as mergeMapConcurrently, multicast, never, newStream, now, periodic, propagateEndTask, propagateErrorTask$1 as propagateErrorTask, propagateEventTask$1 as propagateEventTask, propagateTask$1 as propagateTask, recoverWith$1 as recoverWith, run$1 as run, runEffects, sample$1 as sample, scan$1 as scan, since$1 as since, skip$1 as skip, skipAfter$1 as skipAfter, skipRepeats, skipRepeatsWith$1 as skipRepeatsWith, skipWhile$1 as skipWhile, slice$1 as slice, snapshot$1 as snapshot, startWith$1 as startWith, switchLatest, take$1 as take, takeWhile$1 as takeWhile, tap$1 as tap, throttle$1 as throttle, throwError, until$1 as until, withItems$1 as withItems, withLocalTime$1 as withLocalTime, zip$1 as zip, zipArray$1 as zipArray, zipItems$1 as zipItems };\n//# sourceMappingURL=index.es.js.map\n","import { loop } from \"@most/core\";\nexport function applyStyleBehavior(styleBehavior, node, styleEnv) {\n    let latestClass;\n    return loop((previousCssRule, styleObject) => {\n        if (previousCssRule) {\n            if (styleObject === null) {\n                node.element.classList.remove(previousCssRule);\n                return { seed: null, value: '' };\n            }\n            else {\n                const cashedCssClas = useStyleRule(styleEnv, styleObject);\n                if (previousCssRule !== cashedCssClas) {\n                    node.element.classList.replace(latestClass, cashedCssClas);\n                    latestClass = cashedCssClas;\n                    return { seed: cashedCssClas, value: cashedCssClas };\n                }\n            }\n        }\n        if (styleObject) {\n            const cashedCssClas = useStyleRule(styleEnv, styleObject);\n            node.element.classList.add(cashedCssClas);\n            latestClass = cashedCssClas;\n            return { seed: cashedCssClas, value: cashedCssClas };\n        }\n        return { seed: previousCssRule, value: '' };\n    }, null, styleBehavior);\n}\nfunction styleObjectAsString(styleObj) {\n    return Object.entries(styleObj)\n        .map(([key, val]) => {\n        const kebabCaseKey = key.replace(/([a-z])([A-Z])/g, \"$1-$2\").toLowerCase();\n        return `${kebabCaseKey}:${val};`;\n    })\n        .join(\"\");\n}\nexport function useStyleRule(cacheService, styleDefinition) {\n    const properties = styleObjectAsString(styleDefinition);\n    const cachedRuleIdx = cacheService.cache.indexOf(properties);\n    if (cachedRuleIdx === -1) {\n        const index = cacheService.stylesheet.cssRules.length;\n        const namespace = cacheService.namespace + index;\n        cacheService.cache.push(properties);\n        cacheService.stylesheet.insertRule(`.${namespace} {${properties}}`, index);\n        return `${cacheService.namespace + index}`;\n    }\n    return `${cacheService.namespace + cachedRuleIdx}`;\n}\nexport function useStylePseudoRule(cacheService, styleDefinition, pseudo = '') {\n    const properties = styleObjectAsString(styleDefinition);\n    const index = cacheService.stylesheet.cssRules.length;\n    const rule = `.${cacheService.namespace + index + pseudo} {${properties}}`;\n    const cachedRuleIdx = cacheService.cache.indexOf(rule);\n    if (cachedRuleIdx === -1) {\n        cacheService.cache.push(rule);\n        cacheService.stylesheet.insertRule(rule, index);\n        return `${cacheService.namespace + index}`;\n    }\n    return `${cacheService.namespace + cachedRuleIdx}`;\n}\n//# sourceMappingURL=styleUtils.js.map","import { compose, id } from '@most/prelude';\nimport { empty, never, run, startWith } from '@most/core';\nimport { disposeNone } from '@most/disposable';\nexport const xForver = (x) => startWith(x, never());\nexport function MaybeOp(a, b) {\n    return b ? compose(b, a) : a;\n}\nexport function isStream(s) {\n    return s instanceof Object && 'run' in s;\n}\nexport function isFunction(s) {\n    return s instanceof Function;\n}\nconst EMPTY = empty();\nexport function isEmpty(s) {\n    return s === EMPTY;\n}\nexport class Pipe {\n    constructor(sink) {\n        this.sink = sink;\n    }\n    end(t) {\n        return this.sink.end(t);\n    }\n    error(t, e) {\n        return this.sink.error(t, e);\n    }\n}\nexport function tryRunning(stream, sink, scheduler, time = scheduler.currentTime()) {\n    try {\n        return run(sink, scheduler, stream);\n    }\n    catch (e) {\n        sink.error(time, e);\n        return disposeNone();\n    }\n}\nexport const nullSink = {\n    // tslint:disable-next-line:no-empty\n    event() { },\n    // tslint:disable-next-line:no-empty\n    end() { },\n    // tslint:disable-next-line:no-empty\n    error(_, x) {\n        // tslint:disable-next-line: no-console\n        console.error(x);\n    }\n};\nexport const nullDisposable = {\n    // tslint:disable-next-line:no-empty\n    dispose() { }\n};\n// /* tslint:enable:max-line-length */\nexport function O(...fns) {\n    // @ts-ignore\n    return fns.length ? fns.reduceRight(compose) : id;\n}\n//# sourceMappingURL=utils.js.map","import { disposeNone } from '@most/disposable';\nexport default class SettableDisposable {\n    constructor(initialDiposable = disposeNone()) {\n        this.initialDiposable = initialDiposable;\n        this.disposed = false;\n    }\n    setDisposable(disposable) {\n        if (this.disposable !== undefined) {\n            throw new Error('setDisposable called more than once');\n        }\n        this.disposable = disposable;\n        if (this.disposed) {\n            disposable.dispose();\n        }\n    }\n    dispose() {\n        if (this.disposed) {\n            return;\n        }\n        this.disposed = true;\n        if (this.disposable !== undefined) {\n            this.initialDiposable.dispose();\n            this.disposable.dispose();\n        }\n    }\n}\n//# sourceMappingURL=SettableDisposable.js.map","import { newDefaultScheduler } from '@most/scheduler';\nimport { loop, map, mergeArray, tap } from '@most/core';\nimport { disposeAll, disposeNone, disposeWith } from '@most/disposable';\nimport { useStylePseudoRule, useStyleRule } from './utils/styleUtils';\nimport { nullSink } from './utils';\nimport SettableDisposable from './utils/SettableDisposable';\nfunction appendToSlot(parent, child, insertAt) {\n    if (insertAt === 0)\n        return parent.prepend(child);\n    parent.insertBefore(child, parent.children[insertAt]);\n}\nexport function runBrowser(config = {}) {\n    const composedConfig = {\n        style: {\n            namespace: '',\n            stylesheet: new CSSStyleSheet(),\n            behaviorStylesheet: new CSSStyleSheet(),\n            cache: []\n        },\n        rootNode: document.body,\n        scheduler: newDefaultScheduler(),\n        ...config\n    };\n    document.adoptedStyleSheets = [\n        ...document.adoptedStyleSheets,\n        composedConfig.style.stylesheet,\n        composedConfig.style.behaviorStylesheet,\n    ];\n    const rootNode = {\n        element: composedConfig.rootNode,\n        $segments: [],\n        disposable: new SettableDisposable(),\n        styleBehavior: [],\n        insertAscending: true,\n        attributesBehavior: [],\n        stylePseudo: []\n    };\n    return ($root) => {\n        const s = new BranchEffectsSink(composedConfig, rootNode, 0, [0]);\n        map(node => ({ ...node, segmentPosition: 0 }), $root)\n            .run(s, composedConfig.scheduler);\n    };\n}\nclass BranchEffectsSink {\n    constructor(env, parentNode, segmentPosition, segmentsCount) {\n        this.env = env;\n        this.parentNode = parentNode;\n        this.segmentPosition = segmentPosition;\n        this.segmentsCount = segmentsCount;\n        this.disposables = [];\n        this.segmentsSlotsMap = [];\n    }\n    event(_, node) {\n        try {\n            node === null || node === void 0 ? void 0 : node.disposable.setDisposable(disposeWith(node => {\n                this.segmentsCount[this.segmentPosition]--;\n                node.element.remove();\n                const slot = this.segmentsSlotsMap[this.segmentPosition];\n                const disposableBranch = slot.get(node);\n                slot.delete(node);\n                disposableBranch === null || disposableBranch === void 0 ? void 0 : disposableBranch.dispose();\n            }, node));\n        }\n        catch (e) {\n            console.error(node.element.nodeName);\n            throw new Error(`Cannot append node that have already been rendered, check invalid node operations under ^`);\n        }\n        let slot = 0;\n        for (let sIdx = 0; sIdx < this.segmentPosition; sIdx++) {\n            slot += this.segmentsCount[sIdx];\n        }\n        const insertAt = this.parentNode.insertAscending\n            ? slot\n            : slot + this.segmentsCount[this.segmentPosition];\n        appendToSlot(this.parentNode.element, node.element, insertAt);\n        this.segmentsCount[this.segmentPosition]++;\n        if ('style' in node && node.style && Object.keys(node.style).length) {\n            const selector = useStyleRule(this.env.style, node.style);\n            node.element.classList.add(selector);\n        }\n        if ('stylePseudo' in node) {\n            node.stylePseudo.forEach(styleDeclaration => {\n                const selector = useStylePseudoRule(this.env.style, styleDeclaration.style, styleDeclaration.class);\n                node.element.classList.add(selector);\n            });\n        }\n        if ('attributes' in node && node.attributes) {\n            if (Object.keys(node.attributes).length !== 0) {\n                applyAttrFn(node.attributes, node.element);\n            }\n        }\n        if ('styleBehavior' in node && node.styleBehavior) {\n            const disposeStyle = mergeArray(node.styleBehavior.map(sb => styleBehavior(sb, node, this.env.style))).run(nullSink, this.env.scheduler);\n            this.disposables.push(disposeStyle);\n        }\n        if ('attributesBehavior' in node && node.attributesBehavior) {\n            const disposeStyle = mergeArray(node.attributesBehavior.map(attrs => {\n                return tap((attr) => {\n                    applyAttrFn(attr, node.element);\n                }, attrs);\n            })).run(nullSink, this.env.scheduler);\n            this.disposables.push(disposeStyle);\n        }\n        const newDisp = '$segments' in node\n            ? new BranchChildrenSinkList(node.$segments, this.env, node)\n            : disposeNone();\n        if (!this.segmentsSlotsMap[this.segmentPosition]) {\n            this.segmentsSlotsMap[this.segmentPosition] = new Map();\n        }\n        this.segmentsSlotsMap[this.segmentPosition].set(node, disposeAll([...this.disposables, newDisp]));\n    }\n    end(_t) {\n        this.segmentsSlotsMap.forEach(s => {\n            s.forEach(d => d.dispose());\n        });\n    }\n    error(t, err) {\n        console.error(err);\n    }\n}\nclass BranchChildrenSinkList {\n    constructor($segments, env, node) {\n        this.env = env;\n        this.node = node;\n        this.disposables = new Map();\n        const l = $segments.length;\n        const segmentsCount = new Array(l).fill(0);\n        for (let i = 0; i < l; ++i) {\n            const $child = $segments[i];\n            const sink = new BranchEffectsSink(this.env, node, i, segmentsCount);\n            this.disposables.set($child, $child.run(sink, this.env.scheduler));\n        }\n    }\n    dispose() {\n        this.disposables.forEach(d => d.dispose());\n    }\n}\nfunction styleBehavior(styleBehavior, node, cacheService) {\n    let latestClass;\n    return loop((previousCssRule, styleObject) => {\n        if (previousCssRule) {\n            if (styleObject === null) {\n                node.element.classList.remove(previousCssRule);\n                return { seed: null, value: '' };\n            }\n            else {\n                const cashedCssClas = useStyleRule(cacheService, styleObject);\n                if (previousCssRule !== cashedCssClas) {\n                    node.element.classList.replace(latestClass, cashedCssClas);\n                    latestClass = cashedCssClas;\n                    return { seed: cashedCssClas, value: cashedCssClas };\n                }\n            }\n        }\n        if (styleObject) {\n            const cashedCssClas = useStyleRule(cacheService, styleObject);\n            node.element.classList.add(cashedCssClas);\n            latestClass = cashedCssClas;\n            return { seed: cashedCssClas, value: cashedCssClas };\n        }\n        return { seed: previousCssRule, value: '' };\n    }, null, styleBehavior);\n}\nexport function applyAttrFn(attrs, node) {\n    if (attrs) {\n        Object.entries(attrs).forEach(([attrKey, value]) => {\n            if (value === undefined || value === null) {\n                node.removeAttribute(attrKey);\n            }\n            else {\n                node.setAttribute(attrKey, String(value));\n            }\n        });\n    }\n    return node;\n}\n//# sourceMappingURL=run.js.map","import { join, map } from '@most/core';\nimport { curry2 } from '@most/prelude';\nexport function eventElementTarget(eventType, element, options = false) {\n    return {\n        run(sink, scheduler) {\n            const cb = (e) => sink.event(scheduler.currentTime(), e);\n            const removeListener = () => element.removeEventListener(eventType, cb, options);\n            element.addEventListener(eventType, cb, options);\n            return {\n                dispose() {\n                    removeListener();\n                }\n            };\n        }\n    };\n}\nexport const event = curry2((eventType, node) => {\n    return join(map(ns => eventElementTarget(eventType, ns.element, { capture: true }), node));\n});\n//# sourceMappingURL=event.js.map","import { disposeNone, disposeWith } from '@most/disposable';\nimport { remove } from '@most/prelude';\nimport { Pipe } from '../utils';\nclass SourceSink {\n    constructor(parent, sink) {\n        this.parent = parent;\n        this.sink = sink;\n        this.hasValue = false;\n    }\n    event(t, x) {\n        this.latestValue = x;\n        this.hasValue = true;\n        this.sink.event(t, x);\n        this.parent.tetherSinkList.forEach(s => s.event(t, x));\n    }\n    end(t) {\n        this.sink.end(t);\n    }\n    error(t, e) {\n        this.sink.error(t, e);\n    }\n}\nclass TetherSink extends Pipe {\n    constructor(sink) {\n        super(sink);\n        this.sink = sink;\n    }\n    event(t, x) {\n        this.sink.event(t, x);\n    }\n}\nclass Tether {\n    constructor(source) {\n        this.source = source;\n        this.sourceSinkList = [];\n        this.tetherSinkList = [];\n        this.disp = disposeNone();\n    }\n    run(sink, scheduler) {\n        if (sink instanceof SourceSink) {\n            this.sourceSinkList.push(sink);\n            this.disp.dispose();\n            const disposable = this.source.run(sink, scheduler);\n            this.disp = disposable;\n            return {\n                dispose: () => {\n                    const srcIdx = this.sourceSinkList.indexOf(sink);\n                    this.sourceSinkList.splice(srcIdx, 1);\n                    disposable.dispose();\n                }\n            };\n        }\n        this.tetherSinkList.push(sink);\n        this.sourceSinkList.forEach(s => {\n            if (s.hasValue) {\n                sink.event(scheduler.currentTime(), s.latestValue);\n            }\n        });\n        return disposeWith(([tetherSinkList, sourceTetherSink]) => {\n            sourceTetherSink.end(scheduler.currentTime());\n            const sinkIdx = tetherSinkList.indexOf(sourceTetherSink);\n            if (sinkIdx > -1) {\n                remove(sinkIdx, tetherSinkList);\n            }\n        }, [this.tetherSinkList, sink]);\n    }\n}\nexport const tether = (source) => {\n    const tetherSource = new Tether(source);\n    return [\n        {\n            run(sink, scheduler) {\n                return tetherSource.run(new SourceSink(tetherSource, sink), scheduler);\n            }\n        },\n        {\n            run(sink, scheduler) {\n                return tetherSource.run(new TetherSink(sink), scheduler);\n            }\n        }\n    ];\n};\n//# sourceMappingURL=tether.js.map","import { disposeWith } from '@most/disposable';\nimport { O } from '../utils';\nimport { tether } from '../combinators/tether';\nexport class BehaviorSource {\n    constructor() {\n        this.queuedSamplers = [];\n        this.sinks = new Map();\n        this.sample = (...ops) => {\n            return (sb) => {\n                const [source, tetherSource] = tether(sb);\n                // @ts-ignore\n                const bops = ops.length ? O(...ops)(tetherSource) : tetherSource;\n                this.queuedSamplers.push(bops);\n                this.sinks.forEach((sourcesMap, sink) => {\n                    sourcesMap.set(bops, this.runBehavior(sink, bops));\n                });\n                return source;\n            };\n        };\n    }\n    run(sink, scheduler) {\n        this.scheduler = scheduler;\n        const sourcesMap = new Map();\n        this.sinks.set(sink, sourcesMap);\n        this.queuedSamplers.forEach(s => {\n            sourcesMap.set(s, this.runBehavior(sink, s));\n        });\n        return disposeWith(([sinkSrc, sinkMap]) => {\n            var _a;\n            sinkSrc.end(scheduler.currentTime());\n            (_a = sinkMap.get(sinkSrc)) === null || _a === void 0 ? void 0 : _a.forEach(x => x === null || x === void 0 ? void 0 : x.dispose());\n            sinkMap.delete(sinkSrc);\n        }, [sink, this.sinks]);\n    }\n    runBehavior(sink, x) {\n        return x.run(sink, this.scheduler);\n    }\n}\nexport function behavior() {\n    const ss = new BehaviorSource();\n    return [ss, ss.sample];\n}\n//# sourceMappingURL=behavior.js.map","import { behavior } from '../source/behavior';\nimport { disposeAll, disposeWith } from '@most/disposable';\nimport { curry2 } from '@most/prelude';\nimport { nullSink } from '../utils';\nexport function componentFn(inputComp, outputTethers) {\n    return {\n        run(sink, scheduler) {\n            // fill stubbed aguments as a behavior\n            const behaviors = Array(inputComp.length).fill(null).map(behavior);\n            const [view, outputSources] = inputComp(...behaviors);\n            const outputDisposables = [];\n            if (outputTethers) {\n                for (const k in outputTethers) {\n                    if (outputTethers[k] && outputSources) {\n                        const consumerSampler = outputTethers[k];\n                        if (consumerSampler) {\n                            const componentOutputBehavior = outputSources[k];\n                            const outputDisposable = consumerSampler(componentOutputBehavior).run(nullSink, scheduler);\n                            outputDisposables.push(outputDisposable);\n                        }\n                    }\n                }\n            }\n            return disposeAll([\n                disposeWith(() => {\n                    sink.end(scheduler.currentTime());\n                }, null),\n                view.run(sink, scheduler),\n                ...outputDisposables,\n            ]);\n        }\n    };\n}\nexport const component = curry2(componentFn);\n//# sourceMappingURL=component.js.map","import { map, never, switchLatest } from '@most/core';\nimport { id } from '@most/prelude';\nimport { isFunction, O } from '../utils';\nimport SettableDisposable from '../utils/SettableDisposable';\nexport const $svg = branch((a) => document.createElementNS('http://www.w3.org/2000/svg', a));\nexport const $element = branch((a) => document.createElement(a));\nexport const $custom = branch((a) => document.createElement(a));\nexport const $node = $custom('node');\nexport const $wrapNativeElement = branch((rootNode) => rootNode);\n// childless nodes\nexport const $text = $textFn(id);\nexport class NodeSource {\n    constructor(sourceValue, sourceOp, $segments) {\n        this.sourceValue = sourceValue;\n        this.sourceOp = sourceOp;\n        this.$segments = $segments;\n    }\n    run(sink, scheduler) {\n        const element = this.sourceOp(this.sourceValue);\n        const $segments = this.$segments;\n        const disposable = new SettableDisposable();\n        sink.event(scheduler.currentTime(), {\n            $segments, element, disposable,\n            styleBehavior: [],\n            insertAscending: true,\n            attributesBehavior: [],\n            stylePseudo: []\n        });\n        return disposable;\n    }\n}\nfunction node(text) {\n    return {\n        run(sink, scheduler) {\n            const element = document.createTextNode(text);\n            const disposable = new SettableDisposable();\n            sink.event(scheduler.currentTime(), { element, disposable });\n            return disposable;\n        }\n    };\n}\nexport function branch(sourceOp, postOp = id) {\n    return (sourceOpValue) => {\n        return function nodeComposeFn(...input) {\n            if (input.some(isFunction))\n                // @ts-ignore\n                return branch(sourceOp, O(postOp, ...input))(sourceOpValue);\n            const $segments = input.length ? input : [never()];\n            const $branch = new NodeSource(sourceOpValue, sourceOp, $segments);\n            return postOp($branch);\n        };\n    };\n}\nfunction $textFn(postOp = O(x => x)) {\n    return function textComp(...input) {\n        if (input.some(isFunction))\n            // @ts-ignore\n            return $textFn(O(postOp, ...input));\n        const children = input.map((x) => {\n            return typeof x === 'string' ? node(x) : switchLatest(map(node, x));\n        });\n        return branch(() => document.createElement('text'), postOp)(null)(...children);\n    };\n}\n//# sourceMappingURL=node.js.map","import { filter, map, tap } from '@most/core';\nimport { curry2, curry3 } from '@most/prelude';\nfunction styleFn(styleInput, source) {\n    return map(node => ({ ...node, style: { ...node.style, ...styleInput } }), source);\n}\nfunction stylePseudoFn(pseudoClass, styleInput, source) {\n    return map(node => ({\n        ...node,\n        stylePseudo: [\n            ...node.stylePseudo,\n            {\n                class: pseudoClass,\n                style: styleInput\n            }\n        ]\n    }), source);\n}\nfunction styleBehaviorFn(style, $node) {\n    return map(node => ({ ...node, styleBehavior: [...node.styleBehavior, style] }), $node);\n}\nexport const styleInline = (style) => ($node) => {\n    return map(node => {\n        const applyInlineStyleStream = tap((styleObj) => {\n            for (const prop in styleObj) {\n                if (Object.prototype.hasOwnProperty.call(styleObj, prop)) {\n                    // @ts-ignore\n                    const val = styleObj[prop];\n                    // @ts-ignore\n                    node.element.style[prop] = val;\n                }\n            }\n        }, style);\n        return { ...node, styleBehavior: [...node.styleBehavior, filter(() => false, applyInlineStyleStream)] };\n    }, $node);\n};\n// applyStyle\nexport const style = curry2(styleFn);\nexport const stylePseudo = curry3(stylePseudoFn);\nexport const styleBehavior = curry2(styleBehaviorFn);\n//# sourceMappingURL=style.js.map","import { constant, filter, join, map, skipRepeatsWith, switchLatest, tap, until } from '@most/core';\nimport { O } from '@aelea/core';\nexport const create = ({ fragment = '', fragmentsChange, title }) => {\n    const ignoreRepeatPathChanges = skipRepeatsWith((next, prev) => {\n        return next.length === prev.length && next.every((f, i) => f === prev[i]);\n    }, fragmentsChange);\n    return resolveRoute(ignoreRepeatPathChanges, [])({ fragment, title });\n};\nfunction resolveRoute(pathChange, parentFragments) {\n    return ({ fragment, title }) => {\n        const fragments = [...parentFragments, fragment];\n        const fragIdx = parentFragments.length;\n        const diff = O(skipRepeatsWith((prev, next) => {\n            return next[fragIdx] === prev[fragIdx];\n        }));\n        const contains = O(diff, filter(next => {\n            return isMatched(fragment, next[fragIdx]);\n        }));\n        const match = O(map((evt) => {\n            const lastTarget = evt.slice(-1)[0];\n            return isMatched(fragment, lastTarget);\n        }), tap(isMatched => {\n            if (isMatched) {\n                document.title = title || '';\n            }\n        }));\n        const miss = O(diff, filter(next => !isMatched(fragment, next[fragIdx])));\n        return {\n            create: resolveRoute(pathChange, fragments),\n            contains: contains(pathChange),\n            match: match(pathChange),\n            miss: miss(pathChange),\n            fragments\n        };\n    };\n}\nexport function isMatched(frag, path) {\n    if (frag instanceof RegExp) {\n        return Boolean(path === null || path === void 0 ? void 0 : path.match(frag));\n    }\n    return frag === path;\n}\nexport const contains = (route) => (ns) => {\n    return switchLatest(constant(until(route.miss, ns), route.contains));\n};\nexport const match = (route) => (ns) => {\n    const exactMatch = filter(isMatch => isMatch, route.match);\n    const unmatch = filter(isMatch => !isMatch, route.match);\n    return join(constant(until(unmatch, ns), exactMatch));\n};\n//# sourceMappingURL=resolveUrl.js.map","import { map } from '@most/core';\nimport { curry2 } from '@most/prelude';\nexport const attr = curry2((attrs, source) => map(ns => ({ ...ns, attributes: { ...ns.attributes, ...attrs } }), source));\nexport const attrBehavior = curry2((attrs, source) => map(ns => ({ ...ns, attributesBehavior: [...ns.attributesBehavior, attrs] }), source));\n//# sourceMappingURL=attribute.js.map","import { component, attr, event, style, $element } from \"@aelea/core\";\nimport { constant, map, merge, startWith } from \"@most/core\";\nconst $anchor = $element('a')(style({ textDecoration: 'none', }));\nexport const $Anchor = ({ url, route, $content }) => component(([click, clickTether], [focus, focusTether]) => {\n    const trailingSlash = /\\/$/;\n    const href = url.replace(trailingSlash, '');\n    const contains = merge(constant(true, route.contains), constant(false, route.miss));\n    return [\n        $anchor(attr({ href }), clickTether(event('click'), map((clickEv) => {\n            clickEv.preventDefault();\n            const pathName = clickEv.currentTarget instanceof HTMLAnchorElement ? clickEv.currentTarget.pathname : null;\n            if (pathName) {\n                // avoid repeated adjacent states\n                if (location.pathname !== pathName) {\n                    history.pushState(null, '', pathName);\n                }\n                return pathName;\n            }\n            else {\n                throw new Error('target anchor contains no href');\n            }\n        })), focusTether($anchor => {\n            const focus = constant(true, merge(event('focus', $anchor), event('pointerenter', $anchor)));\n            const blur = constant(false, merge(event('blur', $anchor), event('pointerleave', $anchor)));\n            return startWith(false, merge(focus, blur));\n        }))($content),\n        { click, match: route.match, contains, focus }\n    ];\n});\n//# sourceMappingURL=$Anchor.js.map","export const THEME_PALLETE_SELECTED_KEY = `!!THEME_PALLETE_SELECTED_KEY`;\nexport function changeTheme(name, pallete) {\n    const newTheme = { name, pallete };\n    localStorage.setItem(THEME_PALLETE_SELECTED_KEY, JSON.stringify(newTheme));\n    Object.assign(theme, newTheme);\n    self.location.reload();\n}\nexport const selected = JSON.parse(localStorage.getItem(THEME_PALLETE_SELECTED_KEY));\nif (selected === null) {\n    console.error('No theme as been assigned to localstorage');\n}\n// validateRGBPallete(selected.pallete)\nexport const theme = selected;\nexport const pallete = theme.pallete;\n//# sourceMappingURL=staticThemeService.js.map","import { O, style } from \"@aelea/core\";\nconst stretch = style({\n    position: 'absolute',\n    top: '0',\n    bottom: '0',\n    right: '0',\n    left: '0'\n});\nconst spacingTiny = style({\n    gap: '4px'\n});\nconst spacingSmall = style({\n    gap: '8px'\n});\nconst spacing = style({\n    gap: '16px'\n});\nconst spacingBig = style({\n    gap: '26px'\n});\nconst flex = style({ flex: 1 });\nconst displayFlex = style({ display: 'flex' });\nconst row = O(displayFlex, style({ flexDirection: 'row' }));\nconst column = O(displayFlex, style({ flexDirection: 'column' }));\nconst rowFlex = O(row, flex);\nconst columnFlex = O(column, flex);\nexport default {\n    stretch, spacingTiny, spacingSmall, spacing, spacingBig, flex, displayFlex, row, column, rowFlex, columnFlex\n};\n//# sourceMappingURL=layoutSheet.js.map","import { $custom, $node, style } from '@aelea/core';\nimport { pallete } from '@aelea/ui-components-theme';\nimport layoutSheet from '../style/layoutSheet';\nexport const $row = $custom('row')(layoutSheet.row);\nexport const $column = $custom('column')(layoutSheet.column);\nexport const elevation1 = style({ border: `1px solid ${pallete.horizon}` });\nexport const elevation2 = style({ boxShadow: '0px 1px 1px rgba(0, 0, 0, 0.14), 0px 2px 1px rgba(0, 0, 0, 0.12), 0px 1px 3px rgba(0, 0, 0, 0.2)', });\nexport const elevation3 = style({ boxShadow: '0px 2px 2px rgba(0, 0, 0, 0.14), 0px 3px 1px rgba(0, 0, 0, 0.12), 0px 1px 5px rgba(0, 0, 0, 0.2)', });\nexport const elevation4 = style({ boxShadow: '0px 3px 4px rgba(0, 0, 0, 0.14), 0px 3px 3px rgba(0, 0, 0, 0.12), 0px 1px 8px rgba(0, 0, 0, 0.2)', });\nexport const elevation6 = style({ boxShadow: '0px 6px 10px rgba(0, 0, 0, 0.14), 0px 1px 18px rgba(0, 0, 0, 0.12), 0px 3px 5px rgba(0, 0, 0, 0.2)', });\nexport const elevation12 = style({ boxShadow: '0px 12px 17px rgba(0, 0, 0, 0.14), 0px 5px 22px rgba(0, 0, 0, 0.12), 0px 7px 8px rgba(0, 0, 0, 0.2)', });\nexport const $card = $column(elevation2, style({\n    padding: '16px',\n    backgroundColor: pallete.background,\n}));\nexport const $seperator = $node(style({\n    minHeight: '1px',\n    minWidth: '1px',\n    background: pallete.foreground\n}))();\n//# sourceMappingURL=$elements.js.map","import { $svg, attr, style } from \"@aelea/core\";\nexport const $icon = ({ $content, width = 24, height = width, viewBox = `0 0 ${width} ${height}`, fill = 'inherit' }) => ($svg('svg')(attr({ viewBox, width, height }), style({ fill }))($content));\n//# sourceMappingURL=$icon.js.map","import { $svg, attr } from \"@aelea/core\"\n\n\n\nexport const $trash = $svg('path')(\n  attr({\n    d: 'M6.24 18.84A2.16 2.16 0 008.4 21h7.2a2.16 2.16 0 002.16-2.16L19.2 7.32H4.8l1.44 11.52zm7.92-9.36h1.44v9.36h-1.44V9.48zm-2.88 0h1.44v9.36h-1.44V9.48zm-2.88 0h1.44v9.36H8.4V9.48zm10.44-5.04h-4.68S13.838 3 13.44 3h-2.88c-.398 0-.72 1.44-.72 1.44H5.16a1.08 1.08 0 00-1.08 1.08V6.6h15.84V5.52a1.08 1.08 0 00-1.08-1.08z'\n  })\n)()\n\nexport const $aeleaLogo = $svg('path')(\n  attr({\n    d: 'M17.648 58.063l-.046 1.64c0 1.219.343 1.992 1.03 2.32.266.125.571.188.915.188.547 0 1.11-.125 1.687-.375-.593.25-1.109.578-1.547.984-.437.407-.882.805-1.335 1.196-1.125.937-2.258 1.406-3.399 1.406-1.14 0-1.75-.656-1.828-1.969a11.402 11.402 0 01-.047-1.031c-2.812 1.953-5.39 2.93-7.734 2.93-1.985 0-3.36-.602-4.125-1.805-.282-.438-.422-1.04-.422-1.805 0-.765.234-1.531.703-2.297a9.178 9.178 0 011.781-2.133c1.281-1.187 2.828-2.164 4.64-2.93 1.345-.577 3.071-.905 5.18-.984v-1.03c0-2.485-.226-4.165-.68-5.04-.452-.875-1.038-1.516-1.757-1.922-.719-.422-1.562-.633-2.531-.633-1.64 0-3.086.32-4.336.961 1.719-1.422 2.976-2.359 3.773-2.812 1.64-.922 3.125-1.383 4.453-1.383 1.344 0 2.352.195 3.024.586a4.45 4.45 0 011.594 1.547c.672 1.125 1.007 2.742 1.007 4.851v9.54zM6.633 61.437c.375.266.812.461 1.312.586.5.125 1.242.188 2.227.188.984 0 1.96-.234 2.93-.703v-4.922H9.305c-1.36 0-2.547.094-3.563.281a6.641 6.641 0 00-.304 1.922c0 .61.101 1.133.304 1.57.219.438.516.797.89 1.078zM128.352 58.063l.046 1.64c0 1.219-.343 1.992-1.031 2.32a2.12 2.12 0 01-.914.188c-.547 0-1.109-.125-1.687-.375.593.25 1.109.578 1.546.984.438.407.883.805 1.336 1.196 1.125.937 2.258 1.406 3.399 1.406s1.75-.656 1.828-1.969c.031-.344.047-.687.047-1.031 2.812 1.953 5.39 2.93 7.734 2.93 1.985 0 3.36-.602 4.125-1.805.281-.438.422-1.04.422-1.805 0-.765-.234-1.531-.703-2.297a9.177 9.177 0 00-1.781-2.133c-1.281-1.187-2.828-2.164-4.641-2.93-1.344-.577-3.07-.905-5.18-.984v-1.03c0-2.485.227-4.165.68-5.04.453-.875 1.039-1.516 1.758-1.922.719-.422 1.562-.633 2.531-.633 1.641 0 3.086.32 4.336.961-1.719-1.422-2.976-2.359-3.773-2.812-1.641-.922-3.125-1.383-4.453-1.383-1.344 0-2.352.195-3.024.586a4.453 4.453 0 00-1.594 1.547c-.671 1.125-1.007 2.742-1.007 4.851v9.54zm11.015 3.374c-.375.266-.812.461-1.312.586-.5.125-1.243.188-2.227.188-.984 0-1.961-.234-2.93-.703v-4.922h3.797c1.36 0 2.547.094 3.563.281.203.672.304 1.313.304 1.922 0 .61-.101 1.133-.304 1.57a3.008 3.008 0 01-.891 1.078zM55.063 59.219c-2.855 3.187-6.396 5.177-10.626 5.968-.979.167-2.187.25-3.624.25-1.438 0-2.792-.395-4.063-1.187a10.166 10.166 0 01-3.125-3.125c-1.542-2.458-2.313-5.458-2.313-9 0-2.333.896-4.917 2.688-7.75 1.75-2.792 3.885-5.125 6.406-7 2.709-2 5.271-3 7.688-3 1.25 0 2.302.458 3.156 1.375.792.896 1.188 1.917 1.188 3.063 0 1.145-.25 2.208-.75 3.187-.5.958-1.157 1.896-1.97 2.813a22.319 22.319 0 01-2.75 2.656 42.65 42.65 0 01-3.156 2.343c-1.52 1.042-3.437 2.22-5.75 3.532.667 2.52 1.844 4.468 3.532 5.843 1.687 1.355 3.864 2.032 6.531 2.032 2.25 0 4.563-.667 6.938-2zm-9.438-12.532c.563-.895.844-1.77.844-2.624 0-.855-.094-1.573-.282-2.157a5.005 5.005 0 00-.812-1.593c-.813-1.042-1.865-1.563-3.156-1.563-3.167 0-4.75 3.23-4.75 9.688 0 1.145.093 2.28.281 3.406 3.667-1.021 6.292-2.74 7.875-5.157zM90.938 59.219c2.854 3.187 6.395 5.177 10.624 5.968.98.167 2.188.25 3.626.25 1.437 0 2.791-.395 4.062-1.187a10.17 10.17 0 003.125-3.125c1.542-2.458 2.313-5.458 2.313-9 0-2.333-.896-4.917-2.688-7.75-1.75-2.792-3.885-5.125-6.406-7-2.709-2-5.271-3-7.688-3-1.25 0-2.302.458-3.156 1.375-.792.896-1.188 1.917-1.188 3.063 0 1.145.25 2.208.75 3.187.5.958 1.157 1.896 1.97 2.813a22.32 22.32 0 002.75 2.656 42.517 42.517 0 003.156 2.343c1.52 1.042 3.437 2.22 5.75 3.532-.667 2.52-1.844 4.468-3.532 5.843-1.687 1.355-3.864 2.032-6.531 2.032-2.25 0-4.563-.667-6.938-2zm9.437-12.532c-.563-.895-.844-1.77-.844-2.624 0-.855.094-1.573.281-2.157a5.01 5.01 0 01.813-1.593c.813-1.042 1.865-1.563 3.156-1.563 3.167 0 4.75 3.23 4.75 9.688a20.63 20.63 0 01-.281 3.406c-3.667-1.021-6.292-2.74-7.875-5.157zM81.375 65.125a54.597 54.597 0 00-1.969 1.625 15.52 15.52 0 01-1.937 1.438c-1.48.958-3.01 1.437-4.594 1.437-2.292 0-3.542-1.583-3.75-4.75a51.288 51.288 0 01-.063-2.5V28.937c0-2.854-.645-4.708-1.937-5.562-.542-.375-1.063-.563-1.563-.563-.666 0-1.114.021-1.343.063-.23.02-.427.042-.594.063 3-2.084 4.896-3.334 5.688-3.75a92.84 92.84 0 013.218-1.657c1.125-.562 1.99-1 2.594-1.312v45.5c.02.729.146 1.364.375 1.906.52 1.125 1.833 1.688 3.938 1.688.666 0 1.312-.063 1.937-.188z'\n  })\n)()\n\nexport const $github = $svg('path')(\n  attr({\n    d: 'M512 0C229.12 0 0 229.12 0 512c0 226.56 146.56 417.92 350.08 485.76 25.6 4.48 35.2-10.88 35.2-24.32 0-12.16-.64-52.48-.64-95.36-128.64 23.68-161.92-31.36-172.16-60.16-5.76-14.72-30.72-60.16-52.48-72.32-17.92-9.6-43.52-33.28-.64-33.92 40.32-.64 69.12 37.12 78.72 52.48 46.08 77.44 119.68 55.68 149.12 42.24 4.48-33.28 17.92-55.68 32.64-68.48-113.92-12.8-232.96-56.96-232.96-252.8 0-55.68 19.84-101.76 52.48-137.6-5.12-12.8-23.04-65.28 5.12-135.68 0 0 42.88-13.44 140.8 52.48 40.96-11.52 84.48-17.28 128-17.28 43.52 0 87.04 5.76 128 17.28 97.92-66.56 140.8-52.48 140.8-52.48 28.16 70.4 10.24 122.88 5.12 135.68 32.64 35.84 52.48 81.28 52.48 137.6 0 196.48-119.68 240-233.6 252.8 18.56 16 34.56 46.72 34.56 94.72 0 68.48-.64 123.52-.64 140.8 0 13.44 9.6 29.44 35.2 24.32C877.44 929.92 1024 737.92 1024 512 1024 229.12 794.88 0 512 0z'\n  })\n)()\n\n\n","import { currentTime, } from '@most/scheduler';\nimport { skipAfter, map, continueWith, constant, switchLatest, loop, startWith } from '@most/core';\nimport { O } from '../utils';\nimport { disposeWith } from '@most/disposable';\nimport { compose, curry3 } from '@most/prelude';\n// copied & modified from https://github.com/mostjs/x-animation-frame/tree/master\nclass AnimationFrameSource {\n    constructor(afp) {\n        this.afp = afp;\n    }\n    run(sink, scheduler) {\n        const requestTime = currentTime(scheduler);\n        const propagate = () => eventThenEnd(requestTime, currentTime(scheduler), sink);\n        const rafId = this.afp.requestAnimationFrame(propagate);\n        return disposeWith(fid => this.afp.cancelAnimationFrame(fid), rafId);\n    }\n}\nconst eventThenEnd = (requestTime, responseTime, sink) => {\n    sink.event(requestTime, { requestTime, responseTime });\n    sink.end(requestTime);\n};\nexport const nextAnimationFrame = (afp = window) => new AnimationFrameSource(afp);\nexport const animationFrames = (afp = window) => continueWith(() => animationFrames(afp), nextAnimationFrame(afp));\nexport const drawLatest = compose(\n// @ts-ignore\nswitchLatest, map(x => constant(x, nextAnimationFrame(window))));\nexport const MOTION_NO_WOBBLE = { stiffness: 170, damping: 26, precision: .01 };\nexport const MOTION_GENTLE = { stiffness: 120, damping: 14, precision: .01 };\nexport const MOTION_WOBBLY = { stiffness: 180, damping: 12, precision: .01 };\nexport const MOTION_STIFF = { stiffness: 210, damping: 20, precision: .01 };\n/**\n * adapting to motion changes using \"spring physics\"\n *\n * @param initialPositon - animation starting position to animate from\n * @param motionEnvironment - config spring metrics.\n *\n *  noWobble =  stiffness 170 damping 26\n *\n *  gentle =    stiffness 120 damping 14\n *\n *  wobbly =    stiffness 180 damping 12\n *\n *  stiff =     stiffness 210 damping 20\n *\n *  @see  modified-from https://github.com/chenglou/react-motion/blob/master/src/stepper.js\n */\nexport const motion = curry3((motionEnvironment, initialState, change) => {\n    const motionEnv = { ...MOTION_STIFF, ...motionEnvironment };\n    const ma = motionState(motionEnv, { position: initialState, velocity: 0 }, change);\n    return map(s => s.position, ma);\n});\n// used in cases where velocity feedback is needed(for renimation)\nexport const motionState = curry3((motionEnvironment, initialState, change) => {\n    const motionEnv = { ...MOTION_STIFF, ...motionEnvironment };\n    return O(loop((seed, target) => {\n        const frames = O(map(() => stepFrame(target, seed, motionEnv)), skipAfter(n => n.position === target));\n        return { seed, value: frames(animationFrames()) };\n    }, initialState), switchLatest, startWith(initialState))(change);\n});\nfunction stepFrame(target, state, motionEnv) {\n    const fps = 1 / 60;\n    const delta = target - state.position;\n    const spring = motionEnv.stiffness * delta;\n    const damper = motionEnv.damping * state.velocity;\n    const acceleration = spring - damper;\n    const newVelocity = state.velocity + (acceleration * fps);\n    const newPosition = state.position + (newVelocity * fps);\n    const settled = Math.abs(newVelocity) < motionEnv.precision && Math.abs(delta) < motionEnv.precision;\n    state.velocity = newVelocity;\n    state.position = settled ? target : newPosition;\n    return state;\n}\n//# sourceMappingURL=animate.js.map","import { $Node, motion, styleInline } from \"@aelea/core\"\nimport { combine, continueWith, now } from \"@most/core\"\n\nexport function fadeIn($content: $Node) {\n  const fadeIn = motion({ stiffness: 70, damping: 26, precision: 3 }, 0, now(100))\n  const slideIn = motion({ stiffness: 270, damping: 46, precision: 3 }, 25, now(0))\n\n  const removeStyle = continueWith(() => now({ opacity: null, transform: null }))\n\n  const animation = styleInline(\n    removeStyle(\n      combine((opacity, slide) => ({ opacity: `${opacity}%`, transform: `translate(0, ${slide}px)` }), fadeIn, slideIn)\n    )\n  )\n\n  return animation(\n    $content\n  )\n}","\nimport { $Branch, component, style } from '@aelea/core'\nimport { $column, layoutSheet } from '@aelea/ui-components'\nimport { fadeIn } from './transitions/enter'\n\n\ninterface Example {\n  file: string,\n}\n\nexport default (config: Example) => (...$content: $Branch[]) => component(() => {\n\n  return [\n    fadeIn(\n      $column(layoutSheet.spacingBig, style({ flex: 1 }))(\n        ...$content\n      )\n    )\n  ]\n})\n\n","import { component, Behavior, O, styleBehavior, StyleCSS, style } from \"@aelea/core\"\nimport { IAnchor, $Anchor } from \"@aelea/router\"\nimport { combine } from \"@most/core\"\nimport { pallete } from \"@aelea/ui-components-theme\"\n\n\n\nexport interface ILink extends IAnchor {\n  styles?: StyleCSS\n}\n\nexport const $Link = ({ url, route, $content, styles = {} }: ILink) => component((\n  [click, clickTether]: Behavior<string, string>,\n  [active, containsTether]: Behavior<boolean, boolean>,\n  [focus, focusTether]: Behavior<boolean, boolean>,\n) => {\n\n  const anchorOps = O(\n    style({\n      color: pallete.message,\n      padding: '2px 4px',\n      ...styles,\n    }),\n    styleBehavior(\n      combine((isActive, isFocus): StyleCSS | null => {\n        return isActive ? { color: pallete.primary, cursor: 'default' }\n          : isFocus ? { backgroundColor: pallete.primary }\n            : null\n      }, active, focus)\n    )\n  )\n\n  return [\n    anchorOps(\n      $Anchor({ $content, url, route })({\n        click: clickTether(),\n        focus: focusTether(),\n        contains: containsTether()\n      })\n    ),\n\n    { click, active, focus }\n  ]\n})","import { Pipe } from \"@aelea/core\";\nimport { filter } from \"@most/core\";\nimport { merge } from \"@most/core\";\nimport { combineArray, multicast, startWith } from \"@most/core\";\nimport { curry2 } from \"@most/prelude\";\nclass StateSink extends Pipe {\n    constructor(parent, sink) {\n        super(sink);\n        this.parent = parent;\n        this.sink = sink;\n    }\n    event(t, x) {\n        this.parent.latestvalue = x;\n        this.parent.hasValue = true;\n        this.sink.event(t, x);\n    }\n}\nexport class ReplayLatest {\n    constructor(source, initialState) {\n        this.source = source;\n        this.initialState = initialState;\n        this.hasValue = false;\n        this.hasInitial = arguments.length === 2;\n    }\n    run(sink, scheduler) {\n        const startWithReplay = this.hasValue\n            ? startWith(this.latestvalue)\n            : this.hasInitial\n                ? startWith(this.initialState)\n                : null;\n        const withReplayedValue = startWithReplay ? startWithReplay(this.source) : this.source;\n        return withReplayedValue.run(new StateSink(this, sink), scheduler);\n    }\n}\nexport function replayLatest(s, initialState) {\n    if (arguments.length === 1) {\n        return new ReplayLatest(s);\n    }\n    else {\n        return new ReplayLatest(s, initialState);\n    }\n}\nexport function combineState(state) {\n    const entries = Object.entries(state);\n    const streams = entries.map(([_, stream]) => stream);\n    const combinedWithInitial = combineArray((...arrgs) => {\n        return arrgs.reduce((seed, val, idx) => {\n            const key = entries[idx][0];\n            seed[key] = val;\n            return seed;\n        }, {});\n    }, streams);\n    return combinedWithInitial;\n}\n// temorary typings fix for this issue https://github.com/mostjs/core/pull/543\nexport function combineArrayMap(cb, ...streamList) {\n    return combineArray(cb, streamList);\n}\nexport const localStorageTreeFactory = (rootChainKey) => (key, initialDefaultState) => {\n    const mktTree = `${rootChainKey}.${key}`;\n    const storeData = localStorage.getItem(mktTree);\n    const initialState = storeData ? JSON.parse(storeData) : initialDefaultState;\n    const storeCurry = curry2((writePipe = (x => x), stream) => {\n        const multicastSource = multicast(stream);\n        const writeOp = writePipe(multicastSource);\n        // ignore \n        const writeEffect = filter(state => {\n            scope.state = state;\n            localStorage.setItem(mktTree, JSON.stringify(state));\n            return false;\n        }, writeOp);\n        return merge(writeEffect, multicastSource);\n    });\n    let _state = initialState;\n    const scope = {\n        get state() {\n            return _state;\n        },\n        set state(newState) {\n            _state = newState;\n        },\n        store: storeCurry,\n        craete: localStorageTreeFactory(mktTree)\n    };\n    return scope;\n};\n//# sourceMappingURL=state.js.map","import { chain } from \"@most/core\";\nimport { disposeWith } from \"@most/disposable\";\nexport const intersection = (config = {}) => chain((node) => ({\n    run(sink, scheduler) {\n        const intersectionObserver = new IntersectionObserver(entries => {\n            sink.event(scheduler.currentTime(), entries);\n        }, config);\n        intersectionObserver.observe(node.element);\n        return disposeWith(([instance, el]) => instance.unobserve(el), [intersectionObserver, node.element]);\n    }\n}));\nexport const resize = (config = {}) => chain((node) => ({\n    run(sink, scheduler) {\n        const ro = new ResizeObserver(entries => {\n            sink.event(scheduler.currentTime(), entries);\n        });\n        ro.observe(node.element, config);\n        return disposeWith(([instance, el]) => instance.unobserve(el), [ro, node.element]);\n    }\n}));\nexport const mutation = (config = { attributes: true, childList: false, subtree: false }) => chain((node) => ({\n    run(sink, scheduler) {\n        const ro = new MutationObserver(entries => {\n            sink.event(scheduler.currentTime(), entries);\n        });\n        ro.observe(node.element, config);\n        return disposeWith(instance => instance.disconnect(), ro);\n    }\n}));\n//# sourceMappingURL=elementObservers.js.map","export function convertHexToRGBA(hexCode, opacity = 1) {\n    let hex = hexCode.replace('#', '');\n    if (hex.length === 3) {\n        hex = `${hex[0]}${hex[0]}${hex[1]}${hex[1]}${hex[2]}${hex[2]}`;\n    }\n    const r = parseInt(hex.substring(0, 2), 16);\n    const g = parseInt(hex.substring(2, 4), 16);\n    const b = parseInt(hex.substring(4, 6), 16);\n    return `rgba(${r},${g},${b},${opacity / 100})`;\n}\nconst validRGB = /rgba\\((\\s*\\d+\\s*,){3}[\\d.]+\\)/;\nexport function hexAlpha(color, opacity) {\n    const isRgb = validRGB.test(color);\n    if (isRgb) {\n        return color.replace(/[^,]+(?=\\))/, String(opacity));\n    }\n    else {\n        return hexAlpha(convertHexToRGBA(color), opacity);\n    }\n}\n//# sourceMappingURL=color.js.map","import { $node, component, event, O, style, styleBehavior } from \"@aelea/core\";\nimport { pallete } from \"@aelea/ui-components-theme\";\nimport { constant, empty, map, merge, multicast, switchLatest, until } from \"@most/core\";\nimport { observer } from \"../..\";\nimport { hexAlpha } from \"../../utils/color\";\nimport { combineArrayMap } from \"../../utils/state\";\nexport const $Popover = ({ $$popContent, offset = 16, padding = 24, dismiss = empty() }) => ($target) => component(([overlayClick, overlayClickTether], [targetIntersection, targetIntersectionTether], [popoverContentDimension, popoverContentDimensionTether], [popoverContentIntersection, popoverContentIntersectionTether]) => {\n    const $$popContentMulticast = multicast($$popContent);\n    const $overlay = $node(style({\n        position: 'absolute',\n        top: 0, left: 0, right: 0, bottom: 0\n    }), overlayClickTether(event('click')), styleBehavior(combineArrayMap(([contentResize], [intersectionContentRect], [IntersectiontargetRect]) => {\n        const { y, x } = IntersectiontargetRect.intersectionRect;\n        const width = Math.max(contentResize.contentRect.width, IntersectiontargetRect.intersectionRect.width) + (padding * 2) + offset;\n        const height = contentResize.contentRect.height + IntersectiontargetRect.intersectionRect.height + offset;\n        const left = x + (IntersectiontargetRect.intersectionRect.width / 2) + 'px';\n        const top = y + (height / 2) + 'px';\n        return {\n            backgroundImage: `radial-gradient(${width}px ${height}px at top ${top} left ${left}, ${pallete.background} ${width / 2}px, ${hexAlpha(pallete.horizon, .65)})`,\n            // backdropFilter: 'blur(2px)'\n        };\n    }, popoverContentDimension, popoverContentIntersection, targetIntersection)));\n    const contentOps = O(popoverContentIntersectionTether(observer.intersection()), popoverContentDimensionTether(observer.resize({})), styleBehavior(map(([rect]) => {\n        const { y, x, width, bottom } = rect.intersectionRect;\n        const bottomSpace = window.innerHeight - bottom;\n        const topSpace = bottom;\n        const isUp = bottomSpace > topSpace;\n        const top = (isUp ? topSpace + offset : y - offset) + 'px';\n        const left = x + (width / 2) + 'px';\n        return {\n            top, left,\n            opacity: 1,\n            transform: `translate(-50%, ${isUp ? '0' : '-100%'})`\n        };\n    }, targetIntersection)), style({ zIndex: 1000, position: 'absolute', opacity: 0 }));\n    const dismissOverlay = until(merge(overlayClick, dismiss));\n    const $popover = switchLatest(map($content => {\n        return dismissOverlay(merge(contentOps($content), $overlay()));\n    }, $$popContentMulticast));\n    const targetOp = O(targetIntersectionTether(observer.intersection()), styleBehavior(merge(constant({ zIndex: 1000, position: 'relative' }, $$popContentMulticast), constant(null, overlayClick))));\n    return [\n        $node(map(node => ({ ...node, insertAscending: true })))(targetOp($target), $popover),\n        { overlayClick }\n    ];\n});\n//# sourceMappingURL=$Popover.js.map","import { constant, filter, merge } from '@most/core';\nimport { $element, event, O, style } from '@aelea/core';\nimport layoutSheet from '../../style/layoutSheet';\nimport { pallete } from '@aelea/ui-components-theme';\nexport const interactionOp = O((src) => merge(event('focus', src), event('pointerover', src)), constant(true));\nexport const dismissOp = O((src) => merge(event('blur', src), event('pointerout', src)), filter(x => document.activeElement !== x.target), // focused elements cannot be dismissed\nconstant(false));\nexport const $form = $element('form')(layoutSheet.column);\nexport const $label = $element('label')(layoutSheet.column, style({ cursor: 'pointer', color: pallete.foreground }));\n//# sourceMappingURL=form.js.map","import { style, O, stylePseudo } from '@aelea/core';\nimport { pallete } from '@aelea/ui-components-theme';\nconst text = style({\n    fontFamily: `'Nunito', Fira Code`,\n    fontWeight: 100,\n    fontSize: '1.15rem'\n});\nconst customScroll = O(stylePseudo('::-webkit-scrollbar-thumb', {\n    backgroundColor: pallete.foreground\n}), stylePseudo('::-webkit-scrollbar', {\n    backgroundColor: 'transparent',\n    width: '6px',\n    height: '6px'\n}), stylePseudo('::-webkit-scrollbar-thumb:hover', {\n    backgroundColor: pallete.primary\n}));\nconst control = O(text, style({\n    border: '2px solid transparent',\n    color: pallete.message,\n    outline: 'none',\n    flexShrink: 0,\n}));\nexport default {\n    customScroll,\n    text,\n    main: O(text, style({\n        height: '100vh',\n        color: pallete.message,\n        fill: pallete.message,\n        overflowY: 'scroll',\n        backgroundColor: pallete.background,\n        margin: '0',\n        scrollbarColor: 'auto',\n        scrollbarWidth: 'thin',\n        display: 'block'\n    }), customScroll),\n    control,\n    input: O(control, style({\n        minWidth: '100px',\n        backgroundColor: 'transparent',\n        border: 'none',\n        borderBottom: `2px solid ${pallete.message}`,\n        paddingBottom: '2px',\n        flex: 1,\n        padding: 0,\n        marginTop: '2px'\n    }), stylePseudo('::placeholder', {\n        color: pallete.foreground\n    })),\n    btn: O(control, style({\n        cursor: 'pointer',\n        backgroundColor: 'transparent',\n        border: `2px solid ${pallete.message}`,\n        color: pallete.message,\n        padding: '5px 15px',\n        display: 'flex',\n        alignItems: 'center',\n    }))\n};\n//# sourceMappingURL=designSheet.js.map","import { map, mergeArray, never } from \"@most/core\";\nimport { $element, component, event, styleBehavior, attrBehavior } from '@aelea/core';\nimport { dismissOp, interactionOp } from './form';\nimport { pallete } from '@aelea/ui-components-theme';\nimport designSheet from \"../../style/designSheet\";\nexport const $Button = ({ disabled = never(), $content }) => component(([focusStyle, interactionTether], [dismissstyle, dismissTether], [click, clickTether]) => {\n    const $button = $element('button')(designSheet.btn, clickTether(event('pointerup')), styleBehavior(map(disabled => disabled ? { opacity: .4, pointerEvents: 'none' } : null, disabled)), attrBehavior(map(disabled => ({ disabled }), disabled)), styleBehavior(map(active => active ? { borderColor: pallete.primary } : null, mergeArray([focusStyle, dismissstyle]))), interactionTether(interactionOp), dismissTether(dismissOp));\n    return [\n        $button($content),\n        {\n            click\n        }\n    ];\n});\n//# sourceMappingURL=$Button.js.map","import { $text, style } from \"@aelea/core\"\nimport { $ButtonIcon, $column, $row, layoutSheet } from \"@aelea/ui-components\"\nimport { pallete } from \"@aelea/ui-components-theme\"\nimport { Stream } from \"@most/types\"\nimport { $trash } from \"./$icons\"\n\nexport const $TrashBtn = $ButtonIcon($trash)\n\nexport const $card = $column(layoutSheet.spacingBig, style({\n  padding: '16px', backgroundColor: pallete.background,\n  boxShadow: '0px 1px 1px rgba(0, 0, 0, 0.14), 0px 2px 1px rgba(0, 0, 0, 0.12), 0px 1px 3px rgba(0, 0, 0, 0.2)'\n}))\n\nexport const $alert = (text: string | Stream<string>) => $row(style({ border: `1px solid ${pallete.negative}`, padding: '10px' }))(\n  $text(style({ fontSize: '75%' }))(text)\n)","import { map, mergeArray } from \"@most/core\";\nimport { component, event, O, style, styleBehavior } from '@aelea/core';\nimport { dismissOp, interactionOp } from \"./form\";\nimport { $icon } from \"../../elements/$icon\";\nimport designSheet from \"../../style/designSheet\";\nimport { pallete } from \"@aelea/ui-components-theme\";\nexport const $ButtonIcon = ($content) => component(([focusStyle, interactionTether], [dismissstyle, dismissTether], [click, clickTether]) => {\n    const iconOp = O(designSheet.control, style({ cursor: 'pointer', fill: pallete.message, borderRadius: '50%', }), interactionTether(interactionOp), dismissTether(dismissOp), clickTether(event('pointerup')), styleBehavior(map(active => active ? { borderColor: pallete.primary } : null, mergeArray([focusStyle, dismissstyle]))));\n    const $buttonIcon = iconOp($icon({ $content }));\n    return [\n        $buttonIcon,\n        { click }\n    ];\n});\n//# sourceMappingURL=$ButtonIcon.js.map","import { $element, component, event, O, style, styleBehavior } from '@aelea/core';\nimport { pallete } from '@aelea/ui-components-theme';\nimport { multicast, never, now, startWith, tap } from '@most/core';\nimport { filter } from '@most/core';\nimport { merge } from '@most/core';\nimport { empty, map, switchLatest } from \"@most/core\";\nimport designSheet from '../../style/designSheet';\nimport { combineState } from '../../utils/state';\nimport { dismissOp, interactionOp } from \"./form\";\nexport const $Field = ({ value = empty(), fieldStyle = {}, validation = never, inputOp = O() }) => component(([focusStyle, interactionTether], [dismissstyle, dismissTether], [blur, blurTether], [change, changeTether]) => {\n    const multicastValidation = O(validation, startWith(''), multicast);\n    const alert = multicastValidation(change);\n    const focus = merge(focusStyle, dismissstyle);\n    const state = combineState({ focus, alert });\n    return [\n        $element('input')(designSheet.input, style(fieldStyle), changeTether(event('input'), map(inputEv => {\n            if (inputEv.target instanceof HTMLInputElement) {\n                const text = inputEv.target.value;\n                return text || '';\n            }\n            return '';\n        })), inputOp, styleBehavior(map(({ focus, alert }) => {\n            if (alert) {\n                return { borderBottom: `2px solid ${pallete.negative}` };\n            }\n            return focus ? { borderBottom: `2px solid ${pallete.primary}` } : null;\n        }, state)), interactionTether(interactionOp), dismissTether(dismissOp), blurTether(event('blur')), O(map(node => merge(now(node), filter(() => false, tap(val => {\n            // applying by setting `HTMLInputElement.value` imperatively(only way known to me)\n            node.element.value = String(val);\n        }, value)))), switchLatest))(),\n        {\n            change,\n            blur\n        }\n    ];\n});\n//# sourceMappingURL=$Field.js.map","import { $text, component, O, style } from '@aelea/core';\nimport { pallete } from '@aelea/ui-components-theme';\nimport { empty, map, merge, multicast, never, now, sample, skipRepeats, switchLatest } from '@most/core';\nimport { $row } from \"../../elements/$elements\";\nimport layoutSheet from '../../style/layoutSheet';\nimport { $Field } from \"./$Field\";\nimport { $label } from \"./form\";\nexport const $TextField = (config) => component(([change, valueTether], [blur, blurTether]) => {\n    var _a;\n    const { hint } = config;\n    const multicastValidation = config.validation ? O(config.validation, src => sample(src, blur), multicast) : undefined;\n    const fieldOp = (_a = config.containerOp) !== null && _a !== void 0 ? _a : O();\n    const validation = multicastValidation ? skipRepeats(multicastValidation(change)) : never();\n    const $messageLabel = $text(style({ fontSize: '75%', width: '100%' }));\n    const $hint = hint ? now($messageLabel(hint)) : never();\n    const $alert = map(msg => {\n        if (msg) {\n            const negativeStyle = style({ color: pallete.negative });\n            return negativeStyle($messageLabel(msg));\n        }\n        return hint ? $messageLabel(hint) : empty();\n    }, validation);\n    const $message = switchLatest(merge($hint, $alert));\n    return [\n        $row(fieldOp, style({ alignItems: 'flex-start' }))($label(layoutSheet.flex, layoutSheet.spacingTiny)($row(layoutSheet.flex, layoutSheet.spacingSmall)($text(style({ alignSelf: 'flex-end', paddingBottom: '1px', ...config.labelStyle }))(config.label), $Field({ ...config, validation: multicastValidation })({\n            change: valueTether(),\n            blur: blurTether()\n        })), $message)),\n        { change, }\n    ];\n});\n//# sourceMappingURL=$TextField.js.map","import { chain, delay, empty, filter, loop, map, merge, mergeArray, multicast, scan, skip, startWith, switchLatest } from \"@most/core\";\nimport { component, style, $text, $custom, O } from '@aelea/core';\nimport { $column } from '../elements/$elements';\nimport { pallete } from \"@aelea/ui-components-theme\";\nimport * as observer from \"../utils/elementObservers\";\nimport designSheet from \"../style/designSheet\";\nconst $defaultLoader = $text(style({ color: pallete.foreground, padding: '3px 10px' }))('loading...');\nexport const $VirtualScroll = ({ dataSource, containerOps = O(), $loading = $defaultLoader }) => component(([intersecting, intersectingTether]) => {\n    const multicastDatasource = multicast(dataSource);\n    const scrollReuqestWithInitial = skip(1, scan(seed => seed + 1, -1, intersecting));\n    const $container = $column(designSheet.customScroll, style({ overflow: 'auto' }), map(node => ({ ...node, insertAscending: false })), containerOps);\n    const intersectedLoader = intersectingTether(observer.intersection({ threshold: 1 }), map(entryList => entryList[0]), filter(entry => {\n        return entry.isIntersecting === true;\n    }));\n    const $observer = $custom('observer')(intersectedLoader)();\n    const newLocal = delay(45, multicastDatasource);\n    const loadState = merge(map(data => ({ $show: $observer, data }), newLocal), map(() => ({ $show: $loading, }), scrollReuqestWithInitial));\n    const $itemLoader = loop((seed, state) => {\n        if ('data' in state && state.data) {\n            const hasMoreItems = state.data.pageSize === state.data.$items.length;\n            const value = hasMoreItems ? state.$show : empty();\n            return { seed, value };\n        }\n        return { seed, value: state.$show };\n    }, {}, loadState);\n    return [\n        $container(chain(node => {\n            return mergeArray(node.$items); // TODO optimze this. batching pages is not very efficient. use continous render per item during scroll\n        }, multicastDatasource), switchLatest(startWith($observer, $itemLoader))),\n        { scrollRequest: scrollReuqestWithInitial }\n    ];\n});\n//# sourceMappingURL=$VirtualScroll.js.map","import { $svg, attr, StyleCSS, motion, MOTION_NO_WOBBLE, styleInline, style } from \"@aelea/core\"\nimport { pallete } from \"@aelea/ui-components-theme\"\nimport { map } from \"@most/core\"\nimport { Stream } from \"@most/types\"\n\n\n\nexport const $path = $svg('path')\n\nexport const $caretDown = $path(attr({ d: 'M4.616.296c.71.32 1.326.844 2.038 1.163L13.48 4.52a6.105 6.105 0 005.005 0l6.825-3.061c.71-.32 1.328-.84 2.038-1.162l.125-.053A3.308 3.308 0 0128.715 0a3.19 3.19 0 012.296.976c.66.652.989 1.427.989 2.333 0 .906-.33 1.681-.986 2.333L18.498 18.344a3.467 3.467 0 01-1.14.765c-.444.188-.891.291-1.345.314a3.456 3.456 0 01-1.31-.177 2.263 2.263 0 01-1.038-.695L.95 5.64A3.22 3.22 0 010 3.309C0 2.403.317 1.628.95.98c.317-.324.68-.568 1.088-.732a3.308 3.308 0 011.24-.244 3.19 3.19 0 011.338.293z' }))()\nexport const $caretDblDown = $path(attr({ d: 'M15.97 28.996c-.497 0-.983-.176-1.37-.493L1.77 17.793a2.15 2.15 0 01-.275-3.021 2.142 2.142 0 013.017-.276l11.465 9.6 11.464-9.254a2.143 2.143 0 013.011.311l.006.012a2.14 2.14 0 01-.175 3.022l-.124.106-12.83 10.345c-.41.258-.884.387-1.358.358z M15.97 18.996c-.497 0-.983-.176-1.37-.493L1.77 7.793a2.15 2.15 0 01-.275-3.021 2.142 2.142 0 013.017-.276l11.465 9.6L27.44 4.842a2.143 2.143 0 013.011.311l.006.012a2.14 2.14 0 01-.175 3.022l-.124.106-12.83 10.345c-.41.258-.884.387-1.358.358z' }))()\n\n\nexport const $circle = $path(attr({ d: 'M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831' }))\n\n\nexport const $xrd = $path(attr({ d: 'M16 32C7.163 32 0 24.837 0 16S7.163 0 16 0s16 7.163 16 16-7.163 16-16 16zm-3.825-7.457c.175.286.525.457.875.457h.117c.408-.057.7-.286.875-.629l5.891-13.2H26V9h-6.767a1.08 1.08 0 00-.991.629l-5.425 12.114-3.559-4.8c-.175-.286-.525-.457-.875-.457H5v2.171h2.8l4.375 5.886z' }))()\nexport const $btc = $path(attr({ d: 'M16 32C7.163 32 0 24.837 0 16S7.163 0 16 0s16 7.163 16 16-7.163 16-16 16zm7.189-17.98c.314-2.096-1.283-3.223-3.465-3.975l.708-2.84-1.728-.43-.69 2.765c-.454-.114-.92-.22-1.385-.326l.695-2.783L15.596 6l-.708 2.839c-.376-.086-.746-.17-1.104-.26l.002-.009-2.384-.595-.46 1.846s1.283.294 1.256.312c.7.175.826.638.805 1.006l-.806 3.235c.048.012.11.03.18.057l-.183-.045-1.13 4.532c-.086.212-.303.531-.793.41.018.025-1.256-.313-1.256-.313l-.858 1.978 2.25.561c.418.105.828.215 1.231.318l-.715 2.872 1.727.43.708-2.84c.472.127.93.245 1.378.357l-.706 2.828 1.728.43.715-2.866c2.948.558 5.164.333 6.097-2.333.752-2.146-.037-3.385-1.588-4.192 1.13-.26 1.98-1.003 2.207-2.538zm-3.95 5.538c-.533 2.147-4.148.986-5.32.695l.95-3.805c1.172.293 4.929.872 4.37 3.11zm.535-5.569c-.487 1.953-3.495.96-4.47.717l.86-3.45c.975.243 4.118.696 3.61 2.733z' }))()\nexport const $bnb = $path(attr({ d: 'M16 32C7.163 32 0 24.837 0 16S7.163 0 16 0s16 7.163 16 16-7.163 16-16 16zm-3.884-17.596L16 10.52l3.886 3.886 2.26-2.26L16 6l-6.144 6.144 2.26 2.26zM6 16l2.26 2.26L10.52 16l-2.26-2.26L6 16zm6.116 1.596l-2.263 2.257.003.003L16 26l6.146-6.146v-.001l-2.26-2.26L16 21.48l-3.884-3.884zM21.48 16l2.26 2.26L26 16l-2.26-2.26L21.48 16zm-3.188-.002h.001L16 13.706 14.305 15.4l-.195.195-.401.402-.004.003.004.003 2.29 2.291 2.294-2.293.001-.001-.002-.001z' }))()\nexport const $usd = $path(attr({ 'clip-rule': 'evenodd', 'fill-rule': 'evenodd', d: 'M21 22.99v-7.98c0-.56-.49-1.01-1.1-1.01h-7.7c-.61 0-1.1.45-1.1 1.01v7.98c0 .56.49 1.01 1.1 1.01h7.7c.61 0 1.1-.45 1.1-1.01zm-4.165-5.604l1.634-.259c-.105-.469-.332-.838-.68-1.107-.346-.27-.847-.425-1.504-.466v-.435h-.641v.435c-.72.038-1.264.233-1.63.584a1.734 1.734 0 00-.545 1.305c0 .381.09.705.272.972.182.263.395.455.642.575.249.12.669.263 1.26.427v1.55c-.204-.099-.352-.213-.443-.342-.088-.129-.158-.338-.211-.628l-1.775.206c.052.293.131.544.237.752a2.147 2.147 0 001.143.997c.269.1.62.169 1.05.207v.83h.641v-.83c.36-.015.665-.062.914-.14a2.2 2.2 0 00.703-.392c.223-.179.405-.401.546-.668.143-.267.215-.56.215-.879 0-.545-.198-.994-.593-1.349-.3-.264-.894-.514-1.785-.751v-1.27c.153.082.261.164.326.246.067.079.142.222.224.43zm-1.191-.698c-.188.061-.318.137-.391.228a.496.496 0 00-.11.32c0 .13.036.243.11.34.076.093.206.172.39.237v-1.125zm.641 4.324c.25-.056.431-.147.545-.273a.625.625 0 00.176-.43.562.562 0 00-.15-.378c-.096-.117-.287-.226-.57-.325v1.406zm3.882-12.929H9.75a.836.836 0 00-.833.834c0 .458.375.833.833.833h10.417A.836.836 0 0021 8.917a.836.836 0 00-.833-.834zm2.083.834a1.042 1.042 0 102.084-.001 1.042 1.042 0 00-2.084 0zM32 15.5C32 24.06 24.837 31 16 31S0 24.06 0 15.5C0 6.94 7.163 0 16 0s16 6.94 16 15.5zM6 7.667C6 6.746 6.746 6 7.667 6H10V5c0-.392.49-.707 1.1-.707h9.8c.61 0 1.1.315 1.1.707v1h2.333C25.254 6 26 6.746 26 7.667v10c0 .92-.746 1.666-1.667 1.666h-1.666v5c0 .921-.33 1.667-1.25 1.667H10.583c-.92 0-1.36-.746-1.36-1.667v-5H7.666a1.666 1.666 0 01-1.667-1.666v-10z' }))()\nexport const $eth = $svg('g')(\n  $path(attr({ d: 'M16 32C7.163 32 0 24.837 0 16S7.163 0 16 0s16 7.163 16 16-7.163 16-16 16zm7.994-15.781L16.498 4 9 16.22l7.498 4.353 7.496-4.354zM24 17.616l-7.502 4.351L9 17.617l7.498 10.378L24 17.616z' }))(),\n  $path(attr({ 'fill-opacity': '.298', d: 'M16.498 4v8.87l7.497 3.35zm0 17.968v6.027L24 17.616z' }))(),\n  $path(attr({ 'fill-opacity': '.801', d: 'M16.498 20.573l7.497-4.353-7.497-3.348z' }))(),\n  $path(attr({ 'fill-opacity': '.298', d: 'M9 16.22l7.498 4.353v-7.701z' }))(),\n)\n\n\nexport interface Gauge {\n  styleCSS?: StyleCSS\n  size?: string\n  value: Stream<number>\n}\n\nexport const $gaugeMetric = ({ value, size = '24px', styleCSS }: Gauge) => {\n\n  const animateChange = motion(MOTION_NO_WOBBLE, 0, value)\n  const attrAniamtion = styleInline(map(n => ({\n    strokeDasharray: `${n * 100}, 100`,\n    stroke: n > 1 ? pallete.negative : ''\n  }), animateChange))\n\n  return $svg('svg')(style({ display: 'block', width: size, height: size, ...styleCSS }), attr({ viewBox: '0 0 36 36' }))(\n    $circle(style({ fill: 'none', stroke: pallete.middleground, strokeWidth: '3.8' }))(),\n    $circle(style({ fill: 'none', stroke: pallete.foreground, strokeWidth: '3.8' }), attrAniamtion)()\n  )\n}\n\n","import { $bnb, $btc, $eth, $xrd } from \"./common\"\nimport { Token } from \"./types\"\n\n\n\nexport const tokenList: Token[] = [\n  { address: 'sss', $icon: $xrd, label: 'Radix', symbol: 'XRD', balance: 100000 },\n  { address: 'sss', $icon: $btc, label: 'Bitcoin', symbol: 'BTC', balance: 0.5 },\n  { address: 'sss', $icon: $eth, label: 'Ethereum', symbol: 'ETH', balance: 30 },\n  { address: 'sss', $icon: $bnb, label: 'Binance Coin', symbol: 'BNB', balance: 30 },\n  // { $icon: $usd, label: 'Gambit Dollar', symbol: 'USDG' },\n  // { $icon: $usd, label: 'Binance Dollar', symbol: 'BUSD' },\n]","import { attr, attrBehavior, Behavior, component, event, INode, O, style } from \"@aelea/core\"\nimport { $row, layoutSheet, $icon, $Popover, $Field } from \"@aelea/ui-components\"\nimport { pallete } from \"@aelea/ui-components-theme\"\nimport { constant, empty, map, merge, multicast, switchLatest } from \"@most/core\"\nimport { Stream } from \"@most/types\"\nimport { $TokenList } from \"./$TokenList\"\nimport { Token } from \"./types\"\nimport { tokenList } from './state'\nimport { $caretDown } from \"./common\"\n\n\n\ninterface CoinInput {\n  token: Stream<Token>\n  changeInput: Stream<number>\n  // field: Field\n}\n\n\nexport const $TokenInput = ({ token, changeInput }: CoinInput) => component((\n  [change, changeTether]: Behavior<any, any>,\n  [switchTokenPopover, switchTokenPopoverTether]: Behavior<INode, PointerEvent>,\n  [switchToken, switchTokenTether]: Behavior<Token, Token>,\n) => {\n\n  const $tokenList = $TokenList(tokenList)({\n    choose: switchTokenTether(multicast)\n  })\n\n  const value = merge(constant('', token), changeInput)\n\n  return [\n    $row(layoutSheet.spacingBig, style({ alignItems: 'center', flex: 1 }))(\n    \n      $Popover({\n        $$popContent: constant($tokenList, switchTokenPopover),\n        dismiss: switchToken\n        // overlayBackgroundColor: pallete.background\n      })(\n        $row(switchTokenPopoverTether(event('click')), layoutSheet.spacingSmall, style({ alignItems: 'center', cursor: 'pointer' }))(\n          $icon({ $content: switchLatest(map(t => t.$icon, token)), fill: pallete.message, width: 42, viewBox: '0 0 32 32' }),\n          $icon({ $content: $caretDown, width: 10, viewBox: '0 0 32 19.43' })\n        )\n      )({}),\n\n      $Field({\n        value,\n        fieldStyle: { borderBottomColor: 'transparent', fontWeight: 'bolder', fontSize: '150%' },\n        inputOp: O(\n          attr({ pattern: '^[0-9]*[.,]?[0-9]*$', inputmode: 'decimal' }),\n          attrBehavior(\n            map(t => ({ placeholder: t.balance }), token)\n          )\n        )\n      })({\n        change: changeTether()\n      })\n    ),\n\n    { change, switchToken }\n  ]\n})","import { $node, $text, Behavior, component, event, INode, O, style } from \"@aelea/core\"\nimport { $VirtualScroll, $row, layoutSheet, $icon, ScrollResponse, $column, $Button, $TextField, ScrollRequest } from \"@aelea/ui-components\"\nimport { pallete } from \"@aelea/ui-components-theme\"\nimport { constant, empty, map, multicast, startWith, switchLatest } from \"@most/core\"\nimport { Token } from \"./types\"\n\nfunction objectValuesContainsText<T>(obj: T, text: string) {\n  const match = Object.values(obj).find(value => {\n    return typeof value === 'string' && value.toLocaleLowerCase().indexOf(text.toLocaleLowerCase()) !== -1\n  })\n\n  return match !== undefined\n}\n\nexport const $TokenList = <T extends Token>(list: T[]) => component((\n  [choose, chooseTether]: Behavior<INode, T>,\n  [scrollRequest, scrollRequestTether]: Behavior<ScrollRequest, ScrollRequest>,\n  [filterListInput, filterListInputTether]: Behavior<string, string>,\n\n) => {\n\n  const filterWithInitial = startWith('', filterListInput)\n\n  return [\n    $column(layoutSheet.spacingBig)(\n      $TextField({ label: 'Filter', value: empty() })({\n        change: filterListInputTether()\n      }),\n\n      switchLatest(\n        map(filter =>\n          $VirtualScroll({\n            containerOps: O(layoutSheet.spacing, style({ width: '300px' })),\n            dataSource: map((pageNumber): ScrollResponse => {\n              const $items = list.filter(obj => objectValuesContainsText(obj, filter)).map(token => {\n                const changeTokenBehavior = chooseTether(event('click'), constant(token))\n\n                return $row(changeTokenBehavior, layoutSheet.spacing, style({ cursor: 'pointer', alignItems: 'center' }))(\n                  $icon({ $content: token.$icon, fill: pallete.message, width: 42, viewBox: '0 0 32 32' }),\n                  $column(layoutSheet.flex)(\n                    $text(style({ fontWeight: 'bold' }))(token.symbol),\n                    $text(style({ fontSize: '75%', color: pallete.foreground }))(token.label)\n                  ),\n                  $text(token.balance.toLocaleString())\n                )\n              })\n\n              return { $items, pageSize: 20 }\n            }, multicast(scrollRequest))\n          })({\n            scrollRequest: scrollRequestTether()\n          })\n        , filterWithInitial)\n      )\n      \n    ),\n\n    { choose }\n  ]\n})","\nimport { $text, Behavior, component, event, IBranch, style } from '@aelea/core'\nimport { $Button, $card, $column, $icon, $Popover, $row, $Slider, elevation2, layoutSheet, state } from '@aelea/ui-components'\nimport { pallete } from '@aelea/ui-components-theme'\nimport { constant, empty, map, merge, now, snapshot } from '@most/core'\nimport { $alert } from '../../../elements/$common'\nimport { $TokenInput } from './$TokenInput'\nimport { $caretDblDown, $gaugeMetric } from './common'\nimport { tokenList } from './state'\nimport { Token } from './types'\n\nexport interface AssetUnit {\n  /** Unique identifier for the asset (typically a 3 or 4 character uppercase code) */\n  readonly symbol: string\n\n  /** Orders of magnitude between the unit of exchange and the base unit */\n  readonly exchangeScale: number\n\n  /** Orders of magnitude between the unit of account and the base unit */\n  readonly accountScale: number\n\n  /**\n   * Number of orders of magnitude between this unit and the base unit\n   * - Defines the unit of the asset (e.g. ether, gwei, or wei, in the case of the asset ETH)\n   * - By default, this should be 0, the base unit (typically the smallest denomination of the asset)\n   */\n  readonly scale: number\n}\n\n\n// export const getRate = (source: AssetUnit, dest: AssetUnit, api?: RateApi): BigInt => {\n//   let rate = 1n\n\n//   // Only fetch the price if the assets are different -- otherwise rate is 1!\n//   if (source.symbol !== dest.symbol) {\n//     if (!api) {\n//       throw new Error(\n//         'API instance is required for non- like-kind conversions (e.g. BTC to ETH)'\n//       )\n//     }\n\n//     const sourcePrice: bigint = api.getPrice(source.symbol)\n//     const destPrice: bigint = api.getPrice(dest.symbol)\n//     rate = (sourcePrice * destPrice)\n//   }\n\n//   const shift = BigInt(source.scale - source.exchangeScale - (dest.scale - dest.exchangeScale))\n//   // Since the rate is in the unit of exchange (e.g. BTC, ETH),\n//   // it must be converted to scale of the given unit\n//   return rate << shift\n// }\n \n\nexport const $AtomicSwapExample = component((\n  [fromInputValueChange, fromInputValueChangeTether]: Behavior<string, string>,\n  [clickOnDivide,        clickOnDivideTether]: Behavior<IBranch, PointerEvent>,\n  [divideBySlider,       divideByPercentageTether]: Behavior<number, number>,\n  [switchTokenSource,    switchTokenSourceTether]: Behavior<Token, Token>,\n) => {\n\n\n  const initialTokenValue = tokenList[0]\n  const token = state.replayLatest(switchTokenSource, initialTokenValue)\n  const balanceChange = map(t => t.balance, token)\n\n  const fromInputValueChangeWithInitial = merge(fromInputValueChange, constant(0, switchTokenSource))\n\n  const divideByInput = snapshot((balance, change) =>\n    1 - (balance - Number(change)) / balance\n  , balanceChange, fromInputValueChangeWithInitial)\n\n  const divideBalanceBySlider = snapshot((balance, divide) => balance * divide, balanceChange, divideBySlider)\n\n  const allDivideControls = merge(divideBySlider, divideByInput)\n\n  // state replay\n  const replayDivideControls = state.replayLatest(allDivideControls, 0)\n\n\n  const $allocateDivisionPopover = $column(\n    $Slider({ value: replayDivideControls })({\n      change: divideByPercentageTether()\n    })\n  )\n\n\n  return [\n    $column(layoutSheet.spacing)(\n\n      $alert('WIP - to be fully integrated with uniswap contract soon.  ... .. (:'),\n      $text('Uniswap Client with some UX improvments. token balance is constantly being synced with an ethereum provider(metamask or walletconnect)'),\n\n      $card(layoutSheet.spacingBig, elevation2, style({ borderRadius: '30px', padding: '30px' }))(\n\n        $Popover({ $$popContent: constant($allocateDivisionPopover, clickOnDivide) })(\n          $row(style({ alignItems: 'center' }))(\n            $TokenInput({ token: token, changeInput: divideBalanceBySlider })({\n              change: fromInputValueChangeTether(),\n              switchToken: switchTokenSourceTether()\n            }),\n            clickOnDivideTether(event('click'))(\n              $gaugeMetric({ value: replayDivideControls, size: '28px', styleCSS: { height: '100%', cursor: 'pointer' } })\n            )\n          )\n        )({}),\n\n        $row(layoutSheet.spacing, style({ placeContent: 'center', alignItems: 'center' }))(\n          $column(style({ flex: 1, borderBottom: `1px solid ${pallete.middleground}` }))(),\n          $row(layoutSheet.spacingSmall, style({ alignItems: 'center' }))(\n            $text(style({ color: pallete.foreground, fontSize: '75%' }))('Swap into'),\n            $icon({ $content: $caretDblDown, width: 10, viewBox: '0 0 32 32' }),\n          ),\n          $column(style({ flex: 1, borderBottom: `1px solid ${pallete.middleground}` }))(),\n        ),\n\n        $TokenInput({ token: now(tokenList[2]), changeInput: empty() })({}),\n\n        $row(style({ placeContent: 'center' }))(\n          $Button({ $content: $text('Swap') })({})\n        )\n      )\n    )\n  ]\n})\n\n\n","import { filter, map, merge, now, switchLatest, tap } from \"@most/core\";\nimport { $element, attr, component, event, style, stylePseudo, O } from '@aelea/core';\nimport { pallete } from \"@aelea/ui-components-theme\";\nexport const $Slider = ({ value, step = .01 }) => component(([change, changeTether]) => {\n    const sliderThunmbStyle = {\n        cursor: 'pointer',\n        backgroundColor: pallete.primary,\n        borderRadius: '50%',\n        width: '25px',\n        height: '25px',\n        appearance: 'none',\n    };\n    return [\n        $element('input')(style({ width: '100%', height: '3px', margin: '0', transition: 'opacity .2s', appearance: 'none', outline: 'none', background: pallete.message }), stylePseudo('::-webkit-slider-thumb', sliderThunmbStyle), \n        // stylePseudo('::-moz-range-thumb', sliderThunmbStyle),\n        changeTether(event('input'), map(evt => {\n            const target = evt.target;\n            return Number(target.value);\n        })), attr({ type: 'range', min: 0, max: 1, step }), O(map(node => merge(now(node), filter(() => false, tap(val => {\n            // applying by setting `HTMLInputElement.value` imperatively(only way known to me)\n            node.element.value = String(val);\n        }, value)))), switchLatest))(),\n        { change }\n    ];\n});\n//# sourceMappingURL=$Slider.js.map","import { at, map, merge, multicast, now, scan, skip, skipRepeats, skipRepeatsWith, switchLatest } from '@most/core';\nimport { $node, $text, O, style, styleBehavior } from '@aelea/core';\nexport const sumFromZeroOp = scan((current, x) => current + x, 0);\nvar Direction;\n(function (Direction) {\n    Direction[Direction[\"INCREMENT\"] = 0] = \"INCREMENT\";\n    Direction[Direction[\"DECREMENT\"] = 1] = \"DECREMENT\";\n})(Direction || (Direction = {}));\nfunction getDetlaSlotIdex(current, change, i) {\n    if (current[i] !== change[i] || i > change.length)\n        return i;\n    return getDetlaSlotIdex(current, change, i + 1);\n}\nexport const $NumberTicker = ({ value$, incrementColor, decrementColor, textStyle = {}, slots = 10 }) => {\n    const uniqueValues$ = skipRepeats(value$);\n    const incrementMulticast = O(scan((seed, change) => {\n        const changeStr = change.toLocaleString();\n        if (seed === null) {\n            return { change, dir: null, pos: changeStr.length, changeStr };\n        }\n        const dir = change > seed.change ? Direction.INCREMENT : Direction.DECREMENT;\n        const currentStr = seed.change.toLocaleString();\n        const isWholeNumber = changeStr.split('.').length === 1;\n        // TODO handle fractions\n        const pos = isWholeNumber && changeStr.length > currentStr.length ? 0 : getDetlaSlotIdex(currentStr, changeStr, 0);\n        return { change, dir, pos, changeStr };\n    }, null), skip(1), // skips inital null that scans emit - preventing count from getting an inital color\n    multicast)(uniqueValues$);\n    const dirStyleMap = {\n        [Direction.INCREMENT]: { color: incrementColor },\n        [Direction.DECREMENT]: { color: decrementColor },\n    };\n    return $node(...Array(slots).fill(undefined).map((_, slot) => $text(style({ transition: 'ease-out .25s color', ...textStyle }), styleBehavior(switchLatest(O(skipRepeatsWith((x, y) => x.changeStr[slot] === y.changeStr[slot] && slot < y.pos), map(({ pos, dir }) => {\n        const decayColor = at(1000, {});\n        if (slot < pos) {\n            return decayColor;\n        }\n        return merge(now(dirStyleMap[dir]), decayColor);\n    }))(incrementMulticast))))(O(map(({ changeStr }) => { var _a; return (_a = changeStr[slot]) !== null && _a !== void 0 ? _a : ''; }), skipRepeats)(incrementMulticast))));\n};\n//# sourceMappingURL=$NumberTicker.js.map","\nimport { $node, $text, attr, Behavior, component, O, style } from '@aelea/core'\nimport { $column, $Field, $NumberTicker, $row, layoutSheet } from '@aelea/ui-components'\nimport { pallete } from '@aelea/ui-components-theme'\nimport { combine, empty, map, startWith } from '@most/core'\n\n\nconst add = (x: number, y: number) => x + y\n\n\nconst extractValue = O(\n  map((str: string) => Number(str)),\n  startWith(0)\n)\n\nconst $plus = $node(\n  style({\n    justifyContent: 'center', alignItems: 'center',\n    width: '36px', color: pallete.foreground\n  }),\n  layoutSheet.displayFlex\n)\n\nconst placeholderZero = attr({ placeholder: '0' })\nexport default component((\n  [x, XTether]: Behavior<string, number>,\n  [y, YTether]: Behavior<string, number>\n) =>\n  [\n    $column(layoutSheet.spacingSmall)(\n\n      $row(\n        $plus(\n          $text('+')\n        ),\n        $column(layoutSheet.spacingTiny)(\n          $Field({ value: empty(), inputOp: placeholderZero })({\n            change: XTether(extractValue)\n          }),\n          $Field({ value: empty(), inputOp: placeholderZero })({\n            change: YTether(extractValue)\n          })\n        )\n      ),\n\n      $row(\n        $node(style({ width: '36px' }))(),\n        $NumberTicker({\n          value$: combine(add, x, y),\n          decrementColor: pallete.negative,\n          incrementColor: pallete.positive,\n          slots: 30\n        })\n      )\n\n    )\n  ]\n)\n\n\n","import { $text, Behavior, component, style } from '@aelea/core'\nimport { $Button, $column, $NumberTicker, $row, layoutSheet } from '@aelea/ui-components'\nimport { pallete } from '@aelea/ui-components-theme'\nimport { constant } from '@most/core'\nimport { Stream } from '@most/types'\n\n\ninterface Counter {\n  value: Stream<number>\n}\n\nexport default ({ value }: Counter) => component((\n  [increment, incrementTether]: Behavior<PointerEvent, 1>,\n  [decrement, decrementTether]: Behavior<PointerEvent, -1>\n) => {\n\n\n  return [\n\n    $row(style({ alignItems: 'center', placeContent: 'space-between' }), layoutSheet.spacing)(\n      $column(style({ borderRadius: '5px', alignItems: 'center' }), layoutSheet.spacing)(\n        $Button({ $content: $text('+') })({\n          click: incrementTether(\n            constant(1)\n          )\n        }),\n        $Button({ $content: $text('-') })({\n          click: decrementTether(\n            constant(-1)\n          )\n        }),\n      ),\n\n      $NumberTicker({\n        value$: value,\n        textStyle: {\n          fontSize: '30px'\n        },\n        decrementColor: pallete.negative,\n        incrementColor: pallete.positive\n      })\n    ),\n\n    { increment, decrement }\n\n  ]\n})\n","\nimport { $text, Behavior, behavior, component, O, style } from '@aelea/core'\nimport { $Button, $column, $row, $seperator, layoutSheet, state } from '@aelea/ui-components'\nimport { pallete } from '@aelea/ui-components-theme'\nimport { chain, constant, map, merge, mergeArray, multicast, now, scan, snapshot, until } from '@most/core'\nimport { $TrashBtn } from '../../../elements/$common'\nimport $Counter from './$Counter'\n\nconst $AddBtn = $Button({\n  $content: $text('Add One')\n})\nexport const sumAdd = scan((current: number, x: number) => current + x)\n\nexport default component((\n  [addedCounter, addedCounterTether]: Behavior<PointerEvent, PointerEvent>,\n  [disposeCounter, disposeCounterTether]: Behavior<PointerEvent, PointerEvent>,\n  [counterIncrement, countersIncrementTether]: Behavior<1, 1>,\n  [counterDecrement, countersDecrementTether]: Behavior<-1, -1>,\n  [disposedCounterCount, disposedCounterCountTether]: Behavior<any, number>,\n) => {\n\n  const INITAL_COUNT = 0\n  const sumWithInitial = sumAdd(INITAL_COUNT)\n\n  const counting = mergeArray([disposedCounterCount, counterIncrement, counterDecrement])\n  const totalCount = sumWithInitial(counting)\n\n  const addCounter = merge(addedCounter, now(null))\n\n  return [\n\n    $column(layoutSheet.spacing)(\n      $row(style({ placeContent: 'space-between', alignItems: 'center' }), layoutSheet.spacing)(\n        $row(layoutSheet.spacingSmall)(\n          $text(style({ color: pallete.foreground }))('Counters: '),\n          $text(\n            map(String, sumWithInitial(merge(constant(1, addCounter), constant(-1, disposeCounter))))\n          ),\n        ),\n        $row(layoutSheet.spacingSmall)(\n          $text(style({ color: pallete.foreground }))('Sum: '),\n          $text(map(String, totalCount))\n        ),\n        $AddBtn({\n          click: addedCounterTether()\n        }),\n      ),\n      chain(() => {\n\n        const [remove, removeTether] = behavior<PointerEvent, PointerEvent>()\n        const [valueChange, valueChangeTether] = behavior<number, number>()\n\n        const value = state.replayLatest(multicast(valueChange), 0)\n\n\n        return until(remove)(\n          $column(layoutSheet.spacing)(\n            $seperator,\n            $row(style({ alignItems: 'center' }), layoutSheet.spacingBig)(\n              $TrashBtn({\n                click: O(\n                  removeTether(),\n                  disposeCounterTether(),\n                  disposedCounterCountTether(\n                    snapshot(val => -val, value)\n                  ),\n                )\n              }),\n              $Counter({ value })({\n                increment: O(\n                  countersIncrementTether(),               \n                  valueChangeTether(\n                    snapshot((val, increment) => val + increment, value)\n                  ),\n                ),\n                decrement: O(\n                  countersDecrementTether(),\n                  valueChangeTether(\n                    snapshot((val, increment) => val + increment, value)\n                  ),\n                )\n              })\n            )\n          )\n        )\n      }, addCounter)\n    )\n\n  ]\n})\n\n","import { chain, combine, filter, map, merge, multicast, now, skipAfter, skipRepeats, snapshot, startWith, switchLatest } from \"@most/core\";\nimport { remove } from \"@most/prelude\";\nimport { behavior, component, event, eventElementTarget, motion, O, style, styleInline, styleBehavior } from '@aelea/core';\nimport { $column, $row } from \"../elements/$elements\";\nimport layoutSheet from \"../style/layoutSheet\";\nconst clamp = (val, min, max) => val > max ? max : val < min ? min : val;\nconst swap = (a, idx, arr) => {\n    const currentIdx = arr.indexOf(a);\n    if (currentIdx === -1)\n        throw new Error('unable to find element within the array');\n    const newArr = remove(currentIdx, arr);\n    newArr.splice(idx, 0, a);\n    return newArr;\n};\nconst $dragItem = $row(style({ cursor: 'grab', width: '100%', position: 'absolute' }));\nexport const $Sortable = (config) => component(([orderChange, orderChangeTether]) => {\n    var _a;\n    const gap = ((_a = config.gap) !== null && _a !== void 0 ? _a : 0);\n    const listLength = config.$list.length;\n    const itemHeight = gap + config.itemHeight;\n    const containerHeight = listLength > 1 ? (itemHeight * listLength) : config.itemHeight;\n    const orderMulticat = multicast(orderChange);\n    const $listChangesWithInitial = startWith(config.$list, map(s => s.list, orderMulticat));\n    const draggingMotion = motion({ stiffness: 150, damping: 20 });\n    return [\n        $column(layoutSheet.flex, style({ flex: 1, userSelect: 'none', position: 'relative', height: containerHeight + 'px' }))(...config.$list.map(($item, i) => {\n            var _a;\n            const [dragY, dragYTether] = behavior();\n            const multicastedDrag = multicast(dragY);\n            const isDraggingStream = skipRepeats(map(x => x.isDragging, multicastedDrag));\n            const iHeight = config.itemHeight + ((_a = config.gap) !== null && _a !== void 0 ? _a : 0);\n            const yMotion = O(filter(({ $draggedItem }) => $draggedItem !== $item), map(({ list }) => list.indexOf($item) * iHeight))(orderMulticat);\n            const yDragPosition = merge(chain(s => {\n                if (s.isDragging) {\n                    return now(s.delta);\n                }\n                else {\n                    return draggingMotion(s.delta, now(s.list.indexOf($item) * iHeight));\n                }\n            }, multicastedDrag), draggingMotion(i * iHeight, yMotion));\n            const applyTransformStyle = combine((ypos, scale) => ({ transform: `translateY(${ypos}px) scale(${scale})` }), yDragPosition, draggingMotion(1, map(id => id ? 1.1 : 1, isDraggingStream)));\n            const applyBoxShadowStyle = map(shadow => ({ boxShadow: `0px ${shadow}px ${shadow * 3}px 0px rgba(0, 0, 0, 0.25` }), draggingMotion(0, map(id => id ? 5 : 0, isDraggingStream)));\n            return $dragItem(dragYTether(event('pointerdown'), \n            // list order continously changing, snapshot is used to get a(snapshot) of the latest list\n            snapshot((list, startEv) => {\n                const drag = merge(eventElementTarget('pointerup', window), eventElementTarget('pointermove', window));\n                const move = skipAfter(ev => ev.type === 'pointerup', drag);\n                return map((pointerEvent) => {\n                    const from = list.indexOf($item);\n                    const delta = pointerEvent.clientY - (startEv.clientY - from * iHeight);\n                    const to = clamp(Math.round(delta / iHeight), 0, list.length - 1);\n                    const isPositionChange = to !== from;\n                    const isDragging = pointerEvent.type === 'pointermove';\n                    return {\n                        delta, isDragging, to,\n                        $draggedItem: isDragging ? $item : null,\n                        list: isPositionChange ? swap($item, to, list) : list\n                    };\n                }, move);\n            }, $listChangesWithInitial), switchLatest, orderChangeTether()), styleInline(merge(applyTransformStyle, applyBoxShadowStyle)), styleBehavior(map(x => ({ zIndex: x ? 1000 : 0 }), isDraggingStream)))($item);\n        })),\n        { orderChange: $listChangesWithInitial }\n    ];\n});\n//# sourceMappingURL=$Sortable.js.map","import { component, Behavior, $Branch, IBranchElement, style, $text } from \"@aelea/core\"\nimport { $card, $column, $row, $Sortable, elevation1, elevation12, elevation2, layoutSheet } from \"@aelea/ui-components\"\nimport { pallete } from \"@aelea/ui-components-theme\"\n\n\nexport default component(([order, orderTether]: Behavior<$Branch<IBranchElement, {}>[], $Branch<IBranchElement, {}>[]>) => {\n\n  const $list = Array(4).fill(null).map((_, i) =>\n    $card(layoutSheet.flex, elevation2, style({ backgroundColor: pallete.background, placeContent: 'center', height: '90px', alignItems: 'center' }))(\n      $text('node: ' + i)\n    )\n  )\n\n  return [\n    $row(style({ placeContent: 'stretch' }))(\n      $Sortable({\n        $list,\n        itemHeight: 90,\n        gap: 10\n      })({ orderChange: orderTether() })\n    )\n  ]\n})","import { $text, Behavior, component, style } from \"@aelea/core\"\nimport { $Button, $column, $Popover, $row, $TextField, layoutSheet } from \"@aelea/ui-components\"\nimport { pallete } from \"@aelea/ui-components-theme\"\nimport { constant, merge, now, scan } from \"@most/core\"\nimport $Counter from \"../count-counters/$Counter\"\n\n\nexport function hexAlpha(color: string, opacity: number): string {\n  // coerce values so ti is between 0 and 1.\n  const _opacity = Math.round(Math.min(Math.max(opacity || 1, 0), 1) * 255)\n  return color + _opacity.toString(16).toUpperCase()\n}\n\nexport const $PopoverExample = component((\n  [pop, popTether]: Behavior<any, any>,\n  [popCard, popCardTether]: Behavior<any, any>,\n  [countUp, countUpTether]: Behavior<1, 1>,\n  [countDown, countDownTether]: Behavior<-1, -1>\n) => {\n\n  const count = merge(countUp, countDown)\n\n  const $popContent = $column(layoutSheet.spacing)(\n    $text('Well, hello $Counter component!'),\n    $row(style({ placeContent: 'center' }))(\n      $Counter({ value: scan((s, n) => s + n, 0, count) })({ decrement: countDownTether(), increment: countUpTether() })\n    )\n  )\n  const $$popContent = constant($popContent, pop)\n  const $$popContentCard = constant($popContent, popCard)\n\n\n  return [\n    $column(layoutSheet.spacing)(\n      $text(`Shows extra details with visible and actionable context in a floating buddle`),\n      $row(layoutSheet.spacing)(\n        $text('This button is a target(context)'),\n        $Popover({ $$popContent })(\n          $Button({ $content: $text('Pop!') })({\n            click: popTether()\n          })\n        )({}),\n      ),\n      $Popover({ $$popContent: $$popContentCard })(\n        $column(style({ backgroundColor: pallete.background, border: `1px solid ${pallete.horizon}`, padding: '30px' }))(\n          $row(layoutSheet.spacing)(\n            $TextField({ label: 'One', value: now('') })({}),\n            $TextField({ label: 'Two', value: now('') })({}),\n            $Button({ $content: $text('Advanced') })({\n              click: popCardTether()\n            })\n          )\n        )\n      )({})\n    )\n  ]\n})","import { map, merge, now } from \"@most/core\";\nimport { $text, component, O, style, stylePseudo } from '@aelea/core';\nimport { $row } from \"../elements/$elements\";\nimport { $VirtualScroll } from \"./$VirtualScroll\";\nimport { pallete } from \"@aelea/ui-components-theme\";\nimport layoutSheet from \"../style/layoutSheet\";\nconst elipsisTextOverflow = style({\n    overflow: 'hidden', textOverflow: 'ellipsis', whiteSpace: 'nowrap'\n});\nconst tableCellStyle = O(style({ padding: '3px 6px' }), layoutSheet.flex);\nconst $headerCell = $row(tableCellStyle, style({ fontSize: '15px', color: pallete.foreground, }));\nconst $bodyCell = $row(tableCellStyle);\nconst $rowContainer = $row(layoutSheet.spacing);\nconst $rowHeaderContainer = $rowContainer(style({ overflowY: 'scroll' }), stylePseudo('::-webkit-scrollbar', { backgroundColor: 'transparent', width: '6px' }));\nexport const $Table = (config) => component(([requestList, requestListTether]) => {\n    const $header = $rowHeaderContainer(...config.columns.map(col => {\n        var _a, _b;\n        return $headerCell(style((_a = col.cellStyle) !== null && _a !== void 0 ? _a : {}))((_b = col.header) !== null && _b !== void 0 ? _b : elipsisTextOverflow($text(String(col.id))));\n    }));\n    const dataSource = map(({ data, pageSize }) => {\n        const $items = data.map(rowData => $rowContainer(...config.columns.map(col => {\n            var _a;\n            return $bodyCell(style((_a = col.cellStyle) !== null && _a !== void 0 ? _a : {}))(col.value(now(rowData)));\n        })));\n        return { $items, pageSize };\n    }, config.dataSource);\n    const $body = $VirtualScroll({\n        ...config,\n        dataSource\n    })({\n        scrollRequest: requestListTether()\n    });\n    return [\n        merge($body, $header),\n        { requestList }\n    ];\n});\n//# sourceMappingURL=$Table.js.map","import { $text, Behavior, component, style } from \"@aelea/core\"\nimport { $card, $Table, ScrollRequest, TablePageResponse } from \"@aelea/ui-components\"\nimport { chain, map } from \"@most/core\"\n\n\nexport const $TableExample = component((\n  [requestList, requestListTether]: Behavior<ScrollRequest, ScrollRequest>\n) => {\n\n  const PAGE_SIZE = 100\n  let i = 0\n\n  const dataSource = map((): TablePageResponse<{ id: string }> => {\n    const id = ++i\n    const data = Array(PAGE_SIZE).fill(null).map(() => {\n      return { id: 'item-#' + id }\n    })\n\n    return { data, pageSize: PAGE_SIZE }\n  }, requestList)\n\n  return [\n    $card(\n      $Table({\n        dataSource,\n        containerOps: style({\n          height: '400px'\n        }),\n        columns: [\n          {\n            id: 'id',\n            value: chain(x => $text(x.id)),\n          },\n          {\n            id: 'id',\n            value: chain(x => $text(x.id)),\n          },\n          {\n            id: 'id',\n            value: chain(x => $text(x.id)),\n          }\n        ],\n      })({\n        requestList: requestListTether()\n      })\n    )\n  ]\n})\n","\nimport { $node, $text, component, style } from '@aelea/core'\nimport { $card, $column, $row, elevation2, layoutSheet } from '@aelea/ui-components'\nimport { Pallete, Theme } from '@aelea/ui-components-theme'\nimport { dark, light } from '../../../common/theme'\n\n\n\nfunction getPallete(theme: Pallete, name: string, colors: [name: string, color: string][]) {\n  return $column(layoutSheet.spacingTiny)(\n    $text(name),\n\n    ...colors.map(([name, color]) =>\n      $row(layoutSheet.spacing, style({ height: '30px', alignItems: 'center' }))(\n        $node(style({ width: '30px', height: '30px', backgroundColor: color }))(),\n        $text(style({ flex: 1, color: theme.foreground, fontSize: '12px' }))(color),\n        $text(style({ flex: 1 }))(name),\n      )\n    )\n  )\n}\n\nexport const $Pallete = (themeDef: Theme) => component(() => {\n  const pallete = Object.entries(themeDef.pallete)\n  const theme = themeDef.pallete\n\n  return [\n    $card(layoutSheet.spacingBig, layoutSheet.flex, elevation2, style({ color: theme.message, padding: '15px', backgroundColor: theme.background }))(\n      $text(style({ fontSize: '120%' }))(themeDef.name),\n      getPallete(theme, 'Action', pallete.slice(0, 1)),\n      getPallete(theme, 'Story', pallete.slice(1, 2)),\n      getPallete(theme, 'Landscape', pallete.slice(2, 6)),\n      getPallete(theme, 'Attention', pallete.slice(6, 9)),\n    )\n  ]\n})\n\nexport const $Theme = component((\n) => {\n  \n\n  return [\n    $row(layoutSheet.spacingBig)(\n      ...[dark, light].map(themeDef => {\n        return $Pallete(themeDef)({})\n      })\n    )\n  ]\n})\n\n\n","import { $text, Behavior, component } from '@aelea/core'\nimport { $Button, $Field, $row, layoutSheet } from \"@aelea/ui-components\"\nimport { constant, map, merge, now, snapshot, startWith } from \"@most/core\"\n\nlet iid = 0\n\nexport interface Todo {\n  id: number,\n  text: string,\n  completed: boolean,\n}\n\nexport function createTodo(text: string): Todo {\n  return {\n    id: iid++,\n    text,\n    completed: false\n  }\n}\n\n\nexport default component((\n  [create, addTether]: Behavior<PointerEvent, PointerEvent>,\n  [inputChange, inputChangeTether]: Behavior<string, string>\n) => {\n\n  const inputState = startWith('', inputChange)\n  const value = constant('', merge(create, now(null)))\n  const valueChahnges = merge(inputChange, value)\n  const disabled = map(x => !x, valueChahnges)\n\n  const add = snapshot(\n    (text) => ({ id: iid++, text, completed: false }),\n    inputState, create\n  )\n\n  return [\n    $row(layoutSheet.flex)(\n      $Field({ value })({\n        change: inputChangeTether()\n      }),\n      $Button({ $content: $text('add'), disabled })({\n        click: addTether()\n      })\n    ),\n\n    { add }\n  ]\n\n})","import { map, mergeArray } from \"@most/core\";\nimport { $element, $node, attr, component, event, O, style, styleBehavior, attrBehavior } from '@aelea/core';\nimport { dismissOp, interactionOp } from \"./form\";\nimport { pallete } from \"@aelea/ui-components-theme\";\nimport layoutSheet from \"../../style/layoutSheet\";\nexport const $Checkbox = ({ value }) => component(([focusStyle, interactionTether], [dismissstyle, dismissTether], [check, checkTether]) => {\n    const $overlay = $node(layoutSheet.stretch, style({ flex: 1, margin: '3px', }), styleBehavior(map(ch => ch ? { backgroundColor: pallete.message } : null, value)));\n    const $checkInput = $element('input')(style({ opacity: 0, width: 'inherit', height: 'inherit', margin: '0', cursor: 'pointer', }), layoutSheet.stretch, checkTether(event('change'), map(evt => evt.target.checked)), attr({ type: 'checkbox' }), attrBehavior(map(checked => ({ checked: checked ? true : null }), value)), interactionTether(interactionOp), dismissTether(dismissOp));\n    const containerStyle = O(styleBehavior(map(active => active ? { borderColor: pallete.primary } : null, mergeArray([focusStyle, dismissstyle]))), style({ position: 'relative', width: '18px', height: '18px', border: `2px solid ${pallete.message}` }));\n    return [\n        $node(containerStyle)($overlay(), $checkInput()),\n        { check }\n    ];\n});\n//# sourceMappingURL=$Checkbox.js.map","import { Behavior, component, O, style } from '@aelea/core'\nimport { $Checkbox, $Field, $row, layoutSheet } from \"@aelea/ui-components\"\nimport { now } from \"@most/core\"\nimport { Stream } from \"@most/types\"\nimport { $TrashBtn } from '../../../elements/$common'\nimport { Todo } from \"./$CreateTodo\"\n\n\nconst rowStyle = O(\n  layoutSheet.spacing,\n  style({ alignItems: 'center' })\n)\n\ninterface TodoItem {\n  todo: Todo,\n  completed: Stream<boolean>\n}\n\nexport default ({ todo, completed }: TodoItem) => component((\n  [remove, removeTether]: Behavior<MouseEvent, MouseEvent>,\n  [complete, completeTether]: Behavior<boolean, boolean>,\n  [text, textTether]: Behavior<string, string>\n) => {\n\n  return [\n    $row(rowStyle)(\n      $Checkbox({ value: completed })({\n        check: completeTether()\n      }),\n      $Field({ value: now(todo.text) })({\n        change: textTether()\n      }),\n      $TrashBtn({\n        click: removeTether()\n      })\n    ),\n\n    { text, remove, complete }\n  ]\n})\n\n\n","\nimport { $element, $text, behavior, Behavior, component, style } from '@aelea/core'\nimport { $Checkbox, $column, $row, layoutSheet, state } from '@aelea/ui-components'\nimport { pallete } from '@aelea/ui-components-theme'\nimport { chain, combine, empty, mergeArray, now, switchLatest, take, until } from '@most/core'\nimport $CreateTodo, { Todo } from './$CreateTodo'\nimport $TodoItem from './$TodoItem'\n\n\n\nexport const $label = $element('label')(\n  layoutSheet.row,\n  style({ cursor: 'pointer', alignItems: 'center', color: pallete.foreground })\n)\n\n\nexport default (todos: Todo[]) => component((\n  [newTodo, createTodoTether]: Behavior<Todo, Todo>,\n  [showCompletedList, showCompletedListTether]: Behavior<boolean, boolean>,\n) => {\n\n  const INITIAL_SHOW_COMPLETED = false\n  const showCompleteState = state.replayLatest(showCompletedList, INITIAL_SHOW_COMPLETED)\n\n  return [\n    $column(layoutSheet.spacingBig)(\n\n      $row(layoutSheet.spacingBig)(\n        $label(layoutSheet.spacing)(\n          $Checkbox({ value: showCompleteState })({\n            check: showCompletedListTether()\n          }),\n          $text('Show completped ')\n        ),\n        $CreateTodo({\n          add: createTodoTether()\n        }),\n      ),\n\n      $column(layoutSheet.spacingSmall)(\n        chain((todo: Todo) => {\n\n          const [remove, removeTether] = behavior<MouseEvent, MouseEvent>()\n          const [completed, completedTether] = behavior<boolean, boolean>()\n\n          const todoCompleted = state.replayLatest(completed, todo.completed)\n\n          return until(remove)(\n            switchLatest(\n              combine(\n                (onlyCompleted, isCompleted) => onlyCompleted === isCompleted\n                  ? $TodoItem({ todo, completed: take(1, todoCompleted) })({\n                    remove: removeTether(),\n                    complete: completedTether()\n                  })\n                  : empty(),\n                showCompleteState,\n                todoCompleted\n              )\n            )\n          )\n\n        }, mergeArray([newTodo, ...todos.map(now)]))\n      )\n\n    )\n  ]\n})\n\n\n","\nimport { $text, Behavior, component, style } from '@aelea/core'\nimport { $card, $column, $row, $seperator, $TextField, $VirtualScroll, layoutSheet, ScrollRequest, ScrollResponse } from '@aelea/ui-components'\nimport { pallete } from '@aelea/ui-components-theme'\nimport { at, debounce, empty, join, map, merge, now, snapshot, startWith, switchLatest } from '@most/core'\nimport { Stream } from '@most/types'\n\n\nfunction filterArrayByText(array: string[], filter: string) {\n  const filterLowercase = filter.toLocaleLowerCase()\n  return array.filter(id =>\n    id.indexOf(filterLowercase) > -1\n  )\n}\n\nconst $label = (label: string, value: Stream<string> | string) => $row(layoutSheet.spacingSmall)(\n  $text(style({ color: pallete.foreground }))(label),\n  $text(value)\n)\n\nexport const $VirtualScrollExample = component((\n  [scrollRequest, scrollRequestTether]: Behavior<ScrollRequest, ScrollRequest>,\n  [delayResponse, delayResponseTether]: Behavior<string, number>,\n  [filter, filterTether]: Behavior<string, string>,\n) => {\n\n  const PAGE_SIZE = 100\n  const TOTAL_ITEMS = 1000\n\n  const formatNumber = Intl.NumberFormat().format\n  const initialDelayResponse = now(1600)\n  const delayWithInitial = merge(initialDelayResponse, delayResponse)\n\n  let i = 0\n  const $item = $text(style({ padding: '3px 10px' }))\n\n  const stubbedData = Array(TOTAL_ITEMS).fill(null).map(() =>\n    `item: ${Math.random().toString(36).substring(7)} ${formatNumber(++i)}`\n  )\n\n  \n  const dataSourceFilter = (filter: string) => join(\n    snapshot((delay, requestNumber): Stream<ScrollResponse> => {\n      const pageStart = requestNumber * PAGE_SIZE\n      const pageEnd = pageStart + PAGE_SIZE\n      const filteredItems = filterArrayByText(stubbedData, filter)\n      const $items = filteredItems.slice(pageStart, pageEnd).map(id => {\n        return $item(id)\n      })\n\n      return at(delay, { $items, pageSize: PAGE_SIZE })\n    }, delayWithInitial, scrollRequest)\n  )\n\n\n\n  const filterText = startWith('', filter)\n  const debouncedFilterText = debounce(300, filterText)\n\n  return [\n    $column(layoutSheet.spacingBig)(\n      $text(`High performance dynamically loaded list based on Intersection Observer Web API. this example shows a very common pagination and REST like fetching asynchnously more pages`),\n      $row(layoutSheet.spacingBig)(\n\n        $label('Page: ', map(l => String(l), scrollRequest)),\n        $label(`Page Size:`, String(PAGE_SIZE)),\n        $label(`Total Items:`, String(TOTAL_ITEMS)),\n        \n      ),\n\n      $row(layoutSheet.spacingBig)(\n        $TextField({\n          label: 'Filter',\n          value: empty(),\n          hint: 'Remove any items that does not match filter and debounce changes by 300ms to prevert spamming',\n          containerOp: layoutSheet.flex\n        })({\n          change: filterTether()\n        }),\n        $TextField({\n          label: 'Delay Response(ms)',\n          value: initialDelayResponse,\n          hint: 'Emulate the duration of a datasource response, show a stubbed $node instead',\n          containerOp: layoutSheet.flex\n        })({\n          change: delayResponseTether(\n            map(Number)\n          )\n        }),\n      ),\n\n      $seperator,\n\n      $card(style({ padding: 0 }))(\n        switchLatest(\n          map(f =>\n            $VirtualScroll({\n              dataSource: dataSourceFilter(f),\n              containerOps: style({ padding: '8px', maxHeight: '400px' })\n            })({\n              scrollRequest: scrollRequestTether()\n            })\n          , debouncedFilterText)\n        )\n      )\n\n    )\n  ]\n})\n\n","import { $node, $text, Behavior, component, style } from '@aelea/core'\nimport { match, Route } from '@aelea/router'\nimport { $column, $row, layoutSheet } from '@aelea/ui-components'\nimport { pallete } from '@aelea/ui-components-theme'\nimport $Example from '../../components/$Example'\nimport { $Link } from '../../components/$Link'\nimport { fadeIn } from '../../components/transitions/enter'\nimport { $AtomicSwapExample } from './atomicSwap/$AtomicSwap'\nimport { $AutocompleteExample } from './autocomplete/$Autocomplete'\nimport $Calculator from './calculator/$Calculator'\nimport $CountCounters from './count-counters/$CountCounters'\nimport $DragList from './dragList/$DragList'\nimport { $PopoverExample } from './overlay/popoverExample'\nimport { $TableExample } from './table/$TableExample'\n\nimport { $Theme } from './theme/$Theme'\nimport { createTodo } from './todo-app/$CreateTodo'\nimport $TodoApp from './todo-app/$TodoApp'\nimport { $VirtualScrollExample } from './virtual-scroll/$VirtualScrollExample'\n\n\n\n\ninterface Website {\n  router: Route\n}\n\nexport default ({ router }: Website) => component((\n  [routeChanges, linkClickTether]: Behavior<string, string>\n) => {\n\n  const dragAngDropRoute = router.create({ fragment: 'drag-and-sort', title: 'Drag N Drop' })\n  const todoAppRoute = router.create({ fragment: 'todo-app', title: 'Todo App' })\n  const countCountersRoute = router.create({ fragment: 'count-counters', title: 'Count Counters' })\n  const virtualScrollRoute = router.create({ fragment: 'virtual-scroll', title: 'Virtual Scroll' })\n  const calculatorRoute = router.create({ fragment: 'calculator', title: 'Calculator' })\n  const tableRoute = router.create({ fragment: 'table', title: 'Table' })\n  // const autocompleteRoute = router.create({ fragment: 'autocomplete', title: 'Autocomplete' })\n  const popoverRoute = router.create({ fragment: 'popover', title: 'Popover' })\n  const themeRoute = router.create({ fragment: 'theme', title: 'Theme' })\n  const atomicSwapRoute = router.create({ fragment: 'atomic-swap', title: 'Atomic Swap' })\n\n\n\n\n  return [\n\n    $row(layoutSheet.spacingBig, layoutSheet.flex, style({ placeContent: 'center' }))(\n\n      fadeIn(\n        $column(layoutSheet.spacing, style({ top: '10vh', placeContent: 'center flex-start' }))(\n\n          $column(layoutSheet.spacingBig, style({ whiteSpace: 'nowrap' }))(\n            $column(layoutSheet.spacingTiny)(\n              $text(style({ color: pallete.foreground, fontSize: '75%' }))('Demos'),\n              $Link({ $content: $text('Theme'), url: '/p/examples/theme', route: themeRoute })({\n                click: linkClickTether()\n              }),\n              $Link({ $content: $text('Atomic Swap'), url: '/p/examples/atomic-swap', route: atomicSwapRoute })({\n                click: linkClickTether()\n              }),\n              $Link({ $content: $text('Drag And Sort'), url: '/p/examples/drag-and-sort', route: dragAngDropRoute })({\n                click: linkClickTether()\n              }),\n              $Link({ $content: $text('Count Counters'), url: '/p/examples/count-counters', route: countCountersRoute })({\n                click: linkClickTether()\n              }),\n              $Link({ $content: $text('Todo App'), url: '/p/examples/todo-app', route: todoAppRoute })({\n                click: linkClickTether()\n              }),\n              $Link({ $content: $text('Calculator'), url: '/p/examples/calculator', route: calculatorRoute })({\n                click: linkClickTether()\n              }),\n            ),\n\n            $column(layoutSheet.spacingTiny)(\n              $text(style({ color: pallete.foreground, fontSize: '75%' }))('UI Components'),\n              // $Link({ $content: $text('Autocomplete'), url: '/p/examples/autocomplete', route: autocompleteRoute })({\n              //   click: sampleLinkClick()\n              // }),\n              $Link({ $content: $text('Virtual Scroll'), url: '/p/examples/virtual-scroll', route: virtualScrollRoute })({\n                click: linkClickTether()\n              }),\n              $Link({ $content: $text('Popover'), url: '/p/examples/popover', route: popoverRoute })({\n                click: linkClickTether()\n              }),\n              $Link({ $content: $text('Table'), url: '/p/examples/table', route: tableRoute })({\n                click: linkClickTether()\n              }),\n            ),\n          )\n\n        )\n      ),\n\n      $node(),\n\n      $column(style({ flex: 2 }))(\n\n        match(themeRoute)(\n          $Example({ file: 'src/components/$Table.ts' })(\n            $column(\n              $Theme({})\n            )\n          )({})\n        ),\n\n        match(atomicSwapRoute)(\n          $Example({ file: 'src/components/$Table.ts' })(\n            $column(\n              $AtomicSwapExample({})\n            )\n          )({})\n        ),\n        \n\n        match(dragAngDropRoute)(\n          $Example({ file: 'src/components/$DragSort.ts' })(\n            $DragList({})\n          )({})\n        ),\n\n        // $container(\n        //   match(autocompleteRoute)(\n        //     $Example({ file: 'src/components/$DragSort.ts' })(\n        //       $AutocompleteExample({})\n        //     )({})\n        //   )\n        // ),\n\n        match(popoverRoute)(\n          $Example({ file: 'src/components/$DragSort.ts' })(\n            $PopoverExample({})\n          )({})\n        ),\n\n        match(tableRoute)(\n          $Example({ file: 'src/components/$Table.ts' })(\n            $column(\n              $TableExample({})\n            )\n          )({})\n        ),\n\n        match(calculatorRoute)(\n          $Example({ file: 'src/components/$Calculator.ts' })(\n            $Calculator({})\n          )({})\n        ),\n\n        match(virtualScrollRoute)(\n          $Example({ file: 'src/components/$QuantumList.ts' })(\n            $VirtualScrollExample({})\n          )({})\n        ),\n\n        match(countCountersRoute)(\n          $Example({ file: 'src/components/$CountCounters.ts' })(\n            $CountCounters({})\n          )({})\n        ),\n\n        match(todoAppRoute)(\n          $Example({ file: 'src/components/todo-app/$TodoApp.ts' })(\n            $TodoApp(\n              Array(1e2).fill(null).map((x, i) => createTodo('t-' + (i + 1)))\n            )({})\n          )({})\n        ),\n\n      )\n\n    ),\n\n\n    {\n      routeChanges\n    }\n\n  ]\n})\n\n\n","import { disposeNone, disposeWith } from '@most/disposable';\n// copied & modified from https://github.com/mostjs/x-animation-frame/tree/master\nclass FromCallbackSource {\n    constructor(callbackFunction, context) {\n        this.callbackFunction = callbackFunction;\n        this.context = context;\n    }\n    run(sink, scheduler) {\n        // very common that callback functions returns a destructor, perhaps a Disposable in a \"most\" case\n        const maybeDisposable = this.callbackFunction.bind(this.context)((ev) => {\n            sink.event(scheduler.currentTime(), ev);\n        });\n        if (maybeDisposable instanceof Function) {\n            return disposeWith(maybeDisposable, null);\n        }\n        if (maybeDisposable && 'dispose' in maybeDisposable && (maybeDisposable === null || maybeDisposable === void 0 ? void 0 : maybeDisposable.dispose) instanceof Function) {\n            return maybeDisposable;\n        }\n        return disposeNone();\n    }\n}\nexport const fromCallback = (cbf, context = null) => new FromCallbackSource(cbf, context);\n//# sourceMappingURL=fromCallback.js.map","import { component, fromCallback, O, style, $wrapNativeElement, $node } from '@aelea/core';\nimport { at, awaitPromises, combine, continueWith, delay, empty, filter, fromPromise, join, map, merge, multicast, now, recoverWith, skipRepeatsWith, startWith, switchLatest, take } from '@most/core';\nimport layoutSheet from '../style/layoutSheet';\nimport * as observer from '../utils/elementObservers';\nconst fetchJson = async (input, init) => (await fetch(input, init)).json();\nconst fetchMeta = (dependency, version) => fetchJson(`https://data.jsdelivr.com/v1/package/npm/${dependency}@${version}/flat`);\nconst packageQueryCache = new Map();\nconst packageLocalCache = new Map();\nasync function cacheGet(key, queryStore) {\n    const locallyStoredItem = packageLocalCache.get(key);\n    if (locallyStoredItem)\n        return locallyStoredItem;\n    const storedItem = localStorage.getItem(key);\n    if (storedItem) {\n        const parsedItem = JSON.parse(storedItem);\n        packageLocalCache.set(key, parsedItem);\n        return parsedItem;\n    }\n    const pendingQuery = packageQueryCache.get(key);\n    if (pendingQuery)\n        return pendingQuery;\n    const query = queryStore();\n    packageQueryCache.set(key, query);\n    const resp = await query;\n    packageLocalCache.set(key, resp);\n    localStorage.setItem(key, JSON.stringify(resp));\n    return resp;\n}\nexport async function fetchFileListContent(name, version = 'latest') {\n    const meta = (await fetchMeta(name, version)).files;\n    let dtsFiles = meta.filter(metaFile => /\\.d\\.ts$/.test(metaFile.name));\n    if (dtsFiles.length === 0) {\n        // if no .d.ts files found, fallback to .ts files\n        dtsFiles = meta.filter(metaFile => /\\.ts$/.test(metaFile.name));\n    }\n    if (dtsFiles.length === 0) {\n        throw new Error('No inline typings found.');\n    }\n    const dtsQueries = dtsFiles.map(async (file) => {\n        const content = await fetch(`https://cdn.jsdelivr.net/npm/${name}@${version}${file.name}`).then(r => r.text());\n        return { ...file, content: content.replace(/(} from '@)/g, `} from '%40`) };\n    });\n    return Promise.all(dtsQueries);\n}\nexport async function fetchAndCacheDependancyTree(name, version = 'latest') {\n    const pkgPath = `https://cdn.jsdelivr.net/npm/${name}@${version}/package.json`;\n    const pkg = await cacheGet(pkgPath, async () => {\n        var _a, _b;\n        const pkgJson = await fetchJson(pkgPath);\n        const dependencies = (_a = pkgJson === null || pkgJson === void 0 ? void 0 : pkgJson.dependencies) !== null && _a !== void 0 ? _a : {};\n        const files = await fetchFileListContent(name, version);\n        const typings = (_b = pkgJson.typings) !== null && _b !== void 0 ? _b : pkgJson.types;\n        return { files, dependencies, name, version, typings };\n    });\n    const depsQueries = Object.entries(pkg.dependencies).map(([pkgName, version]) => fetchAndCacheDependancyTree(pkgName, version.replace(/[\\^*]/, '')));\n    const dependencies = await Promise.all(depsQueries);\n    return { ...pkg, dependencies };\n}\nexport function defineModel(pkg, monacoGlobal) {\n    const pkgModelUri = monacoGlobal.Uri.parse(`file://root/node_modules/${pkg.name}/package.json`);\n    const model = monacoGlobal.editor.getModel(pkgModelUri);\n    if (!model) {\n        const dependencies = Object.entries(pkg.dependencies).reduce(((acc, [key, val]) => ({ ...acc, [key.replace(/^@/, `%40`)]: val })), {}); // https://github.com/microsoft/monaco-editor/issues/1306\n        const pakgDefJsonStr = JSON.stringify({\n            name: pkg.name,\n            version: pkg.version,\n            typings: pkg.typings,\n            dependencies\n        });\n        monacoGlobal.editor.createModel(pakgDefJsonStr, \"typescript\", pkgModelUri);\n        pkg.files.forEach(file => {\n            monacoGlobal.editor.createModel(file.content, \"typescript\", monacoGlobal.Uri.parse(`file://root/node_modules/${pkg.name}${file.name}`));\n        });\n    }\n}\nexport function definePackageTree(pkg, monacoGlobal) {\n    defineModel(pkg, monacoGlobal);\n    pkg.dependencies.forEach(pkg => {\n        definePackageTree(pkg, monacoGlobal);\n    });\n}\nconst whitespaceRegexp = /[\\n\\r\\s\\t]+/g;\nconst elementBecameVisibleEvent = O(observer.intersection(), filter(intersectionEvent => intersectionEvent[0].intersectionRatio > 0), take(1));\n// Before loading vs/editor/editor.main, define a global MonacoEnvironment that overwrites\n// the default worker url location (used when creating WebWorkers). The problem here is that\n// HTML5 does not allow cross-domain web workers, so we need to proxy the instantiation of\n// a web worker through a same-domain script\n// @ts-ignore\nwindow.MonacoEnvironment = {\n    getWorkerUrl: function () {\n        return `data:text/javascriptcharset=utf-8,${encodeURIComponent(`\n        self.MonacoEnvironment = {\n          baseUrl: 'https://cdn.jsdelivr.net/npm/monaco-editor@0.23.0/min/'\n        }\n        importScripts('https://cdn.jsdelivr.net/npm/monaco-editor@0.23.0/min/vs/base/worker/workerMain.js')`)}`;\n    }\n};\nexport async function asyncloadMonacoEditor() {\n    // @ts-ignore\n    const monacoQuery = import(/* webpackIgnore: true */ 'https://cdn.skypack.dev/pin/monaco-editor@v0.23.0-nVyIshjiDqruq90zejl0/mode=imports,min/optimized/monaco-editor.js');\n    const precacheAeleaDependanciesQuery = fetchAndCacheDependancyTree('@aelea/core', '0.6.0');\n    // @ts-ignore\n    const codiConQuery = new FontFace('codicon', `url('https://cdn.jsdelivr.net/npm/monaco-editor@0.23.0/min/vs/base/browser/ui/codicons/codicon/codicon.ttf')`);\n    const monacoGlobal = await monacoQuery;\n    const codiConFont = await codiConQuery;\n    const pkg = await precacheAeleaDependanciesQuery;\n    definePackageTree(pkg, monacoGlobal);\n    // @ts-ignore\n    document.fonts.add(codiConFont);\n    return { monacoGlobal, pkg };\n}\nlet monacoQuery = null;\nexport async function loadMonacoTSEditor() {\n    if (monacoQuery)\n        return monacoQuery;\n    monacoQuery = asyncloadMonacoEditor();\n    return monacoQuery;\n}\nlet monacoEntryFileId = 0;\nexport const $MonacoEditor = ({ code, config, override, containerStyle = { flex: 1 } }) => component(([change, changeTether]) => {\n    const editorload = fromPromise(loadMonacoTSEditor());\n    const $editor = map(({ monacoGlobal }) => {\n        const editorElement = document.createElement('div');\n        monacoGlobal.languages.typescript.typescriptDefaults.setCompilerOptions({\n            ...monacoGlobal.languages.typescript.typescriptDefaults.getCompilerOptions(),\n            module: monacoGlobal.languages.typescript.ModuleKind.ESNext,\n            moduleResolution: monacoGlobal.languages.typescript.ModuleResolutionKind.NodeJs\n        });\n        const model = monacoGlobal.editor.createModel(code.replace(/(} from '@)/g, `} from '%40`), \"typescript\", monacoGlobal.Uri.parse(`file://root/test${++monacoEntryFileId}.ts`));\n        const ops = {\n            theme: 'vs-dark',\n            \"semanticHighlighting.enabled\": true,\n            minimap: { enabled: false },\n            overviewRulerLanes: 0,\n            lineNumbers: 'off',\n            glyphMargin: false,\n            folding: false,\n            lineDecorationsWidth: 15,\n            lineNumbersMinChars: 0,\n            hover: { delay: 0 },\n            padding: { top: 16, bottom: 16 },\n            renderLineHighlight: 'none',\n            renderIndentGuides: false,\n            scrollBeyondLastLine: false,\n            automaticLayout: false,\n            model,\n            ...config,\n        };\n        const instance = monacoGlobal.editor.create(editorElement, ops, override);\n        const updateHeight = () => {\n            if (ops.automaticLayout) {\n                const contentHeight = instance.getContentHeight();\n                editorElement.style.minHeight = `${contentHeight}px`;\n                instance.layout({ width: editorElement.clientWidth, height: contentHeight });\n                instance.layout();\n            }\n            else\n                instance.layout();\n        };\n        instance.onDidContentSizeChange(updateHeight);\n        let attempDuration = 50;\n        const getWorkerStream = O(continueWith(() => {\n            return fromPromise(monacoGlobal.languages.typescript.getTypeScriptWorker());\n        }), recoverWith(err => {\n            console.error(err);\n            attempDuration += 100;\n            return join(at(attempDuration, getWorkerStream));\n        }))(empty());\n        const $editor = $wrapNativeElement(editorElement)(O(layoutSheet.column, style({ ...containerStyle }), changeTether(\n        // ensure we load editor only when it's visible on the screen\n        elementBecameVisibleEvent, map(async (elEvents) => {\n            const node = elEvents[0].target;\n            const modelChangeWithDelay = delay(10, fromCallback(model.onDidChangeContent, model)); // delay is required because change emits an event before diagnostics and other stuff are finished\n            const editorChanges = map(() => model.getValue(), modelChangeWithDelay);\n            const changesWithInitial = merge(now(model.getValue()), editorChanges);\n            const ignoreWhitespaceChanges = skipRepeatsWith((prev, next) => prev.replace(whitespaceRegexp, '') === next.replace(whitespaceRegexp, ''), changesWithInitial);\n            const tsModelChanges = awaitPromises(combine(async (modelChange, getWorker) => {\n                const worker = await getWorker(model.uri);\n                const semanticDiagnosticsQuery = worker.getSemanticDiagnostics(model.uri.toString());\n                const syntacticDiagnosticsQuery = worker.getSyntacticDiagnostics(model.uri.toString());\n                const semanticDiagnostics = await semanticDiagnosticsQuery;\n                const syntacticDiagnostics = await syntacticDiagnosticsQuery;\n                return { node, instance, monacoGlobal, worker, model, modelChange, semanticDiagnostics, syntacticDiagnostics };\n            }, ignoreWhitespaceChanges, getWorkerStream));\n            return tsModelChanges;\n        }), awaitPromises, join, multicast)))();\n        const disposeMonacoStub = { run: () => instance };\n        return merge($editor, disposeMonacoStub);\n    }, editorload);\n    return [\n        switchLatest(startWith($node(style(containerStyle))(), $editor)),\n        { change }\n    ];\n});\n//# sourceMappingURL=$MonacoEditor.js.map","import { awaitPromises, empty, map, never, switchLatest, filter, now, debounce, startWith } from '@most/core'\nimport { $custom, $Node, $text, Behavior, component, motion, O, style, styleInline } from '@aelea/core'\n\nimport { $column, $MonacoEditor, $row, layoutSheet, ModelChangeBehavior } from '@aelea/ui-components'\nimport { pallete, theme } from '@aelea/ui-components-theme'\n\n\ninterface IMonaco {\n  code: string\n  readOnly?: boolean\n}\n\n\nexport default ({ code = '', readOnly = true }: IMonaco) => component((\n  [change, changeTether]: Behavior<ModelChangeBehavior, ModelChangeBehavior>\n) => {\n\n  const $loader = $row(style({ width: '2px', backgroundColor: 'rgb(43 52 55)' }))(\n    $row(\n      styleInline(\n        map(({ semanticDiagnostics, syntacticDiagnostics }) => {\n          return { backgroundColor: semanticDiagnostics.length || syntacticDiagnostics.length ? pallete.negative : pallete.foreground }\n        }, change)\n      ),\n      styleInline(\n        map(\n          s => ({ height: s + '%' }),\n          switchLatest(\n            map(xxx => {\n              return motion({ stiffness: 160, damping: 36, precision: .1 }, 0, now(100))\n            }, change)\n          )\n        )\n      ),\n      layoutSheet.flex,\n      style({ backgroundColor: pallete.foreground })\n    )()\n  )\n\n  const initalCodeBlockHeight = 24 + 20 + (code.split('\\n').length * 18)\n\n\n  return [\n    $column(layoutSheet.flex)(\n      $MonacoEditor({ code, config: { readOnly, automaticLayout: true, theme: theme.name === 'light' ? 'vs-light': 'vs-dark' }, containerStyle: { height: initalCodeBlockHeight + 'px' } })({\n        change: changeTether()\n      }),\n      $row(style({ backgroundColor: pallete.background, minHeight: '30px' }))(\n        $loader,\n\n        $custom('render-here')(style({ padding: '10px 15px' }))(\n          switchLatest(\n            O(\n              debounce(500),\n              map(async ({ model, worker, semanticDiagnostics, syntacticDiagnostics }: ModelChangeBehavior): Promise<$Node> => {\n\n                if (semanticDiagnostics.length || syntacticDiagnostics.length) {\n                  return never()\n                }\n\n                const emittedFiles = await worker.getEmitOutput(model.uri.toString())\n                const file = emittedFiles.outputFiles[0].text\n                const refImports = file.replace(/(} from '%40)/g, `} from 'https://esm.run/@`)\n\n                const esModuleBlobUrl = URL.createObjectURL(new Blob([refImports], { type: 'text/javascript' }))\n                const esModule = await import(/* webpackIgnore: true */esModuleBlobUrl)\n\n                const value: $Node = esModule.default ?? empty()\n\n                return value\n              }),\n              awaitPromises,\n              filter(node => node !== never()),\n              startWith($text(style({ color: pallete.foreground, fontSize: '75%' }))('Loading Typescript Service...'))\n            )(change)\n          )\n        )\n      )\n    ),\n\n    { change }\n  ]\n})\n\n\n\n","import { $element, $node, $text, attr, Behavior, component, style } from '@aelea/core'\nimport { Route } from '@aelea/router'\nimport { $column, $row, layoutSheet } from '@aelea/ui-components'\nimport { pallete } from '@aelea/ui-components-theme'\n\nimport $Example from '../../components/$Example'\nimport $TSPeep from '../../components/typescript-notebook/$TSPeep'\nimport { $alert } from '../../elements/$common'\n\n\n\ninterface Guide {\n  parentRoute: Route\n}\n\nexport default ({ parentRoute }: Guide) => component((\n  // []: Behavior<NodeChild, any>,\n  [routeChanges, linkClickTether]: Behavior<string, string>\n) => {\n\n  return [\n\n    $column(layoutSheet.spacingBig, layoutSheet.flex, style({ alignItems: 'center' }))(\n\n      $Example({ file: 'src/components/$QuantumList.ts' })(\n        $alert(`WIP: still in progress, external imports name have been encoded because of Monaco editor issue: https://github.com/microsoft/monaco-editor/issues/1306. `),\n\n        $node(\n          $text(`aelea uses a reactive toolkit called `),\n          $element('a')(style({ color: pallete.primary }), attr({ href: 'https://mostcore.readthedocs.io/en/latest/index.html' }))(\n            $text('@most/core')\n          ),\n          $text(` Some basic understanding of functional programming and typescript is required, if you use Visual Studio Code IDE these code blocks will look familiar`)\n        ),\n\n        $text(`The ultimate way to learn is to get your hands a little dirty, any changes in the code below will reflect it visually right below the code block`),\n\n        $TSPeep({\n          readOnly: false,\n          code:\n`import { $text } from '@aelea/core'\n\nexport default $text('Yellow World')`\n        })({}),\n\n        $text(`Nothing fancy yet, the \"default export\" renders a message and there is this \"$text\" function, \"$\" prefix is just a semantic for anything that will eventually emits DOM elements, it makes the code more readable to distinguish between different stream types, we'll see its usefulness later on`),\n\n        $TSPeep({\n          readOnly: false,\n          code:\n`import { $text, $node, style } from '@aelea/core'\n\nconst colorStyle = style({ color: 'yellow' })\nconst containerStyle = style({ padding: '10px', display: 'block', border: '1px dashed yellow', borderRadius: '50px' })\n\nconst $container = $node(containerStyle, colorStyle)\n\nexport default $container(style({alignSelf: 'center'}))(\n    $container(\n        $text('Yellow World')\n    )\n)`\n        })({}),\n\n        $text(`in this guide we will be creating different types of Counters in different levels of complexity`),\n\n\n        $TSPeep({\n          readOnly: false,\n          code:\n`import { $text, $node } from '@aelea/core'\nimport { constant, map, periodic, scan } from '@most/core'\n\nconst eventEverySecond = periodic(1000)       // stream of undefined every 1000 milliseconds\nconst mapTo1 = constant(1, eventEverySecond)  // map that undefined into 1\n\nconst accumulate = scan((acc, one) => acc + one, 0, mapTo1)\nconst toString = map(String, accumulate)\n\n\nexport default $node(\n  $text(toString)\n)`\n        })({}),\n\n        $TSPeep({\n          readOnly: false,\n          code:\n`import { constant, map, merge, scan } from '@most/core'\nimport { $custom, $element, $text, Behavior, component, style, event, INode } from '@aelea/core'\n\n// composable style\nconst displayFlex = style({ display: 'flex' })\nconst spacingStyle = style({ gap: '16px' })\n\n// composable elements\nconst $row = $custom('row')(displayFlex)\nconst $column = $custom('column')(displayFlex, style({ flexDirection: 'column' }))\n\n// Component that outputs state(optionally), this is currently not used anywhere, see next example to see it being consumed\nexport default component((\n    [increment, incrementTether]: Behavior<INode, 1>,\n    [decrement, decrementTether]: Behavior<INode, -1>\n  ) => {\n\n    return [ // Component has to return [$Node, Behavior(optionally)] in the next example we will use these outputted behaviors\n\n      $row(spacingStyle)(\n        $column(\n          $element('button')(incrementTether(event('click'), constant(1)))(\n            $text('+')\n          ),\n          $element('button')(decrementTether(event('click'), constant(-1)))(\n            $text('-')\n          )\n        ),\n        $text(style({ fontSize: '64px' }))(\n          map(String, scan((current: number, x: number) => current + x, 0, merge(increment, decrement)))\n        )\n      ),\n\n      { increment, decrement }\n    ]\n  }\n)({})`\n        })({})\n\n      )({}),\n\n\n    )\n\n  ]\n})\n\n","import { $element, $text, attr, Behavior, component, style, stylePseudo } from '@aelea/core'\nimport { $icon, $row, layoutSheet } from '@aelea/ui-components'\nimport { $Link } from '../components/$Link'\nimport { $github } from '../elements/$icons'\nimport { Route } from '@aelea/router'\nimport { pallete } from '@aelea/ui-components-theme'\n\n\n\n\ninterface MainMenu {\n  parentRoute: Route\n}\n\nexport default ({ parentRoute }: MainMenu) => component((\n  [routeChange, routeChangeTether]: Behavior<string, string>\n) => {\n\n  const guideRoute = parentRoute.create({ fragment: 'guide', title: 'Guide' })\n  const examplesRoute = parentRoute.create({ fragment: 'examples', title: 'Examples' })\n\n  const $seperator = $text(style({ color: pallete.foreground, pointerEvents: 'none' }))('|')\n  \n  return [\n    $row(layoutSheet.spacingSmall, style({ alignItems: 'center', placeContent: 'center' }))(\n\n      // $Link({ $content: $text('Why?!'), href: '/drag-and-sort', route: guideRoute })({\n      //   click: sampleLinkClick()\n      // }),\n\n      $Link({ $content: $text('Developer\\'s Guide'), url: '/p/guide', route: guideRoute })({\n        click: routeChangeTether()\n      }),\n      $seperator,\n      $Link({ $content: $text('Examples'), url: '/p/examples/theme', route: examplesRoute })({\n        click: routeChangeTether()\n      }),\n      $seperator,\n\n      $element('a')(stylePseudo(':hover', { fill: pallete.primary }), layoutSheet.displayFlex, style({ padding: '0 4px' }), attr({ href: 'https://github.com/nissoh/aelea' }))(\n        $icon({ $content: $github, width: 25, viewBox: `0 0 1024 1024` })\n      ),\n\n    ),\n\n\n    { routeChange }\n  ]\n})\n\n\n","import { $node, $text, Behavior, component, eventElementTarget, style } from '@aelea/core'\nimport * as router from '@aelea/router'\nimport { $Anchor } from '@aelea/router'\nimport { $column, $icon, $row, layoutSheet } from '@aelea/ui-components'\nimport { map, merge, multicast, now } from '@most/core'\nimport { $aeleaLogo } from '../elements/$icons'\nimport { fadeIn } from '../components/transitions/enter'\nimport $Examples from './examples/$Examples'\nimport $Guide from './guide/$Guide'\nimport { designSheet } from '@aelea/ui-components'\nimport $MainMenu from './$MainMenu'\nimport { $Picker } from '../components/$ThemePicker'\nimport { dark, light } from '../common/theme'\nimport { pallete } from '@aelea/ui-components-theme'\n\n\n\n\nconst popStateEvent = eventElementTarget('popstate', window)\nconst initialLocation = now(document.location)\nconst requestRouteChange = merge(initialLocation, popStateEvent)\nconst locationChange = map((location) => {\n  return location\n}, requestRouteChange)\n\n\ninterface Website {\n  baseRoute: string\n}\n\nexport default ({ baseRoute }: Website) => component((\n  [routeChanges, linkClickTether]: Behavior<string, string>\n) => {\n\n  const changes = merge(locationChange, multicast(routeChanges))\n  const fragmentsChange = map(() => {\n    const trailingSlash = /\\/$/\n    const relativeUrl = location.href.replace(trailingSlash, '').split(document.baseURI.replace(trailingSlash, ''))[1]\n    const frags = relativeUrl.split('/')\n    frags.splice(0, 1, baseRoute)\n    return frags\n  }, changes)\n\n  const rootRoute = router.create({ fragment: baseRoute, title: 'aelea', fragmentsChange })\n  const pagesRoute = rootRoute.create({ fragment: 'p', title: 'aelea' })\n  const guideRoute = pagesRoute.create({ fragment: 'guide', title: 'Guide' })\n  const examplesRoute = pagesRoute.create({ fragment: 'examples', title: 'Examples' })\n\n  return [\n    $node(designSheet.main, style({ backgroundImage: `radial-gradient(at center center, ${pallete.horizon} 50vh, ${pallete.background})`, }))(\n      router.match(rootRoute)(\n        $row(layoutSheet.flex, layoutSheet.spacingBig, style({ minHeight: '100%', alignContent: 'center', alignItems: 'center', placeContent: 'center', textAlign: 'center', padding: '0 30px', }))(\n          fadeIn(\n            $column(style({ alignItems: 'center', maxWidth: '550px' }), layoutSheet.spacing)(\n              $Anchor({ $content: $icon({ $content: style({ fill: pallete.message }, $aeleaLogo), width: 237, height: 115, viewBox: `0 0 147 90` }), url: '/', route: rootRoute })({\n                click: linkClickTether()\n              }),\n              $text(`\"aelea\", is a UI Framework for reactive event programming`),\n              $text(`It helps you write composable and performant building blocks by composing functional event streams`),\n\n              $MainMenu({ parentRoute: pagesRoute })({\n                routeChange: linkClickTether()\n              })\n            )\n          )\n        )\n      ),\n\n      router.contains(pagesRoute)(\n        $column(layoutSheet.spacingBig, style({ maxWidth: '870px', width: '100%', margin: '0 auto', paddingBottom: '45px' }))(\n          $row(style({ placeContent: 'space-between', padding: '0 15px' }))(\n            $Anchor({ $content: $icon({ $content: $aeleaLogo, fill: pallete.message, width: 137, height: 115, viewBox: `0 0 147 90` }), url: '/', route: rootRoute })({\n              click: linkClickTether()\n            }),\n            $MainMenu({ parentRoute: pagesRoute })({\n              routeChange: linkClickTether()\n            })\n          ),\n          router.match(guideRoute)(\n            $Guide({ parentRoute: rootRoute })({})\n          ),\n          router.contains(examplesRoute)(\n            $Examples({ router: examplesRoute })({\n              routeChanges: linkClickTether()\n            })\n          )\n        )\n      ),\n\n\n      $Picker([light, dark])({})\n    )\n\n  ]\n})\n\n\n","import 'construct-style-sheets-polyfill'\nimport './assignThemeSync'\n// @ts-ignore\nimport { } from 'global.d.ts'\n\nimport { runBrowser } from '@aelea/core'\nimport $Website from './pages/$Website'\n\n\nrunBrowser({ rootNode: document.body })(\n  $Website({ baseRoute: '' })({})\n)","import { $svg, attr, Behavior, component, event, O, style, stylePseudo } from \"@aelea/core\"\nimport { $icon } from \"@aelea/ui-components\"\nimport { changeTheme, pallete, Theme, THEME_PALLETE_SELECTED_KEY } from \"@aelea/ui-components-theme\"\nimport { merge, tap } from \"@most/core\"\n\n\n\n\nexport const $Picker = (themes: Theme[]) => component((\n  [changeThemeEffect, changeThemeEffectTether]: Behavior<any, any>\n) => {\n\n  const current = JSON.parse(localStorage.getItem(THEME_PALLETE_SELECTED_KEY)!) as Theme\n\n  const applyOps = O(\n    style({ position: 'absolute', left: '15px', top: '15px', cursor: 'pointer' }),\n    stylePseudo(':hover', { fill: pallete.primary }),\n    changeThemeEffectTether(\n      event('click'),\n      tap(() => {\n        const themeNameList = themes.map(t => t.name)\n        const toIdx = (themeNameList.indexOf(current.name) + 1) % themes.length\n        const toTheme = themes[toIdx]\n\n        changeTheme(toTheme.name, toTheme.pallete)\n      })\n    )\n  )\n\n  return [\n    merge(\n      applyOps(\n        $icon({\n          $content: $svg('path')(attr({ d: 'M22.8 11.039h-1.176c-.664 0-1.2.43-1.2.961 0 .53.536.959 1.2.959H22.8c.662 0 1.2-.429 1.2-.959s-.539-.961-1.2-.961zM12 5.4A6.58 6.58 0 005.4 12a6.58 6.58 0 006.6 6.6 6.58 6.58 0 006.6-6.6c0-3.661-2.941-6.6-6.6-6.6zm0 11.4c-2.653 0-4.8-2.15-4.8-4.8 0-2.653 2.147-4.8 4.8-4.8a4.8 4.8 0 010 9.6zM3.6 12c0-.53-.539-.961-1.2-.961H1.2c-.664 0-1.2.43-1.2.961 0 .53.536.959 1.2.959h1.2c.661 0 1.2-.43 1.2-.959zM12 3.6c.53 0 .959-.536.959-1.2V1.2c0-.664-.43-1.2-.959-1.2-.53 0-.961.536-.961 1.2v1.2c0 .664.43 1.2.961 1.2zm0 16.8c-.53 0-.961.536-.961 1.2v1.2c0 .664.43 1.2.961 1.2.53 0 .959-.536.959-1.2v-1.2c0-.664-.43-1.2-.959-1.2zm8.838-15.88c.47-.47.545-1.154.17-1.528-.374-.375-1.06-.298-1.526.171l-.84.839c-.47.47-.545 1.153-.17 1.528.374.374 1.06.297 1.527-.172l.839-.839zM4.001 18.64l-.84.84c-.47.47-.545 1.152-.17 1.526.374.374 1.059.3 1.526-.17.13-.128.711-.71.84-.838.469-.47.545-1.153.17-1.529-.374-.375-1.06-.296-1.526.17zm.517-15.478c-.468-.47-1.153-.546-1.528-.172-.374.375-.297 1.06.17 1.53.13.128.711.71.84.838.469.47 1.152.546 1.526.172.374-.375.299-1.06-.17-1.528-.128-.13-.708-.712-.838-.84zm14.123 16.837l.84.839c.469.47 1.152.544 1.526.172.375-.375.299-1.06-.17-1.528l-.839-.839c-.47-.469-1.153-.546-1.529-.171-.375.374-.297 1.058.172 1.527z' }))()\n        })\n      ),\n      changeThemeEffect\n    )\n    \n  ]\n})\n"],"sourceRoot":""}