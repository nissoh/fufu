{"version":3,"sources":["webpack://@aelea/website/webpack/runtime/load script","webpack://@aelea/website/./src/assignThemeSync.ts","webpack://@aelea/website/./src/common/theme.ts","webpack://@aelea/website/./src/components/transitions/enter.ts","webpack://@aelea/website/./src/elements/$common.ts","webpack://@aelea/website/../ui-components/.dist/esm/components/form/$ButtonIcon.js","webpack://@aelea/website/./src/elements/$icons.ts","webpack://@aelea/website/../.yarn/cache/@most-core-npm-1.6.1-3baa05d523-bc452f048d.zip/node_modules/@most/core/dist/index.es.js","webpack://@aelea/website/../.yarn/cache/@most-disposable-npm-1.3.0-e16fa0d39d-eb88a38a85.zip/node_modules/@most/disposable/dist/index.es.js","webpack://@aelea/website/../.yarn/cache/@most-prelude-npm-1.8.0-f9da233011-64ef6318fd.zip/node_modules/@most/prelude/dist/index.es.js","webpack://@aelea/website/../.yarn/cache/@most-scheduler-npm-1.3.0-e34ae83921-942a3d0ac9.zip/node_modules/@most/scheduler/dist/index.es.js","webpack://@aelea/website/../.yarn/cache/construct-style-sheets-polyfill-npm-2.4.16-1c8c5de5af-340007116f.zip/node_modules/construct-style-sheets-polyfill/dist/adoptedStyleSheets.js","webpack://@aelea/website/../core/.dist/esm/combinators/animate.js","webpack://@aelea/website/../core/.dist/esm/combinators/attribute.js","webpack://@aelea/website/../core/.dist/esm/combinators/component.js","webpack://@aelea/website/../core/.dist/esm/combinators/event.js","webpack://@aelea/website/../core/.dist/esm/combinators/style.js","webpack://@aelea/website/../core/.dist/esm/combinators/tether.js","webpack://@aelea/website/../core/.dist/esm/source/behavior.js","webpack://@aelea/website/../core/.dist/esm/source/fromCallback.js","webpack://@aelea/website/../core/.dist/esm/source/node.js","webpack://@aelea/website/../core/.dist/esm/utils.js","webpack://@aelea/website/../core/.dist/esm/utils/SettableDisposable.js","webpack://@aelea/website/../ui-components-theme/.dist/esm/staticThemeService.js","webpack://@aelea/website/../ui-components/.dist/esm/components/$NumberTicker.js","webpack://@aelea/website/../ui-components/.dist/esm/components/$VirtualScroll.js","webpack://@aelea/website/../ui-components/.dist/esm/components/form/$Button.js","webpack://@aelea/website/../ui-components/.dist/esm/components/form/$Field.js","webpack://@aelea/website/../ui-components/.dist/esm/components/form/$TextField.js","webpack://@aelea/website/../ui-components/.dist/esm/components/form/form.js","webpack://@aelea/website/../ui-components/.dist/esm/utils/color.js","webpack://@aelea/website/../ui-components/.dist/esm/components/overlay/$Popover.js","webpack://@aelea/website/../ui-components/.dist/esm/elements/$elements.js","webpack://@aelea/website/../ui-components/.dist/esm/elements/$icon.js","webpack://@aelea/website/../ui-components/.dist/esm/style/designSheet.js","webpack://@aelea/website/../ui-components/.dist/esm/style/layoutSheet.js","webpack://@aelea/website/../ui-components/.dist/esm/utils/elementObservers.js","webpack://@aelea/website/../ui-components/.dist/esm/utils/state.js","webpack://@aelea/website/webpack/bootstrap","webpack://@aelea/website/webpack/runtime/compat get default export","webpack://@aelea/website/webpack/runtime/define property getters","webpack://@aelea/website/webpack/runtime/ensure chunk","webpack://@aelea/website/webpack/runtime/get javascript chunk filename","webpack://@aelea/website/webpack/runtime/global","webpack://@aelea/website/webpack/runtime/hasOwnProperty shorthand","webpack://@aelea/website/webpack/runtime/make namespace object","webpack://@aelea/website/webpack/runtime/node module decorator","webpack://@aelea/website/webpack/runtime/publicPath","webpack://@aelea/website/webpack/runtime/jsonp chunk loading","webpack://@aelea/website/../core/.dist/esm/utils/styleUtils.js","webpack://@aelea/website/../core/.dist/esm/run.js","webpack://@aelea/website/../router/.dist/esm/resolveUrl.js","webpack://@aelea/website/../router/.dist/esm/components/$Anchor.js","webpack://@aelea/website/./src/components/$Example.ts","webpack://@aelea/website/./src/components/$Link.ts","webpack://@aelea/website/./src/pages/examples/calculator/$Calculator.ts","webpack://@aelea/website/./src/pages/examples/count-counters/$Counter.ts","webpack://@aelea/website/./src/pages/examples/count-counters/$CountCounters.ts","webpack://@aelea/website/../ui-components/.dist/esm/components/$Sortable.js","webpack://@aelea/website/./src/pages/examples/dragList/$DragList.ts","webpack://@aelea/website/./src/pages/examples/overlay/popoverExample.ts","webpack://@aelea/website/../ui-components/.dist/esm/components/$Table.js","webpack://@aelea/website/./src/pages/examples/table/$TableExample.ts","webpack://@aelea/website/./src/pages/examples/theme/$Theme.ts","webpack://@aelea/website/./src/pages/examples/todo-app/$CreateTodo.ts","webpack://@aelea/website/../ui-components/.dist/esm/components/form/$Checkbox.js","webpack://@aelea/website/./src/pages/examples/todo-app/$TodoItem.ts","webpack://@aelea/website/./src/pages/examples/todo-app/$TodoApp.ts","webpack://@aelea/website/./src/pages/examples/virtual-scroll/$VirtualScrollExample.ts","webpack://@aelea/website/./src/pages/examples/$Examples.ts","webpack://@aelea/website/../ui-components/.dist/esm/components/$MonacoEditor.js","webpack://@aelea/website/./src/components/typescript-notebook/$TSPeep.ts","webpack://@aelea/website/./src/pages/guide/$Guide.ts","webpack://@aelea/website/./src/pages/$MainMenu.ts","webpack://@aelea/website/./src/pages/$Website.ts","webpack://@aelea/website/./src/website-run.ts","webpack://@aelea/website/./src/components/$ThemePicker.ts"],"names":["inProgress","dataWebpackPrefix","THEME_PALLETE_SELECTED_KEY","localStorage","getItem","preferance","self","matchMedia","matches","defaultTheme","setItem","JSON","stringify","light","name","pallete","primary","message","background","horizon","middleground","foreground","positive","negative","indeterminate","dark","fadeIn","$content","stiffness","damping","precision","slideIn","removeStyle","opacity","transform","slide","animation","$TrashBtn","component","focusStyle","interactionTether","dismissstyle","dismissTether","click","clickTether","O","designSheet","style","cursor","fill","borderRadius","active","borderColor","iconOp","$icon","layoutSheet","padding","backgroundColor","boxShadow","$alert","fontSize","border","$anchor","color","$trash","d","$aeleaLogo","$github","extendStatics","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__extends","__","this","constructor","prototype","create","fatalError","e","setTimeout","rethrow","propagateTask","run","value","sink","PropagateRunEventTask","propagateEventTask","PropagateEventTask","propagateEndTask","PropagateEndTask","propagateErrorTask","PropagateErrorTask","PropagateTask","dispose","t","runIfActive","error","_super","runEvent","_this","call","event","apply","arguments","end","empty","EMPTY","isCanonicalEmpty","stream","containsCanonicalEmpty","streams","some","Empty","scheduler","never","NEVER","Never","at","x","At","time","runAt","now","SettableDisposable","disposable","undefined","disposed","setDisposable","Error","Promise","resolve","reject","observer","RunEffectsSink","runStream","_end","_error","_disposable","_t","tryDispose","RelativeSink","offset","withLocalTime","origin","WithLocalTime","source","relativeSink","Pipe","Loop","stepper","seed","step","LoopSink","result","Scan","f","z","d1","d2","ScanSink","continueWith","ContinueWith","ContinueWithSink","startNext","continue","Filter","FilterSink","and","q","FilterMap","FilterMapSink","Map","MapSink","map","Tap","TapSink","IndexSink","i","index","invoke","args","length","combine","stream1","stream2","combineArray","Combine","sources","l","disposables","sinks","mergeSink","CombineSink","indexSink","awaiting","values","hasValue","activeCount","indexedValue","updateReady","mergeConcurrently","concurrency","mergeMapConcurrently","id","MergeConcurrently","Outer","pending","current","addInner","startInner","push","initInner","innerSink","Inner","mapAndRun","checkEnd","endInner","inner","indexOf","splice","shift","outer","join","Infinity","mergeArray","mergeStreams","withoutCanonicalEmpty","Merge","appendSources","filter","isNotCanonicalEmpty","concat","MergeSink","indexValue","snapshot","sampler","Snapshot","sampleSink","SnapshotSink","valuesDisposable","latest","samplerDisposable","LatestValueSink","boundsFrom","unsafeMin","unsafeMax","min","Math","max","take","n","slice","start","sliceBounds","bounds","isSliceEmpty","commuteMapSlice","Slice","fuseSlice","createSlice","mapStream","sliceStream","b1","b2","sliceSink","SliceSink","skip","TakeWhile","takeWhileSink","TakeWhileSink","SkipWhile","SkipWhileSink","skipping","SkipAfter","SkipAfterSink","zipItems","items","ZipItems","keepLeft","a","ZipItemsSink","Queue","head","tail","capacityMask","list","growArray","shrinkArray","isEmpty","copyArray","newArray","len","zipArray","Zip","buffers","zipSink","ZipSink","buffer","ready","emitZipped","ended","switchLatest","Switch","switchSink","SwitchSink","disposeCurrent","Segment","disposeInner","errorInner","skipRepeats","skipRepeatsWith","same","equals","SkipRepeats","SkipRepeatsSink","init","until","signal","Until","since","Since","maxSignal","UntilSink","minSignal","LowerBoundSink","SinceSink","allow","Delay","dt","delaySink","DelaySink","tasks","forEach","throttle","period","commuteMapThrottle","Throttle","fuseThrottle","throttleStream","ThrottleSink","Debounce","DebounceSink","timer","clearTimer","DebounceTask","handleEventFromTask","awaitPromises","Await","fromPromise","promise","AwaitSink","eventBound","endBound","errorBound","queue","then","handlePromise","catch","SafeSink","disable","tryEvent","tryEnd","RecoverWith","RecoverWithSink","nextSink","_startNext","_continue","multicast","Multicast","MulticastSource","add","MulticastDisposable","remove","s","err","loop$1","scan$1","initial","startWith$1","map$1","constant$1","tap$1","chain$1","fs","xs","continueWith$1","merge$1","combine$1","combineArray$1","sample$1","snapshot$1","filter$1","skipRepeatsWith$1","take$1","skip$1","skipAfter$1","until$1","delay$1","timeWindow","delayTime","debounce$1","recoverWith$1","disposeNone","NONE","DisposeNone","disposeOnce","DisposeOnce","disposeWith","resource","DisposeWithImpl","_dispose","_resource","disposeAll","ds","merged","merge","DisposeAll","disposeBoth","isDisposeNone","throwIfErrors","disposeCollectErrors","appendIfError","errors","DisposeAllError","captureStackTrace","stack","formatErrorStacks","formatErrorStack","append","al","bl","r","j","reduce","TypeError","unsafeRemove","removeAll","findIndex","compose","g","curry2","curried","curry3","c","ScheduledTaskImpl","localOffset","task","cancel","RelativeScheduler","currentTime","scheduleTask","delay","relative","cancelAll","runTask","SchedulerImpl","timeline","_runReadyTasksBound","_runReadyTasks","_timer","_nextArrival","st","_scheduleNextRun","_reschedule","_unschedule","nextArrival","_scheduleNextArrival","setTimer","runTasks","TimelineImpl","insertByTime","binarySearch","getTime","events","removeAllFrom","runReadyTasks","timeslots","newTimeslot","timeslot","spliceEvent","addEvent","insertAtTimeslot","scheduledTask","floor","sortedArray","mid","y","lo","hi","ClockTimer","clock","_clock","Asap","defer","runAsap","clearTimeout","RelativeClock","HRTimeClock","hrtime","hrt","clockRelativeTo","asap","periodic","cancelTask","schedulerRelativeTo","predicate","console","warn","newDefaultScheduler","newDefaultTimer","performance","process","Date","document","hasShadyCss","window","ShadyCSS","nativeShadow","deferredStyleSheets","deferredDocumentStyleElements","deferredAdopters","adoptedSheetsRegistry","WeakMap","sheetMetadataRegistry","locationRegistry","shadowRootMap","observerRegistry","appliedActionsCursorRegistry","state","loaded","frame","body","CSSStyleSheet","OldCSSStyleSheet","importPattern","illegalInvocation","ConstructStyleSheet","basicStyleElement","createElement","appendChild","disabled","set","adopters","actions","Constructor","protoProps","_proto","replace","contents","sanitized","rejectImports","has","get","innerHTML","updateAdopters","ex","replaceSync","key","sheet","cssRules","_defineProperties","method","_sheetMetadataRegistr5","styleElement","defineProperty","Symbol","hasInstance","configurable","instanceOfStyleSheet","updatePrototype","adoptedStyleSheetAccessors","sheets","oldSheets","container","locationType","isArray","every","uniqueSheets","checkAndPrepare","location","isDocumentLoading","isConnected","contains","requestAnimationFrame","adoptStyleSheets","getAdoptedStyleSheet","disconnect","parentNode","removeChild","observe","removeExcludedStyleSheets","Document","ShadowRoot","attachShadow","Element","createObserver","initAdoptedStyleSheets","addEventListener","initPolyfill","target","props","descriptor","enumerable","writable","readyState","documentElement","imports","match","sheetContent","_import","proto","DOMException","_sheetMetadataRegistr","instance","newStyles","createDocumentFragment","elementToAdopt","cssText","insertBefore","lastChild","_i","_len","_sheetMetadataRegistr2","_adopters","adoptedStyleElement","_i2","_len2","_actions$_i","adoptAndRestoreStylesOnMutationCallback","mutations","_mutations$i","addedNodes","removedNodes","iter","createNodeIterator","NodeFilter","SHOW_ELEMENT","node","shadowRoot","adoptedStyleSheets","FILTER_ACCEPT","FILTER_REJECT","nextNode","MutationObserver","observerTool","childList","subtree","iframe","hidden","contentWindow","fragment","firstChild","AnimationFrameSource","afp","requestTime","rafId","eventThenEnd","fid","cancelAnimationFrame","responseTime","nextAnimationFrame","animationFrames","MOTION_NO_WOBBLE","MOTION_STIFF","motion","motionEnvironment","initialState","change","motionEnv","ma","motionState","position","velocity","frames","fps","delta","acceleration","newVelocity","newPosition","settled","abs","stepFrame","attr","attrs","ns","attributes","attrBehavior","attributesBehavior","inputComp","outputTethers","behaviors","view","outputSources","outputDisposables","k","consumerSampler","outputDisposable","eventElementTarget","eventType","element","options","cb","removeEventListener","capture","styleInline","$node","applyInlineStyleStream","styleObj","prop","val","styleBehavior","styleInput","stylePseudo","pseudoClass","class","SourceSink","parent","latestValue","tetherSinkList","TetherSink","super","Tether","sourceSinkList","sourceDisposable","srcIdx","sourceTetherSink","sinkIdx","BehaviorSource","queuedSamplers","sample","ops","sb","tetherSource","tether","bops","sourcesMap","runBehavior","sinkSrc","sinkMap","_a","delete","behavior","ss","FromCallbackSource","callbackFunction","context","maybeDisposable","bind","ev","Function","fromCallback","cbf","$svg","branch","createElementNS","$element","$custom","$wrapNativeElement","rootNode","$text","$textFn","postOp","input","children","NodeSource","sourceValue","sourceOp","$segments","insertAscending","text","createTextNode","sourceOpValue","$branch","isFunction","nullSink","_","fns","reduceRight","initialDiposable","changeTheme","newTheme","assign","theme","reload","selected","parse","Direction","getDetlaSlotIdex","$NumberTicker","value$","incrementColor","decrementColor","textStyle","slots","uniqueValues$","incrementMulticast","changeStr","toLocaleString","dir","pos","INCREMENT","DECREMENT","currentStr","split","dirStyleMap","slot","transition","decayColor","$defaultLoader","$VirtualScroll","dataSource","containerOps","$loading","intersecting","intersectingTether","multicastDatasource","scrollReuqestWithInitial","$container","overflow","intersectedLoader","threshold","entryList","entry","isIntersecting","$observer","newLocal","loadState","data","$show","$itemLoader","pageSize","$items","scrollRequest","$Button","buttonOp","pointerEvents","$button","$Field","fieldStyle","validation","inputOp","blur","blurTether","changeTether","alert","multicastValidation","focus","inputEv","HTMLInputElement","borderBottom","String","$TextField","config","valueTether","hint","src","fieldOp","containerOp","$messageLabel","width","$hint","msg","negativeStyle","$message","alignItems","alignSelf","paddingBottom","labelStyle","label","interactionOp","dismissOp","activeElement","$label","validRGB","hexAlpha","test","hexCode","hex","parseInt","substring","convertHexToRGBA","$Popover","$$popContent","dismiss","$target","overlayClick","overlayClickTether","targetIntersection","targetIntersectionTether","popoverContentDimension","popoverContentDimensionTether","popoverContentIntersection","popoverContentIntersectionTether","$$popContentMulticast","$overlay","zIndex","top","left","right","bottom","contentResize","intersectionContentRect","IntersectiontargetRect","intersectionRect","contentRect","height","backgroundImage","contentOps","rect","isUp","innerHeight","dismissOverlay","$popover","targetOp","$row","$column","elevation2","$card","$seperator","minHeight","minWidth","viewBox","svgOps","fontFamily","fontWeight","customScroll","control","outline","flexShrink","main","overflowY","margin","scrollbarColor","scrollbarWidth","display","flex","marginTop","btn","stretch","spacingTiny","gap","spacingSmall","spacing","spacingBig","displayFlex","row","flexDirection","column","rowFlex","columnFlex","intersection","intersectionObserver","IntersectionObserver","entries","el","unobserve","resize","ro","ResizeObserver","documentVisibilityChange","visibilityState","StateSink","latestvalue","ReplayLatest","hasInitial","startWithReplay","replayLatest","combineState","arrgs","idx","combineArrayMap","streamList","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","m","getter","__esModule","definition","o","chunkId","all","keys","promises","u","globalThis","obj","url","done","script","needAttach","scripts","getElementsByTagName","getAttribute","charset","timeout","nc","setAttribute","onScriptComplete","prev","onerror","onload","doneFns","fn","type","toStringTag","nmd","paths","scriptUrl","importScripts","currentScript","installedChunks","179","505","installedChunkData","errorType","realSrc","request","webpackJsonpCallback","parentChunkLoadingFunction","chunkIds","moreModules","runtime","chunkLoadingGlobal","styleObjectAsString","toLowerCase","useStyleRule","cacheService","styleDefinition","properties","cachedRuleIdx","cache","stylesheet","namespace","insertRule","BranchEffectsSink","env","segmentPosition","segmentsCount","segmentsSlotsMap","disposableBranch","nodeName","sIdx","insertAt","child","prepend","appendToSlot","selector","classList","styleDeclaration","pseudo","rule","useStylePseudoRule","applyAttrFn","disposeStyle","latestClass","previousCssRule","styleObject","cashedCssClas","newDisp","BranchChildrenSinkList","$child","attrKey","removeAttribute","fragmentsChange","title","resolveRoute","next","pathChange","parentFragments","fragments","fragIdx","diff","isMatched","evt","lastTarget","miss","frag","path","RegExp","Boolean","route","exactMatch","isMatch","unmatch","$RouterAnchor","anchorOp","focusTether","href","textDecoration","clickEv","preventDefault","pathName","currentTarget","HTMLAnchorElement","pathname","history","pushState","anchorOps","$Link","containsTether","$anchorEl","isActive","isFocus","extractValue","str","Number","$plus","justifyContent","placeholderZero","placeholder","XTether","YTether","increment","incrementTether","decrement","decrementTether","placeContent","$AddBtn","sumAdd","addedCounter","addedCounterTether","disposeCounter","disposeCounterTether","counterIncrement","countersIncrementTether","counterDecrement","countersDecrementTether","disposedCounterCount","disposedCounterCountTether","sumWithInitial","totalCount","addCounter","removeTether","valueChange","valueChangeTether","$Counter","swap","arr","currentIdx","newArr","$dragItem","order","orderTether","$list","itemHeight","orderChange","orderChangeTether","listLength","containerHeight","orderMulticat","$listChangesWithInitial","draggingMotion","userSelect","$item","dragY","dragYTether","multicastedDrag","isDraggingStream","isDragging","iHeight","yMotion","$draggedItem","yDragPosition","applyTransformStyle","ypos","scale","applyBoxShadowStyle","shadow","startEv","drag","move","pointerEvent","from","clientY","to","round","isPositionChange","$PopoverExample","pop","popTether","popCard","popCardTether","countUp","countUpTether","countDown","countDownTether","count","$popContent","$$popContentCard","elipsisTextOverflow","textOverflow","whiteSpace","tableCellStyle","$headerCell","$bodyCell","$rowContainer","$rowHeaderContainer","$TableExample","requestList","requestListTether","columns","$header","col","_b","cellStyle","header","rowData","$body","getPallete","colors","$Theme","themeDef","$Pallete","iid","addTether","inputChange","inputChangeTether","inputState","valueChahnges","completed","$Checkbox","check","checkTether","ch","$checkInput","checked","containerStyle","rowStyle","$VirtualScrollExample","scrollRequestTether","delayResponse","delayResponseTether","filterTether","PAGE_SIZE","formatNumber","Intl","NumberFormat","format","initialDelayResponse","delayWithInitial","stubbedData","random","toString","dataSourceFilter","requestNumber","pageStart","pageEnd","array","filterLowercase","toLocaleLowerCase","filterArrayByText","filterText","debouncedFilterText","maxHeight","router","routeChanges","linkClickTether","dragAngDropRoute","todoAppRoute","countCountersRoute","virtualScrollRoute","calculatorRoute","tableRoute","popoverRoute","themeRoute","ethSendRoute","$Example","mod","$EtherSwapExample","$DragList","$Calculator","$CountCounters","todos","newTodo","createTodoTether","showCompletedList","showCompletedListTether","showCompleteState","$CreateTodo","todo","completedTether","todoCompleted","onlyCompleted","isCompleted","complete","completeTether","textTether","$TodoItem","fetchJson","async","fetch","json","packageQueryCache","packageLocalCache","fetchAndCacheDependancyTree","version","pkgPath","pkg","queryStore","locallyStoredItem","storedItem","parsedItem","pendingQuery","query","pkgJson","dependencies","files","meta","dependency","fetchMeta","dtsFiles","metaFile","dtsQueries","file","content","fetchFileListContent","typings","types","resp","cacheGet","depsQueries","pkgName","definePackageTree","monacoGlobal","pkgModelUri","Uri","editor","getModel","acc","pakgDefJsonStr","createModel","defineModel","whitespaceRegexp","elementBecameVisibleEvent","intersectionEvent","intersectionRatio","MonacoEnvironment","getWorkerUrl","encodeURIComponent","monacoQuery","loadMonacoTSEditor","import","precacheAeleaDependanciesQuery","codiConQuery","FontFace","codiConFont","fonts","asyncloadMonacoEditor","monacoEntryFileId","$MonacoEditor","code","override","editorload","$editor","editorElement","languages","typescript","typescriptDefaults","setCompilerOptions","getCompilerOptions","ModuleKind","ESNext","moduleResolution","ModuleResolutionKind","NodeJs","model","minimap","enabled","overviewRulerLanes","lineNumbers","glyphMargin","folding","lineDecorationsWidth","lineNumbersMinChars","hover","renderLineHighlight","renderIndentGuides","scrollBeyondLastLine","automaticLayout","onDidContentSizeChange","contentHeight","getContentHeight","layout","clientWidth","attempDuration","getWorkerStream","getTypeScriptWorker","elEvents","modelChangeWithDelay","onDidChangeContent","editorChanges","getValue","changesWithInitial","ignoreWhitespaceChanges","modelChange","getWorker","worker","uri","semanticDiagnosticsQuery","getSemanticDiagnostics","syntacticDiagnosticsQuery","getSyntacticDiagnostics","semanticDiagnostics","syntacticDiagnostics","disposeMonacoStub","readOnly","$loader","xxx","initalCodeBlockHeight","refImports","getEmitOutput","outputFiles","esModuleBlobUrl","URL","createObjectURL","Blob","default","parentRoute","$TSPeep","routeChange","routeChangeTether","guideRoute","examplesRoute","popStateEvent","initialLocation","requestRouteChange","locationChange","composedConfig","$root","runBrowser","baseRoute","changes","trailingSlash","frags","baseURI","rootRoute","pagesRoute","alignContent","textAlign","maxWidth","$MainMenu","$Guide","$Examples","themes","changeThemeEffect","changeThemeEffectTether","applyOps","toIdx","toTheme","$Website"],"mappings":"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","file":"main.7dee06e0ea1ab3acbb4d.js","sourcesContent":["var inProgress = {};\nvar dataWebpackPrefix = \"@aelea/website:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = (url, done, key, chunkId) => {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = (prev, event) => {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach((fn) => (fn(event)));\n\t\tif(prev) return prev(event);\n\t}\n\t;\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","\nimport { dark, light } from \"./common/theme\"\n\n\nconst THEME_PALLETE_SELECTED_KEY = `!!THEME_PALLETE_SELECTED_KEY`\nconst selectedTheme = localStorage.getItem(THEME_PALLETE_SELECTED_KEY)\n\nif (selectedTheme === null) {\n  const darkModePreferance = self?.matchMedia('(prefers-color-scheme: dark)').matches\n  const preferance = darkModePreferance ? 0 : 1\n  const themePair = [dark, light]\n  const defaultTheme = themePair[preferance]\n\n  localStorage.setItem(THEME_PALLETE_SELECTED_KEY, JSON.stringify(defaultTheme))\n}\n\n\n","\nimport type { Theme } from \"@aelea/ui-components-theme\"\n\n\nexport const light: Theme = {\n  name: 'light',\n  pallete: {\n    primary: '#f00',\n\n    message: '#000000',\n\n    background: '#ffffff',\n    horizon: '#fff5de',\n    middleground: '#e0d0ab',\n    foreground: '#866724',\n\n    positive: '#0fd25e',\n    negative: '#b70636',\n    indeterminate: '#dccb07',\n  }\n}\nexport const dark: Theme = {\n  name: 'dark',\n  pallete: {\n    primary: '#ea607e',\n\n    message: '#ffffff',\n\n    background: '#151b1d',\n    horizon: '#1e282b',\n    middleground: '#2d363a',\n    foreground: '#a5b6bd',\n\n    positive: '#a6f5a6',\n    negative: '#de3434',\n    indeterminate: '#dccb07',\n  }\n}\n\n\n","import { $Node, motion, styleInline } from \"@aelea/core\"\nimport { combine, continueWith, now } from \"@most/core\"\n\nexport function fadeIn($content: $Node) {\n  const fadeIn = motion({ stiffness: 70, damping: 26, precision: 3 }, 0, now(100))\n  const slideIn = motion({ stiffness: 270, damping: 46, precision: 3 }, 25, now(0))\n\n  const removeStyle = continueWith(() => now({ opacity: null, transform: null }))\n\n  const animation = styleInline(\n    removeStyle(\n      combine((opacity, slide) => ({ opacity: `${opacity}%`, transform: `translate(0, ${slide}px)` }), fadeIn, slideIn)\n    )\n  )\n\n  return animation(\n    $content\n  )\n}","import { $element, attr, style, stylePseudo } from \"@aelea/core\"\nimport { $ButtonIcon, $column, $row, layoutSheet } from \"@aelea/ui-components\"\nimport { pallete } from \"@aelea/ui-components-theme\"\nimport { $trash } from \"./$icons\"\n\nexport const $TrashBtn = $ButtonIcon($trash)\n\nexport const $card = $column(layoutSheet.spacingBig, style({\n  padding: '16px', backgroundColor: pallete.background,\n  boxShadow: '0px 1px 1px rgba(0, 0, 0, 0.14), 0px 2px 1px rgba(0, 0, 0, 0.12), 0px 1px 3px rgba(0, 0, 0, 0.2)'\n}))\n\nexport const $alert = $row(style({ fontSize: '75%', border: `1px solid ${pallete.negative}`, padding: '10px' }))\n\nexport const $anchor = $element('a')(\n  stylePseudo(':hover', { color: pallete.primary }),\n  style({\n    cursor: 'pointer',\n    color: pallete.message\n  }),\n)","import { map, mergeArray } from \"@most/core\";\nimport { component, event, O, style, styleBehavior } from '@aelea/core';\nimport { dismissOp, interactionOp } from \"./form\";\nimport { $icon } from \"../../elements/$icon\";\nimport designSheet from \"../../style/designSheet\";\nimport { pallete } from \"@aelea/ui-components-theme\";\nexport const $ButtonIcon = ($content) => component(([focusStyle, interactionTether], [dismissstyle, dismissTether], [click, clickTether]) => {\n    const iconOp = O(designSheet.control, style({ cursor: 'pointer', fill: pallete.message, borderRadius: '50%', }), interactionTether(interactionOp), dismissTether(dismissOp), clickTether(event('pointerup')), styleBehavior(map(active => active ? { borderColor: pallete.primary } : null, mergeArray([focusStyle, dismissstyle]))));\n    const $buttonIcon = iconOp($icon({ $content }));\n    return [\n        $buttonIcon,\n        { click }\n    ];\n});\n//# sourceMappingURL=$ButtonIcon.js.map","import { $svg, attr } from \"@aelea/core\"\n\n\n\nexport const $trash = $svg('path')(\n  attr({\n    d: 'M6.24 18.84A2.16 2.16 0 008.4 21h7.2a2.16 2.16 0 002.16-2.16L19.2 7.32H4.8l1.44 11.52zm7.92-9.36h1.44v9.36h-1.44V9.48zm-2.88 0h1.44v9.36h-1.44V9.48zm-2.88 0h1.44v9.36H8.4V9.48zm10.44-5.04h-4.68S13.838 3 13.44 3h-2.88c-.398 0-.72 1.44-.72 1.44H5.16a1.08 1.08 0 00-1.08 1.08V6.6h15.84V5.52a1.08 1.08 0 00-1.08-1.08z'\n  })\n)()\n\nexport const $aeleaLogo = $svg('path')(\n  attr({\n    d: 'M17.648 58.063l-.046 1.64c0 1.219.343 1.992 1.03 2.32.266.125.571.188.915.188.547 0 1.11-.125 1.687-.375-.593.25-1.109.578-1.547.984-.437.407-.882.805-1.335 1.196-1.125.937-2.258 1.406-3.399 1.406-1.14 0-1.75-.656-1.828-1.969a11.402 11.402 0 01-.047-1.031c-2.812 1.953-5.39 2.93-7.734 2.93-1.985 0-3.36-.602-4.125-1.805-.282-.438-.422-1.04-.422-1.805 0-.765.234-1.531.703-2.297a9.178 9.178 0 011.781-2.133c1.281-1.187 2.828-2.164 4.64-2.93 1.345-.577 3.071-.905 5.18-.984v-1.03c0-2.485-.226-4.165-.68-5.04-.452-.875-1.038-1.516-1.757-1.922-.719-.422-1.562-.633-2.531-.633-1.64 0-3.086.32-4.336.961 1.719-1.422 2.976-2.359 3.773-2.812 1.64-.922 3.125-1.383 4.453-1.383 1.344 0 2.352.195 3.024.586a4.45 4.45 0 011.594 1.547c.672 1.125 1.007 2.742 1.007 4.851v9.54zM6.633 61.437c.375.266.812.461 1.312.586.5.125 1.242.188 2.227.188.984 0 1.96-.234 2.93-.703v-4.922H9.305c-1.36 0-2.547.094-3.563.281a6.641 6.641 0 00-.304 1.922c0 .61.101 1.133.304 1.57.219.438.516.797.89 1.078zM128.352 58.063l.046 1.64c0 1.219-.343 1.992-1.031 2.32a2.12 2.12 0 01-.914.188c-.547 0-1.109-.125-1.687-.375.593.25 1.109.578 1.546.984.438.407.883.805 1.336 1.196 1.125.937 2.258 1.406 3.399 1.406s1.75-.656 1.828-1.969c.031-.344.047-.687.047-1.031 2.812 1.953 5.39 2.93 7.734 2.93 1.985 0 3.36-.602 4.125-1.805.281-.438.422-1.04.422-1.805 0-.765-.234-1.531-.703-2.297a9.177 9.177 0 00-1.781-2.133c-1.281-1.187-2.828-2.164-4.641-2.93-1.344-.577-3.07-.905-5.18-.984v-1.03c0-2.485.227-4.165.68-5.04.453-.875 1.039-1.516 1.758-1.922.719-.422 1.562-.633 2.531-.633 1.641 0 3.086.32 4.336.961-1.719-1.422-2.976-2.359-3.773-2.812-1.641-.922-3.125-1.383-4.453-1.383-1.344 0-2.352.195-3.024.586a4.453 4.453 0 00-1.594 1.547c-.671 1.125-1.007 2.742-1.007 4.851v9.54zm11.015 3.374c-.375.266-.812.461-1.312.586-.5.125-1.243.188-2.227.188-.984 0-1.961-.234-2.93-.703v-4.922h3.797c1.36 0 2.547.094 3.563.281.203.672.304 1.313.304 1.922 0 .61-.101 1.133-.304 1.57a3.008 3.008 0 01-.891 1.078zM55.063 59.219c-2.855 3.187-6.396 5.177-10.626 5.968-.979.167-2.187.25-3.624.25-1.438 0-2.792-.395-4.063-1.187a10.166 10.166 0 01-3.125-3.125c-1.542-2.458-2.313-5.458-2.313-9 0-2.333.896-4.917 2.688-7.75 1.75-2.792 3.885-5.125 6.406-7 2.709-2 5.271-3 7.688-3 1.25 0 2.302.458 3.156 1.375.792.896 1.188 1.917 1.188 3.063 0 1.145-.25 2.208-.75 3.187-.5.958-1.157 1.896-1.97 2.813a22.319 22.319 0 01-2.75 2.656 42.65 42.65 0 01-3.156 2.343c-1.52 1.042-3.437 2.22-5.75 3.532.667 2.52 1.844 4.468 3.532 5.843 1.687 1.355 3.864 2.032 6.531 2.032 2.25 0 4.563-.667 6.938-2zm-9.438-12.532c.563-.895.844-1.77.844-2.624 0-.855-.094-1.573-.282-2.157a5.005 5.005 0 00-.812-1.593c-.813-1.042-1.865-1.563-3.156-1.563-3.167 0-4.75 3.23-4.75 9.688 0 1.145.093 2.28.281 3.406 3.667-1.021 6.292-2.74 7.875-5.157zM90.938 59.219c2.854 3.187 6.395 5.177 10.624 5.968.98.167 2.188.25 3.626.25 1.437 0 2.791-.395 4.062-1.187a10.17 10.17 0 003.125-3.125c1.542-2.458 2.313-5.458 2.313-9 0-2.333-.896-4.917-2.688-7.75-1.75-2.792-3.885-5.125-6.406-7-2.709-2-5.271-3-7.688-3-1.25 0-2.302.458-3.156 1.375-.792.896-1.188 1.917-1.188 3.063 0 1.145.25 2.208.75 3.187.5.958 1.157 1.896 1.97 2.813a22.32 22.32 0 002.75 2.656 42.517 42.517 0 003.156 2.343c1.52 1.042 3.437 2.22 5.75 3.532-.667 2.52-1.844 4.468-3.532 5.843-1.687 1.355-3.864 2.032-6.531 2.032-2.25 0-4.563-.667-6.938-2zm9.437-12.532c-.563-.895-.844-1.77-.844-2.624 0-.855.094-1.573.281-2.157a5.01 5.01 0 01.813-1.593c.813-1.042 1.865-1.563 3.156-1.563 3.167 0 4.75 3.23 4.75 9.688a20.63 20.63 0 01-.281 3.406c-3.667-1.021-6.292-2.74-7.875-5.157zM81.375 65.125a54.597 54.597 0 00-1.969 1.625 15.52 15.52 0 01-1.937 1.438c-1.48.958-3.01 1.437-4.594 1.437-2.292 0-3.542-1.583-3.75-4.75a51.288 51.288 0 01-.063-2.5V28.937c0-2.854-.645-4.708-1.937-5.562-.542-.375-1.063-.563-1.563-.563-.666 0-1.114.021-1.343.063-.23.02-.427.042-.594.063 3-2.084 4.896-3.334 5.688-3.75a92.84 92.84 0 013.218-1.657c1.125-.562 1.99-1 2.594-1.312v45.5c.02.729.146 1.364.375 1.906.52 1.125 1.833 1.688 3.938 1.688.666 0 1.312-.063 1.937-.188z'\n  })\n)()\n\nexport const $github = $svg('path')(\n  attr({\n    d: 'M512 0C229.12 0 0 229.12 0 512c0 226.56 146.56 417.92 350.08 485.76 25.6 4.48 35.2-10.88 35.2-24.32 0-12.16-.64-52.48-.64-95.36-128.64 23.68-161.92-31.36-172.16-60.16-5.76-14.72-30.72-60.16-52.48-72.32-17.92-9.6-43.52-33.28-.64-33.92 40.32-.64 69.12 37.12 78.72 52.48 46.08 77.44 119.68 55.68 149.12 42.24 4.48-33.28 17.92-55.68 32.64-68.48-113.92-12.8-232.96-56.96-232.96-252.8 0-55.68 19.84-101.76 52.48-137.6-5.12-12.8-23.04-65.28 5.12-135.68 0 0 42.88-13.44 140.8 52.48 40.96-11.52 84.48-17.28 128-17.28 43.52 0 87.04 5.76 128 17.28 97.92-66.56 140.8-52.48 140.8-52.48 28.16 70.4 10.24 122.88 5.12 135.68 32.64 35.84 52.48 81.28 52.48 137.6 0 196.48-119.68 240-233.6 252.8 18.56 16 34.56 46.72 34.56 94.72 0 68.48-.64 123.52-.64 140.8 0 13.44 9.6 29.44 35.2 24.32C877.44 929.92 1024 737.92 1024 512 1024 229.12 794.88 0 512 0z'\n  })\n)()\n\n\n","import { curry2, compose, apply, id, reduce, map as map$2, append, findIndex, remove, curry3 } from '@most/prelude';\nimport { asap, delay as delay$2, periodic as periodic$1, schedulerRelativeTo, currentTime, cancelTask } from '@most/scheduler';\nimport { disposeNone, disposeBoth, tryDispose as tryDispose$1, disposeOnce, disposeAll } from '@most/disposable';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\n/** @author Brian Cavalier */\r\n/** @author John Hann */\r\nfunction fatalError(e) {\r\n    setTimeout(rethrow, 0, e);\r\n}\r\nfunction rethrow(e) {\r\n    throw e;\r\n}\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\nvar propagateTask = function (run, value, sink) { return new PropagateRunEventTask(run, value, sink); };\r\nvar propagateEventTask = function (value, sink) { return new PropagateEventTask(value, sink); };\r\nvar propagateEndTask = function (sink) { return new PropagateEndTask(sink); };\r\nvar propagateErrorTask = function (value, sink) { return new PropagateErrorTask(value, sink); };\r\nvar PropagateTask = /** @class */ (function () {\r\n    function PropagateTask(sink) {\r\n        this.sink = sink;\r\n        this.active = true;\r\n    }\r\n    PropagateTask.prototype.dispose = function () {\r\n        this.active = false;\r\n    };\r\n    PropagateTask.prototype.run = function (t) {\r\n        if (!this.active) {\r\n            return;\r\n        }\r\n        this.runIfActive(t);\r\n    };\r\n    PropagateTask.prototype.error = function (t, e) {\r\n        // TODO: Remove this check and just do this.sink.error(t, e)?\r\n        if (!this.active) {\r\n            return fatalError(e);\r\n        }\r\n        this.sink.error(t, e);\r\n    };\r\n    return PropagateTask;\r\n}());\r\nvar PropagateRunEventTask = /** @class */ (function (_super) {\r\n    __extends(PropagateRunEventTask, _super);\r\n    function PropagateRunEventTask(runEvent, value, sink) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.runEvent = runEvent;\r\n        _this.value = value;\r\n        return _this;\r\n    }\r\n    PropagateRunEventTask.prototype.runIfActive = function (t) {\r\n        this.runEvent(t, this.value, this.sink);\r\n    };\r\n    return PropagateRunEventTask;\r\n}(PropagateTask));\r\nvar PropagateEventTask = /** @class */ (function (_super) {\r\n    __extends(PropagateEventTask, _super);\r\n    function PropagateEventTask(value, sink) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.value = value;\r\n        return _this;\r\n    }\r\n    PropagateEventTask.prototype.runIfActive = function (t) {\r\n        this.sink.event(t, this.value);\r\n    };\r\n    return PropagateEventTask;\r\n}(PropagateTask));\r\nvar PropagateEndTask = /** @class */ (function (_super) {\r\n    __extends(PropagateEndTask, _super);\r\n    function PropagateEndTask() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    PropagateEndTask.prototype.runIfActive = function (t) {\r\n        this.sink.end(t);\r\n    };\r\n    return PropagateEndTask;\r\n}(PropagateTask));\r\nvar PropagateErrorTask = /** @class */ (function (_super) {\r\n    __extends(PropagateErrorTask, _super);\r\n    function PropagateErrorTask(value, sink) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.value = value;\r\n        return _this;\r\n    }\r\n    PropagateErrorTask.prototype.runIfActive = function (t) {\r\n        this.sink.error(t, this.value);\r\n    };\r\n    return PropagateErrorTask;\r\n}(PropagateTask));\n\n/** @license MIT License (c) copyright 2010-2017 original author or authors */\r\nvar empty = function () { return EMPTY; };\r\nvar isCanonicalEmpty = function (stream) {\r\n    return stream === EMPTY;\r\n};\r\nvar containsCanonicalEmpty = function (streams) {\r\n    return streams.some(isCanonicalEmpty);\r\n};\r\nvar Empty = /** @class */ (function () {\r\n    function Empty() {\r\n    }\r\n    Empty.prototype.run = function (sink, scheduler) {\r\n        return asap(propagateEndTask(sink), scheduler);\r\n    };\r\n    return Empty;\r\n}());\r\nvar EMPTY = new Empty();\n\n/** @license MIT License (c) copyright 2010-2017 original author or authors */\r\nvar never = function () { return NEVER; };\r\nvar Never = /** @class */ (function () {\r\n    function Never() {\r\n    }\r\n    Never.prototype.run = function () {\r\n        return disposeNone();\r\n    };\r\n    return Never;\r\n}());\r\nvar NEVER = new Never();\n\n/** @license MIT License (c) copyright 2010-2017 original author or authors */\r\nvar at = function (t, x) { return new At(t, x); };\r\nvar At = /** @class */ (function () {\r\n    function At(t, x) {\r\n        this.time = t;\r\n        this.value = x;\r\n    }\r\n    At.prototype.run = function (sink, scheduler) {\r\n        return delay$2(this.time, propagateTask(runAt, this.value, sink), scheduler);\r\n    };\r\n    return At;\r\n}());\r\nfunction runAt(t, x, sink) {\r\n    sink.event(t, x);\r\n    sink.end(t);\r\n}\n\n/** @license MIT License (c) copyright 2010-2017 original author or authors */\r\nvar now = function (x) { return at(0, x); };\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\n/**\r\n * Create a stream of events that occur at a regular period\r\n * @param {Number} period periodicity of events\r\n * @returns {Stream} new stream of periodic events, the event value is undefined\r\n */\r\nvar periodic = function (period) {\r\n    return new Periodic(period);\r\n};\r\nvar Periodic = /** @class */ (function () {\r\n    function Periodic(period) {\r\n        this.period = period;\r\n    }\r\n    Periodic.prototype.run = function (sink, scheduler) {\r\n        return periodic$1(this.period, propagateEventTask(undefined, sink), scheduler);\r\n    };\r\n    return Periodic;\r\n}());\n\nvar newStream = function (run) { return new StreamImpl(run); };\r\nvar StreamImpl = /** @class */ (function () {\r\n    function StreamImpl(run) {\r\n        this.run = run;\r\n    }\r\n    return StreamImpl;\r\n}());\n\nvar SettableDisposable = /** @class */ (function () {\r\n    function SettableDisposable() {\r\n        this.disposable = undefined;\r\n        this.disposed = false;\r\n    }\r\n    SettableDisposable.prototype.setDisposable = function (disposable) {\r\n        if (this.disposable !== undefined) {\r\n            throw new Error('setDisposable called more than once');\r\n        }\r\n        this.disposable = disposable;\r\n        if (this.disposed) {\r\n            disposable.dispose();\r\n        }\r\n    };\r\n    SettableDisposable.prototype.dispose = function () {\r\n        if (this.disposed) {\r\n            return;\r\n        }\r\n        this.disposed = true;\r\n        if (this.disposable !== undefined) {\r\n            this.disposable.dispose();\r\n        }\r\n    };\r\n    return SettableDisposable;\r\n}());\n\n/** @license MIT License (c) copyright 2010-2017 original author or authors */\r\nvar runEffects = curry2(function (stream, scheduler) {\r\n    return new Promise(function (resolve, reject) {\r\n        return runStream(stream, scheduler, resolve, reject);\r\n    });\r\n});\r\nfunction runStream(stream, scheduler, resolve, reject) {\r\n    var disposable = new SettableDisposable();\r\n    var observer = new RunEffectsSink(resolve, reject, disposable);\r\n    disposable.setDisposable(stream.run(observer, scheduler));\r\n}\r\nvar RunEffectsSink = /** @class */ (function () {\r\n    function RunEffectsSink(end, error, disposable) {\r\n        this._end = end;\r\n        this._error = error;\r\n        this._disposable = disposable;\r\n        this.active = true;\r\n    }\r\n    RunEffectsSink.prototype.event = function () { };\r\n    RunEffectsSink.prototype.end = function () {\r\n        if (!this.active) {\r\n            return;\r\n        }\r\n        this.dispose(this._error, this._end, undefined);\r\n    };\r\n    RunEffectsSink.prototype.error = function (_t, e) {\r\n        this.dispose(this._error, this._error, e);\r\n    };\r\n    RunEffectsSink.prototype.dispose = function (error, end, x) {\r\n        this.active = false;\r\n        tryDispose(error, end, x, this._disposable);\r\n    };\r\n    return RunEffectsSink;\r\n}());\r\nfunction tryDispose(error, end, x, disposable) {\r\n    try {\r\n        disposable.dispose();\r\n    }\r\n    catch (e) {\r\n        error(e);\r\n        return;\r\n    }\r\n    end(x);\r\n}\n\n/**\r\n * Run a Stream, sending all its events to the provided Sink.\r\n */\r\nvar run = function (sink, scheduler, stream) {\r\n    return stream.run(sink, scheduler);\r\n};\n\nvar RelativeSink = /** @class */ (function () {\r\n    function RelativeSink(offset, sink) {\r\n        this.sink = sink;\r\n        this.offset = offset;\r\n    }\r\n    RelativeSink.prototype.event = function (t, x) {\r\n        this.sink.event(t + this.offset, x);\r\n    };\r\n    RelativeSink.prototype.error = function (t, e) {\r\n        this.sink.error(t + this.offset, e);\r\n    };\r\n    RelativeSink.prototype.end = function (t) {\r\n        this.sink.end(t + this.offset);\r\n    };\r\n    return RelativeSink;\r\n}());\n\n/**\r\n * Create a stream with its own local clock\r\n * This transforms time from the provided scheduler's clock to a stream-local\r\n * clock (which starts at 0), and then *back* to the scheduler's clock before\r\n * propagating events to sink.  In other words, upstream sources will see local times,\r\n * and downstream sinks will see non-local (original) times.\r\n */\r\nvar withLocalTime = function (origin, stream) {\r\n    return new WithLocalTime(origin, stream);\r\n};\r\nvar WithLocalTime = /** @class */ (function () {\r\n    function WithLocalTime(origin, source) {\r\n        this.origin = origin;\r\n        this.source = source;\r\n    }\r\n    WithLocalTime.prototype.run = function (sink, scheduler) {\r\n        return this.source.run(relativeSink(this.origin, sink), schedulerRelativeTo(this.origin, scheduler));\r\n    };\r\n    return WithLocalTime;\r\n}());\r\n/**\r\n * Accumulate offsets instead of nesting RelativeSinks, which can happen\r\n * with higher-order stream and combinators like continueWith when they're\r\n * applied recursively.\r\n */\r\nvar relativeSink = function (origin, sink) {\r\n    return sink instanceof RelativeSink\r\n        ? new RelativeSink(origin + sink.offset, sink.sink)\r\n        : new RelativeSink(origin, sink);\r\n};\n\nvar Pipe = /** @class */ (function () {\r\n    function Pipe(sink) {\r\n        this.sink = sink;\r\n    }\r\n    Pipe.prototype.end = function (t) {\r\n        return this.sink.end(t);\r\n    };\r\n    Pipe.prototype.error = function (t, e) {\r\n        return this.sink.error(t, e);\r\n    };\r\n    return Pipe;\r\n}());\n\n/** @license MIT License (c) copyright 2010 original author or authors */\r\n/**\r\n * Generalized feedback loop. Call a stepper function for each event. The stepper\r\n * will be called with 2 params: the current seed and the an event value.  It must\r\n * return a new { seed, value } pair. The `seed` will be fed back into the next\r\n * invocation of stepper, and the `value` will be propagated as the event value.\r\n * @param stepper loop step function\r\n * @param seed initial seed value passed to first stepper call\r\n * @param stream event stream\r\n * @returns new stream whose values are the `value` field of the objects\r\n * returned by the stepper\r\n */\r\nvar loop = function (stepper, seed, stream) {\r\n    return isCanonicalEmpty(stream) ? empty()\r\n        : new Loop(stepper, seed, stream);\r\n};\r\nvar Loop = /** @class */ (function () {\r\n    function Loop(stepper, seed, source) {\r\n        this.step = stepper;\r\n        this.seed = seed;\r\n        this.source = source;\r\n    }\r\n    Loop.prototype.run = function (sink, scheduler) {\r\n        return this.source.run(new LoopSink(this.step, this.seed, sink), scheduler);\r\n    };\r\n    return Loop;\r\n}());\r\nvar LoopSink = /** @class */ (function (_super) {\r\n    __extends(LoopSink, _super);\r\n    function LoopSink(stepper, seed, sink) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.step = stepper;\r\n        _this.seed = seed;\r\n        return _this;\r\n    }\r\n    LoopSink.prototype.event = function (t, x) {\r\n        var result = this.step(this.seed, x);\r\n        this.seed = result.seed;\r\n        this.sink.event(t, result.value);\r\n    };\r\n    return LoopSink;\r\n}(Pipe));\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\n/**\r\n * Create a stream containing successive reduce results of applying f to\r\n * the previous reduce result and the current stream item.\r\n * @param f reducer function\r\n * @param initial initial value\r\n * @param stream stream to scan\r\n * @returns new stream containing successive reduce results\r\n */\r\nvar scan = function (f, initial, stream) {\r\n    return new Scan(f, initial, stream);\r\n};\r\nvar Scan = /** @class */ (function () {\r\n    function Scan(f, z, source) {\r\n        this.source = source;\r\n        this.f = f;\r\n        this.value = z;\r\n    }\r\n    Scan.prototype.run = function (sink, scheduler) {\r\n        var d1 = asap(propagateEventTask(this.value, sink), scheduler);\r\n        var d2 = this.source.run(new ScanSink(this.f, this.value, sink), scheduler);\r\n        return disposeBoth(d1, d2);\r\n    };\r\n    return Scan;\r\n}());\r\nvar ScanSink = /** @class */ (function (_super) {\r\n    __extends(ScanSink, _super);\r\n    function ScanSink(f, z, sink) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.f = f;\r\n        _this.value = z;\r\n        return _this;\r\n    }\r\n    ScanSink.prototype.event = function (t, x) {\r\n        var f = this.f;\r\n        this.value = f(this.value, x);\r\n        this.sink.event(t, this.value);\r\n    };\r\n    return ScanSink;\r\n}(Pipe));\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\nvar continueWith = function (f, stream) {\r\n    return new ContinueWith(f, stream);\r\n};\r\nvar ContinueWith = /** @class */ (function () {\r\n    function ContinueWith(f, source) {\r\n        this.f = f;\r\n        this.source = source;\r\n    }\r\n    ContinueWith.prototype.run = function (sink, scheduler) {\r\n        return new ContinueWithSink(this.f, this.source, sink, scheduler);\r\n    };\r\n    return ContinueWith;\r\n}());\r\nvar ContinueWithSink = /** @class */ (function (_super) {\r\n    __extends(ContinueWithSink, _super);\r\n    function ContinueWithSink(f, source, sink, scheduler) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.f = f;\r\n        _this.scheduler = scheduler;\r\n        _this.active = true;\r\n        _this.disposable = disposeOnce(source.run(_this, scheduler));\r\n        return _this;\r\n    }\r\n    ContinueWithSink.prototype.event = function (t, x) {\r\n        if (!this.active) {\r\n            return;\r\n        }\r\n        this.sink.event(t, x);\r\n    };\r\n    ContinueWithSink.prototype.end = function (t) {\r\n        if (!this.active) {\r\n            return;\r\n        }\r\n        tryDispose$1(t, this.disposable, this.sink);\r\n        this.startNext(t, this.sink);\r\n    };\r\n    ContinueWithSink.prototype.startNext = function (t, sink) {\r\n        try {\r\n            this.disposable = this.continue(this.f, t, sink);\r\n        }\r\n        catch (e) {\r\n            sink.error(t, e);\r\n        }\r\n    };\r\n    ContinueWithSink.prototype.continue = function (f, t, sink) {\r\n        return run(sink, this.scheduler, withLocalTime(t, f()));\r\n    };\r\n    ContinueWithSink.prototype.dispose = function () {\r\n        this.active = false;\r\n        return this.disposable.dispose();\r\n    };\r\n    return ContinueWithSink;\r\n}(Pipe));\n\n/** @license MIT License (c) copyright 2010-2017 original author or authors */\r\nvar startWith = function (x, stream) {\r\n    return continueWith(function () { return stream; }, now(x));\r\n};\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\nvar Filter = /** @class */ (function () {\r\n    function Filter(p, source) {\r\n        this.p = p;\r\n        this.source = source;\r\n    }\r\n    Filter.prototype.run = function (sink, scheduler) {\r\n        return this.source.run(new FilterSink(this.p, sink), scheduler);\r\n    };\r\n    /**\r\n     * Create a filtered source, fusing adjacent filter.filter if possible\r\n     * @param {function(x:*):boolean} p filtering predicate\r\n     * @param {{run:function}} source source to filter\r\n     * @returns {Filter} filtered source\r\n     */\r\n    Filter.create = function (p, source) {\r\n        if (isCanonicalEmpty(source)) {\r\n            return source;\r\n        }\r\n        if (source instanceof Filter) {\r\n            return new Filter(and(source.p, p), source.source);\r\n        }\r\n        return new Filter(p, source);\r\n    };\r\n    return Filter;\r\n}());\r\nvar FilterSink = /** @class */ (function (_super) {\r\n    __extends(FilterSink, _super);\r\n    function FilterSink(p, sink) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.p = p;\r\n        return _this;\r\n    }\r\n    FilterSink.prototype.event = function (t, x) {\r\n        var p = this.p;\r\n        p(x) && this.sink.event(t, x);\r\n    };\r\n    return FilterSink;\r\n}(Pipe));\r\nvar and = function (p, q) { return function (x) { return p(x) && q(x); }; };\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\nvar FilterMap = /** @class */ (function () {\r\n    function FilterMap(p, f, source) {\r\n        this.p = p;\r\n        this.f = f;\r\n        this.source = source;\r\n    }\r\n    FilterMap.prototype.run = function (sink, scheduler) {\r\n        return this.source.run(new FilterMapSink(this.p, this.f, sink), scheduler);\r\n    };\r\n    return FilterMap;\r\n}());\r\nvar FilterMapSink = /** @class */ (function (_super) {\r\n    __extends(FilterMapSink, _super);\r\n    function FilterMapSink(p, f, sink) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.p = p;\r\n        _this.f = f;\r\n        return _this;\r\n    }\r\n    FilterMapSink.prototype.event = function (t, x) {\r\n        var f = this.f;\r\n        var p = this.p;\r\n        p(x) && this.sink.event(t, f(x));\r\n    };\r\n    return FilterMapSink;\r\n}(Pipe));\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\nvar Map = /** @class */ (function () {\r\n    function Map(f, source) {\r\n        this.f = f;\r\n        this.source = source;\r\n    }\r\n    Map.prototype.run = function (sink, scheduler) {\r\n        return this.source.run(new MapSink(this.f, sink), scheduler);\r\n    };\r\n    /**\r\n     * Create a mapped source, fusing adjacent map.map, filter.map,\r\n     * and filter.map.map if possible\r\n     * @param {function(*):*} f mapping function\r\n     * @param {{run:function}} source source to map\r\n     * @returns {Map|FilterMap} mapped source, possibly fused\r\n     */\r\n    Map.create = function (f, source) {\r\n        if (isCanonicalEmpty(source)) {\r\n            return empty();\r\n        }\r\n        if (source instanceof Map) {\r\n            return new Map(compose(f, source.f), source.source);\r\n        }\r\n        if (source instanceof Filter) {\r\n            return new FilterMap(source.p, f, source.source);\r\n        }\r\n        return new Map(f, source);\r\n    };\r\n    return Map;\r\n}());\r\nvar MapSink = /** @class */ (function (_super) {\r\n    __extends(MapSink, _super);\r\n    function MapSink(f, sink) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.f = f;\r\n        return _this;\r\n    }\r\n    MapSink.prototype.event = function (t, x) {\r\n        var f = this.f;\r\n        this.sink.event(t, f(x));\r\n    };\r\n    return MapSink;\r\n}(Pipe));\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\n/**\r\n * Transform each value in the stream by applying f to each\r\n * @param f mapping function\r\n * @param stream stream to map\r\n * @returns stream containing items transformed by f\r\n */\r\nvar map = function (f, stream) {\r\n    return Map.create(f, stream);\r\n};\r\n/**\r\n* Replace each value in the stream with x\r\n* @param x\r\n* @param stream\r\n* @returns stream containing items replaced with x\r\n*/\r\nvar constant = function (x, stream) {\r\n    return map(function () { return x; }, stream);\r\n};\r\n/**\r\n* Perform a side effect for each item in the stream\r\n* @param f side effect to execute for each item. The return value will be discarded.\r\n* @param stream stream to tap\r\n* @returns new stream containing the same items as this stream\r\n*/\r\nvar tap = function (f, stream) {\r\n    return new Tap(f, stream);\r\n};\r\nvar Tap = /** @class */ (function () {\r\n    function Tap(f, source) {\r\n        this.source = source;\r\n        this.f = f;\r\n    }\r\n    Tap.prototype.run = function (sink, scheduler) {\r\n        return this.source.run(new TapSink(this.f, sink), scheduler);\r\n    };\r\n    return Tap;\r\n}());\r\nvar TapSink = /** @class */ (function (_super) {\r\n    __extends(TapSink, _super);\r\n    function TapSink(f, sink) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.f = f;\r\n        return _this;\r\n    }\r\n    TapSink.prototype.event = function (t, x) {\r\n        var f = this.f;\r\n        f(x);\r\n        this.sink.event(t, x);\r\n    };\r\n    return TapSink;\r\n}(Pipe));\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\nvar IndexSink = /** @class */ (function (_super) {\r\n    __extends(IndexSink, _super);\r\n    function IndexSink(i, sink) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.index = i;\r\n        _this.active = true;\r\n        _this.value = undefined;\r\n        return _this;\r\n    }\r\n    IndexSink.prototype.event = function (t, x) {\r\n        if (!this.active) {\r\n            return;\r\n        }\r\n        this.value = x;\r\n        this.sink.event(t, this);\r\n    };\r\n    IndexSink.prototype.end = function (t) {\r\n        if (!this.active) {\r\n            return;\r\n        }\r\n        this.active = false;\r\n        this.sink.event(t, this);\r\n    };\r\n    return IndexSink;\r\n}(Pipe));\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\n/** @author Brian Cavalier */\r\n/** @author John Hann */\r\n/**\r\n * TODO: find a better way (without `any`)\r\n */\r\nfunction invoke(f, args) {\r\n    /* eslint complexity: [2,7] */\r\n    switch (args.length) {\r\n        case 0: return f();\r\n        case 1: return f(args[0]);\r\n        case 2: return f(args[0], args[1]);\r\n        case 3: return f(args[0], args[1], args[2]);\r\n        case 4: return f(args[0], args[1], args[2], args[3]);\r\n        case 5: return f(args[0], args[1], args[2], args[3], args[4]);\r\n        default:\r\n            return f.apply(undefined, args);\r\n    }\r\n}\n\n/** @license MIT License (c) copyright 2010 original author or authors */\r\n/**\r\n * Combine latest events from two streams\r\n * @param f function to combine most recent events\r\n * @param stream1\r\n * @param stream2\r\n * @returns stream containing the result of applying f to the most recent\r\n *  event of each input stream, whenever a new event arrives on any stream.\r\n */\r\nvar combine = function (f, stream1, stream2) {\r\n    return combineArray(f, [stream1, stream2]);\r\n};\r\n/**\r\n* Combine latest events from all input streams\r\n* @param f function to combine most recent events\r\n* @param streams most recent events\r\n* @returns stream containing the result of applying f to the most recent\r\n*  event of each input stream, whenever a new event arrives on any stream.\r\n*/\r\nvar combineArray = function (f, streams) {\r\n    return streams.length === 0 || containsCanonicalEmpty(streams) ? empty()\r\n        : streams.length === 1 ? map(f, streams[0])\r\n            : new Combine(f, streams);\r\n};\r\nvar Combine = /** @class */ (function () {\r\n    function Combine(f, sources) {\r\n        this.f = f;\r\n        this.sources = sources;\r\n    }\r\n    Combine.prototype.run = function (sink, scheduler) {\r\n        var l = this.sources.length;\r\n        var disposables = new Array(l);\r\n        var sinks = new Array(l);\r\n        var mergeSink = new CombineSink(disposables, sinks.length, sink, this.f);\r\n        for (var indexSink = void 0, i = 0; i < l; ++i) {\r\n            indexSink = sinks[i] = new IndexSink(i, mergeSink);\r\n            disposables[i] = this.sources[i].run(indexSink, scheduler);\r\n        }\r\n        return disposeAll(disposables);\r\n    };\r\n    return Combine;\r\n}());\r\nvar CombineSink = /** @class */ (function (_super) {\r\n    __extends(CombineSink, _super);\r\n    function CombineSink(disposables, length, sink, f) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.disposables = disposables;\r\n        _this.f = f;\r\n        _this.awaiting = length;\r\n        _this.values = new Array(length);\r\n        _this.hasValue = new Array(length).fill(false);\r\n        _this.activeCount = length;\r\n        return _this;\r\n    }\r\n    CombineSink.prototype.event = function (t, indexedValue) {\r\n        if (!indexedValue.active) {\r\n            this.dispose(t, indexedValue.index);\r\n            return;\r\n        }\r\n        var i = indexedValue.index;\r\n        var awaiting = this.updateReady(i);\r\n        this.values[i] = indexedValue.value;\r\n        if (awaiting === 0) {\r\n            this.sink.event(t, invoke(this.f, this.values));\r\n        }\r\n    };\r\n    CombineSink.prototype.updateReady = function (index) {\r\n        if (this.awaiting > 0) {\r\n            if (!this.hasValue[index]) {\r\n                this.hasValue[index] = true;\r\n                this.awaiting -= 1;\r\n            }\r\n        }\r\n        return this.awaiting;\r\n    };\r\n    CombineSink.prototype.dispose = function (t, index) {\r\n        tryDispose$1(t, this.disposables[index], this.sink);\r\n        if (--this.activeCount === 0) {\r\n            this.sink.end(t);\r\n        }\r\n    };\r\n    return CombineSink;\r\n}(Pipe));\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\n/**\r\n * Assume fs is a stream containing functions, and apply the latest function\r\n * in fs to the latest value in xs.\r\n * fs:         --f---------g--------h------>\r\n * xs:         -a-------b-------c-------d-->\r\n * ap(fs, xs): --fa-----fb-gb---gc--hc--hd->\r\n * @param {Stream} fs stream of functions to apply to the latest x\r\n * @param {Stream} xs stream of values to which to apply all the latest f\r\n * @returns {Stream} stream containing all the applications of fs to xs\r\n */\r\nfunction ap(fs, xs) {\r\n    return combine(apply, fs, xs);\r\n}\n\n/** @license MIT License (c) copyright 2010 original author or authors */\r\nvar mergeConcurrently = function (concurrency, stream) {\r\n    return mergeMapConcurrently(id, concurrency, stream);\r\n};\r\nvar mergeMapConcurrently = function (f, concurrency, stream) {\r\n    return isCanonicalEmpty(stream) ? empty()\r\n        : new MergeConcurrently(f, concurrency, stream);\r\n};\r\nvar MergeConcurrently = /** @class */ (function () {\r\n    function MergeConcurrently(f, concurrency, source) {\r\n        this.f = f;\r\n        this.concurrency = concurrency;\r\n        this.source = source;\r\n    }\r\n    MergeConcurrently.prototype.run = function (sink, scheduler) {\r\n        return new Outer(this.f, this.concurrency, this.source, sink, scheduler);\r\n    };\r\n    return MergeConcurrently;\r\n}());\r\nvar isNonEmpty = function (array) { return array.length > 0; };\r\nvar Outer = /** @class */ (function () {\r\n    function Outer(f, concurrency, source, sink, scheduler) {\r\n        this.f = f;\r\n        this.concurrency = concurrency;\r\n        this.sink = sink;\r\n        this.scheduler = scheduler;\r\n        this.pending = [];\r\n        this.current = [];\r\n        this.disposable = disposeOnce(source.run(this, scheduler));\r\n        this.active = true;\r\n    }\r\n    Outer.prototype.event = function (t, x) {\r\n        this.addInner(t, x);\r\n    };\r\n    Outer.prototype.addInner = function (t, x) {\r\n        if (this.current.length < this.concurrency) {\r\n            this.startInner(t, x);\r\n        }\r\n        else {\r\n            this.pending.push(x);\r\n        }\r\n    };\r\n    Outer.prototype.startInner = function (t, x) {\r\n        try {\r\n            this.initInner(t, x);\r\n        }\r\n        catch (e) {\r\n            this.error(t, e);\r\n        }\r\n    };\r\n    Outer.prototype.initInner = function (t, x) {\r\n        var innerSink = new Inner(t, this, this.sink);\r\n        innerSink.disposable = mapAndRun(this.f, t, x, innerSink, this.scheduler);\r\n        this.current.push(innerSink);\r\n    };\r\n    Outer.prototype.end = function (t) {\r\n        this.active = false;\r\n        tryDispose$1(t, this.disposable, this.sink);\r\n        this.checkEnd(t);\r\n    };\r\n    Outer.prototype.error = function (t, e) {\r\n        this.active = false;\r\n        this.sink.error(t, e);\r\n    };\r\n    Outer.prototype.dispose = function () {\r\n        this.active = false;\r\n        this.pending.length = 0;\r\n        this.disposable.dispose();\r\n        disposeAll(this.current).dispose();\r\n    };\r\n    Outer.prototype.endInner = function (t, inner) {\r\n        var i = this.current.indexOf(inner);\r\n        if (i >= 0) {\r\n            this.current.splice(i, 1);\r\n        }\r\n        tryDispose$1(t, inner, this);\r\n        var pending = this.pending;\r\n        if (isNonEmpty(pending)) {\r\n            this.startInner(t, pending.shift());\r\n        }\r\n        else {\r\n            this.checkEnd(t);\r\n        }\r\n    };\r\n    Outer.prototype.checkEnd = function (t) {\r\n        if (!this.active && this.current.length === 0) {\r\n            this.sink.end(t);\r\n        }\r\n    };\r\n    return Outer;\r\n}());\r\nvar mapAndRun = function (f, t, x, sink, scheduler) {\r\n    return f(x).run(sink, schedulerRelativeTo(t, scheduler));\r\n};\r\nvar Inner = /** @class */ (function () {\r\n    function Inner(time, outer, sink) {\r\n        this.time = time;\r\n        this.outer = outer;\r\n        this.sink = sink;\r\n        this.disposable = disposeNone();\r\n    }\r\n    Inner.prototype.event = function (t, x) {\r\n        this.sink.event(t + this.time, x);\r\n    };\r\n    Inner.prototype.end = function (t) {\r\n        this.outer.endInner(t + this.time, this);\r\n    };\r\n    Inner.prototype.error = function (t, e) {\r\n        this.outer.error(t + this.time, e);\r\n    };\r\n    Inner.prototype.dispose = function () {\r\n        return this.disposable.dispose();\r\n    };\r\n    return Inner;\r\n}());\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\n/**\r\n * Map each value in the stream to a new stream, and merge it into the\r\n * returned outer stream. Event arrival times are preserved.\r\n * @param f chaining function, must return a Stream\r\n * @param stream\r\n * @returns new stream containing all events from each stream returned by f\r\n */\r\nvar chain = function (f, stream) { return mergeMapConcurrently(f, Infinity, stream); };\r\n/**\r\n * Monadic join. Flatten a Stream<Stream<X>> to Stream<X> by merging inner\r\n * streams to the outer. Event arrival times are preserved.\r\n * @param stream stream of streams\r\n * @returns new stream containing all events of all inner streams\r\n */\r\nvar join = function (stream) { return mergeConcurrently(Infinity, stream); };\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\n/**\r\n * Map each value in stream to a new stream, and concatenate them all\r\n * stream:              -a---b---cX\r\n * f(a):                 1-1-1-1X\r\n * f(b):                        -2-2-2-2X\r\n * f(c):                                -3-3-3-3X\r\n * stream.concatMap(f): -1-1-1-1-2-2-2-2-3-3-3-3X\r\n * @param f function to map each value to a stream\r\n * @param stream\r\n * @returns new stream containing all events from each stream returned by f\r\n */\r\nvar concatMap = function (f, stream) {\r\n    return mergeMapConcurrently(f, 1, stream);\r\n};\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\n/**\r\n * @returns stream containing events from two streams in time order.\r\n * If two events are simultaneous they will be merged in arbitrary order.\r\n */\r\nfunction merge(stream1, stream2) {\r\n    return mergeArray([stream1, stream2]);\r\n}\r\n/**\r\n * @param streams array of stream to merge\r\n * @returns stream containing events from all input observables\r\n * in time order.  If two events are simultaneous they will be merged in\r\n * arbitrary order.\r\n */\r\nvar mergeArray = function (streams) {\r\n    return mergeStreams(withoutCanonicalEmpty(streams));\r\n};\r\n/**\r\n * This implements fusion/flattening for merge.  It will\r\n * fuse adjacent merge operations.  For example:\r\n * - a.merge(b).merge(c) effectively becomes merge(a, b, c)\r\n * - merge(a, merge(b, c)) effectively becomes merge(a, b, c)\r\n * It does this by concatenating the sources arrays of\r\n * any nested Merge sources, in effect \"flattening\" nested\r\n * merge operations into a single merge.\r\n * TODO: use {@link MergeArray}\r\n */\r\nvar mergeStreams = function (streams) {\r\n    return streams.length === 0 ? empty()\r\n        : streams.length === 1 ? streams[0]\r\n            : new Merge(reduce(appendSources, [], streams));\r\n};\r\nvar withoutCanonicalEmpty = function (streams) {\r\n    return streams.filter(isNotCanonicalEmpty);\r\n};\r\nvar isNotCanonicalEmpty = function (stream) {\r\n    return !isCanonicalEmpty(stream);\r\n};\r\nvar appendSources = function (sources, stream) {\r\n    return sources.concat(stream instanceof Merge ? stream.sources : stream);\r\n};\r\nvar Merge = /** @class */ (function () {\r\n    function Merge(sources) {\r\n        this.sources = sources;\r\n    }\r\n    Merge.prototype.run = function (sink, scheduler) {\r\n        var l = this.sources.length;\r\n        var disposables = new Array(l);\r\n        var sinks = new Array(l);\r\n        var mergeSink = new MergeSink(disposables, sinks, sink);\r\n        for (var indexSink = void 0, i = 0; i < l; ++i) {\r\n            indexSink = sinks[i] = new IndexSink(i, mergeSink);\r\n            disposables[i] = this.sources[i].run(indexSink, scheduler);\r\n        }\r\n        return disposeAll(disposables);\r\n    };\r\n    return Merge;\r\n}());\r\nvar MergeSink = /** @class */ (function (_super) {\r\n    __extends(MergeSink, _super);\r\n    function MergeSink(disposables, sinks, sink) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.disposables = disposables;\r\n        _this.activeCount = sinks.length;\r\n        return _this;\r\n    }\r\n    MergeSink.prototype.event = function (t, indexValue) {\r\n        if (!indexValue.active) {\r\n            this.dispose(t, indexValue.index);\r\n            return;\r\n        }\r\n        this.sink.event(t, indexValue.value);\r\n    };\r\n    MergeSink.prototype.dispose = function (t, index) {\r\n        tryDispose$1(t, this.disposables[index], this.sink);\r\n        if (--this.activeCount === 0) {\r\n            this.sink.end(t);\r\n        }\r\n    };\r\n    return MergeSink;\r\n}(Pipe));\n\n/** @license MIT License (c) copyright 2010 original author or authors */\r\nvar sample = function (values, sampler) {\r\n    return snapshot(function (x) { return x; }, values, sampler);\r\n};\r\nvar snapshot = function (f, values, sampler) {\r\n    return isCanonicalEmpty(sampler) || isCanonicalEmpty(values)\r\n        ? empty()\r\n        : new Snapshot(f, values, sampler);\r\n};\r\nvar Snapshot = /** @class */ (function () {\r\n    function Snapshot(f, values, sampler) {\r\n        this.f = f;\r\n        this.values = values;\r\n        this.sampler = sampler;\r\n    }\r\n    Snapshot.prototype.run = function (sink, scheduler) {\r\n        var sampleSink = new SnapshotSink(this.f, sink);\r\n        var valuesDisposable = this.values.run(sampleSink.latest, scheduler);\r\n        var samplerDisposable = this.sampler.run(sampleSink, scheduler);\r\n        return disposeBoth(samplerDisposable, valuesDisposable);\r\n    };\r\n    return Snapshot;\r\n}());\r\nvar SnapshotSink = /** @class */ (function (_super) {\r\n    __extends(SnapshotSink, _super);\r\n    function SnapshotSink(f, sink) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.f = f;\r\n        _this.latest = new LatestValueSink(_this);\r\n        return _this;\r\n    }\r\n    SnapshotSink.prototype.event = function (t, x) {\r\n        if (this.latest.hasValue) {\r\n            var f = this.f;\r\n            // TODO: value should be boxed to avoid ! bang\r\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\r\n            this.sink.event(t, f(this.latest.value, x));\r\n        }\r\n    };\r\n    return SnapshotSink;\r\n}(Pipe));\r\nvar LatestValueSink = /** @class */ (function (_super) {\r\n    __extends(LatestValueSink, _super);\r\n    function LatestValueSink(sink) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.hasValue = false;\r\n        return _this;\r\n    }\r\n    LatestValueSink.prototype.event = function (_t, x) {\r\n        this.value = x;\r\n        this.hasValue = true;\r\n    };\r\n    LatestValueSink.prototype.end = function () { };\r\n    return LatestValueSink;\r\n}(Pipe));\n\n/** @license MIT License (c) copyright 2010 original author or authors */\r\n// Construct a constrained bounds\r\nvar boundsFrom = function (unsafeMin, unsafeMax) {\r\n    var min = Math.max(0, unsafeMin);\r\n    var max = Math.max(min, unsafeMax);\r\n    return { min: min, max: max };\r\n};\r\n// Combine 2 bounds by narrowing min and max\r\nvar mergeBounds = function (b1, b2) {\r\n    return boundsFrom(b1.min + b2.min, Math.min(b1.max, b1.min + b2.max));\r\n};\r\n// Nil bounds excludes all slice indices\r\nvar isNilBounds = function (b) {\r\n    return b.min >= b.max;\r\n};\r\n// Infinite bounds includes all slice indices\r\nvar isInfiniteBounds = function (b) {\r\n    return b.min <= 0 && b.max === Infinity;\r\n};\n\n// TODO: split into smaller files\r\n/**\r\n * @param n\r\n * @param stream\r\n * @returns new stream containing only up to the first n items from stream\r\n */\r\nvar take = function (n, stream) {\r\n    return slice(0, n, stream);\r\n};\r\n/**\r\n * @param n\r\n * @param stream\r\n * @returns new stream with the first n items removed\r\n */\r\nvar skip = function (n, stream) {\r\n    return slice(n, Infinity, stream);\r\n};\r\n/**\r\n * Slice a stream by index. Negative start/end indexes are not supported\r\n * @param start\r\n * @param end\r\n * @param stream\r\n * @returns stream containing items where start <= index < end\r\n */\r\nvar slice = function (start, end, stream) {\r\n    return sliceBounds(boundsFrom(start, end), stream);\r\n};\r\nvar sliceBounds = function (bounds, stream) {\r\n    return isSliceEmpty(bounds, stream) ? empty()\r\n        : stream instanceof Map ? commuteMapSlice(bounds, stream)\r\n            : stream instanceof Slice ? fuseSlice(bounds, stream)\r\n                : createSlice(bounds, stream);\r\n};\r\nvar isSliceEmpty = function (bounds, stream) {\r\n    return isCanonicalEmpty(stream) || isNilBounds(bounds);\r\n};\r\nvar createSlice = function (bounds, stream) {\r\n    return isInfiniteBounds(bounds) ? stream : new Slice(bounds, stream);\r\n};\r\nvar commuteMapSlice = function (bounds, mapStream) {\r\n    return Map.create(mapStream.f, sliceBounds(bounds, mapStream.source));\r\n};\r\nvar fuseSlice = function (bounds, sliceStream) {\r\n    return sliceBounds(mergeBounds(sliceStream.bounds, bounds), sliceStream.source);\r\n};\r\nvar Slice = /** @class */ (function () {\r\n    function Slice(bounds, source) {\r\n        this.source = source;\r\n        this.bounds = bounds;\r\n    }\r\n    Slice.prototype.run = function (sink, scheduler) {\r\n        var disposable = new SettableDisposable();\r\n        var sliceSink = new SliceSink(this.bounds.min, this.bounds.max - this.bounds.min, sink, disposable);\r\n        disposable.setDisposable(this.source.run(sliceSink, scheduler));\r\n        return disposable;\r\n    };\r\n    return Slice;\r\n}());\r\nvar SliceSink = /** @class */ (function (_super) {\r\n    __extends(SliceSink, _super);\r\n    function SliceSink(skip, take, sink, disposable) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.skip = skip;\r\n        _this.take = take;\r\n        _this.disposable = disposable;\r\n        return _this;\r\n    }\r\n    SliceSink.prototype.event = function (t, x) {\r\n        /* eslint complexity: [1, 4] */\r\n        if (this.skip > 0) {\r\n            this.skip -= 1;\r\n            return;\r\n        }\r\n        if (this.take === 0) {\r\n            return;\r\n        }\r\n        this.take -= 1;\r\n        this.sink.event(t, x);\r\n        if (this.take === 0) {\r\n            this.disposable.dispose();\r\n            this.sink.end(t);\r\n        }\r\n    };\r\n    return SliceSink;\r\n}(Pipe));\r\nvar takeWhile = function (p, stream) {\r\n    return isCanonicalEmpty(stream) ? empty()\r\n        : new TakeWhile(p, stream);\r\n};\r\nvar TakeWhile = /** @class */ (function () {\r\n    function TakeWhile(p, source) {\r\n        this.p = p;\r\n        this.source = source;\r\n    }\r\n    TakeWhile.prototype.run = function (sink, scheduler) {\r\n        var disposable = new SettableDisposable();\r\n        var takeWhileSink = new TakeWhileSink(this.p, sink, disposable);\r\n        disposable.setDisposable(this.source.run(takeWhileSink, scheduler));\r\n        return disposable;\r\n    };\r\n    return TakeWhile;\r\n}());\r\nvar TakeWhileSink = /** @class */ (function (_super) {\r\n    __extends(TakeWhileSink, _super);\r\n    function TakeWhileSink(p, sink, disposable) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.p = p;\r\n        _this.active = true;\r\n        _this.disposable = disposable;\r\n        return _this;\r\n    }\r\n    TakeWhileSink.prototype.event = function (t, x) {\r\n        if (!this.active) {\r\n            return;\r\n        }\r\n        var p = this.p;\r\n        this.active = p(x);\r\n        if (this.active) {\r\n            this.sink.event(t, x);\r\n        }\r\n        else {\r\n            this.disposable.dispose();\r\n            this.sink.end(t);\r\n        }\r\n    };\r\n    return TakeWhileSink;\r\n}(Pipe));\r\nvar skipWhile = function (p, stream) {\r\n    return isCanonicalEmpty(stream) ? empty()\r\n        : new SkipWhile(p, stream);\r\n};\r\nvar SkipWhile = /** @class */ (function () {\r\n    function SkipWhile(p, source) {\r\n        this.p = p;\r\n        this.source = source;\r\n    }\r\n    SkipWhile.prototype.run = function (sink, scheduler) {\r\n        return this.source.run(new SkipWhileSink(this.p, sink), scheduler);\r\n    };\r\n    return SkipWhile;\r\n}());\r\nvar SkipWhileSink = /** @class */ (function (_super) {\r\n    __extends(SkipWhileSink, _super);\r\n    function SkipWhileSink(p, sink) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.p = p;\r\n        _this.skipping = true;\r\n        return _this;\r\n    }\r\n    SkipWhileSink.prototype.event = function (t, x) {\r\n        if (this.skipping) {\r\n            var p = this.p;\r\n            this.skipping = p(x);\r\n            if (this.skipping) {\r\n                return;\r\n            }\r\n        }\r\n        this.sink.event(t, x);\r\n    };\r\n    return SkipWhileSink;\r\n}(Pipe));\r\nvar skipAfter = function (p, stream) {\r\n    return isCanonicalEmpty(stream) ? empty()\r\n        : new SkipAfter(p, stream);\r\n};\r\nvar SkipAfter = /** @class */ (function () {\r\n    function SkipAfter(p, source) {\r\n        this.p = p;\r\n        this.source = source;\r\n    }\r\n    SkipAfter.prototype.run = function (sink, scheduler) {\r\n        return this.source.run(new SkipAfterSink(this.p, sink), scheduler);\r\n    };\r\n    return SkipAfter;\r\n}());\r\nvar SkipAfterSink = /** @class */ (function (_super) {\r\n    __extends(SkipAfterSink, _super);\r\n    function SkipAfterSink(p, sink) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.p = p;\r\n        _this.skipping = false;\r\n        return _this;\r\n    }\r\n    SkipAfterSink.prototype.event = function (t, x) {\r\n        if (this.skipping) {\r\n            return;\r\n        }\r\n        var p = this.p;\r\n        this.skipping = p(x);\r\n        this.sink.event(t, x);\r\n        if (this.skipping) {\r\n            this.sink.end(t);\r\n        }\r\n    };\r\n    return SkipAfterSink;\r\n}(Pipe));\n\n/** @license MIT License (c) copyright 2017 original author or authors */\r\nvar withItems = function (items, stream) {\r\n    return zipItems(keepLeft, items, stream);\r\n};\r\nvar zipItems = function (f, items, stream) {\r\n    return isCanonicalEmpty(stream) || items.length === 0\r\n        ? empty()\r\n        : new ZipItems(f, items, take(items.length, stream));\r\n};\r\nvar keepLeft = function (a) { return a; };\r\nvar ZipItems = /** @class */ (function () {\r\n    function ZipItems(f, items, source) {\r\n        this.f = f;\r\n        this.items = items;\r\n        this.source = source;\r\n    }\r\n    ZipItems.prototype.run = function (sink, scheduler) {\r\n        return this.source.run(new ZipItemsSink(this.f, this.items, sink), scheduler);\r\n    };\r\n    return ZipItems;\r\n}());\r\nvar ZipItemsSink = /** @class */ (function (_super) {\r\n    __extends(ZipItemsSink, _super);\r\n    function ZipItemsSink(f, items, sink) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.f = f;\r\n        _this.items = items;\r\n        _this.index = 0;\r\n        return _this;\r\n    }\r\n    ZipItemsSink.prototype.event = function (t, b) {\r\n        var f = this.f;\r\n        this.sink.event(t, f(this.items[this.index], b));\r\n        this.index += 1;\r\n    };\r\n    return ZipItemsSink;\r\n}(Pipe));\n\n// Copied and modified from https://github.com/invertase/denque\r\n// MIT License\r\n// These constants were extracted directly from denque's shift()\r\n// It's not clear exactly why the authors chose these particular\r\n// values, but given denque's stated goals, it seems likely that\r\n// they were chosen for speed/memory reasons.\r\n// Max value of _head at which Queue is willing to shink\r\n// its internal array\r\nvar HEAD_MAX_SHRINK = 2;\r\n// Min value of _tail at which Queue is willing to shink\r\n// its internal array\r\nvar TAIL_MIN_SHRINK = 10000;\r\nvar Queue = /** @class */ (function () {\r\n    function Queue() {\r\n        this.head = 0;\r\n        this.tail = 0;\r\n        this.capacityMask = 0x3;\r\n        this.list = new Array(4);\r\n    }\r\n    Queue.prototype.push = function (x) {\r\n        var tail = this.tail;\r\n        this.list[tail] = x;\r\n        this.tail = (tail + 1) & this.capacityMask;\r\n        if (this.tail === this.head) {\r\n            this.growArray();\r\n        }\r\n        if (this.head < this.tail) {\r\n            return this.tail - this.head;\r\n        }\r\n        else {\r\n            return this.capacityMask + 1 - (this.head - this.tail);\r\n        }\r\n    };\r\n    Queue.prototype.shift = function () {\r\n        var head = this.head;\r\n        if (head === this.tail) {\r\n            return undefined;\r\n        }\r\n        var x = this.list[head];\r\n        this.list[head] = undefined;\r\n        this.head = (head + 1) & this.capacityMask;\r\n        if (head < HEAD_MAX_SHRINK &&\r\n            this.tail > TAIL_MIN_SHRINK &&\r\n            this.tail <= this.list.length >>> 2) {\r\n            this.shrinkArray();\r\n        }\r\n        return x;\r\n    };\r\n    Queue.prototype.isEmpty = function () {\r\n        return this.head === this.tail;\r\n    };\r\n    Queue.prototype.length = function () {\r\n        if (this.head === this.tail) {\r\n            return 0;\r\n        }\r\n        else if (this.head < this.tail) {\r\n            return this.tail - this.head;\r\n        }\r\n        else {\r\n            return this.capacityMask + 1 - (this.head - this.tail);\r\n        }\r\n    };\r\n    Queue.prototype.growArray = function () {\r\n        if (this.head) {\r\n            // copy existing data, head to end, then beginning to tail.\r\n            this.list = this.copyArray();\r\n            this.head = 0;\r\n        }\r\n        // head is at 0 and array is now full, safe to extend\r\n        this.tail = this.list.length;\r\n        this.list.length *= 2;\r\n        this.capacityMask = (this.capacityMask << 1) | 1;\r\n    };\r\n    Queue.prototype.shrinkArray = function () {\r\n        this.list.length >>>= 1;\r\n        this.capacityMask >>>= 1;\r\n    };\r\n    Queue.prototype.copyArray = function () {\r\n        var newArray = [];\r\n        var list = this.list;\r\n        var len = list.length;\r\n        var i;\r\n        for (i = this.head; i < len; i++) {\r\n            newArray.push(list[i]);\r\n        }\r\n        for (i = 0; i < this.tail; i++) {\r\n            newArray.push(list[i]);\r\n        }\r\n        return newArray;\r\n    };\r\n    return Queue;\r\n}());\n\n/** @license MIT License (c) copyright 2010 original author or authors */\r\n/**\r\n * Combine two streams pairwise by index by applying f to values at corresponding\r\n * indices.  The returned stream ends when either of the input streams ends.\r\n * @param {function} f function to combine values\r\n * @returns {Stream} new stream with items at corresponding indices combined\r\n *  using f\r\n */\r\nfunction zip(f, stream1, stream2) {\r\n    return zipArray(f, [stream1, stream2]);\r\n}\r\n/**\r\n* Combine streams pairwise (or tuple-wise) by index by applying f to values\r\n* at corresponding indices.  The returned stream ends when any of the input\r\n* streams ends.\r\n* @param {function} f function to combine values\r\n* @param {[Stream]} streams streams to zip using f\r\n* @returns {Stream} new stream with items at corresponding indices combined\r\n*  using f\r\n*/\r\nvar zipArray = function (f, streams) {\r\n    return streams.length === 0 || containsCanonicalEmpty(streams) ? empty()\r\n        : streams.length === 1 ? map(f, streams[0])\r\n            : new Zip(f, streams);\r\n};\r\nvar Zip = /** @class */ (function () {\r\n    function Zip(f, sources) {\r\n        this.f = f;\r\n        this.sources = sources;\r\n    }\r\n    Zip.prototype.run = function (sink, scheduler) {\r\n        var l = this.sources.length;\r\n        var disposables = new Array(l);\r\n        var sinks = new Array(l);\r\n        var buffers = new Array(l);\r\n        var zipSink = new ZipSink(this.f, buffers, sinks, sink);\r\n        for (var indexSink = void 0, i = 0; i < l; ++i) {\r\n            buffers[i] = new Queue();\r\n            indexSink = sinks[i] = new IndexSink(i, zipSink);\r\n            disposables[i] = this.sources[i].run(indexSink, scheduler);\r\n        }\r\n        return disposeAll(disposables);\r\n    };\r\n    return Zip;\r\n}());\r\nvar ZipSink = /** @class */ (function (_super) {\r\n    __extends(ZipSink, _super);\r\n    function ZipSink(f, buffers, sinks, sink) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.f = f;\r\n        _this.sinks = sinks;\r\n        _this.buffers = buffers;\r\n        return _this;\r\n    }\r\n    ZipSink.prototype.event = function (t, indexedValue) {\r\n        /* eslint complexity: [1, 5] */\r\n        if (!indexedValue.active) {\r\n            this.dispose(t, indexedValue.index);\r\n            return;\r\n        }\r\n        var buffers = this.buffers;\r\n        var buffer = buffers[indexedValue.index];\r\n        buffer.push(indexedValue.value);\r\n        if (buffer.length() === 1) {\r\n            if (!ready(buffers)) {\r\n                return;\r\n            }\r\n            emitZipped(this.f, t, buffers, this.sink);\r\n            if (ended(this.buffers, this.sinks)) {\r\n                this.sink.end(t);\r\n            }\r\n        }\r\n    };\r\n    ZipSink.prototype.dispose = function (t, index) {\r\n        var buffer = this.buffers[index];\r\n        if (buffer.isEmpty()) {\r\n            this.sink.end(t);\r\n        }\r\n    };\r\n    return ZipSink;\r\n}(Pipe));\r\nvar emitZipped = function (f, t, buffers, sink) {\r\n    return sink.event(t, invoke(f, map$2(head, buffers)));\r\n};\r\nvar head = function (buffer) { return buffer.shift(); };\r\nfunction ended(buffers, sinks) {\r\n    for (var i = 0, l = buffers.length; i < l; ++i) {\r\n        if (buffers[i].isEmpty() && !sinks[i].active) {\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n}\r\nfunction ready(buffers) {\r\n    for (var i = 0, l = buffers.length; i < l; ++i) {\r\n        if (buffers[i].isEmpty()) {\r\n            return false;\r\n        }\r\n    }\r\n    return true;\r\n}\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\n/**\r\n * Given a stream of streams, return a new stream that adopts the behavior\r\n * of the most recent inner stream.\r\n * @param stream of streams on which to switch\r\n * @returns switching stream\r\n */\r\nvar switchLatest = function (stream) {\r\n    return isCanonicalEmpty(stream)\r\n        ? empty()\r\n        : new Switch(stream);\r\n};\r\nvar Switch = /** @class */ (function () {\r\n    function Switch(source) {\r\n        this.source = source;\r\n    }\r\n    Switch.prototype.run = function (sink, scheduler) {\r\n        var switchSink = new SwitchSink(sink, scheduler);\r\n        return disposeBoth(switchSink, this.source.run(switchSink, scheduler));\r\n    };\r\n    return Switch;\r\n}());\r\nvar SwitchSink = /** @class */ (function () {\r\n    function SwitchSink(sink, scheduler) {\r\n        this.sink = sink;\r\n        this.scheduler = scheduler;\r\n        this.current = null;\r\n        this.ended = false;\r\n    }\r\n    SwitchSink.prototype.event = function (t, stream) {\r\n        this.disposeCurrent(t);\r\n        this.current = new Segment(stream, t, Infinity, this, this.sink, this.scheduler);\r\n    };\r\n    SwitchSink.prototype.end = function (t) {\r\n        this.ended = true;\r\n        this.checkEnd(t);\r\n    };\r\n    SwitchSink.prototype.error = function (t, e) {\r\n        this.ended = true;\r\n        this.sink.error(t, e);\r\n    };\r\n    SwitchSink.prototype.dispose = function () {\r\n        return this.disposeCurrent(currentTime(this.scheduler));\r\n    };\r\n    SwitchSink.prototype.disposeCurrent = function (t) {\r\n        if (this.current !== null) {\r\n            return this.current.dispose(t);\r\n        }\r\n    };\r\n    SwitchSink.prototype.disposeInner = function (t, inner) {\r\n        inner.dispose(t);\r\n        if (inner === this.current) {\r\n            this.current = null;\r\n        }\r\n    };\r\n    SwitchSink.prototype.checkEnd = function (t) {\r\n        if (this.ended && this.current === null) {\r\n            this.sink.end(t);\r\n        }\r\n    };\r\n    SwitchSink.prototype.endInner = function (t, inner) {\r\n        this.disposeInner(t, inner);\r\n        this.checkEnd(t);\r\n    };\r\n    SwitchSink.prototype.errorInner = function (t, e, inner) {\r\n        this.disposeInner(t, inner);\r\n        this.sink.error(t, e);\r\n    };\r\n    return SwitchSink;\r\n}());\r\nvar Segment = /** @class */ (function () {\r\n    function Segment(source, min, max, outer, sink, scheduler) {\r\n        this.min = min;\r\n        this.max = max;\r\n        this.outer = outer;\r\n        this.sink = sink;\r\n        this.disposable = source.run(this, schedulerRelativeTo(min, scheduler));\r\n    }\r\n    Segment.prototype.event = function (t, x) {\r\n        var time = Math.max(0, t + this.min);\r\n        if (time < this.max) {\r\n            this.sink.event(time, x);\r\n        }\r\n    };\r\n    Segment.prototype.end = function (t) {\r\n        this.outer.endInner(t + this.min, this);\r\n    };\r\n    Segment.prototype.error = function (t, e) {\r\n        this.outer.errorInner(t + this.min, e, this);\r\n    };\r\n    Segment.prototype.dispose = function (t) {\r\n        tryDispose$1(t, this.disposable, this.sink);\r\n    };\r\n    return Segment;\r\n}());\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\nfunction filter(p, stream) {\r\n    return Filter.create(p, stream);\r\n}\r\n/**\r\n * Skip repeated events, using === to detect duplicates\r\n * @param stream stream from which to omit repeated events\r\n * @returns stream without repeated events\r\n */\r\nvar skipRepeats = function (stream) {\r\n    return skipRepeatsWith(same, stream);\r\n};\r\n/**\r\n * Skip repeated events using the provided equals function to detect duplicates\r\n * @param equals optional function to compare items\r\n * @param stream stream from which to omit repeated events\r\n * @returns stream without repeated events\r\n */\r\nvar skipRepeatsWith = function (equals, stream) {\r\n    return isCanonicalEmpty(stream) ? empty()\r\n        : new SkipRepeats(equals, stream);\r\n};\r\nvar SkipRepeats = /** @class */ (function () {\r\n    function SkipRepeats(equals, source) {\r\n        this.equals = equals;\r\n        this.source = source;\r\n    }\r\n    SkipRepeats.prototype.run = function (sink, scheduler) {\r\n        return this.source.run(new SkipRepeatsSink(this.equals, sink), scheduler);\r\n    };\r\n    return SkipRepeats;\r\n}());\r\nvar SkipRepeatsSink = /** @class */ (function (_super) {\r\n    __extends(SkipRepeatsSink, _super);\r\n    function SkipRepeatsSink(equals, sink) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.equals = equals;\r\n        _this.value = undefined;\r\n        _this.init = true;\r\n        return _this;\r\n    }\r\n    SkipRepeatsSink.prototype.event = function (t, x) {\r\n        if (this.init) {\r\n            this.init = false;\r\n            this.value = x;\r\n            this.sink.event(t, x);\r\n            // TODO: value should be boxed to avoid ! bang\r\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\r\n        }\r\n        else if (!this.equals(this.value, x)) {\r\n            this.value = x;\r\n            this.sink.event(t, x);\r\n        }\r\n    };\r\n    return SkipRepeatsSink;\r\n}(Pipe));\r\nfunction same(a, b) {\r\n    return a === b;\r\n}\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\nvar until = function (signal, stream) {\r\n    return new Until(signal, stream);\r\n};\r\nvar since = function (signal, stream) {\r\n    return new Since(signal, stream);\r\n};\r\nvar during = function (timeWindow, stream) {\r\n    return until(join(timeWindow), since(timeWindow, stream));\r\n};\r\nvar Until = /** @class */ (function () {\r\n    function Until(maxSignal, source) {\r\n        this.maxSignal = maxSignal;\r\n        this.source = source;\r\n    }\r\n    Until.prototype.run = function (sink, scheduler) {\r\n        var disposable = new SettableDisposable();\r\n        var d1 = this.source.run(sink, scheduler);\r\n        var d2 = this.maxSignal.run(new UntilSink(sink, disposable), scheduler);\r\n        disposable.setDisposable(disposeBoth(d1, d2));\r\n        return disposable;\r\n    };\r\n    return Until;\r\n}());\r\nvar Since = /** @class */ (function () {\r\n    function Since(minSignal, source) {\r\n        this.minSignal = minSignal;\r\n        this.source = source;\r\n    }\r\n    Since.prototype.run = function (sink, scheduler) {\r\n        var min = new LowerBoundSink(this.minSignal, sink, scheduler);\r\n        var d = this.source.run(new SinceSink(min, sink), scheduler);\r\n        return disposeBoth(min, d);\r\n    };\r\n    return Since;\r\n}());\r\nvar SinceSink = /** @class */ (function (_super) {\r\n    __extends(SinceSink, _super);\r\n    function SinceSink(min, sink) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.min = min;\r\n        return _this;\r\n    }\r\n    SinceSink.prototype.event = function (t, x) {\r\n        if (this.min.allow) {\r\n            this.sink.event(t, x);\r\n        }\r\n    };\r\n    return SinceSink;\r\n}(Pipe));\r\nvar LowerBoundSink = /** @class */ (function (_super) {\r\n    __extends(LowerBoundSink, _super);\r\n    function LowerBoundSink(signal, sink, scheduler) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.allow = false;\r\n        _this.disposable = signal.run(_this, scheduler);\r\n        return _this;\r\n    }\r\n    LowerBoundSink.prototype.event = function () {\r\n        this.allow = true;\r\n        this.dispose();\r\n    };\r\n    LowerBoundSink.prototype.end = function () { };\r\n    LowerBoundSink.prototype.dispose = function () {\r\n        this.disposable.dispose();\r\n    };\r\n    return LowerBoundSink;\r\n}(Pipe));\r\nvar UntilSink = /** @class */ (function (_super) {\r\n    __extends(UntilSink, _super);\r\n    function UntilSink(sink, disposable) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.disposable = disposable;\r\n        return _this;\r\n    }\r\n    UntilSink.prototype.event = function (t) {\r\n        this.disposable.dispose();\r\n        this.sink.end(t);\r\n    };\r\n    UntilSink.prototype.end = function () { };\r\n    return UntilSink;\r\n}(Pipe));\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\n/**\r\n * @param delayTime milliseconds to delay each item\r\n * @param stream\r\n * @returns new stream containing the same items, but delayed by ms\r\n */\r\nvar delay = function (delayTime, stream) {\r\n    return delayTime <= 0 ? stream : new Delay(delayTime, stream);\r\n};\r\nvar Delay = /** @class */ (function () {\r\n    function Delay(dt, source) {\r\n        this.dt = dt;\r\n        this.source = source;\r\n    }\r\n    Delay.prototype.run = function (sink, scheduler) {\r\n        var delaySink = new DelaySink(this.dt, sink, scheduler);\r\n        return disposeBoth(delaySink, this.source.run(delaySink, scheduler));\r\n    };\r\n    return Delay;\r\n}());\r\nvar DelaySink = /** @class */ (function (_super) {\r\n    __extends(DelaySink, _super);\r\n    function DelaySink(dt, sink, scheduler) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.dt = dt;\r\n        _this.scheduler = scheduler;\r\n        _this.tasks = [];\r\n        return _this;\r\n    }\r\n    DelaySink.prototype.dispose = function () {\r\n        this.tasks.forEach(cancelTask);\r\n    };\r\n    DelaySink.prototype.event = function (_t, x) {\r\n        this.tasks.push(delay$2(this.dt, propagateEventTask(x, this.sink), this.scheduler));\r\n    };\r\n    DelaySink.prototype.end = function () {\r\n        this.tasks.push(delay$2(this.dt, propagateEndTask(this.sink), this.scheduler));\r\n    };\r\n    return DelaySink;\r\n}(Pipe));\n\n/** @license MIT License (c) copyright 2010-2017 original author or authors */\r\n/**\r\n * Limit the rate of events by suppressing events that occur too often\r\n * @param period time to suppress events\r\n * @param stream\r\n */\r\nvar throttle = function (period, stream) {\r\n    return isCanonicalEmpty(stream) ? empty()\r\n        : stream instanceof Map ? commuteMapThrottle(period, stream)\r\n            : stream instanceof Throttle ? fuseThrottle(period, stream)\r\n                : new Throttle(period, stream);\r\n};\r\nvar commuteMapThrottle = function (period, mapStream) {\r\n    return Map.create(mapStream.f, throttle(period, mapStream.source));\r\n};\r\nvar fuseThrottle = function (period, throttleStream) {\r\n    return new Throttle(Math.max(period, throttleStream.period), throttleStream.source);\r\n};\r\nvar Throttle = /** @class */ (function () {\r\n    function Throttle(period, source) {\r\n        this.period = period;\r\n        this.source = source;\r\n    }\r\n    Throttle.prototype.run = function (sink, scheduler) {\r\n        return this.source.run(new ThrottleSink(this.period, sink), scheduler);\r\n    };\r\n    return Throttle;\r\n}());\r\nvar ThrottleSink = /** @class */ (function (_super) {\r\n    __extends(ThrottleSink, _super);\r\n    function ThrottleSink(period, sink) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.time = 0;\r\n        _this.period = period;\r\n        return _this;\r\n    }\r\n    ThrottleSink.prototype.event = function (t, x) {\r\n        if (t >= this.time) {\r\n            this.time = t + this.period;\r\n            this.sink.event(t, x);\r\n        }\r\n    };\r\n    return ThrottleSink;\r\n}(Pipe));\r\n/**\r\n * Wait for a burst of events to subside and emit only the last event in the burst\r\n * @param period events occuring more frequently than this will be suppressed\r\n * @param stream stream to debounce\r\n * @returns new debounced stream\r\n */\r\nvar debounce = function (period, stream) {\r\n    return isCanonicalEmpty(stream) ? empty()\r\n        : new Debounce(period, stream);\r\n};\r\nvar Debounce = /** @class */ (function () {\r\n    function Debounce(dt, source) {\r\n        this.dt = dt;\r\n        this.source = source;\r\n    }\r\n    Debounce.prototype.run = function (sink, scheduler) {\r\n        return new DebounceSink(this.dt, this.source, sink, scheduler);\r\n    };\r\n    return Debounce;\r\n}());\r\nvar DebounceSink = /** @class */ (function () {\r\n    function DebounceSink(dt, source, sink, scheduler) {\r\n        this.dt = dt;\r\n        this.sink = sink;\r\n        this.scheduler = scheduler;\r\n        this.timer = null;\r\n        this.disposable = source.run(this, scheduler);\r\n    }\r\n    DebounceSink.prototype.event = function (_t, x) {\r\n        this.clearTimer();\r\n        this.value = x;\r\n        this.timer = delay$2(this.dt, new DebounceTask(this, x), this.scheduler);\r\n    };\r\n    DebounceSink.prototype.handleEventFromTask = function (t, x) {\r\n        this.clearTimer();\r\n        this.sink.event(t, x);\r\n    };\r\n    DebounceSink.prototype.end = function (t) {\r\n        if (this.clearTimer()) {\r\n            // TODO: value should be boxed to avoid ! bang\r\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\r\n            this.sink.event(t, this.value);\r\n            this.value = undefined;\r\n        }\r\n        this.sink.end(t);\r\n    };\r\n    DebounceSink.prototype.error = function (t, x) {\r\n        this.clearTimer();\r\n        this.sink.error(t, x);\r\n    };\r\n    DebounceSink.prototype.dispose = function () {\r\n        this.clearTimer();\r\n        this.disposable.dispose();\r\n    };\r\n    DebounceSink.prototype.clearTimer = function () {\r\n        if (this.timer === null) {\r\n            return false;\r\n        }\r\n        this.timer.dispose();\r\n        this.timer = null;\r\n        return true;\r\n    };\r\n    return DebounceSink;\r\n}());\r\nvar DebounceTask = /** @class */ (function () {\r\n    function DebounceTask(sink, value) {\r\n        this.sink = sink;\r\n        this.value = value;\r\n    }\r\n    DebounceTask.prototype.run = function (t) {\r\n        this.sink.handleEventFromTask(t, this.value);\r\n    };\r\n    DebounceTask.prototype.error = function (t, e) {\r\n        this.sink.error(t, e);\r\n    };\r\n    DebounceTask.prototype.dispose = function () { };\r\n    return DebounceTask;\r\n}());\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\n/**\r\n * Turn a Stream<Promise<T>> into Stream<T> by awaiting each promise.\r\n * Event order is preserved. The stream will fail if any promise rejects.\r\n */\r\nvar awaitPromises = function (stream) {\r\n    return isCanonicalEmpty(stream) ? empty() : new Await(stream);\r\n};\r\n/**\r\n * Create a stream containing only the promise's fulfillment\r\n * value at the time it fulfills.\r\n * @param promise\r\n * @return stream containing promise's fulfillment value.\r\n *  If the promise rejects, the stream will error\r\n */\r\nvar fromPromise = function (promise) { return awaitPromises(now(promise)); };\r\nvar Await = /** @class */ (function () {\r\n    function Await(source) {\r\n        this.source = source;\r\n    }\r\n    Await.prototype.run = function (sink, scheduler) {\r\n        return this.source.run(new AwaitSink(sink, scheduler), scheduler);\r\n    };\r\n    return Await;\r\n}());\r\nvar AwaitSink = /** @class */ (function () {\r\n    function AwaitSink(sink, scheduler) {\r\n        var _this = this;\r\n        // Pre-create closures, to avoid creating them per event\r\n        this.eventBound = function (x) { return _this.sink.event(currentTime(_this.scheduler), x); };\r\n        this.endBound = function () { return _this.sink.end(currentTime(_this.scheduler)); };\r\n        this.errorBound = function (e) { return _this.sink.error(currentTime(_this.scheduler), e); };\r\n        this.sink = sink;\r\n        this.scheduler = scheduler;\r\n        this.queue = Promise.resolve();\r\n    }\r\n    AwaitSink.prototype.event = function (_t, promise) {\r\n        var _this = this;\r\n        this.queue = this.queue.then(function () { return _this.handlePromise(promise); })\r\n            .catch(this.errorBound);\r\n    };\r\n    AwaitSink.prototype.end = function () {\r\n        this.queue = this.queue.then(this.endBound)\r\n            .catch(this.errorBound);\r\n    };\r\n    AwaitSink.prototype.error = function (_t, e) {\r\n        var _this = this;\r\n        // Don't resolve error values, propagate directly\r\n        this.queue = this.queue.then(function () { return _this.errorBound(e); })\r\n            .catch(fatalError);\r\n    };\r\n    AwaitSink.prototype.handlePromise = function (promise) {\r\n        return promise.then(this.eventBound);\r\n    };\r\n    return AwaitSink;\r\n}());\n\nvar SafeSink = /** @class */ (function () {\r\n    function SafeSink(sink) {\r\n        this.sink = sink;\r\n        this.active = true;\r\n    }\r\n    SafeSink.prototype.event = function (t, x) {\r\n        if (!this.active) {\r\n            return;\r\n        }\r\n        this.sink.event(t, x);\r\n    };\r\n    SafeSink.prototype.end = function (t) {\r\n        if (!this.active) {\r\n            return;\r\n        }\r\n        this.disable();\r\n        this.sink.end(t);\r\n    };\r\n    SafeSink.prototype.error = function (t, e) {\r\n        this.disable();\r\n        this.sink.error(t, e);\r\n    };\r\n    SafeSink.prototype.disable = function () {\r\n        this.active = false;\r\n        return this.sink;\r\n    };\r\n    return SafeSink;\r\n}());\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\n/** @author Brian Cavalier */\r\n/** @author John Hann */\r\nfunction tryEvent(t, x, sink) {\r\n    try {\r\n        sink.event(t, x);\r\n    }\r\n    catch (e) {\r\n        sink.error(t, e);\r\n    }\r\n}\r\nfunction tryEnd(t, sink) {\r\n    try {\r\n        sink.end(t);\r\n    }\r\n    catch (e) {\r\n        sink.error(t, e);\r\n    }\r\n}\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\n/**\r\n * If stream encounters an error, recover and continue with items from stream\r\n * returned by f.\r\n * @param f which returns a new stream\r\n * @param stream\r\n * @returns new stream which will recover from an error by calling f\r\n */\r\nvar recoverWith = function (f, stream) {\r\n    return isCanonicalEmpty(stream) ? empty()\r\n        : new RecoverWith(f, stream);\r\n};\r\n/**\r\n * Create a stream containing only an error\r\n * @param e error value, preferably an Error or Error subtype\r\n * @returns new stream containing only an error\r\n */\r\nvar throwError = function (e) {\r\n    return new ErrorStream(e);\r\n};\r\nvar ErrorStream = /** @class */ (function () {\r\n    function ErrorStream(e) {\r\n        this.value = e;\r\n    }\r\n    ErrorStream.prototype.run = function (sink, scheduler) {\r\n        return asap(propagateErrorTask(this.value, sink), scheduler);\r\n    };\r\n    return ErrorStream;\r\n}());\r\nvar RecoverWith = /** @class */ (function () {\r\n    function RecoverWith(f, source) {\r\n        this.f = f;\r\n        this.source = source;\r\n    }\r\n    RecoverWith.prototype.run = function (sink, scheduler) {\r\n        return new RecoverWithSink(this.f, this.source, sink, scheduler);\r\n    };\r\n    return RecoverWith;\r\n}());\r\nvar RecoverWithSink = /** @class */ (function () {\r\n    function RecoverWithSink(f, source, sink, scheduler) {\r\n        this.f = f;\r\n        this.sink = new SafeSink(sink);\r\n        this.scheduler = scheduler;\r\n        this.disposable = source.run(this, scheduler);\r\n    }\r\n    RecoverWithSink.prototype.event = function (t, x) {\r\n        tryEvent(t, x, this.sink);\r\n    };\r\n    RecoverWithSink.prototype.end = function (t) {\r\n        tryEnd(t, this.sink);\r\n    };\r\n    RecoverWithSink.prototype.error = function (t, e) {\r\n        var nextSink = this.sink.disable();\r\n        tryDispose$1(t, this.disposable, this.sink);\r\n        this._startNext(t, e, nextSink);\r\n    };\r\n    RecoverWithSink.prototype._startNext = function (t, x, sink) {\r\n        try {\r\n            this.disposable = this._continue(this.f, t, x, sink);\r\n        }\r\n        catch (e) {\r\n            sink.error(t, e);\r\n        }\r\n    };\r\n    RecoverWithSink.prototype._continue = function (f, t, x, sink) {\r\n        return run(sink, this.scheduler, withLocalTime(t, f(x)));\r\n    };\r\n    RecoverWithSink.prototype.dispose = function () {\r\n        return this.disposable.dispose();\r\n    };\r\n    return RecoverWithSink;\r\n}());\n\nvar multicast = function (stream) {\r\n    return stream instanceof Multicast || isCanonicalEmpty(stream)\r\n        ? stream\r\n        : new Multicast(stream);\r\n};\r\nvar Multicast = /** @class */ (function () {\r\n    function Multicast(source) {\r\n        this.source = new MulticastSource(source);\r\n    }\r\n    Multicast.prototype.run = function (sink, scheduler) {\r\n        return this.source.run(sink, scheduler);\r\n    };\r\n    return Multicast;\r\n}());\r\nvar MulticastSource = /** @class */ (function () {\r\n    function MulticastSource(source) {\r\n        this.source = source;\r\n        this.sinks = [];\r\n        this.disposable = disposeNone();\r\n    }\r\n    MulticastSource.prototype.run = function (sink, scheduler) {\r\n        var n = this.add(sink);\r\n        if (n === 1) {\r\n            this.disposable = this.source.run(this, scheduler);\r\n        }\r\n        return disposeOnce(new MulticastDisposable(this, sink));\r\n    };\r\n    MulticastSource.prototype.dispose = function () {\r\n        var disposable = this.disposable;\r\n        this.disposable = disposeNone();\r\n        return disposable.dispose();\r\n    };\r\n    MulticastSource.prototype.add = function (sink) {\r\n        this.sinks = append(sink, this.sinks);\r\n        return this.sinks.length;\r\n    };\r\n    MulticastSource.prototype.remove = function (sink) {\r\n        var i = findIndex(sink, this.sinks);\r\n        // istanbul ignore next\r\n        if (i >= 0) {\r\n            this.sinks = remove(i, this.sinks);\r\n        }\r\n        return this.sinks.length;\r\n    };\r\n    MulticastSource.prototype.event = function (time, value) {\r\n        var s = this.sinks;\r\n        if (s.length === 1) {\r\n            return s[0].event(time, value);\r\n        }\r\n        for (var i = 0; i < s.length; ++i) {\r\n            tryEvent(time, value, s[i]);\r\n        }\r\n    };\r\n    MulticastSource.prototype.end = function (time) {\r\n        var s = this.sinks;\r\n        for (var i = 0; i < s.length; ++i) {\r\n            tryEnd(time, s[i]);\r\n        }\r\n    };\r\n    MulticastSource.prototype.error = function (time, err) {\r\n        var s = this.sinks;\r\n        for (var i = 0; i < s.length; ++i) {\r\n            s[i].error(time, err);\r\n        }\r\n    };\r\n    return MulticastSource;\r\n}());\r\nvar MulticastDisposable = /** @class */ (function () {\r\n    function MulticastDisposable(source, sink) {\r\n        this.source = source;\r\n        this.sink = sink;\r\n    }\r\n    MulticastDisposable.prototype.dispose = function () {\r\n        if (this.source.remove(this.sink) === 0) {\r\n            this.source.dispose();\r\n        }\r\n    };\r\n    return MulticastDisposable;\r\n}());\n\n/** @license MIT License (c) copyright 2016 original author or authors */\r\nvar run$1 = curry3(run);\r\nvar withLocalTime$1 = curry2(withLocalTime);\r\nvar loop$1 = curry3(loop);\r\nvar scan$1 = curry3(scan);\r\nvar startWith$1 = curry2(startWith);\r\nvar map$1 = curry2(map);\r\nvar constant$1 = curry2(constant);\r\nvar tap$1 = curry2(tap);\r\nvar ap$1 = curry2(ap);\r\nvar chain$1 = curry2(chain);\r\nvar continueWith$1 = curry2(continueWith);\r\nvar concatMap$1 = curry2(concatMap);\r\nvar mergeConcurrently$1 = curry2(mergeConcurrently);\r\nvar mergeMapConcurrently$1 = curry3(mergeMapConcurrently);\r\nvar merge$1 = curry2(merge);\r\nvar combine$1 = curry3(combine);\r\nvar combineArray$1 = curry2(combineArray);\r\nvar sample$1 = curry2(sample);\r\nvar snapshot$1 = curry3(snapshot);\r\nvar zipItems$1 = curry3(zipItems);\r\nvar withItems$1 = curry2(withItems);\r\nvar zip$1 = curry3(zip);\r\nvar zipArray$1 = curry2(zipArray);\r\nvar filter$1 = curry2(filter);\r\nvar skipRepeatsWith$1 = curry2(skipRepeatsWith);\r\nvar take$1 = curry2(take);\r\nvar skip$1 = curry2(skip);\r\nvar slice$1 = curry3(slice);\r\nvar takeWhile$1 = curry2(takeWhile);\r\nvar skipWhile$1 = curry2(skipWhile);\r\nvar skipAfter$1 = curry2(skipAfter);\r\nvar until$1 = curry2(until);\r\nvar since$1 = curry2(since);\r\nvar during$1 = curry2(during);\r\nvar delay$1 = curry2(delay);\r\nvar throttle$1 = curry2(throttle);\r\nvar debounce$1 = curry2(debounce);\r\nvar recoverWith$1 = curry2(recoverWith);\r\nvar propagateTask$1 = curry3(propagateTask);\r\nvar propagateEventTask$1 = curry2(propagateEventTask);\r\nvar propagateErrorTask$1 = curry2(propagateErrorTask);\n\nexport { MulticastSource, ap$1 as ap, at, awaitPromises, chain$1 as chain, combine$1 as combine, combineArray$1 as combineArray, concatMap$1 as concatMap, constant$1 as constant, continueWith$1 as continueWith, debounce$1 as debounce, delay$1 as delay, during$1 as during, empty, filter$1 as filter, fromPromise, join, loop$1 as loop, map$1 as map, merge$1 as merge, mergeArray, mergeConcurrently$1 as mergeConcurrently, mergeMapConcurrently$1 as mergeMapConcurrently, multicast, never, newStream, now, periodic, propagateEndTask, propagateErrorTask$1 as propagateErrorTask, propagateEventTask$1 as propagateEventTask, propagateTask$1 as propagateTask, recoverWith$1 as recoverWith, run$1 as run, runEffects, sample$1 as sample, scan$1 as scan, since$1 as since, skip$1 as skip, skipAfter$1 as skipAfter, skipRepeats, skipRepeatsWith$1 as skipRepeatsWith, skipWhile$1 as skipWhile, slice$1 as slice, snapshot$1 as snapshot, startWith$1 as startWith, switchLatest, take$1 as take, takeWhile$1 as takeWhile, tap$1 as tap, throttle$1 as throttle, throwError, until$1 as until, withItems$1 as withItems, withLocalTime$1 as withLocalTime, zip$1 as zip, zipArray$1 as zipArray, zipItems$1 as zipItems };\n//# sourceMappingURL=index.es.js.map\n","import { curry2, reduce, concat, append, curry3 } from '@most/prelude';\n\nvar dispose = function (disposable) {\r\n    return disposable.dispose();\r\n};\n\nvar disposeNone = function () { return NONE; };\r\nvar NONE = new (/** @class */ (function () {\r\n    function DisposeNone() {\r\n    }\r\n    DisposeNone.prototype.dispose = function () { };\r\n    return DisposeNone;\r\n}()))();\r\nvar isDisposeNone = function (d) {\r\n    return d === NONE;\r\n};\n\n/**\r\n * Wrap an existing disposable (which may not already have been once()d)\r\n * so that it will only dispose its underlying resource at most once.\r\n */\r\nvar disposeOnce = function (disposable) {\r\n    return new DisposeOnce(disposable);\r\n};\r\nvar DisposeOnce = /** @class */ (function () {\r\n    function DisposeOnce(disposable) {\r\n        this.disposed = false;\r\n        this.disposable = disposable;\r\n    }\r\n    DisposeOnce.prototype.dispose = function () {\r\n        if (!this.disposed) {\r\n            this.disposed = true;\r\n            if (this.disposable) {\r\n                this.disposable.dispose();\r\n                this.disposable = undefined;\r\n            }\r\n        }\r\n    };\r\n    return DisposeOnce;\r\n}());\n\n/** @license MIT License (c) copyright 2010-2017 original author or authors */\r\n/**\r\n * Create a Disposable that will use the provided\r\n * dispose function to dispose the resource\r\n */\r\nvar disposeWith = curry2(function (dispose, resource) {\r\n    return disposeOnce(new DisposeWithImpl(dispose, resource));\r\n});\r\n/**\r\n * Disposable represents a resource that must be\r\n * disposed/released. It aggregates a function to dispose\r\n * the resource and a handle to a key/id/handle/reference\r\n * that identifies the resource\r\n */\r\nvar DisposeWithImpl = /** @class */ (function () {\r\n    function DisposeWithImpl(dispose, resource) {\r\n        this._dispose = dispose;\r\n        this._resource = resource;\r\n    }\r\n    DisposeWithImpl.prototype.dispose = function () {\r\n        this._dispose(this._resource);\r\n    };\r\n    return DisposeWithImpl;\r\n}());\n\n/** @license MIT License (c) copyright 2010 original author or authors */\r\n/**\r\n * Aggregate a list of disposables into a DisposeAll\r\n */\r\nvar disposeAll = function (ds) {\r\n    var merged = reduce(merge, [], ds);\r\n    return merged.length === 0 ? disposeNone() : new DisposeAll(merged);\r\n};\r\n/**\r\n * Convenience to aggregate 2 disposables\r\n */\r\nvar disposeBoth = curry2(function (d1, d2) {\r\n    return disposeAll([d1, d2]);\r\n});\r\nvar merge = function (ds, d) {\r\n    return isDisposeNone(d) ? ds\r\n        : d instanceof DisposeAll ? concat(ds, d.disposables)\r\n            : append(d, ds);\r\n};\r\nvar DisposeAll = /** @class */ (function () {\r\n    function DisposeAll(disposables) {\r\n        this.disposables = disposables;\r\n    }\r\n    DisposeAll.prototype.dispose = function () {\r\n        throwIfErrors(disposeCollectErrors(this.disposables));\r\n    };\r\n    return DisposeAll;\r\n}());\r\n/**\r\n * Dispose all, safely collecting errors into an array\r\n */\r\nvar disposeCollectErrors = function (disposables) {\r\n    return reduce(appendIfError, [], disposables);\r\n};\r\n/**\r\n * Call dispose and if throws, append thrown error to errors\r\n */\r\nvar appendIfError = function (errors, d) {\r\n    try {\r\n        d.dispose();\r\n    }\r\n    catch (e) {\r\n        errors.push(e);\r\n    }\r\n    return errors;\r\n};\r\n/**\r\n * Throw DisposeAllError if errors is non-empty\r\n * @throws\r\n */\r\nvar throwIfErrors = function (errors) {\r\n    if (errors.length > 0) {\r\n        throw new DisposeAllError(errors.length + \" errors\", errors);\r\n    }\r\n};\r\nvar DisposeAllError = /** @class */ (function () {\r\n    function DisposeAllError(message, errors) {\r\n        this.name = 'DisposeAllError';\r\n        this.message = message;\r\n        this.errors = errors;\r\n        Error.call(this, message);\r\n        if (Error.captureStackTrace) {\r\n            Error.captureStackTrace(this, DisposeAllError);\r\n        }\r\n        this.stack = \"\" + this.stack + formatErrorStacks(this.errors);\r\n    }\r\n    return DisposeAllError;\r\n}());\r\nDisposeAllError.prototype = Object.create(Error.prototype);\r\nvar formatErrorStacks = function (errors) {\r\n    return reduce(formatErrorStack, '', errors);\r\n};\r\nvar formatErrorStack = function (s, e, i) {\r\n    return s + (\"\\n[\" + (i + 1) + \"] \" + e.stack);\r\n};\n\n/** @license MIT License (c) copyright 2010-2017 original author or authors */\r\n// Try to dispose the disposable.  If it throws, send\r\n// the error to sink.error with the provided Time value\r\nvar tryDispose = curry3(function (t, disposable, sink) {\r\n    try {\r\n        disposable.dispose();\r\n    }\r\n    catch (e) {\r\n        sink.error(t, e);\r\n    }\r\n});\n\nexport { DisposeAllError, dispose, disposeAll, disposeBoth, disposeNone, disposeOnce, disposeWith, isDisposeNone, tryDispose };\n//# sourceMappingURL=index.es.js.map\n","/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\n// Non-mutating array operations\r\n/**\r\n * a with x prepended\r\n */\r\nfunction cons(x, a) {\r\n    var l = a.length;\r\n    var b = new Array(l + 1);\r\n    b[0] = x;\r\n    for (var i = 0; i < l; ++i) {\r\n        b[i + 1] = a[i];\r\n    }\r\n    return b;\r\n}\r\n/**\r\n * a with x appended\r\n */\r\nfunction append(x, a) {\r\n    var l = a.length;\r\n    var b = new Array(l + 1);\r\n    for (var i = 0; i < l; ++i) {\r\n        b[i] = a[i];\r\n    }\r\n    b[l] = x;\r\n    return b;\r\n}\r\n/**\r\n * Concats two `ArrayLike`s\r\n */\r\nfunction concat(a, b) {\r\n    var al = a.length;\r\n    var bl = b.length;\r\n    var r = new Array(al + bl);\r\n    var i = 0;\r\n    for (i = 0; i < al; i++) {\r\n        r[i] = a[i];\r\n    }\r\n    for (var j = 0; j < bl; j++) {\r\n        r[i++] = b[j];\r\n    }\r\n    return r;\r\n}\r\n//\r\n/**\r\n * drop first n elements\r\n */\r\nfunction drop(n, a) {\r\n    if (n < 0) {\r\n        throw new TypeError('n must be >= 0');\r\n    }\r\n    var l = a.length;\r\n    if (n === 0 || l === 0) {\r\n        return a;\r\n    }\r\n    if (n >= l) {\r\n        return [];\r\n    }\r\n    return unsafeDrop(n, a, l - n);\r\n}\r\n/**\r\n * Internal helper for drop\r\n */\r\nfunction unsafeDrop(n, a, l) {\r\n    var b = new Array(l);\r\n    for (var i = 0; i < l; ++i) {\r\n        b[i] = a[n + i];\r\n    }\r\n    return b;\r\n}\r\n/**\r\n * drop head element\r\n */\r\nfunction tail(a) {\r\n    return drop(1, a);\r\n}\r\n/**\r\n * duplicate a (shallow duplication)\r\n */\r\nfunction copy(a) {\r\n    var l = a.length;\r\n    var b = new Array(l);\r\n    for (var i = 0; i < l; ++i) {\r\n        b[i] = a[i];\r\n    }\r\n    return b;\r\n}\r\n/**\r\n * transform each element with f\r\n */\r\nfunction map(f, a) {\r\n    var l = a.length;\r\n    var b = new Array(l);\r\n    for (var i = 0; i < l; ++i) {\r\n        b[i] = f(a[i]);\r\n    }\r\n    return b;\r\n}\r\n/**\r\n * accumulate via left-fold\r\n */\r\nfunction reduce(f, z, a) {\r\n    var r = z;\r\n    for (var i = 0, l = a.length; i < l; ++i) {\r\n        r = f(r, a[i], i);\r\n    }\r\n    return r;\r\n}\r\n/**\r\n * replace element at index\r\n */\r\nfunction replace(x, i, a) {\r\n    if (i < 0) {\r\n        throw new TypeError('i must be >= 0');\r\n    }\r\n    var l = a.length;\r\n    var b = new Array(l);\r\n    for (var j = 0; j < l; ++j) {\r\n        b[j] = i === j ? x : a[j];\r\n    }\r\n    return b;\r\n}\r\n/**\r\n * remove element at index\r\n * @throws\r\n */\r\nfunction remove(i, a) {\r\n    if (i < 0) {\r\n        throw new TypeError('i must be >= 0');\r\n    }\r\n    var l = a.length;\r\n    if (l === 0 || i >= l) { // exit early if index beyond end of array\r\n        return a;\r\n    }\r\n    if (l === 1) { // exit early if index in bounds and length === 1\r\n        return [];\r\n    }\r\n    return unsafeRemove(i, a, l - 1);\r\n}\r\n/**\r\n * Internal helper to remove element at index\r\n */\r\nfunction unsafeRemove(i, a, l) {\r\n    var b = new Array(l);\r\n    var j;\r\n    for (j = 0; j < i; ++j) {\r\n        b[j] = a[j];\r\n    }\r\n    for (j = i; j < l; ++j) {\r\n        b[j] = a[j + 1];\r\n    }\r\n    return b;\r\n}\r\n/**\r\n * remove all elements matching a predicate\r\n * @deprecated\r\n */\r\nfunction removeAll(f, a) {\r\n    var l = a.length;\r\n    var b = new Array(l);\r\n    var j = 0;\r\n    for (var x = void 0, i = 0; i < l; ++i) {\r\n        x = a[i];\r\n        if (!f(x)) {\r\n            b[j] = x;\r\n            ++j;\r\n        }\r\n    }\r\n    b.length = j;\r\n    return b;\r\n}\r\n/**\r\n * find index of x in a, from the left\r\n */\r\nfunction findIndex(x, a) {\r\n    for (var i = 0, l = a.length; i < l; ++i) {\r\n        if (x === a[i]) {\r\n            return i;\r\n        }\r\n    }\r\n    return -1;\r\n}\r\n/**\r\n * Return true iff x is array-like\r\n */\r\nfunction isArrayLike(x) {\r\n    return x != null && typeof x.length === 'number' && typeof x !== 'function';\r\n}\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\nvar id = function (x) { return x; };\r\nvar compose = function (f, g) { return function (x) { return f(g(x)); }; };\r\nvar apply = function (f, x) { return f(x); };\r\nfunction curry2(f) {\r\n    function curried(a, b) {\r\n        switch (arguments.length) {\r\n            case 0: return curried;\r\n            case 1: return function (b) { return f(a, b); };\r\n            default: return f(a, b);\r\n        }\r\n    }\r\n    return curried;\r\n}\r\nfunction curry3(f) {\r\n    function curried(a, b, c) {\r\n        switch (arguments.length) {\r\n            case 0: return curried;\r\n            case 1: return curry2(function (b, c) { return f(a, b, c); });\r\n            case 2: return function (c) { return f(a, b, c); };\r\n            default: return f(a, b, c);\r\n        }\r\n    }\r\n    return curried;\r\n}\r\nfunction curry4(f) {\r\n    function curried(a, b, c, d) {\r\n        switch (arguments.length) {\r\n            case 0: return curried;\r\n            case 1: return curry3(function (b, c, d) { return f(a, b, c, d); });\r\n            case 2: return curry2(function (c, d) { return f(a, b, c, d); });\r\n            case 3: return function (d) { return f(a, b, c, d); };\r\n            default: return f(a, b, c, d);\r\n        }\r\n    }\r\n    return curried;\r\n}\n\nexport { append, apply, compose, concat, cons, copy, curry2, curry3, curry4, drop, findIndex, id, isArrayLike, map, reduce, remove, removeAll, replace, tail };\n//# sourceMappingURL=index.es.js.map\n","import { findIndex, removeAll, curry2, curry3 } from '@most/prelude';\n\nvar ScheduledTaskImpl = /** @class */ (function () {\r\n    function ScheduledTaskImpl(time, localOffset, period, task, scheduler) {\r\n        this.time = time;\r\n        this.localOffset = localOffset;\r\n        this.period = period;\r\n        this.task = task;\r\n        this.scheduler = scheduler;\r\n        this.active = true;\r\n    }\r\n    ScheduledTaskImpl.prototype.run = function () {\r\n        return this.task.run(this.time - this.localOffset);\r\n    };\r\n    ScheduledTaskImpl.prototype.error = function (e) {\r\n        return this.task.error(this.time - this.localOffset, e);\r\n    };\r\n    ScheduledTaskImpl.prototype.dispose = function () {\r\n        this.active = false;\r\n        this.scheduler.cancel(this);\r\n        return this.task.dispose();\r\n    };\r\n    return ScheduledTaskImpl;\r\n}());\n\nvar RelativeScheduler = /** @class */ (function () {\r\n    function RelativeScheduler(origin, scheduler) {\r\n        this.origin = origin;\r\n        this.scheduler = scheduler;\r\n    }\r\n    RelativeScheduler.prototype.currentTime = function () {\r\n        return this.scheduler.currentTime() - this.origin;\r\n    };\r\n    RelativeScheduler.prototype.scheduleTask = function (localOffset, delay, period, task) {\r\n        return this.scheduler.scheduleTask(localOffset + this.origin, delay, period, task);\r\n    };\r\n    RelativeScheduler.prototype.relative = function (origin) {\r\n        return new RelativeScheduler(origin + this.origin, this.scheduler);\r\n    };\r\n    RelativeScheduler.prototype.cancel = function (task) {\r\n        return this.scheduler.cancel(task);\r\n    };\r\n    RelativeScheduler.prototype.cancelAll = function (f) {\r\n        return this.scheduler.cancelAll(f);\r\n    };\r\n    return RelativeScheduler;\r\n}());\n\n/** @license MIT License (c) copyright 2010-2017 original author or authors */\r\nvar defer = function (task) {\r\n    return Promise.resolve(task).then(runTask);\r\n};\r\nfunction runTask(task) {\r\n    try {\r\n        return task.run();\r\n    }\r\n    catch (e) {\r\n        return task.error(e);\r\n    }\r\n}\n\n/** @license MIT License (c) copyright 2010-2017 original author or authors */\r\nvar SchedulerImpl = /** @class */ (function () {\r\n    function SchedulerImpl(timer, timeline) {\r\n        var _this = this;\r\n        this._runReadyTasksBound = function () { return _this._runReadyTasks(); };\r\n        this.timer = timer;\r\n        this.timeline = timeline;\r\n        this._timer = null;\r\n        this._nextArrival = Infinity;\r\n    }\r\n    SchedulerImpl.prototype.currentTime = function () {\r\n        return this.timer.now();\r\n    };\r\n    SchedulerImpl.prototype.scheduleTask = function (localOffset, delay, period, task) {\r\n        var time = this.currentTime() + Math.max(0, delay);\r\n        var st = new ScheduledTaskImpl(time, localOffset, period, task, this);\r\n        this.timeline.add(st);\r\n        this._scheduleNextRun();\r\n        return st;\r\n    };\r\n    SchedulerImpl.prototype.relative = function (offset) {\r\n        return new RelativeScheduler(offset, this);\r\n    };\r\n    SchedulerImpl.prototype.cancel = function (task) {\r\n        task.active = false;\r\n        if (this.timeline.remove(task)) {\r\n            this._reschedule();\r\n        }\r\n    };\r\n    // @deprecated\r\n    SchedulerImpl.prototype.cancelAll = function (f) {\r\n        this.timeline.removeAll(f);\r\n        this._reschedule();\r\n    };\r\n    SchedulerImpl.prototype._reschedule = function () {\r\n        if (this.timeline.isEmpty()) {\r\n            this._unschedule();\r\n        }\r\n        else {\r\n            this._scheduleNextRun();\r\n        }\r\n    };\r\n    SchedulerImpl.prototype._unschedule = function () {\r\n        this.timer.clearTimer(this._timer);\r\n        this._timer = null;\r\n    };\r\n    SchedulerImpl.prototype._scheduleNextRun = function () {\r\n        if (this.timeline.isEmpty()) {\r\n            return;\r\n        }\r\n        var nextArrival = this.timeline.nextArrival();\r\n        if (this._timer === null) {\r\n            this._scheduleNextArrival(nextArrival);\r\n        }\r\n        else if (nextArrival < this._nextArrival) {\r\n            this._unschedule();\r\n            this._scheduleNextArrival(nextArrival);\r\n        }\r\n    };\r\n    SchedulerImpl.prototype._scheduleNextArrival = function (nextArrival) {\r\n        this._nextArrival = nextArrival;\r\n        var delay = Math.max(0, nextArrival - this.currentTime());\r\n        this._timer = this.timer.setTimer(this._runReadyTasksBound, delay);\r\n    };\r\n    SchedulerImpl.prototype._runReadyTasks = function () {\r\n        this._timer = null;\r\n        this.timeline.runTasks(this.currentTime(), runTask);\r\n        this._scheduleNextRun();\r\n    };\r\n    return SchedulerImpl;\r\n}());\n\n/** @license MIT License (c) copyright 2010-2017 original author or authors */\r\nvar TimelineImpl = /** @class */ (function () {\r\n    function TimelineImpl() {\r\n        this.tasks = [];\r\n    }\r\n    TimelineImpl.prototype.nextArrival = function () {\r\n        return this.isEmpty() ? Infinity : this.tasks[0].time;\r\n    };\r\n    TimelineImpl.prototype.isEmpty = function () {\r\n        return this.tasks.length === 0;\r\n    };\r\n    TimelineImpl.prototype.add = function (st) {\r\n        insertByTime(st, this.tasks);\r\n    };\r\n    TimelineImpl.prototype.remove = function (st) {\r\n        var i = binarySearch(getTime(st), this.tasks);\r\n        if (i >= 0 && i < this.tasks.length) {\r\n            var events = this.tasks[i].events;\r\n            var at = findIndex(st, events);\r\n            if (at >= 0) {\r\n                events.splice(at, 1);\r\n                if (events.length === 0) {\r\n                    this.tasks.splice(i, 1);\r\n                }\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    /**\r\n     * @deprecated\r\n     */\r\n    TimelineImpl.prototype.removeAll = function (f) {\r\n        for (var i = 0; i < this.tasks.length; ++i) {\r\n            removeAllFrom(f, this.tasks[i]);\r\n        }\r\n    };\r\n    TimelineImpl.prototype.runTasks = function (t, runTask) {\r\n        var tasks = this.tasks;\r\n        var l = tasks.length;\r\n        var i = 0;\r\n        while (i < l && tasks[i].time <= t) {\r\n            ++i;\r\n        }\r\n        this.tasks = tasks.slice(i);\r\n        // Run all ready tasks\r\n        for (var j = 0; j < i; ++j) {\r\n            this.tasks = runReadyTasks(runTask, tasks[j].events, this.tasks);\r\n        }\r\n    };\r\n    return TimelineImpl;\r\n}());\r\nfunction runReadyTasks(runTask, events, tasks) {\r\n    for (var i = 0; i < events.length; ++i) {\r\n        var task = events[i];\r\n        if (task.active) {\r\n            runTask(task);\r\n            // Reschedule periodic repeating tasks\r\n            // Check active again, since a task may have canceled itself\r\n            if (task.period >= 0 && task.active) {\r\n                task.time = task.time + task.period;\r\n                insertByTime(task, tasks);\r\n            }\r\n        }\r\n    }\r\n    return tasks;\r\n}\r\nfunction insertByTime(task, timeslots) {\r\n    var l = timeslots.length;\r\n    var time = getTime(task);\r\n    if (l === 0) {\r\n        timeslots.push(newTimeslot(time, [task]));\r\n        return;\r\n    }\r\n    var i = binarySearch(time, timeslots);\r\n    if (i >= l) {\r\n        timeslots.push(newTimeslot(time, [task]));\r\n    }\r\n    else {\r\n        insertAtTimeslot(task, timeslots, time, i);\r\n    }\r\n}\r\nfunction insertAtTimeslot(task, timeslots, time, i) {\r\n    var timeslot = timeslots[i];\r\n    if (time === timeslot.time) {\r\n        addEvent(task, timeslot.events);\r\n    }\r\n    else {\r\n        timeslots.splice(i, 0, newTimeslot(time, [task]));\r\n    }\r\n}\r\nfunction addEvent(task, events) {\r\n    if (events.length === 0 || task.time >= events[events.length - 1].time) {\r\n        events.push(task);\r\n    }\r\n    else {\r\n        spliceEvent(task, events);\r\n    }\r\n}\r\nfunction spliceEvent(task, events) {\r\n    for (var j = 0; j < events.length; j++) {\r\n        if (task.time < events[j].time) {\r\n            events.splice(j, 0, task);\r\n            break;\r\n        }\r\n    }\r\n}\r\nfunction getTime(scheduledTask) {\r\n    return Math.floor(scheduledTask.time);\r\n}\r\n/**\r\n * @deprecated\r\n */\r\nfunction removeAllFrom(f, timeslot) {\r\n    timeslot.events = removeAll(f, timeslot.events);\r\n}\r\nfunction binarySearch(t, sortedArray) {\r\n    var lo = 0;\r\n    var hi = sortedArray.length;\r\n    var mid, y;\r\n    while (lo < hi) {\r\n        mid = Math.floor((lo + hi) / 2);\r\n        y = sortedArray[mid];\r\n        if (t === y.time) {\r\n            return mid;\r\n        }\r\n        else if (t < y.time) {\r\n            hi = mid;\r\n        }\r\n        else {\r\n            lo = mid + 1;\r\n        }\r\n    }\r\n    return hi;\r\n}\r\nvar newTimeslot = function (t, events) { return ({ time: t, events: events }); };\n\n/** @license MIT License (c) copyright 2010-2017 original author or authors */\r\n/* global setTimeout, clearTimeout */\r\nvar ClockTimer = /** @class */ (function () {\r\n    function ClockTimer(clock) {\r\n        this._clock = clock;\r\n    }\r\n    ClockTimer.prototype.now = function () {\r\n        return this._clock.now();\r\n    };\r\n    ClockTimer.prototype.setTimer = function (f, dt) {\r\n        return dt <= 0 ? runAsap(f) : setTimeout(f, dt);\r\n    };\r\n    ClockTimer.prototype.clearTimer = function (t) {\r\n        return t instanceof Asap ? t.cancel() : clearTimeout(t);\r\n    };\r\n    return ClockTimer;\r\n}());\r\nvar Asap = /** @class */ (function () {\r\n    function Asap(f) {\r\n        this.f = f;\r\n        this.active = true;\r\n    }\r\n    Asap.prototype.run = function () {\r\n        if (this.active) {\r\n            return this.f();\r\n        }\r\n    };\r\n    Asap.prototype.error = function (e) {\r\n        throw e;\r\n    };\r\n    Asap.prototype.cancel = function () {\r\n        this.active = false;\r\n    };\r\n    return Asap;\r\n}());\r\nfunction runAsap(f) {\r\n    var task = new Asap(f);\r\n    defer(task);\r\n    return task;\r\n}\n\n/* global performance, process */\r\nvar RelativeClock = /** @class */ (function () {\r\n    function RelativeClock(clock, origin) {\r\n        this.origin = origin;\r\n        this.clock = clock;\r\n    }\r\n    RelativeClock.prototype.now = function () {\r\n        return this.clock.now() - this.origin;\r\n    };\r\n    return RelativeClock;\r\n}());\r\nvar HRTimeClock = /** @class */ (function () {\r\n    function HRTimeClock(hrtime, origin) {\r\n        this.origin = origin;\r\n        this.hrtime = hrtime;\r\n    }\r\n    HRTimeClock.prototype.now = function () {\r\n        var hrt = this.hrtime(this.origin);\r\n        return (hrt[0] * 1e9 + hrt[1]) / 1e6;\r\n    };\r\n    return HRTimeClock;\r\n}());\r\nvar clockRelativeTo = function (clock) {\r\n    return new RelativeClock(clock, clock.now());\r\n};\r\nvar newPerformanceClock = function () {\r\n    return clockRelativeTo(performance);\r\n};\r\n/**\r\n * @deprecated will be removed in 2.0.0\r\n * Date.now is not monotonic, and performance.now is ubiquitous:\r\n * @see https://caniuse.com/#search=performance.now\r\n */\r\nvar newDateClock = function () {\r\n    return clockRelativeTo(Date);\r\n};\r\nvar newHRTimeClock = function () {\r\n    return new HRTimeClock(process.hrtime, process.hrtime());\r\n};\r\nvar newPlatformClock = function () {\r\n    if (typeof performance !== 'undefined' && typeof performance.now === 'function') {\r\n        return newPerformanceClock();\r\n    }\r\n    else if (typeof process !== 'undefined' && typeof process.hrtime === 'function') {\r\n        return newHRTimeClock();\r\n    }\r\n    return newDateClock();\r\n};\n\n/**\r\n * Read the current time from the provided Scheduler\r\n */\r\nvar currentTime = function (scheduler) {\r\n    return scheduler.currentTime();\r\n};\r\n/**\r\n * Schedule a task to run as soon as possible, but\r\n * not in the current call stack\r\n */\r\nvar asap = curry2(function (task, scheduler) {\r\n    return scheduler.scheduleTask(0, 0, -1, task);\r\n});\r\n/**\r\n * Schedule a task to run after a millisecond delay\r\n */\r\nvar delay = curry3(function (delay, task, scheduler) {\r\n    return scheduler.scheduleTask(0, delay, -1, task);\r\n});\r\n/**\r\n * Schedule a task to run periodically, with the\r\n * first run starting asap\r\n */\r\nvar periodic = curry3(function (period, task, scheduler) {\r\n    return scheduler.scheduleTask(0, 0, period, task);\r\n});\r\n/**\r\n * Cancel a scheduledTask\r\n */\r\nvar cancelTask = function (scheduledTask) {\r\n    return scheduledTask.dispose();\r\n};\r\n/**\r\n * Cancel all ScheduledTasks for which a predicate is true\r\n * @deprecated Will be removed in 2.0.0\r\n */\r\nvar cancelAllTasks = curry2(function (predicate, scheduler) {\r\n    console.warn(\"DEPRECATED cancelAllTasks to be removed in 2.0.0\");\r\n    return scheduler.cancelAll(predicate);\r\n});\n\nvar schedulerRelativeTo = curry2(function (offset, scheduler) {\r\n    return new RelativeScheduler(offset, scheduler);\r\n});\n\n/** @license MIT License (c) copyright 2010-2017 original author or authors */\r\nvar newScheduler = curry2(function (timer, timeline) { return new SchedulerImpl(timer, timeline); });\r\nvar newDefaultScheduler = function () { return new SchedulerImpl(newDefaultTimer(), new TimelineImpl()); };\r\nvar newDefaultTimer = function () { return new ClockTimer(newPlatformClock()); };\r\nvar newClockTimer = function (clock) { return new ClockTimer(clock); };\r\nvar newTimeline = function () { return new TimelineImpl(); };\n\nexport { HRTimeClock, RelativeClock, asap, cancelAllTasks, cancelTask, clockRelativeTo, currentTime, delay, newClockTimer, newDateClock, newDefaultScheduler, newDefaultTimer, newHRTimeClock, newPerformanceClock, newPlatformClock, newScheduler, newTimeline, periodic, schedulerRelativeTo };\n//# sourceMappingURL=index.es.js.map\n","(function () {\n  'use strict';\n\n  if ('adoptedStyleSheets' in document) { return; }\n\n  function _defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  function _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    return Constructor;\n  }\n\n  var hasShadyCss = 'ShadyCSS' in window && !window.ShadyCSS.nativeShadow;\n  var deferredStyleSheets = [];\n  var deferredDocumentStyleElements = [];\n  var deferredAdopters = [];\n  var adoptedSheetsRegistry = new WeakMap();\n  var sheetMetadataRegistry = new WeakMap();\n  var locationRegistry = new WeakMap();\n  var shadowRootMap = new WeakMap();\n  var observerRegistry = new WeakMap();\n  var appliedActionsCursorRegistry = new WeakMap();\n  var state = {\n    loaded: false\n  };\n  var frame = {\n    body: null,\n    CSSStyleSheet: null\n  };\n  var OldCSSStyleSheet = CSSStyleSheet;\n\n  var importPattern = /@import/;\n  function checkAndPrepare(sheets, container) {\n    var locationType = container === document ? 'Document' : 'ShadowRoot';\n    if (!Array.isArray(sheets)) {\n      throw new TypeError(\"Failed to set the 'adoptedStyleSheets' property on \" + locationType + \": Iterator getter is not callable.\");\n    }\n    if (!sheets.every(instanceOfStyleSheet)) {\n      throw new TypeError(\"Failed to set the 'adoptedStyleSheets' property on \" + locationType + \": Failed to convert value to 'CSSStyleSheet'\");\n    }\n    var uniqueSheets = sheets.filter(function (value, index) {\n      return sheets.indexOf(value) === index;\n    });\n    adoptedSheetsRegistry.set(container, uniqueSheets);\n    return uniqueSheets;\n  }\n  function isDocumentLoading() {\n    return document.readyState === 'loading';\n  }\n  function getAdoptedStyleSheet(location) {\n    return adoptedSheetsRegistry.get(location.parentNode === document.documentElement ? document : location);\n  }\n  function rejectImports(contents) {\n    if (contents === void 0) {\n      contents = '';\n    }\n    var imports = contents.match(importPattern) || [];\n    var sheetContent = contents;\n    if (imports.length) {\n      console.warn('@import rules are not allowed here. See https://github.com/WICG/construct-stylesheets/issues/119#issuecomment-588352418');\n      imports.forEach(function (_import) {\n        sheetContent = sheetContent.replace(_import, '');\n      });\n    }\n    return sheetContent;\n  }\n\n  var cssStyleSheetMethods = ['addImport', 'addPageRule', 'addRule', 'deleteRule', 'insertRule', 'removeImport', 'removeRule'];\n  var illegalInvocation = 'Illegal invocation';\n  function updatePrototype(proto) {\n    proto.replace = function () {\n      return Promise.reject(new DOMException(\"Can't call replace on non-constructed CSSStyleSheets.\"));\n    };\n    proto.replaceSync = function () {\n      throw new DOMException(\"Failed to execute 'replaceSync' on 'CSSStyleSheet': Can't call replaceSync on non-constructed CSSStyleSheets.\");\n    };\n  }\n  function updateAdopters(sheet) {\n    var _sheetMetadataRegistr = sheetMetadataRegistry.get(sheet),\n        adopters = _sheetMetadataRegistr.adopters,\n        basicStyleElement = _sheetMetadataRegistr.basicStyleElement;\n    adopters.forEach(function (styleElement) {\n      styleElement.innerHTML = basicStyleElement.innerHTML;\n    });\n  }\n  var ConstructStyleSheet =\n  function () {\n    function ConstructStyleSheet() {\n      var basicStyleElement = document.createElement('style');\n      if (state.loaded) {\n        frame.body.appendChild(basicStyleElement);\n      } else {\n        document.head.appendChild(basicStyleElement);\n        basicStyleElement.disabled = true;\n        deferredStyleSheets.push(basicStyleElement);\n      }\n      sheetMetadataRegistry.set(this, {\n        adopters: new Map(),\n        actions: [],\n        basicStyleElement: basicStyleElement\n      });\n    }\n    var _proto = ConstructStyleSheet.prototype;\n    _proto.replace = function replace(contents) {\n      var sanitized = rejectImports(contents);\n      try {\n        if (!sheetMetadataRegistry.has(this)) {\n          throw new TypeError(illegalInvocation);\n        }\n        var _sheetMetadataRegistr2 = sheetMetadataRegistry.get(this),\n            basicStyleElement = _sheetMetadataRegistr2.basicStyleElement;\n        basicStyleElement.innerHTML = sanitized;\n        updateAdopters(this);\n        return Promise.resolve(this);\n      } catch (ex) {\n        return Promise.reject(ex);\n      }\n    };\n    _proto.replaceSync = function replaceSync(contents) {\n      var sanitized = rejectImports(contents);\n      if (!sheetMetadataRegistry.has(this)) {\n        throw new TypeError(illegalInvocation);\n      }\n      var _sheetMetadataRegistr3 = sheetMetadataRegistry.get(this),\n          basicStyleElement = _sheetMetadataRegistr3.basicStyleElement;\n      basicStyleElement.innerHTML = sanitized;\n      updateAdopters(this);\n      return this;\n    };\n    _createClass(ConstructStyleSheet, [{\n      key: \"cssRules\",\n      get: function get() {\n        if (!sheetMetadataRegistry.has(this)) {\n          throw new TypeError(illegalInvocation);\n        }\n        var _sheetMetadataRegistr4 = sheetMetadataRegistry.get(this),\n            basicStyleElement = _sheetMetadataRegistr4.basicStyleElement;\n        return basicStyleElement.sheet.cssRules;\n      }\n    }]);\n    return ConstructStyleSheet;\n  }();\n  cssStyleSheetMethods.forEach(function (method) {\n    ConstructStyleSheet.prototype[method] = function () {\n      if (!sheetMetadataRegistry.has(this)) {\n        throw new TypeError(illegalInvocation);\n      }\n      var args = arguments;\n      var _sheetMetadataRegistr5 = sheetMetadataRegistry.get(this),\n          adopters = _sheetMetadataRegistr5.adopters,\n          actions = _sheetMetadataRegistr5.actions,\n          basicStyleElement = _sheetMetadataRegistr5.basicStyleElement;\n      var result = basicStyleElement.sheet[method].apply(basicStyleElement.sheet, args);\n      adopters.forEach(function (styleElement) {\n        if (styleElement.sheet) {\n          styleElement.sheet[method].apply(styleElement.sheet, args);\n        }\n      });\n      actions.push([method, args]);\n      return result;\n    };\n  });\n  function instanceOfStyleSheet(instance) {\n    return instance && instance.constructor === ConstructStyleSheet || instance instanceof OldCSSStyleSheet || instance instanceof frame.CSSStyleSheet;\n  }\n  Object.defineProperty(ConstructStyleSheet, Symbol.hasInstance, {\n    configurable: true,\n    value: instanceOfStyleSheet\n  });\n\n  function adoptStyleSheets(location) {\n    var newStyles = document.createDocumentFragment();\n    var sheets = getAdoptedStyleSheet(location);\n    var observer = observerRegistry.get(location);\n    for (var i = 0, len = sheets.length; i < len; i++) {\n      var _sheetMetadataRegistr = sheetMetadataRegistry.get(sheets[i]),\n          adopters = _sheetMetadataRegistr.adopters,\n          basicStyleElement = _sheetMetadataRegistr.basicStyleElement;\n      var elementToAdopt = adopters.get(location);\n      if (elementToAdopt) {\n        observer.disconnect();\n        newStyles.appendChild(elementToAdopt);\n        if (!elementToAdopt.innerHTML || elementToAdopt.sheet && !elementToAdopt.sheet.cssText) {\n          elementToAdopt.innerHTML = basicStyleElement.innerHTML;\n        }\n        observer.observe();\n      } else {\n        elementToAdopt = document.createElement('style');\n        elementToAdopt.innerHTML = basicStyleElement.innerHTML;\n        locationRegistry.set(elementToAdopt, location);\n        appliedActionsCursorRegistry.set(elementToAdopt, 0);\n        adopters.set(location, elementToAdopt);\n        newStyles.appendChild(elementToAdopt);\n      }\n      if (location === document.head) {\n        deferredDocumentStyleElements.push(elementToAdopt);\n      }\n    }\n    location.insertBefore(newStyles, location.lastChild);\n    for (var _i = 0, _len = sheets.length; _i < _len; _i++) {\n      var _sheetMetadataRegistr2 = sheetMetadataRegistry.get(sheets[_i]),\n          _adopters = _sheetMetadataRegistr2.adopters,\n          actions = _sheetMetadataRegistr2.actions;\n      var adoptedStyleElement = _adopters.get(location);\n      var cursor = appliedActionsCursorRegistry.get(adoptedStyleElement);\n      if (actions.length > 0) {\n        for (var _i2 = cursor, _len2 = actions.length; _i2 < _len2; _i2++) {\n          var _actions$_i = actions[_i2],\n              key = _actions$_i[0],\n              args = _actions$_i[1];\n          adoptedStyleElement.sheet[key].apply(adoptedStyleElement.sheet, args);\n        }\n        appliedActionsCursorRegistry.set(adoptedStyleElement, actions.length - 1);\n      }\n    }\n  }\n  function removeExcludedStyleSheets(location, oldSheets) {\n    var sheets = getAdoptedStyleSheet(location);\n    for (var i = 0, len = oldSheets.length; i < len; i++) {\n      if (sheets.indexOf(oldSheets[i]) > -1) {\n        continue;\n      }\n      var _sheetMetadataRegistr3 = sheetMetadataRegistry.get(oldSheets[i]),\n          adopters = _sheetMetadataRegistr3.adopters;\n      var observer = observerRegistry.get(location);\n      var styleElement = adopters.get(location);\n      if (!styleElement) {\n        styleElement = adopters.get(document.head);\n      }\n      observer.disconnect();\n      styleElement.parentNode.removeChild(styleElement);\n      observer.observe();\n    }\n  }\n\n  function adoptAndRestoreStylesOnMutationCallback(mutations) {\n    if (!document) {\n      return;\n    }\n    for (var i = 0, len = mutations.length; i < len; i++) {\n      var _mutations$i = mutations[i],\n          addedNodes = _mutations$i.addedNodes,\n          removedNodes = _mutations$i.removedNodes;\n      for (var _i = 0, _len = removedNodes.length; _i < _len; _i++) {\n        var location = locationRegistry.get(removedNodes[_i]);\n        if (location) {\n          adoptStyleSheets(location);\n        }\n      }\n      if (!hasShadyCss) {\n        for (var _i2 = 0, _len2 = addedNodes.length; _i2 < _len2; _i2++) {\n          var iter = document.createNodeIterator(addedNodes[_i2], NodeFilter.SHOW_ELEMENT, function (node) {\n            var shadowRoot = shadowRootMap.get(node);\n            return shadowRoot && shadowRoot.adoptedStyleSheets.length > 0 ? NodeFilter.FILTER_ACCEPT : NodeFilter.FILTER_REJECT;\n          },\n          null, false);\n          var node = void 0;\n          while (node = iter.nextNode()) {\n            adoptStyleSheets(shadowRootMap.get(node));\n          }\n        }\n      }\n    }\n  }\n  function createObserver(location) {\n    var observer = new MutationObserver(adoptAndRestoreStylesOnMutationCallback);\n    var observerTool = {\n      observe: function observe() {\n        observer.observe(location, {\n          childList: true,\n          subtree: true\n        });\n      },\n      disconnect: function disconnect() {\n        observer.disconnect();\n      }\n    };\n    observerRegistry.set(location, observerTool);\n    observerTool.observe();\n  }\n\n  function initPolyfill() {\n    var iframe = document.createElement('iframe');\n    iframe.hidden = true;\n    document.body.appendChild(iframe);\n    frame.body = iframe.contentWindow.document.body;\n    frame.CSSStyleSheet = iframe.contentWindow.CSSStyleSheet;\n    updatePrototype(iframe.contentWindow.CSSStyleSheet.prototype);\n    createObserver(document.body);\n    state.loaded = true;\n    var fragment = document.createDocumentFragment();\n    for (var i = 0, len = deferredStyleSheets.length; i < len; i++) {\n      deferredStyleSheets[i].disabled = false;\n      fragment.appendChild(deferredStyleSheets[i]);\n    }\n    frame.body.appendChild(fragment);\n    for (var _i = 0, _len = deferredDocumentStyleElements.length; _i < _len; _i++) {\n      fragment.appendChild(deferredDocumentStyleElements[_i]);\n    }\n    document.body.insertBefore(fragment, document.body.firstChild);\n    for (var _i2 = 0, _len2 = deferredAdopters.length; _i2 < _len2; _i2++) {\n      adoptStyleSheets(deferredAdopters[_i2]);\n    }\n    deferredAdopters.length = 0;\n    deferredStyleSheets.length = 0;\n    deferredDocumentStyleElements.length = 0;\n  }\n  function initAdoptedStyleSheets() {\n    var adoptedStyleSheetAccessors = {\n      configurable: true,\n      get: function get() {\n        return adoptedSheetsRegistry.get(this) || [];\n      },\n      set: function set(sheets) {\n        var oldSheets = adoptedSheetsRegistry.get(this) || [];\n        checkAndPrepare(sheets, this);\n        var location = this === document ?\n        isDocumentLoading() ? this.head : this.body : this;\n        var isConnected = 'isConnected' in location ? location.isConnected : document.body.contains(location);\n        if (isConnected) {\n          window.requestAnimationFrame(function () {\n            adoptStyleSheets(location);\n            removeExcludedStyleSheets(location, oldSheets);\n          });\n        } else {\n          deferredAdopters.push(location);\n        }\n      }\n    };\n    Object.defineProperty(Document.prototype, 'adoptedStyleSheets', adoptedStyleSheetAccessors);\n    if (typeof ShadowRoot !== 'undefined') {\n      var attachShadow = Element.prototype.attachShadow;\n      Element.prototype.attachShadow = function () {\n        var location = hasShadyCss ? this : attachShadow.apply(this, arguments);\n        shadowRootMap.set(this, location);\n        createObserver(location);\n        return location;\n      };\n      Object.defineProperty(ShadowRoot.prototype, 'adoptedStyleSheets', adoptedStyleSheetAccessors);\n    }\n  }\n\n  updatePrototype(OldCSSStyleSheet.prototype);\n  window.CSSStyleSheet = ConstructStyleSheet;\n  initAdoptedStyleSheets();\n  if (isDocumentLoading()) {\n    document.addEventListener('DOMContentLoaded', initPolyfill);\n  } else {\n    initPolyfill();\n  }\n\n}());\n","import { currentTime, } from '@most/scheduler';\nimport { skipAfter, map, continueWith, constant, switchLatest, loop, startWith } from '@most/core';\nimport { O } from '../utils';\nimport { disposeWith } from '@most/disposable';\nimport { compose, curry3 } from '@most/prelude';\n// copied & modified from https://github.com/mostjs/x-animation-frame/tree/master\nclass AnimationFrameSource {\n    constructor(afp) {\n        this.afp = afp;\n    }\n    run(sink, scheduler) {\n        const requestTime = currentTime(scheduler);\n        const propagate = () => eventThenEnd(requestTime, currentTime(scheduler), sink);\n        const rafId = this.afp.requestAnimationFrame(propagate);\n        return disposeWith(fid => this.afp.cancelAnimationFrame(fid), rafId);\n    }\n}\nconst eventThenEnd = (requestTime, responseTime, sink) => {\n    sink.event(requestTime, { requestTime, responseTime });\n    sink.end(requestTime);\n};\nexport const nextAnimationFrame = (afp = window) => new AnimationFrameSource(afp);\nexport const animationFrames = (afp = window) => continueWith(() => animationFrames(afp), nextAnimationFrame(afp));\nexport const drawLatest = compose(\n// @ts-ignore\nswitchLatest, map(x => constant(x, nextAnimationFrame(window))));\nexport const MOTION_NO_WOBBLE = { stiffness: 170, damping: 26, precision: .01 };\nexport const MOTION_GENTLE = { stiffness: 120, damping: 14, precision: .01 };\nexport const MOTION_WOBBLY = { stiffness: 180, damping: 12, precision: .01 };\nexport const MOTION_STIFF = { stiffness: 210, damping: 20, precision: .01 };\n/**\n * adapting to motion changes using \"spring physics\"\n *\n * @param initialPositon - animation starting position to animate from\n * @param motionEnvironment - config spring metrics.\n *\n *  noWobble =  stiffness 170 damping 26\n *\n *  gentle =    stiffness 120 damping 14\n *\n *  wobbly =    stiffness 180 damping 12\n *\n *  stiff =     stiffness 210 damping 20\n *\n *  @see  modified-from https://github.com/chenglou/react-motion/blob/master/src/stepper.js\n */\nexport const motion = curry3((motionEnvironment, initialState, change) => {\n    const motionEnv = { ...MOTION_STIFF, ...motionEnvironment };\n    const ma = motionState(motionEnv, { position: initialState, velocity: 0 }, change);\n    return map(s => s.position, ma);\n});\n// used in cases where velocity feedback is needed(for renimation)\nexport const motionState = curry3((motionEnvironment, initialState, change) => {\n    const motionEnv = { ...MOTION_STIFF, ...motionEnvironment };\n    return O(loop((seed, target) => {\n        const frames = O(map(() => stepFrame(target, seed, motionEnv)), skipAfter(n => n.position === target));\n        return { seed, value: frames(animationFrames()) };\n    }, initialState), switchLatest, startWith(initialState))(change);\n});\nfunction stepFrame(target, state, motionEnv) {\n    const fps = 1 / 60;\n    const delta = target - state.position;\n    const spring = motionEnv.stiffness * delta;\n    const damper = motionEnv.damping * state.velocity;\n    const acceleration = spring - damper;\n    const newVelocity = state.velocity + (acceleration * fps);\n    const newPosition = state.position + (newVelocity * fps);\n    const settled = Math.abs(newVelocity) < motionEnv.precision && Math.abs(delta) < motionEnv.precision;\n    state.velocity = newVelocity;\n    state.position = settled ? target : newPosition;\n    return state;\n}\n//# sourceMappingURL=animate.js.map","import { map } from '@most/core';\nimport { curry2 } from '@most/prelude';\nexport const attr = curry2((attrs, source) => map(ns => ({ ...ns, attributes: { ...ns.attributes, ...attrs } }), source));\nexport const attrBehavior = curry2((attrs, source) => map(ns => ({ ...ns, attributesBehavior: [...ns.attributesBehavior, attrs] }), source));\n//# sourceMappingURL=attribute.js.map","import { behavior } from '../source/behavior';\nimport { disposeAll } from '@most/disposable';\nimport { curry2 } from '@most/prelude';\nimport { nullSink } from '../utils';\nexport function componentFn(inputComp, outputTethers) {\n    return {\n        run(sink, scheduler) {\n            // fill stubbed aguments as a behavior\n            const behaviors = Array(inputComp.length).fill(null).map(behavior);\n            const [view, outputSources] = inputComp(...behaviors);\n            const outputDisposables = [];\n            if (outputTethers) {\n                for (const k in outputTethers) {\n                    if (outputTethers[k] && outputSources) {\n                        const consumerSampler = outputTethers[k];\n                        if (consumerSampler) {\n                            const componentOutputBehavior = outputSources[k];\n                            const outputDisposable = consumerSampler(componentOutputBehavior).run(nullSink, scheduler);\n                            outputDisposables.push(outputDisposable);\n                        }\n                    }\n                }\n            }\n            return disposeAll([\n                // disposeWith(() => {\n                //   sink.end(scheduler.currentTime())\n                // }, null),\n                view.run(sink, scheduler),\n                ...outputDisposables,\n            ]);\n        }\n    };\n}\nexport const component = curry2(componentFn);\n//# sourceMappingURL=component.js.map","import { join, map } from '@most/core';\nimport { curry2 } from '@most/prelude';\nexport function eventElementTarget(eventType, element, options = false) {\n    return {\n        run(sink, scheduler) {\n            const cb = (e) => sink.event(scheduler.currentTime(), e);\n            const removeListener = () => element.removeEventListener(eventType, cb, options);\n            element.addEventListener(eventType, cb, options);\n            return {\n                dispose() {\n                    removeListener();\n                }\n            };\n        }\n    };\n}\nexport const event = curry2((eventType, node) => {\n    return join(map(ns => eventElementTarget(eventType, ns.element, { capture: true }), node));\n});\n//# sourceMappingURL=event.js.map","import { filter, map, tap } from '@most/core';\nimport { curry2, curry3 } from '@most/prelude';\nfunction styleFn(styleInput, source) {\n    return map(node => ({ ...node, style: { ...node.style, ...styleInput } }), source);\n}\nfunction stylePseudoFn(pseudoClass, styleInput, source) {\n    return map(node => ({\n        ...node,\n        stylePseudo: [\n            ...node.stylePseudo,\n            {\n                class: pseudoClass,\n                style: styleInput\n            }\n        ]\n    }), source);\n}\nfunction styleBehaviorFn(style, $node) {\n    return map(node => ({ ...node, styleBehavior: [...node.styleBehavior, style] }), $node);\n}\nexport const styleInline = (style) => ($node) => {\n    return map(node => {\n        const applyInlineStyleStream = tap((styleObj) => {\n            for (const prop in styleObj) {\n                if (Object.prototype.hasOwnProperty.call(styleObj, prop)) {\n                    // @ts-ignore\n                    const val = styleObj[prop];\n                    // @ts-ignore\n                    node.element.style[prop] = val;\n                }\n            }\n        }, style);\n        return { ...node, styleBehavior: [...node.styleBehavior, filter(() => false, applyInlineStyleStream)] };\n    }, $node);\n};\n// applyStyle\nexport const style = curry2(styleFn);\nexport const stylePseudo = curry3(stylePseudoFn);\nexport const styleBehavior = curry2(styleBehaviorFn);\n//# sourceMappingURL=style.js.map","import { disposeNone, disposeWith } from '@most/disposable';\nimport { remove } from '@most/prelude';\nimport { Pipe } from '../utils';\nclass SourceSink {\n    constructor(parent, sink) {\n        this.parent = parent;\n        this.sink = sink;\n        this.hasValue = false;\n    }\n    event(t, x) {\n        this.latestValue = x;\n        this.hasValue = true;\n        this.sink.event(t, x);\n        this.parent.tetherSinkList.forEach(s => s.event(t, x));\n    }\n    end(t) {\n        this.sink.end(t);\n    }\n    error(t, e) {\n        this.sink.error(t, e);\n    }\n}\nclass TetherSink extends Pipe {\n    constructor(sink) {\n        super(sink);\n        this.sink = sink;\n    }\n    event(t, x) {\n        this.sink.event(t, x);\n    }\n}\nclass Tether {\n    constructor(source) {\n        this.source = source;\n        this.sourceSinkList = [];\n        this.tetherSinkList = [];\n        this.sourceDisposable = disposeNone();\n    }\n    run(sink, scheduler) {\n        if (sink instanceof SourceSink) {\n            this.sourceDisposable.dispose();\n            this.sourceSinkList.push(sink);\n            this.sourceDisposable = this.source.run(sink, scheduler);\n            return {\n                dispose: () => {\n                    const srcIdx = this.sourceSinkList.indexOf(sink);\n                    this.sourceSinkList.splice(srcIdx, 1);\n                    this.sourceDisposable.dispose();\n                }\n            };\n        }\n        this.tetherSinkList.push(sink);\n        this.sourceSinkList.forEach(s => {\n            if (s.hasValue) {\n                sink.event(scheduler.currentTime(), s.latestValue);\n            }\n        });\n        return disposeWith(([tetherSinkList, sourceTetherSink]) => {\n            sourceTetherSink.end(scheduler.currentTime());\n            const sinkIdx = tetherSinkList.indexOf(sourceTetherSink);\n            if (sinkIdx > -1) {\n                remove(sinkIdx, tetherSinkList);\n            }\n        }, [this.tetherSinkList, sink]);\n    }\n}\nexport const tether = (source) => {\n    const tetherSource = new Tether(source);\n    return [\n        {\n            run(sink, scheduler) {\n                return tetherSource.run(new SourceSink(tetherSource, sink), scheduler);\n            }\n        },\n        {\n            run(sink, scheduler) {\n                return tetherSource.run(new TetherSink(sink), scheduler);\n            }\n        }\n    ];\n};\n//# sourceMappingURL=tether.js.map","import { disposeWith } from '@most/disposable';\nimport { O } from '../utils';\nimport { tether } from '../combinators/tether';\nexport class BehaviorSource {\n    constructor() {\n        this.queuedSamplers = [];\n        this.sinks = new Map();\n        this.sample = (...ops) => {\n            return (sb) => {\n                const [source, tetherSource] = tether(sb);\n                // @ts-ignore\n                const bops = ops.length ? O(...ops)(tetherSource) : tetherSource;\n                this.queuedSamplers.push(bops);\n                this.sinks.forEach((sourcesMap, sink) => {\n                    sourcesMap.set(bops, this.runBehavior(sink, bops));\n                });\n                return source;\n            };\n        };\n    }\n    run(sink, scheduler) {\n        this.scheduler = scheduler;\n        const sourcesMap = new Map();\n        this.sinks.set(sink, sourcesMap);\n        this.queuedSamplers.forEach(s => {\n            sourcesMap.set(s, this.runBehavior(sink, s));\n        });\n        return disposeWith(([sinkSrc, sinkMap]) => {\n            var _a;\n            sinkSrc.end(scheduler.currentTime());\n            (_a = sinkMap.get(sinkSrc)) === null || _a === void 0 ? void 0 : _a.forEach(x => x === null || x === void 0 ? void 0 : x.dispose());\n            sinkMap.delete(sinkSrc);\n        }, [sink, this.sinks]);\n    }\n    runBehavior(sink, x) {\n        return x.run(sink, this.scheduler);\n    }\n}\nexport function behavior() {\n    const ss = new BehaviorSource();\n    return [ss, ss.sample];\n}\n//# sourceMappingURL=behavior.js.map","import { disposeNone, disposeWith } from '@most/disposable';\nclass FromCallbackSource {\n    constructor(callbackFunction, context) {\n        this.callbackFunction = callbackFunction;\n        this.context = context;\n    }\n    run(sink, scheduler) {\n        // very common that callback functions returns a destructor, perhaps a Disposable in a \"most\" case\n        const maybeDisposable = this.callbackFunction.bind(this.context)((ev) => {\n            sink.event(scheduler.currentTime(), ev);\n        });\n        if (maybeDisposable instanceof Function) {\n            return disposeWith(maybeDisposable, null);\n        }\n        if (maybeDisposable && 'dispose' in maybeDisposable && (maybeDisposable === null || maybeDisposable === void 0 ? void 0 : maybeDisposable.dispose) instanceof Function) {\n            return maybeDisposable;\n        }\n        return disposeNone();\n    }\n}\nexport const fromCallback = (cbf, context = null) => new FromCallbackSource(cbf, context);\n//# sourceMappingURL=fromCallback.js.map","import { map, never, skipRepeats, switchLatest } from '@most/core';\nimport { id } from '@most/prelude';\nimport { isFunction, O } from '../utils';\nimport SettableDisposable from '../utils/SettableDisposable';\nexport const $svg = branch((a) => document.createElementNS('http://www.w3.org/2000/svg', a));\nexport const $element = branch((a) => document.createElement(a));\nexport const $custom = branch((a) => document.createElement(a));\nexport const $node = $custom('node');\nexport const $wrapNativeElement = branch((rootNode) => rootNode);\n// childless nodes\nexport const $text = $textFn(id);\nexport class NodeSource {\n    constructor(sourceValue, sourceOp, $segments) {\n        this.sourceValue = sourceValue;\n        this.sourceOp = sourceOp;\n        this.$segments = $segments;\n    }\n    run(sink, scheduler) {\n        const element = this.sourceOp(this.sourceValue);\n        const $segments = this.$segments;\n        const disposable = new SettableDisposable();\n        sink.event(scheduler.currentTime(), {\n            $segments, element, disposable,\n            styleBehavior: [],\n            insertAscending: true,\n            attributesBehavior: [],\n            stylePseudo: []\n        });\n        return disposable;\n    }\n}\nfunction node(text) {\n    return {\n        run(sink, scheduler) {\n            const element = document.createTextNode(text);\n            const disposable = new SettableDisposable();\n            sink.event(scheduler.currentTime(), { element, disposable });\n            return disposable;\n        }\n    };\n}\nexport function branch(sourceOp, postOp = id) {\n    return (sourceOpValue) => {\n        return function nodeComposeFn(...input) {\n            if (input.some(isFunction))\n                // @ts-ignore\n                return branch(sourceOp, O(postOp, ...input))(sourceOpValue);\n            const $segments = input.length ? input : [never()];\n            const $branch = new NodeSource(sourceOpValue, sourceOp, $segments);\n            return postOp($branch);\n        };\n    };\n}\nfunction $textFn(postOp = O(x => x)) {\n    return function textComp(...input) {\n        if (input.some(isFunction))\n            // @ts-ignore\n            return $textFn(O(postOp, ...input));\n        const children = input.map((x) => {\n            return typeof x === 'string' ? node(x) : switchLatest(map(node, skipRepeats(x)));\n        });\n        return branch(() => document.createElement('text'), postOp)(null)(...children);\n    };\n}\n//# sourceMappingURL=node.js.map","import { compose, id } from '@most/prelude';\nimport { empty, never, run, startWith } from '@most/core';\nimport { disposeNone } from '@most/disposable';\nexport const xForver = (x) => startWith(x, never());\nexport function MaybeOp(a, b) {\n    return b ? compose(b, a) : a;\n}\nexport function isStream(s) {\n    return s instanceof Object && 'run' in s;\n}\nexport function isFunction(s) {\n    return s instanceof Function;\n}\nconst EMPTY = empty();\nexport function isEmpty(s) {\n    return s === EMPTY;\n}\nexport class Pipe {\n    constructor(sink) {\n        this.sink = sink;\n    }\n    end(t) {\n        return this.sink.end(t);\n    }\n    error(t, e) {\n        return this.sink.error(t, e);\n    }\n}\nexport function tryRunning(stream, sink, scheduler, time = scheduler.currentTime()) {\n    try {\n        return run(sink, scheduler, stream);\n    }\n    catch (e) {\n        sink.error(time, e);\n        return disposeNone();\n    }\n}\nexport const nullSink = {\n    // tslint:disable-next-line:no-empty\n    event() { },\n    // tslint:disable-next-line:no-empty\n    end() { },\n    // tslint:disable-next-line:no-empty\n    error(_, x) {\n        // tslint:disable-next-line: no-console\n        console.error(x);\n    }\n};\nexport const nullDisposable = {\n    // tslint:disable-next-line:no-empty\n    dispose() { }\n};\n// /* tslint:enable:max-line-length */\nexport function O(...fns) {\n    // @ts-ignore\n    return fns.length ? fns.reduceRight(compose) : id;\n}\n//# sourceMappingURL=utils.js.map","import { disposeNone } from '@most/disposable';\nexport default class SettableDisposable {\n    constructor(initialDiposable = disposeNone()) {\n        this.initialDiposable = initialDiposable;\n        this.disposed = false;\n    }\n    setDisposable(disposable) {\n        if (this.disposable !== undefined) {\n            throw new Error('setDisposable called more than once');\n        }\n        this.disposable = disposable;\n        if (this.disposed) {\n            disposable.dispose();\n        }\n    }\n    dispose() {\n        if (this.disposed) {\n            return;\n        }\n        this.disposed = true;\n        if (this.disposable !== undefined) {\n            this.initialDiposable.dispose();\n            this.disposable.dispose();\n        }\n    }\n}\n//# sourceMappingURL=SettableDisposable.js.map","export const THEME_PALLETE_SELECTED_KEY = `!!THEME_PALLETE_SELECTED_KEY`;\nexport function changeTheme(name, pallete) {\n    const newTheme = { name, pallete };\n    localStorage.setItem(THEME_PALLETE_SELECTED_KEY, JSON.stringify(newTheme));\n    Object.assign(theme, newTheme);\n    self.location.reload();\n}\nexport const selected = JSON.parse(localStorage.getItem(THEME_PALLETE_SELECTED_KEY));\nif (selected === null) {\n    console.error('No theme as been assigned to localstorage');\n}\n// validateRGBPallete(selected.pallete)\nexport const theme = selected;\nexport const pallete = theme.pallete;\n//# sourceMappingURL=staticThemeService.js.map","import { at, map, merge, multicast, now, scan, skip, skipRepeats, skipRepeatsWith, switchLatest } from '@most/core';\nimport { $node, $text, O, style, styleBehavior } from '@aelea/core';\nexport const sumFromZeroOp = scan((current, x) => current + x, 0);\nvar Direction;\n(function (Direction) {\n    Direction[Direction[\"INCREMENT\"] = 0] = \"INCREMENT\";\n    Direction[Direction[\"DECREMENT\"] = 1] = \"DECREMENT\";\n})(Direction || (Direction = {}));\nfunction getDetlaSlotIdex(current, change, i) {\n    if (current[i] !== change[i] || i > change.length)\n        return i;\n    return getDetlaSlotIdex(current, change, i + 1);\n}\nexport const $NumberTicker = ({ value$, incrementColor, decrementColor, textStyle = {}, slots = 10 }) => {\n    const uniqueValues$ = skipRepeats(value$);\n    const incrementMulticast = O(scan((seed, change) => {\n        const changeStr = change.toLocaleString();\n        if (seed === null) {\n            return { change, dir: null, pos: changeStr.length, changeStr };\n        }\n        const dir = change > seed.change ? Direction.INCREMENT : Direction.DECREMENT;\n        const currentStr = seed.change.toLocaleString();\n        const isWholeNumber = changeStr.split('.').length === 1;\n        // TODO handle fractions\n        const pos = isWholeNumber && changeStr.length > currentStr.length ? 0 : getDetlaSlotIdex(currentStr, changeStr, 0);\n        return { change, dir, pos, changeStr };\n    }, null), skip(1), // skips inital null that scans emit - preventing count from getting an inital color\n    multicast)(uniqueValues$);\n    const dirStyleMap = {\n        [Direction.INCREMENT]: { color: incrementColor },\n        [Direction.DECREMENT]: { color: decrementColor },\n    };\n    return $node(...Array(slots).fill(undefined).map((_, slot) => $text(style({ transition: 'ease-out .25s color', ...textStyle }), styleBehavior(switchLatest(O(skipRepeatsWith((x, y) => x.changeStr[slot] === y.changeStr[slot] && slot < y.pos), map(({ pos, dir }) => {\n        const decayColor = at(1000, {});\n        if (slot < pos) {\n            return decayColor;\n        }\n        return merge(now(dirStyleMap[dir]), decayColor);\n    }))(incrementMulticast))))(O(map(({ changeStr }) => { var _a; return (_a = changeStr[slot]) !== null && _a !== void 0 ? _a : ''; }), skipRepeats)(incrementMulticast))));\n};\n//# sourceMappingURL=$NumberTicker.js.map","import { chain, delay, empty, filter, loop, map, merge, mergeArray, multicast, scan, skip, startWith, switchLatest } from \"@most/core\";\nimport { component, style, $text, $custom, O } from '@aelea/core';\nimport { $column } from '../elements/$elements';\nimport { pallete } from \"@aelea/ui-components-theme\";\nimport * as observer from \"../utils/elementObservers\";\nimport designSheet from \"../style/designSheet\";\nconst $defaultLoader = $text(style({ color: pallete.foreground, padding: '3px 10px' }))('loading...');\nexport const $VirtualScroll = ({ dataSource, containerOps = O(), $loading = $defaultLoader }) => component(([intersecting, intersectingTether]) => {\n    const multicastDatasource = multicast(dataSource);\n    const scrollReuqestWithInitial = skip(1, scan(seed => seed + 1, -1, intersecting));\n    const $container = $column(designSheet.customScroll, style({ overflow: 'auto' }), map(node => ({ ...node, insertAscending: false })), containerOps);\n    const intersectedLoader = intersectingTether(observer.intersection({ threshold: 1 }), map(entryList => entryList[0]), filter(entry => {\n        return entry.isIntersecting === true;\n    }));\n    const $observer = $custom('observer')(intersectedLoader)();\n    const newLocal = delay(45, multicastDatasource);\n    const loadState = merge(map(data => ({ $show: $observer, data }), newLocal), map(() => ({ $show: $loading, }), scrollReuqestWithInitial));\n    const $itemLoader = loop((seed, state) => {\n        if ('data' in state && state.data) {\n            const hasMoreItems = state.data.pageSize === state.data.$items.length;\n            const value = hasMoreItems ? state.$show : empty();\n            return { seed, value };\n        }\n        return { seed, value: state.$show };\n    }, {}, loadState);\n    return [\n        $container(chain(node => {\n            return mergeArray(node.$items); // TODO optimze this. batching pages is not very efficient. use continous render per item during scroll\n        }, multicastDatasource), switchLatest(startWith($observer, $itemLoader))),\n        { scrollRequest: scrollReuqestWithInitial }\n    ];\n});\n//# sourceMappingURL=$VirtualScroll.js.map","import { map, mergeArray, never } from \"@most/core\";\nimport { $element, component, event, styleBehavior, attrBehavior, O } from '@aelea/core';\nimport { dismissOp, interactionOp } from './form';\nimport { pallete } from '@aelea/ui-components-theme';\nimport designSheet from \"../../style/designSheet\";\nexport const $Button = ({ disabled = never(), $content, buttonOp = O() }) => component(([focusStyle, interactionTether], [dismissstyle, dismissTether], [click, clickTether]) => {\n    const $button = $element('button')(designSheet.btn, clickTether(event('pointerup')), styleBehavior(map(disabled => disabled ? { opacity: .4, pointerEvents: 'none' } : null, disabled)), attrBehavior(map(disabled => ({ disabled }), disabled)), styleBehavior(map(active => active ? { borderColor: pallete.primary } : null, mergeArray([focusStyle, dismissstyle]))), interactionTether(interactionOp), dismissTether(dismissOp), buttonOp);\n    return [\n        $button($content),\n        {\n            click\n        }\n    ];\n});\n//# sourceMappingURL=$Button.js.map","import { $element, component, event, O, style, styleBehavior } from '@aelea/core';\nimport { pallete } from '@aelea/ui-components-theme';\nimport { multicast, never, now, startWith, tap } from '@most/core';\nimport { filter } from '@most/core';\nimport { merge } from '@most/core';\nimport { empty, map, switchLatest } from \"@most/core\";\nimport designSheet from '../../style/designSheet';\nimport { combineState } from '../../utils/state';\nimport { dismissOp, interactionOp } from \"./form\";\nexport const $Field = ({ value = empty(), fieldStyle = {}, validation = never, inputOp = O() }) => component(([focusStyle, interactionTether], [dismissstyle, dismissTether], [blur, blurTether], [change, changeTether]) => {\n    const multicastValidation = O(validation, startWith(''), multicast);\n    const alert = multicastValidation(change);\n    const focus = merge(focusStyle, dismissstyle);\n    const state = combineState({ focus, alert });\n    return [\n        $element('input')(designSheet.input, style(fieldStyle), changeTether(event('input'), map(inputEv => {\n            if (inputEv.target instanceof HTMLInputElement) {\n                const text = inputEv.target.value;\n                return text || '';\n            }\n            return '';\n        })), inputOp, styleBehavior(map(({ focus, alert }) => {\n            if (alert) {\n                return { borderBottom: `2px solid ${pallete.negative}` };\n            }\n            return focus ? { borderBottom: `2px solid ${pallete.primary}` } : null;\n        }, state)), interactionTether(interactionOp), dismissTether(dismissOp), blurTether(event('blur')), O(map(node => merge(now(node), filter(() => false, tap(val => {\n            // applying by setting `HTMLInputElement.value` imperatively(only way known to me)\n            node.element.value = String(val);\n        }, value)))), switchLatest))(),\n        {\n            change,\n            blur\n        }\n    ];\n});\n//# sourceMappingURL=$Field.js.map","import { $text, component, O, style } from '@aelea/core';\nimport { pallete } from '@aelea/ui-components-theme';\nimport { empty, map, merge, multicast, never, now, sample, skipRepeats, switchLatest } from '@most/core';\nimport { $row } from \"../../elements/$elements\";\nimport layoutSheet from '../../style/layoutSheet';\nimport { $Field } from \"./$Field\";\nimport { $label } from \"./form\";\nexport const $TextField = (config) => component(([change, valueTether], [blur, blurTether]) => {\n    var _a;\n    const { hint } = config;\n    const multicastValidation = config.validation ? O(config.validation, src => sample(src, blur), multicast) : undefined;\n    const fieldOp = (_a = config.containerOp) !== null && _a !== void 0 ? _a : O();\n    const validation = multicastValidation ? skipRepeats(multicastValidation(change)) : never();\n    const $messageLabel = $text(style({ fontSize: '75%', width: '100%' }));\n    const $hint = hint ? now($messageLabel(hint)) : never();\n    const $alert = map(msg => {\n        if (msg) {\n            const negativeStyle = style({ color: pallete.negative });\n            return negativeStyle($messageLabel(msg));\n        }\n        return hint ? $messageLabel(hint) : empty();\n    }, validation);\n    const $message = switchLatest(merge($hint, $alert));\n    return [\n        $row(fieldOp, style({ alignItems: 'flex-start' }))($label(layoutSheet.flex, layoutSheet.spacingTiny)($row(layoutSheet.flex, layoutSheet.spacingSmall)($text(style({ alignSelf: 'flex-end', cursor: 'pointer', paddingBottom: '1px', ...config.labelStyle }))(config.label), $Field({ ...config, validation: multicastValidation })({\n            change: valueTether(),\n            blur: blurTether()\n        })), $message)),\n        { change, }\n    ];\n});\n//# sourceMappingURL=$TextField.js.map","import { constant, filter, merge } from '@most/core';\nimport { $element, event, O, style } from '@aelea/core';\nimport layoutSheet from '../../style/layoutSheet';\nimport { pallete } from '@aelea/ui-components-theme';\nexport const interactionOp = O((src) => merge(event('focus', src), event('pointerover', src)), constant(true));\nexport const dismissOp = O((src) => merge(event('blur', src), event('pointerout', src)), filter(x => document.activeElement !== x.target), // focused elements cannot be dismissed\nconstant(false));\nexport const $form = $element('form')(layoutSheet.column);\nexport const $label = $element('label')(layoutSheet.column, style({ color: pallete.foreground }));\n//# sourceMappingURL=form.js.map","export function convertHexToRGBA(hexCode, opacity = 1) {\n    let hex = hexCode.replace('#', '');\n    if (hex.length === 3) {\n        hex = `${hex[0]}${hex[0]}${hex[1]}${hex[1]}${hex[2]}${hex[2]}`;\n    }\n    const r = parseInt(hex.substring(0, 2), 16);\n    const g = parseInt(hex.substring(2, 4), 16);\n    const b = parseInt(hex.substring(4, 6), 16);\n    return `rgba(${r},${g},${b},${opacity / 100})`;\n}\nconst validRGB = /rgba\\((\\s*\\d+\\s*,){3}[\\d.]+\\)/;\nexport function hexAlpha(color, opacity) {\n    const isRgb = validRGB.test(color);\n    if (isRgb) {\n        return color.replace(/[^,]+(?=\\))/, String(opacity));\n    }\n    else {\n        return hexAlpha(convertHexToRGBA(color), opacity);\n    }\n}\n//# sourceMappingURL=color.js.map","import { $node, component, event, O, style, styleBehavior } from \"@aelea/core\";\nimport { pallete } from \"@aelea/ui-components-theme\";\nimport { constant, empty, map, merge, multicast, switchLatest, until } from \"@most/core\";\nimport { observer } from \"../..\";\nimport { hexAlpha } from \"../../utils/color\";\nimport { combineArrayMap } from \"../../utils/state\";\nexport const $Popover = ({ $$popContent, offset = 16, padding = 24, dismiss = empty() }) => ($target) => component(([overlayClick, overlayClickTether], [targetIntersection, targetIntersectionTether], [popoverContentDimension, popoverContentDimensionTether], [popoverContentIntersection, popoverContentIntersectionTether]) => {\n    const $$popContentMulticast = multicast($$popContent);\n    const $overlay = $node(style({\n        position: 'absolute', zIndex: 99999,\n        top: 0, left: 0, right: 0, bottom: 0\n    }), overlayClickTether(event('click')), styleBehavior(combineArrayMap(([contentResize], [intersectionContentRect], [IntersectiontargetRect]) => {\n        const { y, x } = IntersectiontargetRect.intersectionRect;\n        const width = Math.max(contentResize.contentRect.width, IntersectiontargetRect.intersectionRect.width) + (padding * 2) + offset;\n        const height = contentResize.contentRect.height + IntersectiontargetRect.intersectionRect.height + offset + padding * 2;\n        const left = x + (IntersectiontargetRect.intersectionRect.width / 2) + 'px';\n        const top = y - padding + (height / 2) + 'px';\n        return {\n            backgroundImage: `radial-gradient(${width}px ${height}px at top ${top} left ${left}, ${pallete.background} ${width / 2}px, ${hexAlpha(pallete.horizon, .65)})`,\n            // backdropFilter: 'blur(2px)'\n        };\n    }, popoverContentDimension, popoverContentIntersection, targetIntersection)));\n    const contentOps = O(popoverContentIntersectionTether(observer.intersection()), popoverContentDimensionTether(observer.resize({})), styleBehavior(map(([rect]) => {\n        const { y, x, width, bottom } = rect.intersectionRect;\n        const bottomSpace = window.innerHeight - bottom;\n        const topSpace = bottom;\n        const isUp = bottomSpace > topSpace;\n        const top = (isUp ? topSpace + offset : y - offset) + 'px';\n        const left = x + (width / 2) + 'px';\n        return {\n            top, left,\n            opacity: 1,\n            transform: `translate(-50%, ${isUp ? '0' : '-100%'})`\n        };\n    }, targetIntersection)), style({ zIndex: 100000, position: 'absolute', opacity: 0 }));\n    const dismissOverlay = until(merge(overlayClick, dismiss));\n    const $popover = switchLatest(map($content => {\n        return dismissOverlay(merge(contentOps($content), $overlay()));\n    }, $$popContentMulticast));\n    const targetOp = O(targetIntersectionTether(observer.intersection()), styleBehavior(merge(constant({ zIndex: 100000, position: 'relative' }, $$popContentMulticast), constant(null, overlayClick))));\n    return [\n        $node(map(node => ({ ...node, insertAscending: true })))(targetOp($target), $popover),\n        { overlayClick }\n    ];\n});\n//# sourceMappingURL=$Popover.js.map","import { $custom, $node, style } from '@aelea/core';\nimport { pallete } from '@aelea/ui-components-theme';\nimport layoutSheet from '../style/layoutSheet';\nexport const $row = $custom('row')(layoutSheet.row);\nexport const $column = $custom('column')(layoutSheet.column);\nexport const elevation1 = style({ border: `1px solid ${pallete.horizon}` });\nexport const elevation2 = style({ boxShadow: '0px 1px 1px rgba(0, 0, 0, 0.14), 0px 2px 1px rgba(0, 0, 0, 0.12), 0px 1px 3px rgba(0, 0, 0, 0.2)', });\nexport const elevation3 = style({ boxShadow: '0px 2px 2px rgba(0, 0, 0, 0.14), 0px 3px 1px rgba(0, 0, 0, 0.12), 0px 1px 5px rgba(0, 0, 0, 0.2)', });\nexport const elevation4 = style({ boxShadow: '0px 3px 4px rgba(0, 0, 0, 0.14), 0px 3px 3px rgba(0, 0, 0, 0.12), 0px 1px 8px rgba(0, 0, 0, 0.2)', });\nexport const elevation6 = style({ boxShadow: '0px 6px 10px rgba(0, 0, 0, 0.14), 0px 1px 18px rgba(0, 0, 0, 0.12), 0px 3px 5px rgba(0, 0, 0, 0.2)', });\nexport const elevation12 = style({ boxShadow: '0px 12px 17px rgba(0, 0, 0, 0.14), 0px 5px 22px rgba(0, 0, 0, 0.12), 0px 7px 8px rgba(0, 0, 0, 0.2)', });\nexport const $card = $column(elevation2, style({\n    padding: '16px',\n    backgroundColor: pallete.background,\n}));\nexport const $seperator = $node(style({\n    minHeight: '1px',\n    minWidth: '1px',\n    background: pallete.foreground\n}))();\n//# sourceMappingURL=$elements.js.map","import { $svg, attr, O, style } from \"@aelea/core\";\nexport const $icon = ({ $content, width = '24px', height = width, viewBox = `0 0 ${parseInt(width)} ${parseInt(height)}`, fill = 'inherit', svgOps = O() }) => ($svg('svg')(attr({ viewBox, fill }), style({ width, height }), svgOps)($content));\n//# sourceMappingURL=$icon.js.map","import { style, O, stylePseudo } from '@aelea/core';\nimport { pallete } from '@aelea/ui-components-theme';\nconst text = style({\n    fontFamily: `'Nunito', Fira Code`,\n    fontWeight: 100,\n    fontSize: '1.15rem'\n});\nconst customScroll = O(stylePseudo('::-webkit-scrollbar-thumb', {\n    backgroundColor: pallete.foreground\n}), stylePseudo('::-webkit-scrollbar', {\n    backgroundColor: 'transparent',\n    width: '6px',\n    height: '6px'\n}), stylePseudo('::-webkit-scrollbar-thumb:hover', {\n    backgroundColor: pallete.primary\n}));\nconst control = O(text, style({\n    border: '2px solid transparent',\n    color: pallete.message,\n    outline: 'none',\n    flexShrink: 0,\n}));\nexport default {\n    customScroll,\n    text,\n    main: O(text, style({\n        height: '100vh',\n        color: pallete.message,\n        fill: pallete.message,\n        overflowY: 'scroll',\n        backgroundColor: pallete.background,\n        margin: '0',\n        scrollbarColor: 'auto',\n        scrollbarWidth: 'thin',\n        display: 'block'\n    }), customScroll),\n    control,\n    input: O(control, style({\n        minWidth: '25px',\n        width: '100%',\n        backgroundColor: 'transparent',\n        border: 'none',\n        borderBottom: `2px solid ${pallete.message}`,\n        paddingBottom: '2px',\n        flex: 1,\n        padding: 0,\n        marginTop: '2px'\n    }), stylePseudo('::placeholder', {\n        color: pallete.foreground\n    })),\n    btn: O(control, style({\n        cursor: 'pointer',\n        backgroundColor: 'transparent',\n        border: `2px solid ${pallete.message}`,\n        color: pallete.message,\n        padding: '5px 15px',\n        display: 'flex',\n        alignItems: 'center',\n    }))\n};\n//# sourceMappingURL=designSheet.js.map","import { O, style } from \"@aelea/core\";\nconst stretch = style({\n    position: 'absolute',\n    top: '0',\n    bottom: '0',\n    right: '0',\n    left: '0'\n});\nconst spacingTiny = style({\n    gap: '4px'\n});\nconst spacingSmall = style({\n    gap: '8px'\n});\nconst spacing = style({\n    gap: '16px'\n});\nconst spacingBig = style({\n    gap: '26px'\n});\nconst flex = style({ flex: 1 });\nconst displayFlex = style({ display: 'flex' });\nconst row = O(displayFlex, style({ flexDirection: 'row' }));\nconst column = O(displayFlex, style({ flexDirection: 'column' }));\nconst rowFlex = O(row, flex);\nconst columnFlex = O(column, flex);\nexport default {\n    stretch, spacingTiny, spacingSmall, spacing, spacingBig, flex, displayFlex, row, column, rowFlex, columnFlex\n};\n//# sourceMappingURL=layoutSheet.js.map","import { eventElementTarget } from \"@aelea/core\";\nimport { chain, constant, continueWith, filter, switchLatest, until } from \"@most/core\";\nimport { disposeWith } from \"@most/disposable\";\nexport const intersection = (config = {}) => chain((node) => ({\n    run(sink, scheduler) {\n        const intersectionObserver = new IntersectionObserver(entries => {\n            sink.event(scheduler.currentTime(), entries);\n        }, config);\n        intersectionObserver.observe(node.element);\n        return disposeWith(([instance, el]) => instance.unobserve(el), [intersectionObserver, node.element]);\n    }\n}));\nexport const resize = (config = {}) => chain((node) => ({\n    run(sink, scheduler) {\n        const ro = new ResizeObserver(entries => {\n            sink.event(scheduler.currentTime(), entries);\n        });\n        ro.observe(node.element, config);\n        return disposeWith(([instance, el]) => instance.unobserve(el), [ro, node.element]);\n    }\n}));\nexport const mutation = (config = { attributes: true, childList: false, subtree: false }) => chain((node) => ({\n    run(sink, scheduler) {\n        const ro = new MutationObserver(entries => {\n            sink.event(scheduler.currentTime(), entries);\n        });\n        ro.observe(node.element, config);\n        return disposeWith(instance => instance.disconnect(), ro);\n    }\n}));\nconst documentVisibilityChange = eventElementTarget('visibilitychange', document);\nconst documentVisible = filter(() => document.visibilityState === 'visible', documentVisibilityChange);\nconst documentHidden = filter(() => document.visibilityState === 'hidden', documentVisibilityChange);\nexport const duringWindowActivity = (source) => {\n    const sourceUntilInactivity = until(documentHidden, source);\n    const activity = continueWith(() => switchLatest(constant(activity, documentVisible)), sourceUntilInactivity);\n    return activity;\n};\n//# sourceMappingURL=elementObservers.js.map","import { Pipe } from \"@aelea/core\";\nimport { filter } from \"@most/core\";\nimport { merge } from \"@most/core\";\nimport { combineArray, multicast, startWith } from \"@most/core\";\nimport { curry2 } from \"@most/prelude\";\nclass StateSink extends Pipe {\n    constructor(parent, sink) {\n        super(sink);\n        this.parent = parent;\n        this.sink = sink;\n    }\n    event(t, x) {\n        this.parent.latestvalue = x;\n        this.parent.hasValue = true;\n        this.sink.event(t, x);\n    }\n}\nexport class ReplayLatest {\n    constructor(source, initialState) {\n        this.source = source;\n        this.initialState = initialState;\n        this.hasValue = false;\n        this.hasInitial = arguments.length === 2;\n    }\n    run(sink, scheduler) {\n        const startWithReplay = this.hasValue\n            ? startWith(this.latestvalue)\n            : this.hasInitial\n                ? startWith(this.initialState)\n                : null;\n        const withReplayedValue = startWithReplay ? startWithReplay(this.source) : this.source;\n        return withReplayedValue.run(new StateSink(this, sink), scheduler);\n    }\n}\nexport function replayLatest(s, initialState) {\n    if (arguments.length === 1) {\n        return new ReplayLatest(s);\n    }\n    else {\n        return new ReplayLatest(s, initialState);\n    }\n}\nexport function combineState(state) {\n    const entries = Object.entries(state);\n    const streams = entries.map(([_, stream]) => stream);\n    const combinedWithInitial = combineArray((...arrgs) => {\n        return arrgs.reduce((seed, val, idx) => {\n            const key = entries[idx][0];\n            seed[key] = val;\n            return seed;\n        }, {});\n    }, streams);\n    return combinedWithInitial;\n}\n// temorary typings fix for this issue https://github.com/mostjs/core/pull/543\nexport function combineArrayMap(cb, ...streamList) {\n    return combineArray(cb, streamList);\n}\nexport const localStorageTreeFactory = (rootChainKey) => (key, initialDefaultState) => {\n    const mktTree = `${rootChainKey}.${key}`;\n    const storeData = localStorage.getItem(mktTree);\n    const initialState = storeData ? JSON.parse(storeData) : initialDefaultState;\n    const storeCurry = curry2((writePipe = (x => x), stream) => {\n        const multicastSource = multicast(stream);\n        const writeOp = writePipe(multicastSource);\n        // ignore \n        const writeEffect = filter(state => {\n            scope.state = state;\n            localStorage.setItem(mktTree, JSON.stringify(state));\n            return false;\n        }, writeOp);\n        return merge(writeEffect, multicastSource);\n    });\n    let _state = initialState;\n    const scope = {\n        get state() {\n            return _state;\n        },\n        set state(newState) {\n            _state = newState;\n        },\n        store: storeCurry,\n        craete: localStorageTreeFactory(mktTree)\n    };\n    return scope;\n};\n//# sourceMappingURL=state.js.map","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"\" + chunkId + \".\" + {\"40\":\"c2aedd52b43905c699b7\",\"495\":\"58778533fa9d3f399e25\"}[chunkId] + \".js\";\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript)\n\t\tscriptUrl = document.currentScript.src\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) scriptUrl = scripts[scripts.length - 1].src\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t179: 0,\n\t505: 0\n};\n\n__webpack_require__.f.j = (chunkId, promises) => {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise((resolve, reject) => (installedChunkData = installedChunks[chunkId] = [resolve, reject]));\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = (event) => {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t} else installedChunks[chunkId] = 0;\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n// no on chunks loaded\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tfor(moduleId in moreModules) {\n\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t}\n\t}\n\tif(runtime) runtime(__webpack_require__);\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkIds[i]] = 0;\n\t}\n\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunk_aelea_website\"] = self[\"webpackChunk_aelea_website\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","import { loop } from \"@most/core\";\nexport function applyStyleBehavior(styleBehavior, node, styleEnv) {\n    let latestClass;\n    return loop((previousCssRule, styleObject) => {\n        if (previousCssRule) {\n            if (styleObject === null) {\n                node.element.classList.remove(previousCssRule);\n                return { seed: null, value: '' };\n            }\n            else {\n                const cashedCssClas = useStyleRule(styleEnv, styleObject);\n                if (previousCssRule !== cashedCssClas) {\n                    node.element.classList.replace(latestClass, cashedCssClas);\n                    latestClass = cashedCssClas;\n                    return { seed: cashedCssClas, value: cashedCssClas };\n                }\n            }\n        }\n        if (styleObject) {\n            const cashedCssClas = useStyleRule(styleEnv, styleObject);\n            node.element.classList.add(cashedCssClas);\n            latestClass = cashedCssClas;\n            return { seed: cashedCssClas, value: cashedCssClas };\n        }\n        return { seed: previousCssRule, value: '' };\n    }, null, styleBehavior);\n}\nfunction styleObjectAsString(styleObj) {\n    return Object.entries(styleObj)\n        .map(([key, val]) => {\n        const kebabCaseKey = key.replace(/([a-z])([A-Z])/g, \"$1-$2\").toLowerCase();\n        return `${kebabCaseKey}:${val};`;\n    })\n        .join(\"\");\n}\nexport function useStyleRule(cacheService, styleDefinition) {\n    const properties = styleObjectAsString(styleDefinition);\n    const cachedRuleIdx = cacheService.cache.indexOf(properties);\n    if (cachedRuleIdx === -1) {\n        const index = cacheService.stylesheet.cssRules.length;\n        const namespace = cacheService.namespace + index;\n        cacheService.cache.push(properties);\n        cacheService.stylesheet.insertRule(`.${namespace} {${properties}}`, index);\n        return `${cacheService.namespace + index}`;\n    }\n    return `${cacheService.namespace + cachedRuleIdx}`;\n}\nexport function useStylePseudoRule(cacheService, styleDefinition, pseudo = '') {\n    const properties = styleObjectAsString(styleDefinition);\n    const index = cacheService.stylesheet.cssRules.length;\n    const rule = `.${cacheService.namespace + index + pseudo} {${properties}}`;\n    const cachedRuleIdx = cacheService.cache.indexOf(rule);\n    if (cachedRuleIdx === -1) {\n        cacheService.cache.push(rule);\n        cacheService.stylesheet.insertRule(rule, index);\n        return `${cacheService.namespace + index}`;\n    }\n    return `${cacheService.namespace + cachedRuleIdx}`;\n}\n//# sourceMappingURL=styleUtils.js.map","import { newDefaultScheduler } from '@most/scheduler';\nimport { loop, map, mergeArray, tap } from '@most/core';\nimport { disposeAll, disposeNone, disposeWith } from '@most/disposable';\nimport { useStylePseudoRule, useStyleRule } from './utils/styleUtils';\nimport { nullSink } from './utils';\nimport SettableDisposable from './utils/SettableDisposable';\nfunction appendToSlot(parent, child, insertAt) {\n    if (insertAt === 0)\n        return parent.prepend(child);\n    parent.insertBefore(child, parent.children[insertAt]);\n}\nexport function runBrowser(config = {}) {\n    const composedConfig = {\n        style: {\n            namespace: '•',\n            stylesheet: new CSSStyleSheet(),\n            cache: []\n        },\n        rootNode: document.body,\n        scheduler: newDefaultScheduler(),\n        ...config\n    };\n    document.adoptedStyleSheets = [\n        ...document.adoptedStyleSheets,\n        composedConfig.style.stylesheet,\n    ];\n    const rootNode = {\n        element: composedConfig.rootNode,\n        $segments: [],\n        disposable: new SettableDisposable(),\n        styleBehavior: [],\n        insertAscending: true,\n        attributesBehavior: [],\n        stylePseudo: []\n    };\n    return ($root) => {\n        const s = new BranchEffectsSink(composedConfig, rootNode, 0, [0]);\n        map(node => ({ ...node, segmentPosition: 0 }), $root)\n            .run(s, composedConfig.scheduler);\n    };\n}\nclass BranchEffectsSink {\n    constructor(env, parentNode, segmentPosition, segmentsCount) {\n        this.env = env;\n        this.parentNode = parentNode;\n        this.segmentPosition = segmentPosition;\n        this.segmentsCount = segmentsCount;\n        this.disposables = [];\n        this.segmentsSlotsMap = [];\n    }\n    event(_, node) {\n        try {\n            node === null || node === void 0 ? void 0 : node.disposable.setDisposable(disposeWith(node => {\n                this.segmentsCount[this.segmentPosition]--;\n                node.element.remove();\n                const slot = this.segmentsSlotsMap[this.segmentPosition];\n                const disposableBranch = slot.get(node);\n                slot.delete(node);\n                disposableBranch === null || disposableBranch === void 0 ? void 0 : disposableBranch.dispose();\n            }, node));\n        }\n        catch (e) {\n            console.error(node.element.nodeName);\n            throw new Error(`Cannot append node that have already been rendered, check invalid node operations under ^`);\n        }\n        let slot = 0;\n        for (let sIdx = 0; sIdx < this.segmentPosition; sIdx++) {\n            slot += this.segmentsCount[sIdx];\n        }\n        const insertAt = this.parentNode.insertAscending\n            ? slot\n            : slot + this.segmentsCount[this.segmentPosition];\n        appendToSlot(this.parentNode.element, node.element, insertAt);\n        this.segmentsCount[this.segmentPosition]++;\n        if ('style' in node && node.style && Object.keys(node.style).length) {\n            const selector = useStyleRule(this.env.style, node.style);\n            node.element.classList.add(selector);\n        }\n        if ('stylePseudo' in node) {\n            node.stylePseudo.forEach(styleDeclaration => {\n                const selector = useStylePseudoRule(this.env.style, styleDeclaration.style, styleDeclaration.class);\n                node.element.classList.add(selector);\n            });\n        }\n        if ('attributes' in node && node.attributes) {\n            if (Object.keys(node.attributes).length !== 0) {\n                applyAttrFn(node.attributes, node.element);\n            }\n        }\n        if ('styleBehavior' in node && node.styleBehavior) {\n            const disposeStyle = mergeArray(node.styleBehavior.map(sb => styleBehavior(sb, node, this.env.style))).run(nullSink, this.env.scheduler);\n            this.disposables.push(disposeStyle);\n        }\n        if ('attributesBehavior' in node && node.attributesBehavior) {\n            const disposeStyle = mergeArray(node.attributesBehavior.map(attrs => {\n                return tap((attr) => {\n                    applyAttrFn(attr, node.element);\n                }, attrs);\n            })).run(nullSink, this.env.scheduler);\n            this.disposables.push(disposeStyle);\n        }\n        const newDisp = '$segments' in node\n            ? new BranchChildrenSinkList(node.$segments, this.env, node)\n            : disposeNone();\n        if (!this.segmentsSlotsMap[this.segmentPosition]) {\n            this.segmentsSlotsMap[this.segmentPosition] = new Map();\n        }\n        this.segmentsSlotsMap[this.segmentPosition].set(node, disposeAll([...this.disposables, newDisp]));\n    }\n    end(_t) {\n        this.segmentsSlotsMap.forEach(s => {\n            s.forEach(d => d.dispose());\n        });\n    }\n    error(t, err) {\n        console.error(err);\n    }\n}\nclass BranchChildrenSinkList {\n    constructor($segments, env, node) {\n        this.env = env;\n        this.node = node;\n        this.disposables = new Map();\n        const l = $segments.length;\n        const segmentsCount = new Array(l).fill(0);\n        for (let i = 0; i < l; ++i) {\n            const $child = $segments[i];\n            const sink = new BranchEffectsSink(this.env, node, i, segmentsCount);\n            this.disposables.set($child, $child.run(sink, this.env.scheduler));\n        }\n    }\n    dispose() {\n        this.disposables.forEach(d => d.dispose());\n    }\n}\nfunction styleBehavior(styleBehavior, node, cacheService) {\n    let latestClass;\n    return loop((previousCssRule, styleObject) => {\n        if (previousCssRule) {\n            if (styleObject === null) {\n                node.element.classList.remove(previousCssRule);\n                return { seed: null, value: '' };\n            }\n            else {\n                const cashedCssClas = useStyleRule(cacheService, styleObject);\n                if (previousCssRule !== cashedCssClas) {\n                    node.element.classList.replace(latestClass, cashedCssClas);\n                    latestClass = cashedCssClas;\n                    return { seed: cashedCssClas, value: cashedCssClas };\n                }\n            }\n        }\n        if (styleObject) {\n            const cashedCssClas = useStyleRule(cacheService, styleObject);\n            node.element.classList.add(cashedCssClas);\n            latestClass = cashedCssClas;\n            return { seed: cashedCssClas, value: cashedCssClas };\n        }\n        return { seed: previousCssRule, value: '' };\n    }, null, styleBehavior);\n}\nexport function applyAttrFn(attrs, node) {\n    if (attrs) {\n        Object.entries(attrs).forEach(([attrKey, value]) => {\n            if (value === undefined || value === null) {\n                node.removeAttribute(attrKey);\n            }\n            else {\n                node.setAttribute(attrKey, String(value));\n            }\n        });\n    }\n    return node;\n}\n//# sourceMappingURL=run.js.map","import { constant, filter, join, map, skipRepeatsWith, switchLatest, tap, until } from '@most/core';\nimport { O } from '@aelea/core';\nexport const create = ({ fragment = '', fragmentsChange, title }) => {\n    const ignoreRepeatPathChanges = skipRepeatsWith((next, prev) => {\n        return next.length === prev.length && next.every((f, i) => f === prev[i]);\n    }, fragmentsChange);\n    return resolveRoute(ignoreRepeatPathChanges, [])({ fragment, title });\n};\nfunction resolveRoute(pathChange, parentFragments) {\n    return ({ fragment, title }) => {\n        const fragments = [...parentFragments, fragment];\n        const fragIdx = parentFragments.length;\n        const diff = O(skipRepeatsWith((prev, next) => {\n            return next[fragIdx] === prev[fragIdx];\n        }));\n        const contains = O(diff, filter(next => {\n            return isMatched(fragment, next[fragIdx]);\n        }));\n        const match = O(map((evt) => {\n            const lastTarget = evt.slice(-1)[0];\n            return isMatched(fragment, lastTarget);\n        }), tap(isMatched => {\n            if (isMatched) {\n                document.title = title || '';\n            }\n        }));\n        const miss = O(diff, filter(next => !isMatched(fragment, next[fragIdx])));\n        return {\n            create: resolveRoute(pathChange, fragments),\n            contains: contains(pathChange),\n            match: match(pathChange),\n            miss: miss(pathChange),\n            fragments\n        };\n    };\n}\nexport function isMatched(frag, path) {\n    if (frag instanceof RegExp) {\n        return Boolean(path === null || path === void 0 ? void 0 : path.match(frag));\n    }\n    return frag === path;\n}\nexport const contains = (route) => (ns) => {\n    return switchLatest(constant(until(route.miss, ns), route.contains));\n};\nexport const match = (route) => (ns) => {\n    const exactMatch = filter(isMatch => isMatch, route.match);\n    const unmatch = filter(isMatch => !isMatch, route.match);\n    return join(constant(until(unmatch, ns), exactMatch));\n};\n//# sourceMappingURL=resolveUrl.js.map","import { component, attr, event, style, O } from \"@aelea/core\";\nimport { constant, map, merge, startWith } from \"@most/core\";\nexport const $RouterAnchor = ({ url, route, $anchor, anchorOp = O() }) => component(([click, clickTether], [focus, focusTether]) => {\n    const trailingSlash = /\\/$/;\n    const href = url.replace(trailingSlash, '');\n    const contains = merge(constant(true, route.contains), constant(false, route.miss));\n    const anchorOps = O(attr({ href }), style({ textDecoration: 'none', padding: '1px 5px' }), clickTether(event('click'), map((clickEv) => {\n        clickEv.preventDefault();\n        const pathName = clickEv.currentTarget instanceof HTMLAnchorElement ? clickEv.currentTarget.pathname : null;\n        if (pathName) {\n            // avoid repeated adjacent states\n            if (location.pathname !== pathName) {\n                history.pushState(null, '', pathName);\n            }\n            return pathName;\n        }\n        else {\n            throw new Error('target anchor contains no href');\n        }\n    })), focusTether($anchor => {\n        const focus = constant(true, merge(event('focus', $anchor), event('pointerenter', $anchor)));\n        const blur = constant(false, merge(event('blur', $anchor), event('pointerleave', $anchor)));\n        return startWith(false, merge(focus, blur));\n    }), anchorOp);\n    return [\n        anchorOps($anchor),\n        { click, match: route.match, contains, focus }\n    ];\n});\n//# sourceMappingURL=$Anchor.js.map","\nimport { $Branch, component, style } from '@aelea/core'\nimport { $column, layoutSheet } from '@aelea/ui-components'\nimport { fadeIn } from './transitions/enter'\n\n\ninterface Example {\n  file: string,\n}\n\nexport default (config: Example) => (...$content: $Branch[]) => component(() => {\n\n  return [\n    fadeIn(\n      $column(layoutSheet.spacingBig, style({ flex: 1 }))(\n        ...$content\n      )\n    )\n  ]\n})\n\n","import { component, Behavior, styleBehavior, StyleCSS, $Branch, $element, attr, style } from \"@aelea/core\"\nimport { IAnchor, $RouterAnchor } from \"@aelea/router\"\nimport { combine } from \"@most/core\"\nimport { pallete } from \"@aelea/ui-components-theme\"\n\n\nexport interface ILink extends Omit<IAnchor, '$anchor'> {\n  $content: $Branch<HTMLAnchorElement>\n}\n\nconst $anchor = $element('a')(\n  style({\n    color: pallete.message\n  }),\n)\n\nexport const $Link = ({ url, route, $content, anchorOp }: ILink) => component((\n  [click, clickTether]: Behavior<string, string>,\n  [active, containsTether]: Behavior<boolean, boolean>,\n  [focus, focusTether]: Behavior<boolean, boolean>,\n) => {\n  const $anchorEl = $anchor(\n    styleBehavior(\n      combine((isActive, isFocus): StyleCSS | null => {\n        return isActive ? { color: pallete.primary, cursor: 'default' }\n          : isFocus ? { backgroundColor: pallete.primary }\n            : null\n      }, active, focus)\n    )\n  )($content)\n\n  return [\n    $RouterAnchor({ $anchor: $anchorEl, url, route, anchorOp })({\n      click: clickTether(),\n      focus: focusTether(),\n      contains: containsTether()\n    }),\n\n    { click, active, focus }\n  ]\n})","\nimport { $node, $text, attr, Behavior, component, O, style } from '@aelea/core'\nimport { $column, $Field, $NumberTicker, $row, layoutSheet } from '@aelea/ui-components'\nimport { pallete } from '@aelea/ui-components-theme'\nimport { combine, empty, map, startWith } from '@most/core'\n\n\nconst add = (x: number, y: number) => x + y\n\n\nconst extractValue = O(\n  map((str: string) => Number(str)),\n  startWith(0)\n)\n\nconst $plus = $node(\n  style({\n    justifyContent: 'center', alignItems: 'center',\n    width: '36px', color: pallete.foreground\n  }),\n  layoutSheet.displayFlex\n)\n\nconst placeholderZero = attr({ placeholder: '0' })\nexport default component((\n  [x, XTether]: Behavior<string, number>,\n  [y, YTether]: Behavior<string, number>\n) =>\n  [\n    $column(layoutSheet.spacingSmall)(\n\n      $row(\n        $plus(\n          $text('+')\n        ),\n        $column(layoutSheet.spacingTiny)(\n          $Field({ value: empty(), inputOp: placeholderZero })({\n            change: XTether(extractValue)\n          }),\n          $Field({ value: empty(), inputOp: placeholderZero })({\n            change: YTether(extractValue)\n          })\n        )\n      ),\n\n      $row(\n        $node(style({ width: '36px' }))(),\n        $NumberTicker({\n          value$: combine(add, x, y),\n          decrementColor: pallete.negative,\n          incrementColor: pallete.positive,\n          slots: 30\n        })\n      )\n\n    )\n  ]\n)\n\n\n","import { $text, Behavior, component, style } from '@aelea/core'\nimport { $Button, $column, $NumberTicker, $row, layoutSheet } from '@aelea/ui-components'\nimport { pallete } from '@aelea/ui-components-theme'\nimport { constant } from '@most/core'\nimport { Stream } from '@most/types'\n\n\ninterface Counter {\n  value: Stream<number>\n}\n\nexport default ({ value }: Counter) => component((\n  [increment, incrementTether]: Behavior<PointerEvent, 1>,\n  [decrement, decrementTether]: Behavior<PointerEvent, -1>\n) => {\n\n\n  return [\n\n    $row(style({ alignItems: 'center', placeContent: 'space-between' }), layoutSheet.spacing)(\n      $column(style({ borderRadius: '5px', alignItems: 'center' }), layoutSheet.spacing)(\n        $Button({ $content: $text('+') })({\n          click: incrementTether(\n            constant(1)\n          )\n        }),\n        $Button({ $content: $text('-') })({\n          click: decrementTether(\n            constant(-1)\n          )\n        }),\n      ),\n\n      $NumberTicker({\n        value$: value,\n        textStyle: {\n          fontSize: '30px'\n        },\n        decrementColor: pallete.negative,\n        incrementColor: pallete.positive\n      })\n    ),\n\n    { increment, decrement }\n\n  ]\n})\n","\nimport { $text, Behavior, behavior, component, O, style } from '@aelea/core'\nimport { $Button, $column, $row, $seperator, layoutSheet, state } from '@aelea/ui-components'\nimport { pallete } from '@aelea/ui-components-theme'\nimport { chain, constant, map, merge, mergeArray, multicast, now, scan, snapshot, until } from '@most/core'\nimport { $TrashBtn } from '../../../elements/$common'\nimport $Counter from './$Counter'\n\nconst $AddBtn = $Button({\n  $content: $text('Add One')\n})\nexport const sumAdd = scan((current: number, x: number) => current + x)\n\nexport default component((\n  [addedCounter, addedCounterTether]: Behavior<PointerEvent, PointerEvent>,\n  [disposeCounter, disposeCounterTether]: Behavior<PointerEvent, PointerEvent>,\n  [counterIncrement, countersIncrementTether]: Behavior<1, 1>,\n  [counterDecrement, countersDecrementTether]: Behavior<-1, -1>,\n  [disposedCounterCount, disposedCounterCountTether]: Behavior<any, number>,\n) => {\n\n  const INITAL_COUNT = 0\n  const sumWithInitial = sumAdd(INITAL_COUNT)\n\n  const counting = mergeArray([disposedCounterCount, counterIncrement, counterDecrement])\n  const totalCount = sumWithInitial(counting)\n\n  const addCounter = merge(addedCounter, now(null))\n\n  return [\n\n    $column(layoutSheet.spacing)(\n      $row(style({ placeContent: 'space-between', alignItems: 'center' }), layoutSheet.spacing)(\n        $row(layoutSheet.spacingSmall)(\n          $text(style({ color: pallete.foreground }))('Counters: '),\n          $text(\n            map(String, sumWithInitial(merge(constant(1, addCounter), constant(-1, disposeCounter))))\n          ),\n        ),\n        $row(layoutSheet.spacingSmall)(\n          $text(style({ color: pallete.foreground }))('Sum: '),\n          $text(map(String, totalCount))\n        ),\n        $AddBtn({\n          click: addedCounterTether()\n        }),\n      ),\n      chain(() => {\n\n        const [remove, removeTether] = behavior<PointerEvent, PointerEvent>()\n        const [valueChange, valueChangeTether] = behavior<number, number>()\n\n        const value = state.replayLatest(multicast(valueChange), 0)\n\n\n        return until(remove)(\n          $column(layoutSheet.spacing)(\n            $seperator,\n            $row(style({ alignItems: 'center' }), layoutSheet.spacingBig)(\n              $TrashBtn({\n                click: O(\n                  removeTether(),\n                  disposeCounterTether(),\n                  disposedCounterCountTether(\n                    snapshot(val => -val, value)\n                  ),\n                )\n              }),\n              $Counter({ value })({\n                increment: O(\n                  countersIncrementTether(),               \n                  valueChangeTether(\n                    snapshot((val, increment) => val + increment, value)\n                  ),\n                ),\n                decrement: O(\n                  countersDecrementTether(),\n                  valueChangeTether(\n                    snapshot((val, increment) => val + increment, value)\n                  ),\n                )\n              })\n            )\n          )\n        )\n      }, addCounter)\n    )\n\n  ]\n})\n\n","import { chain, combine, filter, map, merge, multicast, now, skipAfter, skipRepeats, snapshot, startWith, switchLatest } from \"@most/core\";\nimport { remove } from \"@most/prelude\";\nimport { behavior, component, event, eventElementTarget, motion, O, style, styleInline, styleBehavior } from '@aelea/core';\nimport { $column, $row } from \"../elements/$elements\";\nimport layoutSheet from \"../style/layoutSheet\";\nconst clamp = (val, min, max) => val > max ? max : val < min ? min : val;\nconst swap = (a, idx, arr) => {\n    const currentIdx = arr.indexOf(a);\n    if (currentIdx === -1)\n        throw new Error('unable to find element within the array');\n    const newArr = remove(currentIdx, arr);\n    newArr.splice(idx, 0, a);\n    return newArr;\n};\nconst $dragItem = $row(style({ cursor: 'grab', width: '100%', position: 'absolute' }));\nexport const $Sortable = (config) => component(([orderChange, orderChangeTether]) => {\n    var _a;\n    const gap = ((_a = config.gap) !== null && _a !== void 0 ? _a : 0);\n    const listLength = config.$list.length;\n    const itemHeight = gap + config.itemHeight;\n    const containerHeight = listLength > 1 ? (itemHeight * listLength) : config.itemHeight;\n    const orderMulticat = multicast(orderChange);\n    const $listChangesWithInitial = startWith(config.$list, map(s => s.list, orderMulticat));\n    const draggingMotion = motion({ stiffness: 150, damping: 20 });\n    return [\n        $column(layoutSheet.flex, style({ flex: 1, userSelect: 'none', position: 'relative', height: containerHeight + 'px' }))(...config.$list.map(($item, i) => {\n            var _a;\n            const [dragY, dragYTether] = behavior();\n            const multicastedDrag = multicast(dragY);\n            const isDraggingStream = skipRepeats(map(x => x.isDragging, multicastedDrag));\n            const iHeight = config.itemHeight + ((_a = config.gap) !== null && _a !== void 0 ? _a : 0);\n            const yMotion = O(filter(({ $draggedItem }) => $draggedItem !== $item), map(({ list }) => list.indexOf($item) * iHeight))(orderMulticat);\n            const yDragPosition = merge(chain(s => {\n                if (s.isDragging) {\n                    return now(s.delta);\n                }\n                else {\n                    return draggingMotion(s.delta, now(s.list.indexOf($item) * iHeight));\n                }\n            }, multicastedDrag), draggingMotion(i * iHeight, yMotion));\n            const applyTransformStyle = combine((ypos, scale) => ({ transform: `translateY(${ypos}px) scale(${scale})` }), yDragPosition, draggingMotion(1, map(id => id ? 1.1 : 1, isDraggingStream)));\n            const applyBoxShadowStyle = map(shadow => ({ boxShadow: `0px ${shadow}px ${shadow * 3}px 0px rgba(0, 0, 0, 0.25` }), draggingMotion(0, map(id => id ? 5 : 0, isDraggingStream)));\n            return $dragItem(dragYTether(event('pointerdown'), \n            // list order continously changing, snapshot is used to get a(snapshot) of the latest list\n            snapshot((list, startEv) => {\n                const drag = merge(eventElementTarget('pointerup', window), eventElementTarget('pointermove', window));\n                const move = skipAfter(ev => ev.type === 'pointerup', drag);\n                return map((pointerEvent) => {\n                    const from = list.indexOf($item);\n                    const delta = pointerEvent.clientY - (startEv.clientY - from * iHeight);\n                    const to = clamp(Math.round(delta / iHeight), 0, list.length - 1);\n                    const isPositionChange = to !== from;\n                    const isDragging = pointerEvent.type === 'pointermove';\n                    return {\n                        delta, isDragging, to,\n                        $draggedItem: isDragging ? $item : null,\n                        list: isPositionChange ? swap($item, to, list) : list\n                    };\n                }, move);\n            }, $listChangesWithInitial), switchLatest, orderChangeTether()), styleInline(merge(applyTransformStyle, applyBoxShadowStyle)), styleBehavior(map(x => ({ zIndex: x ? 1000 : 0 }), isDraggingStream)))($item);\n        })),\n        { orderChange: $listChangesWithInitial }\n    ];\n});\n//# sourceMappingURL=$Sortable.js.map","import { component, Behavior, $Branch, IBranchElement, style, $text } from \"@aelea/core\"\nimport { $card, $column, $row, $Sortable, elevation1, elevation12, elevation2, layoutSheet } from \"@aelea/ui-components\"\nimport { pallete } from \"@aelea/ui-components-theme\"\n\n\nexport default component(([order, orderTether]: Behavior<$Branch<IBranchElement, {}>[], $Branch<IBranchElement, {}>[]>) => {\n\n  const $list = Array(4).fill(null).map((_, i) =>\n    $card(layoutSheet.flex, elevation2, style({ backgroundColor: pallete.background, placeContent: 'center', height: '90px', alignItems: 'center' }))(\n      $text('node: ' + i)\n    )\n  )\n\n  return [\n    $row(style({ placeContent: 'stretch' }))(\n      $Sortable({\n        $list,\n        itemHeight: 90,\n        gap: 10\n      })({ orderChange: orderTether() })\n    )\n  ]\n})","import { $text, Behavior, component, style } from \"@aelea/core\"\nimport { $Button, $column, $Popover, $row, $TextField, layoutSheet } from \"@aelea/ui-components\"\nimport { pallete } from \"@aelea/ui-components-theme\"\nimport { constant, merge, now, scan } from \"@most/core\"\nimport $Counter from \"../count-counters/$Counter\"\n\n\nexport function hexAlpha(color: string, opacity: number): string {\n  // coerce values so ti is between 0 and 1.\n  const _opacity = Math.round(Math.min(Math.max(opacity || 1, 0), 1) * 255)\n  return color + _opacity.toString(16).toUpperCase()\n}\n\nexport const $PopoverExample = component((\n  [pop, popTether]: Behavior<any, any>,\n  [popCard, popCardTether]: Behavior<any, any>,\n  [countUp, countUpTether]: Behavior<1, 1>,\n  [countDown, countDownTether]: Behavior<-1, -1>\n) => {\n\n  const count = merge(countUp, countDown)\n\n  const $popContent = $column(layoutSheet.spacing)(\n    $text('Well, hello $Counter component!'),\n    $row(style({ placeContent: 'center' }))(\n      $Counter({ value: scan((s, n) => s + n, 0, count) })({ decrement: countDownTether(), increment: countUpTether() })\n    )\n  )\n  const $$popContent = constant($popContent, pop)\n  const $$popContentCard = constant($popContent, popCard)\n\n\n  return [\n    $column(layoutSheet.spacing)(\n      $text(`Shows extra details with visible and actionable context in a floating buddle`),\n      $row(layoutSheet.spacing)(\n        $text('This button is a target(context)'),\n        $Popover({ $$popContent })(\n          $Button({ $content: $text('Pop!') })({\n            click: popTether()\n          })\n        )({}),\n      ),\n      $Popover({ $$popContent: $$popContentCard })(\n        $column(style({ backgroundColor: pallete.background, border: `1px solid ${pallete.horizon}`, padding: '30px' }))(\n          $row(layoutSheet.spacing)(\n            $TextField({ label: 'One', value: now('') })({}),\n            $TextField({ label: 'Two', value: now('') })({}),\n            $Button({ $content: $text('Advanced') })({\n              click: popCardTether()\n            })\n          )\n        )\n      )({})\n    )\n  ]\n})","import { map, merge, now } from \"@most/core\";\nimport { $text, component, O, style, stylePseudo } from '@aelea/core';\nimport { $row } from \"../elements/$elements\";\nimport { $VirtualScroll } from \"./$VirtualScroll\";\nimport { pallete } from \"@aelea/ui-components-theme\";\nimport layoutSheet from \"../style/layoutSheet\";\nconst elipsisTextOverflow = style({\n    overflow: 'hidden', textOverflow: 'ellipsis', whiteSpace: 'nowrap'\n});\nconst tableCellStyle = O(style({ padding: '3px 6px' }), layoutSheet.flex);\nconst $headerCell = $row(tableCellStyle, style({ fontSize: '15px', color: pallete.foreground, }));\nconst $bodyCell = $row(tableCellStyle);\nconst $rowContainer = $row(layoutSheet.spacing);\nconst $rowHeaderContainer = $rowContainer(style({ overflowY: 'scroll' }), stylePseudo('::-webkit-scrollbar', { backgroundColor: 'transparent', width: '6px' }));\nexport const $Table = (config) => component(([requestList, requestListTether]) => {\n    const $header = $rowHeaderContainer(...config.columns.map(col => {\n        var _a, _b;\n        return $headerCell(style((_a = col.cellStyle) !== null && _a !== void 0 ? _a : {}))((_b = col.header) !== null && _b !== void 0 ? _b : elipsisTextOverflow($text(String(col.id))));\n    }));\n    const dataSource = map(({ data, pageSize }) => {\n        const $items = data.map(rowData => $rowContainer(...config.columns.map(col => {\n            var _a;\n            return $bodyCell(style((_a = col.cellStyle) !== null && _a !== void 0 ? _a : {}))(col.value(now(rowData)));\n        })));\n        return { $items, pageSize };\n    }, config.dataSource);\n    const $body = $VirtualScroll({\n        ...config,\n        dataSource\n    })({\n        scrollRequest: requestListTether()\n    });\n    return [\n        merge($body, $header),\n        { requestList }\n    ];\n});\n//# sourceMappingURL=$Table.js.map","import { $text, Behavior, component, style } from \"@aelea/core\"\nimport { $card, $Table, ScrollRequest, TablePageResponse } from \"@aelea/ui-components\"\nimport { chain, map } from \"@most/core\"\n\n\nexport const $TableExample = component((\n  [requestList, requestListTether]: Behavior<ScrollRequest, ScrollRequest>\n) => {\n\n  const PAGE_SIZE = 100\n  let i = 0\n\n  const dataSource = map((): TablePageResponse<{ id: string }> => {\n    const id = ++i\n    const data = Array(PAGE_SIZE).fill(null).map(() => {\n      return { id: 'item-#' + id }\n    })\n\n    return { data, pageSize: PAGE_SIZE }\n  }, requestList)\n\n  return [\n    $card(\n      $Table({\n        dataSource,\n        containerOps: style({\n          height: '400px'\n        }),\n        columns: [\n          {\n            id: 'id',\n            value: chain(x => $text(x.id)),\n          },\n          {\n            id: 'id',\n            value: chain(x => $text(x.id)),\n          },\n          {\n            id: 'id',\n            value: chain(x => $text(x.id)),\n          }\n        ],\n      })({\n        requestList: requestListTether()\n      })\n    )\n  ]\n})\n","\nimport { $node, $text, component, style } from '@aelea/core'\nimport { $card, $column, $row, elevation2, layoutSheet } from '@aelea/ui-components'\nimport { Pallete, Theme } from '@aelea/ui-components-theme'\nimport { dark, light } from '../../../common/theme'\n\n\n\nfunction getPallete(theme: Pallete, name: string, colors: [name: string, color: string][]) {\n  return $column(layoutSheet.spacingTiny)(\n    $text(name),\n\n    ...colors.map(([name, color]) =>\n      $row(layoutSheet.spacing, style({ height: '30px', alignItems: 'center' }))(\n        $node(style({ width: '30px', height: '30px', backgroundColor: color }))(),\n        $text(style({ flex: 1, color: theme.foreground, fontSize: '12px' }))(color),\n        $text(style({ flex: 1 }))(name),\n      )\n    )\n  )\n}\n\nexport const $Pallete = (themeDef: Theme) => component(() => {\n  const pallete = Object.entries(themeDef.pallete)\n  const theme = themeDef.pallete\n\n  return [\n    $card(layoutSheet.spacingBig, layoutSheet.flex, elevation2, style({ color: theme.message, padding: '15px', backgroundColor: theme.background }))(\n      $text(style({ fontSize: '120%' }))(themeDef.name),\n      getPallete(theme, 'Action', pallete.slice(0, 1)),\n      getPallete(theme, 'Story', pallete.slice(1, 2)),\n      getPallete(theme, 'Landscape', pallete.slice(2, 6)),\n      getPallete(theme, 'Attention', pallete.slice(6, 9)),\n    )\n  ]\n})\n\nexport const $Theme = component((\n) => {\n  \n\n  return [\n    $row(layoutSheet.spacingBig)(\n      ...[dark, light].map(themeDef => {\n        return $Pallete(themeDef)({})\n      })\n    )\n  ]\n})\n\n\n","import { $text, Behavior, component } from '@aelea/core'\nimport { $Button, $Field, $row, layoutSheet } from \"@aelea/ui-components\"\nimport { constant, map, merge, now, snapshot, startWith } from \"@most/core\"\n\nlet iid = 0\n\nexport interface Todo {\n  id: number,\n  text: string,\n  completed: boolean,\n}\n\nexport function createTodo(text: string): Todo {\n  return {\n    id: iid++,\n    text,\n    completed: false\n  }\n}\n\n\nexport default component((\n  [create, addTether]: Behavior<PointerEvent, PointerEvent>,\n  [inputChange, inputChangeTether]: Behavior<string, string>\n) => {\n\n  const inputState = startWith('', inputChange)\n  const value = constant('', merge(create, now(null)))\n  const valueChahnges = merge(inputChange, value)\n  const disabled = map(x => !x, valueChahnges)\n\n  const add = snapshot(\n    (text) => ({ id: iid++, text, completed: false }),\n    inputState, create\n  )\n\n  return [\n    $row(layoutSheet.flex)(\n      $Field({ value })({\n        change: inputChangeTether()\n      }),\n      $Button({ $content: $text('add'), disabled })({\n        click: addTether()\n      })\n    ),\n\n    { add }\n  ]\n\n})","import { map, mergeArray } from \"@most/core\";\nimport { $element, $node, attr, component, event, O, style, styleBehavior, attrBehavior } from '@aelea/core';\nimport { dismissOp, interactionOp } from \"./form\";\nimport { pallete } from \"@aelea/ui-components-theme\";\nimport layoutSheet from \"../../style/layoutSheet\";\nexport const $Checkbox = ({ value }) => component(([focusStyle, interactionTether], [dismissstyle, dismissTether], [check, checkTether]) => {\n    const $overlay = $node(layoutSheet.stretch, style({ flex: 1, margin: '3px', }), styleBehavior(map(ch => ch ? { backgroundColor: pallete.message } : null, value)));\n    const $checkInput = $element('input')(style({ opacity: 0, width: 'inherit', height: 'inherit', margin: '0', cursor: 'pointer', }), layoutSheet.stretch, checkTether(event('change'), map(evt => evt.target.checked)), attr({ type: 'checkbox' }), attrBehavior(map(checked => ({ checked: checked ? true : null }), value)), interactionTether(interactionOp), dismissTether(dismissOp));\n    const containerStyle = O(styleBehavior(map(active => active ? { borderColor: pallete.primary } : null, mergeArray([focusStyle, dismissstyle]))), style({ position: 'relative', width: '18px', height: '18px', border: `2px solid ${pallete.message}` }));\n    return [\n        $node(containerStyle)($overlay(), $checkInput()),\n        { check }\n    ];\n});\n//# sourceMappingURL=$Checkbox.js.map","import { Behavior, component, O, style } from '@aelea/core'\nimport { $Checkbox, $Field, $row, layoutSheet } from \"@aelea/ui-components\"\nimport { now } from \"@most/core\"\nimport { Stream } from \"@most/types\"\nimport { $TrashBtn } from '../../../elements/$common'\nimport { Todo } from \"./$CreateTodo\"\n\n\nconst rowStyle = O(\n  layoutSheet.spacing,\n  style({ alignItems: 'center' })\n)\n\ninterface TodoItem {\n  todo: Todo,\n  completed: Stream<boolean>\n}\n\nexport default ({ todo, completed }: TodoItem) => component((\n  [remove, removeTether]: Behavior<MouseEvent, MouseEvent>,\n  [complete, completeTether]: Behavior<boolean, boolean>,\n  [text, textTether]: Behavior<string, string>\n) => {\n\n  return [\n    $row(rowStyle)(\n      $Checkbox({ value: completed })({\n        check: completeTether()\n      }),\n      $Field({ value: now(todo.text) })({\n        change: textTether()\n      }),\n      $TrashBtn({\n        click: removeTether()\n      })\n    ),\n\n    { text, remove, complete }\n  ]\n})\n\n\n","\nimport { $element, $text, behavior, Behavior, component, style } from '@aelea/core'\nimport { $Checkbox, $column, $row, layoutSheet, state } from '@aelea/ui-components'\nimport { pallete } from '@aelea/ui-components-theme'\nimport { chain, combine, empty, mergeArray, now, switchLatest, take, until } from '@most/core'\nimport $CreateTodo, { Todo } from './$CreateTodo'\nimport $TodoItem from './$TodoItem'\n\n\n\nexport const $label = $element('label')(\n  layoutSheet.row,\n  style({ cursor: 'pointer', alignItems: 'center', color: pallete.foreground })\n)\n\n\nexport default (todos: Todo[]) => component((\n  [newTodo, createTodoTether]: Behavior<Todo, Todo>,\n  [showCompletedList, showCompletedListTether]: Behavior<boolean, boolean>,\n) => {\n\n  const INITIAL_SHOW_COMPLETED = false\n  const showCompleteState = state.replayLatest(showCompletedList, INITIAL_SHOW_COMPLETED)\n\n  return [\n    $column(layoutSheet.spacingBig)(\n\n      $row(layoutSheet.spacingBig)(\n        $label(layoutSheet.spacing)(\n          $Checkbox({ value: showCompleteState })({\n            check: showCompletedListTether()\n          }),\n          $text('Show completped ')\n        ),\n        $CreateTodo({\n          add: createTodoTether()\n        }),\n      ),\n\n      $column(layoutSheet.spacingSmall)(\n        chain((todo: Todo) => {\n\n          const [remove, removeTether] = behavior<MouseEvent, MouseEvent>()\n          const [completed, completedTether] = behavior<boolean, boolean>()\n\n          const todoCompleted = state.replayLatest(completed, todo.completed)\n\n          return until(remove)(\n            switchLatest(\n              combine(\n                (onlyCompleted, isCompleted) => onlyCompleted === isCompleted\n                  ? $TodoItem({ todo, completed: take(1, todoCompleted) })({\n                    remove: removeTether(),\n                    complete: completedTether()\n                  })\n                  : empty(),\n                showCompleteState,\n                todoCompleted\n              )\n            )\n          )\n\n        }, mergeArray([newTodo, ...todos.map(now)]))\n      )\n\n    )\n  ]\n})\n\n\n","\nimport { $text, Behavior, component, style } from '@aelea/core'\nimport { $card, $column, $row, $seperator, $TextField, $VirtualScroll, layoutSheet, ScrollRequest, ScrollResponse } from '@aelea/ui-components'\nimport { pallete } from '@aelea/ui-components-theme'\nimport { at, debounce, empty, join, map, merge, now, snapshot, startWith, switchLatest } from '@most/core'\nimport { Stream } from '@most/types'\n\n\nfunction filterArrayByText(array: string[], filter: string) {\n  const filterLowercase = filter.toLocaleLowerCase()\n  return array.filter(id =>\n    id.indexOf(filterLowercase) > -1\n  )\n}\n\nconst $label = (label: string, value: Stream<string> | string) => $row(layoutSheet.spacingSmall)(\n  $text(style({ color: pallete.foreground }))(label),\n  $text(value)\n)\n\nexport const $VirtualScrollExample = component((\n  [scrollRequest, scrollRequestTether]: Behavior<ScrollRequest, ScrollRequest>,\n  [delayResponse, delayResponseTether]: Behavior<string, number>,\n  [filter, filterTether]: Behavior<string, string>,\n) => {\n\n  const PAGE_SIZE = 100\n  const TOTAL_ITEMS = 1000\n\n  const formatNumber = Intl.NumberFormat().format\n  const initialDelayResponse = now(1600)\n  const delayWithInitial = merge(initialDelayResponse, delayResponse)\n\n  let i = 0\n  const $item = $text(style({ padding: '3px 10px' }))\n\n  const stubbedData = Array(TOTAL_ITEMS).fill(null).map(() =>\n    `item: ${Math.random().toString(36).substring(7)} ${formatNumber(++i)}`\n  )\n\n  \n  const dataSourceFilter = (filter: string) => join(\n    snapshot((delay, requestNumber): Stream<ScrollResponse> => {\n      const pageStart = requestNumber * PAGE_SIZE\n      const pageEnd = pageStart + PAGE_SIZE\n      const filteredItems = filterArrayByText(stubbedData, filter)\n      const $items = filteredItems.slice(pageStart, pageEnd).map(id => {\n        return $item(id)\n      })\n\n      return at(delay, { $items, pageSize: PAGE_SIZE })\n    }, delayWithInitial, scrollRequest)\n  )\n\n\n\n  const filterText = startWith('', filter)\n  const debouncedFilterText = debounce(300, filterText)\n\n  return [\n    $column(layoutSheet.spacingBig)(\n      $text(`High performance dynamically loaded list based on Intersection Observer Web API. this example shows a very common pagination and REST like fetching asynchnously more pages`),\n      $row(layoutSheet.spacingBig)(\n\n        $label('Page: ', map(l => String(l), scrollRequest)),\n        $label(`Page Size:`, String(PAGE_SIZE)),\n        $label(`Total Items:`, String(TOTAL_ITEMS)),\n        \n      ),\n\n      $row(layoutSheet.spacingBig)(\n        $TextField({\n          label: 'Filter',\n          value: empty(),\n          hint: 'Remove any items that does not match filter and debounce changes by 300ms to prevert spamming',\n          containerOp: layoutSheet.flex\n        })({\n          change: filterTether()\n        }),\n        $TextField({\n          label: 'Delay Response(ms)',\n          value: initialDelayResponse,\n          hint: 'Emulate the duration of a datasource response, show a stubbed $node instead',\n          containerOp: layoutSheet.flex\n        })({\n          change: delayResponseTether(\n            map(Number)\n          )\n        }),\n      ),\n\n      $seperator,\n\n      $card(style({ padding: 0 }))(\n        switchLatest(\n          map(f =>\n            $VirtualScroll({\n              dataSource: dataSourceFilter(f),\n              containerOps: style({ padding: '8px', maxHeight: '400px' })\n            })({\n              scrollRequest: scrollRequestTether()\n            })\n          , debouncedFilterText)\n        )\n      )\n\n    )\n  ]\n})\n\n","import { $node, $text, Behavior, component, style } from '@aelea/core'\nimport { match, Route } from '@aelea/router'\nimport { $column, $row, layoutSheet } from '@aelea/ui-components'\nimport { pallete } from '@aelea/ui-components-theme'\nimport { awaitPromises, chain, map, now } from '@most/core'\nimport $Example from '../../components/$Example'\nimport { $Link } from '../../components/$Link'\nimport { fadeIn } from '../../components/transitions/enter'\nimport $Calculator from './calculator/$Calculator'\nimport $CountCounters from './count-counters/$CountCounters'\nimport $DragList from './dragList/$DragList'\nimport { $PopoverExample } from './overlay/popoverExample'\nimport { $TableExample } from './table/$TableExample'\n\nimport { $Theme } from './theme/$Theme'\nimport { createTodo } from './todo-app/$CreateTodo'\nimport $TodoApp from './todo-app/$TodoApp'\nimport { $VirtualScrollExample } from './virtual-scroll/$VirtualScrollExample'\n\n\n\n\ninterface Website {\n  router: Route\n}\n\nexport default ({ router }: Website) => component((\n  [routeChanges, linkClickTether]: Behavior<string, string>\n) => {\n\n  const dragAngDropRoute = router.create({ fragment: 'drag-and-sort', title: 'Drag N Drop' })\n  const todoAppRoute = router.create({ fragment: 'todo-app', title: 'Todo App' })\n  const countCountersRoute = router.create({ fragment: 'count-counters', title: 'Count Counters' })\n  const virtualScrollRoute = router.create({ fragment: 'virtual-scroll', title: 'Virtual Scroll' })\n  const calculatorRoute = router.create({ fragment: 'calculator', title: 'Calculator' })\n  const tableRoute = router.create({ fragment: 'table', title: 'Table' })\n  // const autocompleteRoute = router.create({ fragment: 'autocomplete', title: 'Autocomplete' })\n  const popoverRoute = router.create({ fragment: 'popover', title: 'Popover' })\n  const themeRoute = router.create({ fragment: 'theme', title: 'Theme' })\n  const ethSendRoute = router.create({ fragment: 'ethereum-metamask', title: 'Send Ethereum' })\n\n\n\n\n  return [\n\n    $row(layoutSheet.spacingBig, layoutSheet.flex, style({ placeContent: 'center' }))(\n\n      fadeIn(\n        $column(layoutSheet.spacing, style({ top: '10vh', placeContent: 'center flex-start' }))(\n\n          $column(layoutSheet.spacingBig, style({ whiteSpace: 'nowrap' }))(\n            $column(layoutSheet.spacingTiny)(\n              $text(style({ color: pallete.foreground, fontSize: '75%' }))('Demos'),\n              $Link({ $content: $text('Theme'), url: '/p/examples/theme', route: themeRoute })({\n                click: linkClickTether()\n              }),\n              $Link({ $content: $text('Metamask Gate'), url: '/p/examples/ethereum-metamask', route: ethSendRoute })({\n                click: linkClickTether()\n              }),\n              $Link({ $content: $text('Drag And Sort'), url: '/p/examples/drag-and-sort', route: dragAngDropRoute })({\n                click: linkClickTether()\n              }),\n              $Link({ $content: $text('Count Counters'), url: '/p/examples/count-counters', route: countCountersRoute })({\n                click: linkClickTether()\n              }),\n              $Link({ $content: $text('Todo App'), url: '/p/examples/todo-app', route: todoAppRoute })({\n                click: linkClickTether()\n              }),\n              $Link({ $content: $text('Calculator'), url: '/p/examples/calculator', route: calculatorRoute })({\n                click: linkClickTether()\n              }),\n            ),\n\n            $column(layoutSheet.spacingTiny)(\n              $text(style({ color: pallete.foreground, fontSize: '75%' }))('UI Components'),\n              // $Link({ $content: $text('Autocomplete'), url: '/p/examples/autocomplete', route: autocompleteRoute })({\n              //   click: sampleLinkClick()\n              // }),\n              $Link({ $content: $text('Virtual Scroll'), url: '/p/examples/virtual-scroll', route: virtualScrollRoute })({\n                click: linkClickTether()\n              }),\n              $Link({ $content: $text('Popover'), url: '/p/examples/popover', route: popoverRoute })({\n                click: linkClickTether()\n              }),\n              $Link({ $content: $text('Table'), url: '/p/examples/table', route: tableRoute })({\n                click: linkClickTether()\n              }),\n            ),\n          )\n\n        )\n      ),\n\n      $node(),\n\n      $column(style({ flex: 2 }))(\n\n        match(themeRoute)(\n          $Example({ file: 'src/components/$Table.ts' })(\n            $column(\n              $Theme({})\n            )\n          )({})\n        ),\n\n        match(ethSendRoute)(\n          $Example({ file: 'src/components/$Table.ts' })(\n            $column(\n              chain(mod => mod.$EtherSwapExample({}), awaitPromises(map(x => import('./ethSwap/$MetamaskSend'), now(null))))\n            )\n          )({})\n        ),\n        \n\n        match(dragAngDropRoute)(\n          $Example({ file: 'src/components/$DragSort.ts' })(\n            $DragList({})\n          )({})\n        ),\n\n        // $container(\n        //   match(autocompleteRoute)(\n        //     $Example({ file: 'src/components/$DragSort.ts' })(\n        //       $AutocompleteExample({})\n        //     )({})\n        //   )\n        // ),\n\n        match(popoverRoute)(\n          $Example({ file: 'src/components/$DragSort.ts' })(\n            $PopoverExample({})\n          )({})\n        ),\n\n        match(tableRoute)(\n          $Example({ file: 'src/components/$Table.ts' })(\n            $column(\n              $TableExample({})\n            )\n          )({})\n        ),\n\n        match(calculatorRoute)(\n          $Example({ file: 'src/components/$Calculator.ts' })(\n            $Calculator({})\n          )({})\n        ),\n\n        match(virtualScrollRoute)(\n          $Example({ file: 'src/components/$QuantumList.ts' })(\n            $VirtualScrollExample({})\n          )({})\n        ),\n\n        match(countCountersRoute)(\n          $Example({ file: 'src/components/$CountCounters.ts' })(\n            $CountCounters({})\n          )({})\n        ),\n\n        match(todoAppRoute)(\n          $Example({ file: 'src/components/todo-app/$TodoApp.ts' })(\n            $TodoApp(\n              Array(1e2).fill(null).map((x, i) => createTodo('t-' + (i + 1)))\n            )({})\n          )({})\n        ),\n\n      )\n\n    ),\n\n\n    {\n      routeChanges\n    }\n\n  ]\n})\n\n\n","import { component, fromCallback, O, style, $wrapNativeElement, $node } from '@aelea/core';\nimport { at, awaitPromises, combine, continueWith, delay, empty, filter, fromPromise, join, map, merge, multicast, now, recoverWith, skipRepeatsWith, startWith, switchLatest, take } from '@most/core';\nimport layoutSheet from '../style/layoutSheet';\nimport * as observer from '../utils/elementObservers';\nconst fetchJson = async (input, init) => (await fetch(input, init)).json();\nconst fetchMeta = (dependency, version) => fetchJson(`https://data.jsdelivr.com/v1/package/npm/${dependency}@${version}/flat`);\nconst packageQueryCache = new Map();\nconst packageLocalCache = new Map();\nasync function cacheGet(key, queryStore) {\n    const locallyStoredItem = packageLocalCache.get(key);\n    if (locallyStoredItem)\n        return locallyStoredItem;\n    const storedItem = localStorage.getItem(key);\n    if (storedItem) {\n        const parsedItem = JSON.parse(storedItem);\n        packageLocalCache.set(key, parsedItem);\n        return parsedItem;\n    }\n    const pendingQuery = packageQueryCache.get(key);\n    if (pendingQuery)\n        return pendingQuery;\n    const query = queryStore();\n    packageQueryCache.set(key, query);\n    const resp = await query;\n    packageLocalCache.set(key, resp);\n    localStorage.setItem(key, JSON.stringify(resp));\n    return resp;\n}\nexport async function fetchFileListContent(name, version = 'latest') {\n    const meta = (await fetchMeta(name, version)).files;\n    let dtsFiles = meta.filter(metaFile => /\\.d\\.ts$/.test(metaFile.name));\n    if (dtsFiles.length === 0) {\n        // if no .d.ts files found, fallback to .ts files\n        dtsFiles = meta.filter(metaFile => /\\.ts$/.test(metaFile.name));\n    }\n    if (dtsFiles.length === 0) {\n        throw new Error('No inline typings found.');\n    }\n    const dtsQueries = dtsFiles.map(async (file) => {\n        const content = await fetch(`https://cdn.jsdelivr.net/npm/${name}@${version}${file.name}`).then(r => r.text());\n        return { ...file, content: content.replace(/(} from '@)/g, `} from '%40`) };\n    });\n    return Promise.all(dtsQueries);\n}\nexport async function fetchAndCacheDependancyTree(name, version = 'latest') {\n    const pkgPath = `https://cdn.jsdelivr.net/npm/${name}@${version}/package.json`;\n    const pkg = await cacheGet(pkgPath, async () => {\n        var _a, _b;\n        const pkgJson = await fetchJson(pkgPath);\n        const dependencies = (_a = pkgJson === null || pkgJson === void 0 ? void 0 : pkgJson.dependencies) !== null && _a !== void 0 ? _a : {};\n        const files = await fetchFileListContent(name, version);\n        const typings = (_b = pkgJson.typings) !== null && _b !== void 0 ? _b : pkgJson.types;\n        return { files, dependencies, name, version, typings };\n    });\n    const depsQueries = Object.entries(pkg.dependencies).map(([pkgName, version]) => fetchAndCacheDependancyTree(pkgName, version.replace(/[\\^*]/, '')));\n    const dependencies = await Promise.all(depsQueries);\n    return { ...pkg, dependencies };\n}\nexport function defineModel(pkg, monacoGlobal) {\n    const pkgModelUri = monacoGlobal.Uri.parse(`file://root/node_modules/${pkg.name}/package.json`);\n    const model = monacoGlobal.editor.getModel(pkgModelUri);\n    if (!model) {\n        const dependencies = Object.entries(pkg.dependencies).reduce(((acc, [key, val]) => ({ ...acc, [key.replace(/^@/, `%40`)]: val })), {}); // https://github.com/microsoft/monaco-editor/issues/1306\n        const pakgDefJsonStr = JSON.stringify({\n            name: pkg.name,\n            version: pkg.version,\n            typings: pkg.typings,\n            dependencies\n        });\n        monacoGlobal.editor.createModel(pakgDefJsonStr, \"typescript\", pkgModelUri);\n        pkg.files.forEach(file => {\n            monacoGlobal.editor.createModel(file.content, \"typescript\", monacoGlobal.Uri.parse(`file://root/node_modules/${pkg.name}${file.name}`));\n        });\n    }\n}\nexport function definePackageTree(pkg, monacoGlobal) {\n    defineModel(pkg, monacoGlobal);\n    pkg.dependencies.forEach(pkg => {\n        definePackageTree(pkg, monacoGlobal);\n    });\n}\nconst whitespaceRegexp = /[\\n\\r\\s\\t]+/g;\nconst elementBecameVisibleEvent = O(observer.intersection(), filter(intersectionEvent => intersectionEvent[0].intersectionRatio > 0), take(1));\n// Before loading vs/editor/editor.main, define a global MonacoEnvironment that overwrites\n// the default worker url location (used when creating WebWorkers). The problem here is that\n// HTML5 does not allow cross-domain web workers, so we need to proxy the instantiation of\n// a web worker through a same-domain script\n// @ts-ignore\nwindow.MonacoEnvironment = {\n    getWorkerUrl: function () {\n        return `data:text/javascriptcharset=utf-8,${encodeURIComponent(`\n        self.MonacoEnvironment = {\n          baseUrl: 'https://cdn.jsdelivr.net/npm/monaco-editor@0.23.0/min/'\n        }\n        importScripts('https://cdn.jsdelivr.net/npm/monaco-editor@0.23.0/min/vs/base/worker/workerMain.js')`)}`;\n    }\n};\nexport async function asyncloadMonacoEditor() {\n    // @ts-ignore\n    const monacoQuery = import(/* webpackIgnore: true */ 'https://cdn.skypack.dev/pin/monaco-editor@v0.23.0-nVyIshjiDqruq90zejl0/mode=imports,min/optimized/monaco-editor.js');\n    const precacheAeleaDependanciesQuery = fetchAndCacheDependancyTree('@aelea/core', '0.11.0');\n    // @ts-ignore\n    const codiConQuery = new FontFace('codicon', `url('https://cdn.jsdelivr.net/npm/monaco-editor@0.23.0/min/vs/base/browser/ui/codicons/codicon/codicon.ttf')`);\n    const monacoGlobal = await monacoQuery;\n    const codiConFont = await codiConQuery;\n    const pkg = await precacheAeleaDependanciesQuery;\n    definePackageTree(pkg, monacoGlobal);\n    // @ts-ignore\n    document.fonts.add(codiConFont);\n    return { monacoGlobal, pkg };\n}\nlet monacoQuery = null;\nexport async function loadMonacoTSEditor() {\n    if (monacoQuery)\n        return monacoQuery;\n    monacoQuery = asyncloadMonacoEditor();\n    return monacoQuery;\n}\nlet monacoEntryFileId = 0;\nexport const $MonacoEditor = ({ code, config, override, containerStyle = { flex: 1 } }) => component(([change, changeTether]) => {\n    const editorload = fromPromise(loadMonacoTSEditor());\n    const $editor = map(({ monacoGlobal }) => {\n        const editorElement = document.createElement('div');\n        monacoGlobal.languages.typescript.typescriptDefaults.setCompilerOptions({\n            ...monacoGlobal.languages.typescript.typescriptDefaults.getCompilerOptions(),\n            module: monacoGlobal.languages.typescript.ModuleKind.ESNext,\n            moduleResolution: monacoGlobal.languages.typescript.ModuleResolutionKind.NodeJs\n        });\n        const model = monacoGlobal.editor.createModel(code.replace(/(} from '@)/g, `} from '%40`), \"typescript\", monacoGlobal.Uri.parse(`file://root/test${++monacoEntryFileId}.ts`));\n        const ops = {\n            theme: 'vs-dark',\n            \"semanticHighlighting.enabled\": true,\n            minimap: { enabled: false },\n            overviewRulerLanes: 0,\n            lineNumbers: 'off',\n            glyphMargin: false,\n            folding: false,\n            lineDecorationsWidth: 15,\n            lineNumbersMinChars: 0,\n            hover: { delay: 0 },\n            padding: { top: 16, bottom: 16 },\n            renderLineHighlight: 'none',\n            renderIndentGuides: false,\n            scrollBeyondLastLine: false,\n            automaticLayout: false,\n            model,\n            ...config,\n        };\n        const instance = monacoGlobal.editor.create(editorElement, ops, override);\n        const updateHeight = () => {\n            if (ops.automaticLayout) {\n                const contentHeight = instance.getContentHeight();\n                editorElement.style.minHeight = `${contentHeight}px`;\n                instance.layout({ width: editorElement.clientWidth, height: contentHeight });\n                instance.layout();\n            }\n            else\n                instance.layout();\n        };\n        instance.onDidContentSizeChange(updateHeight);\n        let attempDuration = 50;\n        const getWorkerStream = O(continueWith(() => {\n            return fromPromise(monacoGlobal.languages.typescript.getTypeScriptWorker());\n        }), recoverWith(err => {\n            console.error(err);\n            attempDuration += 100;\n            return join(at(attempDuration, getWorkerStream));\n        }))(empty());\n        const $editor = $wrapNativeElement(editorElement)(O(layoutSheet.column, style({ ...containerStyle }), changeTether(\n        // ensure we load editor only when it's visible on the screen\n        elementBecameVisibleEvent, map(async (elEvents) => {\n            const node = elEvents[0].target;\n            const modelChangeWithDelay = delay(10, fromCallback(model.onDidChangeContent, model)); // delay is required because change emits an event before diagnostics and other stuff are finished\n            const editorChanges = map(() => model.getValue(), modelChangeWithDelay);\n            const changesWithInitial = merge(now(model.getValue()), editorChanges);\n            const ignoreWhitespaceChanges = skipRepeatsWith((prev, next) => prev.replace(whitespaceRegexp, '') === next.replace(whitespaceRegexp, ''), changesWithInitial);\n            const tsModelChanges = awaitPromises(combine(async (modelChange, getWorker) => {\n                const worker = await getWorker(model.uri);\n                const semanticDiagnosticsQuery = worker.getSemanticDiagnostics(model.uri.toString());\n                const syntacticDiagnosticsQuery = worker.getSyntacticDiagnostics(model.uri.toString());\n                const semanticDiagnostics = await semanticDiagnosticsQuery;\n                const syntacticDiagnostics = await syntacticDiagnosticsQuery;\n                return { node, instance, monacoGlobal, worker, model, modelChange, semanticDiagnostics, syntacticDiagnostics };\n            }, ignoreWhitespaceChanges, getWorkerStream));\n            return tsModelChanges;\n        }), awaitPromises, join, multicast)))();\n        const disposeMonacoStub = { run: () => instance };\n        return merge($editor, disposeMonacoStub);\n    }, editorload);\n    return [\n        switchLatest(startWith($node(style(containerStyle))(), $editor)),\n        { change }\n    ];\n});\n//# sourceMappingURL=$MonacoEditor.js.map","import { awaitPromises, empty, map, never, switchLatest, filter, now, debounce, startWith } from '@most/core'\nimport { $custom, $Node, $text, Behavior, component, motion, O, style, styleInline } from '@aelea/core'\n\nimport { $column, $MonacoEditor, $row, layoutSheet, ModelChangeBehavior } from '@aelea/ui-components'\nimport { pallete, theme } from '@aelea/ui-components-theme'\n\n\ninterface IMonaco {\n  code: string\n  readOnly?: boolean\n}\n\n\nexport default ({ code = '', readOnly = true }: IMonaco) => component((\n  [change, changeTether]: Behavior<ModelChangeBehavior, ModelChangeBehavior>\n) => {\n\n  const $loader = $row(style({ width: '2px', backgroundColor: 'rgb(43 52 55)' }))(\n    $row(\n      styleInline(\n        map(({ semanticDiagnostics, syntacticDiagnostics }) => {\n          return { backgroundColor: semanticDiagnostics.length || syntacticDiagnostics.length ? pallete.negative : pallete.foreground }\n        }, change)\n      ),\n      styleInline(\n        map(\n          s => ({ height: s + '%' }),\n          switchLatest(\n            map(xxx => {\n              return motion({ stiffness: 160, damping: 36, precision: .1 }, 0, now(100))\n            }, change)\n          )\n        )\n      ),\n      layoutSheet.flex,\n      style({ backgroundColor: pallete.foreground })\n    )()\n  )\n\n  const initalCodeBlockHeight = 24 + 20 + (code.split('\\n').length * 18)\n\n\n  return [\n    $column(layoutSheet.flex)(\n      $MonacoEditor({ code, config: { readOnly, automaticLayout: true, theme: theme.name === 'light' ? 'vs-light': 'vs-dark' }, containerStyle: { height: initalCodeBlockHeight + 'px' } })({\n        change: changeTether()\n      }),\n      $row(style({ backgroundColor: pallete.background, minHeight: '30px' }))(\n        $loader,\n\n        $custom('render-here')(style({ padding: '10px 15px' }))(\n          switchLatest(\n            O(\n              debounce(500),\n              map(async ({ model, worker, semanticDiagnostics, syntacticDiagnostics }: ModelChangeBehavior): Promise<$Node> => {\n\n                if (semanticDiagnostics.length || syntacticDiagnostics.length) {\n                  return never()\n                }\n\n                const emittedFiles = await worker.getEmitOutput(model.uri.toString())\n                const file = emittedFiles.outputFiles[0].text\n                const refImports = file.replace(/(} from '%40)/g, `} from 'https://esm.run/@`)\n\n                const esModuleBlobUrl = URL.createObjectURL(new Blob([refImports], { type: 'text/javascript' }))\n                const esModule = await import(/* webpackIgnore: true */esModuleBlobUrl)\n\n                const value: $Node = esModule.default ?? empty()\n\n                return value\n              }),\n              awaitPromises,\n              filter(node => node !== never()),\n              startWith($text(style({ color: pallete.foreground, fontSize: '75%' }))('Loading Typescript Service...'))\n            )(change)\n          )\n        )\n      )\n    ),\n\n    { change }\n  ]\n})\n\n\n\n","import { $node, $text, attr, Behavior, component, style } from '@aelea/core'\nimport { Route } from '@aelea/router'\nimport { $column, layoutSheet } from '@aelea/ui-components'\n\nimport $Example from '../../components/$Example'\nimport $TSPeep from '../../components/typescript-notebook/$TSPeep'\nimport { $alert, $anchor } from '../../elements/$common'\n\n\n\ninterface Guide {\n  parentRoute: Route\n}\n\nexport default ({ parentRoute }: Guide) => component((\n  // []: Behavior<NodeChild, any>,\n  [routeChanges, linkClickTether]: Behavior<string, string>\n) => {\n\n  return [\n\n    $column(layoutSheet.spacingBig, layoutSheet.flex, style({ alignItems: 'center' }))(\n\n      $Example({ file: 'src/components/$QuantumList.ts' })(\n        $alert(\n          $text(`WIP: still in progress, external imports name have been encoded because of Monaco editor issue: https://github.com/microsoft/monaco-editor/issues/1306. `)\n        ),\n\n        $node(\n          $text(`aelea uses a reactive toolkit called `),\n          $anchor(attr({ href: 'https://mostcore.readthedocs.io/en/latest/index.html' }))(\n            $text('@most/core')\n          ),\n          $text(` Some basic understanding of functional programming and typescript is required, if you use Visual Studio Code IDE these code blocks will look familiar`)\n        ),\n\n        $text(`The ultimate way to learn is to get your hands a little dirty, any changes in the code below will reflect it visually right below the code block`),\n\n        $TSPeep({\n          readOnly: false,\n          code:\n`import { $text } from '@aelea/core'\n\nexport default $text('Yellow World')`\n        })({}),\n\n        $text(`Nothing fancy yet, the \"default export\" renders a message and there is this \"$text\" function, \"$\" prefix is just a semantic for anything that will eventually emits DOM elements, it makes the code more readable to distinguish between different stream types, we'll see its usefulness later on`),\n\n        $TSPeep({\n          readOnly: false,\n          code:\n`import { $text, $node, style } from '@aelea/core'\n\nconst colorStyle = style({ color: 'yellow' })\nconst containerStyle = style({ padding: '10px', display: 'block', border: '1px dashed yellow', borderRadius: '50px' })\n\nconst $container = $node(containerStyle, colorStyle)\n\nexport default $container(style({alignSelf: 'center'}))(\n    $container(\n        $text('Yellow World')\n    )\n)`\n        })({}),\n\n        $text(`in this guide we will be creating different types of Counters in different levels of complexity`),\n\n\n        $TSPeep({\n          readOnly: false,\n          code:\n`import { $text, $node } from '@aelea/core'\nimport { constant, map, periodic, scan } from '@most/core'\n\nconst eventEverySecond = periodic(1000)       // stream of undefined every 1000 milliseconds\nconst mapTo1 = constant(1, eventEverySecond)  // map that undefined into 1\n\nconst accumulate = scan((acc, one) => acc + one, 0, mapTo1)\nconst toString = map(String, accumulate)\n\n\nexport default $node(\n  $text(toString)\n)`\n        })({}),\n\n        $TSPeep({\n          readOnly: false,\n          code:\n`import { constant, map, merge, scan } from '@most/core'\nimport { $custom, $element, $text, Behavior, component, style, event, INode } from '@aelea/core'\n\n// composable style\nconst displayFlex = style({ display: 'flex' })\nconst spacingStyle = style({ gap: '16px' })\n\n// composable elements\nconst $row = $custom('row')(displayFlex)\nconst $column = $custom('column')(displayFlex, style({ flexDirection: 'column' }))\n\n// Component that outputs state(optionally), this is currently not used anywhere, see next example to see it being consumed\nexport default component((\n    [increment, incrementTether]: Behavior<INode, 1>,\n    [decrement, decrementTether]: Behavior<INode, -1>\n  ) => {\n\n    return [ // Component has to return [$Node, Behavior(optionally)] in the next example we will use these outputted behaviors\n\n      $row(spacingStyle)(\n        $column(\n          $element('button')(incrementTether(event('click'), constant(1)))(\n            $text('+')\n          ),\n          $element('button')(decrementTether(event('click'), constant(-1)))(\n            $text('-')\n          )\n        ),\n        $text(style({ fontSize: '64px' }))(\n          map(String, scan((current: number, x: number) => current + x, 0, merge(increment, decrement)))\n        )\n      ),\n\n      { increment, decrement }\n    ]\n  }\n)({})`\n        })({})\n\n      )({}),\n\n\n    )\n\n  ]\n})\n\n","import { $element, $text, attr, Behavior, component, style, stylePseudo } from '@aelea/core'\nimport { $icon, $row, layoutSheet } from '@aelea/ui-components'\nimport { $Link } from '../components/$Link'\nimport { $github } from '../elements/$icons'\nimport { Route } from '@aelea/router'\nimport { pallete } from '@aelea/ui-components-theme'\n\n\n\n\ninterface MainMenu {\n  parentRoute: Route\n}\n\nexport default ({ parentRoute }: MainMenu) => component((\n  [routeChange, routeChangeTether]: Behavior<string, string>\n) => {\n\n  const guideRoute = parentRoute.create({ fragment: 'guide', title: 'Guide' })\n  const examplesRoute = parentRoute.create({ fragment: 'examples', title: 'Examples' })\n\n  const $seperator = $text(style({ color: pallete.foreground, pointerEvents: 'none' }))('|')\n  \n  return [\n    $row(layoutSheet.spacingSmall, style({ alignItems: 'center', placeContent: 'center' }))(\n\n      // $Link({ $content: $text('Why?!'), href: '/drag-and-sort', route: guideRoute })({\n      //   click: sampleLinkClick()\n      // }),\n\n      $Link({ $content: $text('Developer\\'s Guide'), url: '/p/guide', route: guideRoute })({\n        click: routeChangeTether()\n      }),\n      $seperator,\n      $Link({ $content: $text('Examples'), url: '/p/examples/theme', route: examplesRoute })({\n        click: routeChangeTether()\n      }),\n      $seperator,\n\n      $element('a')(stylePseudo(':hover', { fill: pallete.primary }), layoutSheet.displayFlex, style({ padding: '0 4px' }), attr({ href: 'https://github.com/nissoh/aelea' }))(\n        $icon({ $content: $github, width: '25px', viewBox: `0 0 1024 1024` })\n      ),\n\n    ),\n\n\n    { routeChange }\n  ]\n})\n\n\n","import { $element, $node, $text, Behavior, component, eventElementTarget, style } from '@aelea/core'\nimport * as router from '@aelea/router'\nimport { $RouterAnchor } from '@aelea/router'\nimport { $column, $icon, $row, layoutSheet } from '@aelea/ui-components'\nimport { map, merge, multicast, now } from '@most/core'\nimport { $aeleaLogo } from '../elements/$icons'\nimport { fadeIn } from '../components/transitions/enter'\nimport $Examples from './examples/$Examples'\nimport $Guide from './guide/$Guide'\nimport { designSheet } from '@aelea/ui-components'\nimport $MainMenu from './$MainMenu'\nimport { $Picker } from '../components/$ThemePicker'\nimport { dark, light } from '../common/theme'\nimport { pallete } from '@aelea/ui-components-theme'\n\n\n\n\nconst popStateEvent = eventElementTarget('popstate', window)\nconst initialLocation = now(document.location)\nconst requestRouteChange = merge(initialLocation, popStateEvent)\nconst locationChange = map((location) => {\n  return location\n}, requestRouteChange)\n\n\ninterface Website {\n  baseRoute: string\n}\n\nexport default ({ baseRoute }: Website) => component((\n  [routeChanges, linkClickTether]: Behavior<string, string>\n) => {\n\n  const changes = merge(locationChange, multicast(routeChanges))\n  const fragmentsChange = map(() => {\n    const trailingSlash = /\\/$/\n    const relativeUrl = location.href.replace(trailingSlash, '').split(document.baseURI.replace(trailingSlash, ''))[1]\n    const frags = relativeUrl.split('/')\n    frags.splice(0, 1, baseRoute)\n    return frags\n  }, changes)\n\n  const rootRoute = router.create({ fragment: baseRoute, title: 'aelea', fragmentsChange })\n  const pagesRoute = rootRoute.create({ fragment: 'p', title: 'aelea' })\n  const guideRoute = pagesRoute.create({ fragment: 'guide', title: 'Guide' })\n  const examplesRoute = pagesRoute.create({ fragment: 'examples', title: 'Examples' })\n\n  return [\n    $node(designSheet.main, style({ backgroundImage: `radial-gradient(at center center, ${pallete.horizon} 50vh, ${pallete.background})`, }))(\n      router.match(rootRoute)(\n        $row(layoutSheet.flex, layoutSheet.spacingBig, style({ minHeight: '100%', alignContent: 'center', alignItems: 'center', placeContent: 'center', textAlign: 'center', padding: '0 30px', }))(\n          fadeIn(\n            $column(style({ alignItems: 'center', maxWidth: '550px' }), layoutSheet.spacing)(\n              $RouterAnchor({ url: '/', route: rootRoute, $anchor: $element('a')($icon({ $content: style({ fill: pallete.message }, $aeleaLogo), width: '237px', height: '115px', viewBox: `0 0 147 90` })) })({\n                click: linkClickTether()\n              }),\n              $text(`\"aelea\", is a UI Framework for reactive event programming`),\n              $text(`It helps you write composable and performant building blocks by composing functional event streams`),\n\n              $MainMenu({ parentRoute: pagesRoute })({\n                routeChange: linkClickTether()\n              })\n            )\n          )\n        )\n      ),\n\n      router.contains(pagesRoute)(\n        $column(layoutSheet.spacingBig, style({ maxWidth: '870px', width: '100%', margin: '0 auto', paddingBottom: '45px' }))(\n          $row(style({ placeContent: 'space-between', padding: '0 15px' }))(\n            $RouterAnchor({ $anchor: $element('a')($icon({ $content: $aeleaLogo, fill: pallete.message, width: '137px', height: '115px', viewBox: `0 0 147 90` })), url: '/', route: rootRoute })({\n              click: linkClickTether()\n            }),\n            $MainMenu({ parentRoute: pagesRoute })({\n              routeChange: linkClickTether()\n            })\n          ),\n          router.match(guideRoute)(\n            $Guide({ parentRoute: rootRoute })({})\n          ),\n          router.contains(examplesRoute)(\n            $Examples({ router: examplesRoute })({\n              routeChanges: linkClickTether()\n            })\n          )\n        )\n      ),\n\n\n      $Picker([light, dark])({})\n    )\n\n  ]\n})\n\n\n","import 'construct-style-sheets-polyfill'\nimport './assignThemeSync'\n// @ts-ignore\nimport { } from 'global.d.ts'\n\nimport { runBrowser } from '@aelea/core'\nimport $Website from './pages/$Website'\n\n\nrunBrowser({ rootNode: document.body })(\n  $Website({ baseRoute: '' })({})\n)","import { $svg, attr, Behavior, component, event, O, style, stylePseudo } from \"@aelea/core\"\nimport { $icon } from \"@aelea/ui-components\"\nimport { changeTheme, pallete, Theme, THEME_PALLETE_SELECTED_KEY } from \"@aelea/ui-components-theme\"\nimport { merge, tap } from \"@most/core\"\n\n\n\n\nexport const $Picker = (themes: Theme[]) => component((\n  [changeThemeEffect, changeThemeEffectTether]: Behavior<any, any>\n) => {\n\n  const current = JSON.parse(localStorage.getItem(THEME_PALLETE_SELECTED_KEY)!) as Theme\n\n  const applyOps = O(\n    style({ position: 'absolute', left: '15px', top: '15px', cursor: 'pointer' }),\n    stylePseudo(':hover', { fill: pallete.primary }),\n    changeThemeEffectTether(\n      event('click'),\n      tap(() => {\n        const themeNameList = themes.map(t => t.name)\n        const toIdx = (themeNameList.indexOf(current.name) + 1) % themes.length\n        const toTheme = themes[toIdx]\n\n        changeTheme(toTheme.name, toTheme.pallete)\n      })\n    )\n  )\n\n  return [\n    merge(\n      applyOps(\n        $icon({\n          $content: $svg('path')(attr({ d: 'M22.8 11.039h-1.176c-.664 0-1.2.43-1.2.961 0 .53.536.959 1.2.959H22.8c.662 0 1.2-.429 1.2-.959s-.539-.961-1.2-.961zM12 5.4A6.58 6.58 0 005.4 12a6.58 6.58 0 006.6 6.6 6.58 6.58 0 006.6-6.6c0-3.661-2.941-6.6-6.6-6.6zm0 11.4c-2.653 0-4.8-2.15-4.8-4.8 0-2.653 2.147-4.8 4.8-4.8a4.8 4.8 0 010 9.6zM3.6 12c0-.53-.539-.961-1.2-.961H1.2c-.664 0-1.2.43-1.2.961 0 .53.536.959 1.2.959h1.2c.661 0 1.2-.43 1.2-.959zM12 3.6c.53 0 .959-.536.959-1.2V1.2c0-.664-.43-1.2-.959-1.2-.53 0-.961.536-.961 1.2v1.2c0 .664.43 1.2.961 1.2zm0 16.8c-.53 0-.961.536-.961 1.2v1.2c0 .664.43 1.2.961 1.2.53 0 .959-.536.959-1.2v-1.2c0-.664-.43-1.2-.959-1.2zm8.838-15.88c.47-.47.545-1.154.17-1.528-.374-.375-1.06-.298-1.526.171l-.84.839c-.47.47-.545 1.153-.17 1.528.374.374 1.06.297 1.527-.172l.839-.839zM4.001 18.64l-.84.84c-.47.47-.545 1.152-.17 1.526.374.374 1.059.3 1.526-.17.13-.128.711-.71.84-.838.469-.47.545-1.153.17-1.529-.374-.375-1.06-.296-1.526.17zm.517-15.478c-.468-.47-1.153-.546-1.528-.172-.374.375-.297 1.06.17 1.53.13.128.711.71.84.838.469.47 1.152.546 1.526.172.374-.375.299-1.06-.17-1.528-.128-.13-.708-.712-.838-.84zm14.123 16.837l.84.839c.469.47 1.152.544 1.526.172.375-.375.299-1.06-.17-1.528l-.839-.839c-.47-.469-1.153-.546-1.529-.171-.375.374-.297 1.058.172 1.527z' }))()\n        })\n      ),\n      changeThemeEffect\n    )\n    \n  ]\n})\n"],"sourceRoot":""}