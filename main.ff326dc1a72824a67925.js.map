{"version":3,"sources":["webpack://@aelea/website/../.yarn/cache/@most-prelude-npm-1.8.0-f9da233011-64ef6318fd.zip/node_modules/@most/prelude/dist/index.es.js","webpack://@aelea/website/../.yarn/cache/@most-scheduler-npm-1.3.0-e34ae83921-942a3d0ac9.zip/node_modules/@most/scheduler/dist/index.es.js","webpack://@aelea/website/../.yarn/cache/@most-disposable-npm-1.3.0-e16fa0d39d-eb88a38a85.zip/node_modules/@most/disposable/dist/index.es.js","webpack://@aelea/website/../.yarn/cache/@most-core-npm-1.6.1-3baa05d523-bc452f048d.zip/node_modules/@most/core/dist/index.es.js","webpack://@aelea/website/../core/.dist/esm/utils/styleUtils.js","webpack://@aelea/website/../core/.dist/esm/utils.js","webpack://@aelea/website/../core/.dist/esm/run.js","webpack://@aelea/website/../core/.dist/esm/combinators/event.js","webpack://@aelea/website/../core/.dist/esm/combinators/tether.js","webpack://@aelea/website/../core/.dist/esm/source/behavior.js","webpack://@aelea/website/../core/.dist/esm/combinators/component.js","webpack://@aelea/website/../core/.dist/esm/utils/SettableDisposable.js","webpack://@aelea/website/../core/.dist/esm/source/node.js","webpack://@aelea/website/../core/.dist/esm/combinators/style.js","webpack://@aelea/website/../router/.dist/esm/resolveUrl.js","webpack://@aelea/website/../core/.dist/esm/combinators/attribute.js","webpack://@aelea/website/../router/.dist/esm/components/$Anchor.js","webpack://@aelea/website/../ui-components-theme/.dist/esm/staticThemeService.js","webpack://@aelea/website/../ui-components/.dist/esm/style/layoutSheet.js","webpack://@aelea/website/../ui-components/.dist/esm/$elements.js","webpack://@aelea/website/../ui-components/.dist/esm/elemets/$icon.js","webpack://@aelea/website/./src/elements/$icons.ts","webpack://@aelea/website/../core/.dist/esm/combinators/animate.js","webpack://@aelea/website/./src/components/transitions/enter.ts","webpack://@aelea/website/./src/components/$Example.ts","webpack://@aelea/website/./src/components/$Link.ts","webpack://@aelea/website/../ui-components/.dist/esm/style/designSheet.js","webpack://@aelea/website/../ui-components/.dist/esm/utils/state.js","webpack://@aelea/website/../ui-components/.dist/esm/components/form/form.js","webpack://@aelea/website/../ui-components/.dist/esm/components/form/types.js","webpack://@aelea/website/../ui-components/.dist/esm/components/form/$Field.js","webpack://@aelea/website/../ui-components/.dist/esm/components/$NumberTicker.js","webpack://@aelea/website/./src/pages/examples/calculator/$Calculator.ts","webpack://@aelea/website/../ui-components/.dist/esm/components/form/$Button.js","webpack://@aelea/website/./src/elements/$common.ts","webpack://@aelea/website/../ui-components/.dist/esm/components/form/$ButtonIcon.js","webpack://@aelea/website/./src/pages/examples/count-counters/$Counter.ts","webpack://@aelea/website/./src/pages/examples/count-counters/$CountCounters.ts","webpack://@aelea/website/../ui-components/.dist/esm/components/$Sortable.js","webpack://@aelea/website/./src/pages/examples/dragList/$DragList.ts","webpack://@aelea/website/../ui-components/.dist/esm/components/form/$TextField.js","webpack://@aelea/website/../ui-components/.dist/esm/components/$QuantumScroll.js","webpack://@aelea/website/../ui-components/.dist/esm/utils/elementObservers.js","webpack://@aelea/website/./src/pages/examples/quantum-list/$QuantumList.ts","webpack://@aelea/website/../ui-components/.dist/esm/components/$Table.js","webpack://@aelea/website/./src/pages/examples/table/$Table.ts","webpack://@aelea/website/./src/common/theme.ts","webpack://@aelea/website/./src/pages/examples/theme/$Theme.ts","webpack://@aelea/website/./src/pages/examples/todo-app/$CreateTodo.ts","webpack://@aelea/website/../ui-components/.dist/esm/components/form/$Checkbox.js","webpack://@aelea/website/./src/pages/examples/todo-app/$TodoItem.ts","webpack://@aelea/website/./src/pages/examples/todo-app/$TodoApp.ts","webpack://@aelea/website/./src/pages/examples/$Examples.ts","webpack://@aelea/website/../core/.dist/esm/source/fromCallback.js","webpack://@aelea/website/../ui-components/.dist/esm/components/$MonacoEditor.js","webpack://@aelea/website/./src/components/typescript-notebook/$TSPeep.ts","webpack://@aelea/website/./src/pages/guide/$Guide.ts","webpack://@aelea/website/./src/pages/$MainMenu.ts","webpack://@aelea/website/./src/pages/$Website.ts","webpack://@aelea/website/./src/website-run.ts","webpack://@aelea/website/./src/components/$ThemePicker.ts"],"names":["append","x","a","l","length","b","Array","i","reduce","f","z","r","remove","TypeError","j","unsafeRemove","findIndex","id","g","apply","curried","arguments","curry3","c","ScheduledTaskImpl","time","localOffset","period","task","scheduler","this","active","prototype","run","error","e","dispose","cancel","RelativeScheduler","origin","currentTime","scheduleTask","delay","relative","cancelAll","runTask","SchedulerImpl","timer","timeline","_this","_runReadyTasksBound","_runReadyTasks","_timer","_nextArrival","Infinity","now","Math","max","st","add","_scheduleNextRun","offset","_reschedule","removeAll","isEmpty","_unschedule","clearTimer","nextArrival","_scheduleNextArrival","setTimer","runTasks","TimelineImpl","tasks","insertByTime","binarySearch","getTime","events","at","splice","removeAllFrom","t","slice","runReadyTasks","timeslots","push","newTimeslot","timeslot","spliceEvent","addEvent","insertAtTimeslot","scheduledTask","floor","sortedArray","mid","y","lo","hi","ClockTimer","clock","_clock","dt","Asap","Promise","resolve","then","defer","runAsap","setTimeout","clearTimeout","RelativeClock","HRTimeClock","hrtime","hrt","clockRelativeTo","asap","cancelTask","schedulerRelativeTo","predicate","console","warn","newDefaultTimer","performance","process","Date","NONE","DisposeNone","disposeOnce","disposable","DisposeOnce","disposed","undefined","resource","DisposeWithImpl","_dispose","_resource","disposeAll","ds","merged","merge","DisposeAll","disposeBoth","d1","d2","d","isDisposeNone","al","bl","concat","disposables","throwIfErrors","disposeCollectErrors","appendIfError","errors","DisposeAllError","message","name","Error","call","captureStackTrace","stack","formatErrorStacks","Object","create","formatErrorStack","s","tryDispose","sink","extendStatics","setPrototypeOf","__proto__","p","hasOwnProperty","__extends","__","constructor","fatalError","rethrow","propagateTask","value","PropagateRunEventTask","propagateEventTask","PropagateEventTask","propagateEndTask","PropagateEndTask","propagateErrorTask","PropagateErrorTask","PropagateTask","runIfActive","_super","runEvent","event","end","empty","EMPTY","isCanonicalEmpty","stream","containsCanonicalEmpty","streams","some","Empty","NEVER","Never","At","runAt","SettableDisposable","setDisposable","reject","observer","RunEffectsSink","runStream","_end","_error","_disposable","_t","RelativeSink","withLocalTime","WithLocalTime","source","relativeSink","Pipe","Loop","stepper","seed","step","LoopSink","result","Scan","ScanSink","continueWith","ContinueWith","ContinueWithSink","startNext","continue","Filter","FilterSink","and","q","FilterMap","FilterMapSink","Map","MapSink","Tap","TapSink","IndexSink","index","invoke","args","combine","stream1","stream2","Combine","sources","sinks","mergeSink","CombineSink","indexSink","awaiting","values","hasValue","fill","activeCount","indexedValue","updateReady","mergeConcurrently","concurrency","mergeMapConcurrently","MergeConcurrently","Outer","pending","current","addInner","startInner","initInner","innerSink","Inner","mapAndRun","checkEnd","endInner","inner","indexOf","shift","outer","join","mergeArray","mergeStreams","withoutCanonicalEmpty","Merge","appendSources","filter","isNotCanonicalEmpty","MergeSink","indexValue","snapshot","sampler","Snapshot","sampleSink","SnapshotSink","valuesDisposable","latest","samplerDisposable","LatestValueSink","boundsFrom","unsafeMin","unsafeMax","min","take","n","start","sliceBounds","bounds","isSliceEmpty","commuteMapSlice","Slice","fuseSlice","createSlice","mapStream","sliceStream","b1","b2","sliceSink","SliceSink","skip","TakeWhile","takeWhileSink","TakeWhileSink","SkipWhile","SkipWhileSink","skipping","SkipAfter","SkipAfterSink","zipItems","items","ZipItems","keepLeft","ZipItemsSink","Queue","head","tail","capacityMask","list","growArray","shrinkArray","copyArray","newArray","len","zipArray","Zip","buffers","zipSink","ZipSink","buffer","ready","emitZipped","ended","map","switchLatest","Switch","switchSink","SwitchSink","disposeCurrent","Segment","disposeInner","errorInner","skipRepeats","skipRepeatsWith","same","equals","SkipRepeats","SkipRepeatsSink","init","until","signal","Until","since","Since","maxSignal","UntilSink","minSignal","LowerBoundSink","SinceSink","allow","Delay","delaySink","DelaySink","forEach","throttle","commuteMapThrottle","Throttle","fuseThrottle","throttleStream","ThrottleSink","Debounce","DebounceSink","DebounceTask","handleEventFromTask","awaitPromises","Await","fromPromise","promise","AwaitSink","eventBound","endBound","errorBound","queue","handlePromise","catch","SafeSink","disable","tryEvent","tryEnd","RecoverWith","RecoverWithSink","nextSink","_startNext","_continue","multicast","Multicast","MulticastSource","MulticastDisposable","err","loop$1","scan$1","initial","startWith$1","map$1","constant$1","tap$1","chain$1","fs","xs","continueWith$1","merge$1","combine$1","combineArray$1","snapshot$1","filter$1","skipRepeatsWith$1","take$1","skip$1","skipAfter$1","until$1","delay$1","timeWindow","delayTime","debounce$1","recoverWith$1","styleObjectAsString","styleObj","entries","key","val","replace","toLowerCase","useStyleRule","cacheService","styleDefinition","properties","cachedRuleIdx","cache","stylesheet","cssRules","namespace","insertRule","isFunction","Function","nullSink","_","O","fns","reduceRight","BranchEffectsSink","env","parentElement","segmentPosition","segmentsCount","segmentsSlotsMap","node","element","slot","disposableBranch","get","delete","parent","child","insertAt","prepend","insertBefore","children","appendToSlot","style","keys","selector","classList","stylePseudo","styleDeclaration","pseudo","rule","useStylePseudoRule","class","attributes","applyAttrFn","styleBehavior","disposeStyle","sb","latestClass","previousCssRule","styleObject","cashedCssClas","attributesBehavior","attrs","attr","newDisp","BranchChildrenSinkList","$segments","set","$child","attrKey","removeAttribute","setAttribute","String","eventElementTarget","eventType","options","cb","addEventListener","removeEventListener","ns","capture","SourceSink","tetherSink","TetherSink","super","Tether","sourceSink","_a","sourceDisposable","sinkIdx","BehaviorSource","queuedSamplers","sample","ops","tetherSource","split","tether","bops","sourcesMap","runBehavior","disposeSampler","behavior","ss","component","inputComp","projectBehaviors","behaviors","view","outputBehaviors","outputDisposables","k","consumerSampler","outputDisposable","initialDiposable","$svg","branch","document","createElementNS","$element","createElement","$custom","$node","$wrapNativeElement","rootNode","$text","$textFn","postOp","input","NodeSource","sourceValue","sourceOp","text","createTextNode","sourceOpValue","$branch","styleInline","applyInlineStyleStream","prop","styleInput","pseudoClass","fragment","fragmentsChange","title","resolveRoute","next","prev","every","pathChange","parentFragments","fragments","fragIdx","diff","contains","isMatched","match","evt","lastTarget","miss","frag","path","RegExp","Boolean","route","exactMatch","isMatch","unmatch","attrBehavior","$anchor","textDecoration","$Anchor","url","$content","sampleClick","click","sampleFocus","focus","href","clickEv","preventDefault","pathName","currentTarget","HTMLAnchorElement","pathname","location","history","pushState","blur","THEME_PALLETE_SELECTED_KEY","selected","JSON","parse","localStorage","getItem","theme","pallete","stretch","position","top","bottom","right","left","spacingTiny","gap","spacingSmall","spacing","spacingBig","flex","displayFlex","display","row","flexDirection","column","rowFlex","columnFlex","$row","layoutSheet","$column","$seperator","padding","backgroundColor","middleground","boxShadow","$card","width","margin","minHeight","minWidth","background","description","$icon","height","viewBox","$trash","$aeleaLogo","$github","AnimationFrameSource","afp","requestTime","rafId","requestAnimationFrame","eventThenEnd","fid","cancelAnimationFrame","responseTime","nextAnimationFrame","window","animationFrames","MOTION_STIFF","stiffness","damping","precision","motion","motionEnvironment","initialState","change","motionEnv","ma","motionState","velocity","target","frames","state","fps","delta","acceleration","newVelocity","newPosition","settled","abs","stepFrame","fadeIn","slideIn","opacity","slide","transform","animation","config","$Link","styles","sampleContains","color","isActive","isFocus","primary","cursor","anchorOps","fontFamily","fontWeight","fontSize","customScroll","control","border","outline","flexShrink","main","overflowY","scrollbarColor","scrollbarWidth","borderBottom","paddingBottom","btn","alignItems","stateBehavior","bs","mbs","replayLatest","StateSink","latestvalue","ReplayLatest","hasInitial","startWithReplay","interactionOp","src","dismissOp","activeElement","$label","InputType","$Field","type","TEXT","placeholder","autocomplete","fieldStyle","validation","interactionBehavior","focusStyle","dismissBehavior","dismissstyle","sampleChange","alert","multicastValidation","combinedWithInitial","arrgs","idx","combineState","designSheet","inputEv","HTMLInputElement","negative","Direction","getDetlaSlotIdex","$NumberTicker","value$","incrementColor","decrementColor","textStyle","slots","uniqueValues$","incrementMulticast","changeStr","toLocaleString","dir","pos","INCREMENT","DECREMENT","currentStr","dirStyleMap","transition","decayColor","extractValue","str","Number","$plus","justifyContent","sampleX","sampleY","positive","$Button","disabled","pointerEvents","borderColor","$button","$TrashBtn","borderRadius","iconOp","$AddBtn","sumAdd","sampleAddedCounter","addedCounter","sampleDisposeCounter","disposeCounter","sampleCountersIncrement","counterIncrement","sampleCountersDecrement","counterDecrement","sampleDisposedCounterCount","disposedCounterCount","sumWithInitial","totalCount","addCounter","placeContent","sampleRemove","sampleValueChange","valueChange","sampleIncrement","increment","sampleDecrement","decrement","$Counter","swap","arr","currentIdx","newArr","$dragItem","sampleOrder","$list","itemHeight","sampleOrderChange","orderChange","listLength","containerHeight","orderMulticat","$listChangesWithInitial","draggingMotion","userSelect","$item","sampleDragY","dragY","multicastedDrag","isDraggingStream","isDragging","iHeight","yMotion","$draggedItem","yDragPosition","applyTransformStyle","ypos","scale","applyBoxShadowStyle","shadow","startEv","drag","move","ev","pointerEvent","from","clientY","to","round","isPositionChange","zIndex","$TextField","sampleValue","hint","$messageLabel","$hint","$alert","msg","newLocal","$message","alignSelf","labelStyle","label","getPageRequest","offsetTop","rowHeight","threshold","pageSize","$itemLoading","$QuantumScroll","dataSource","containerStyle","contentStyle","$loading","sampleScroll","scroll","sampleContainerDimension","containerDimension","multicastedData","initalScrollState","rect","requestSource","$requestAndLoader","res","$items","$skipRepaintingLoader","$intermissionedItems","$container","HTMLElement","scrollTop","clientHeight","ro","ResizeObserver","observe","instance","el","unobserve","dim","contentRect","overflow","totalItemsCount","totalItems","willChange","loc","sampleDelayResponse","delayResponse","sampleDebounceRequest","debounceRequest","formatNumber","Intl","NumberFormat","format","initialDebounceRequestChange","initialDelayResponse","debounceDuration","dd","positionChange","isFinite","horizon","elipsisTextOverflow","textOverflow","whiteSpace","tableCellStyle","$headerCell","$bodyCell","$rowContainer","sampleRequestList","requestList","segment","data","columns","$header","col","_b","cellStyle","header","dataStream","rowData","$body","light","foreground","indeterminate","dark","getPallete","colors","$Theme","themeDef","$Pallete","iid","sampleAdd","sampleInputChange","inputChange","inputState","valueChahnges","completed","$Checkbox","sampleCheck","check","$overlay","ch","$checkInput","checked","rowStyle","router","sampleLinkClick","routeChanges","dragAngDropRoute","todoAppRoute","countCountersRoute","quantumListRoute","calculatorRoute","tableRoute","themeRoute","$Example","$DragList","$Calculator","$CountCounters","todos","sampleCreateTodo","newTodo","sampleShowCompletedList","showCompletedList","$CreateTodo","todo","sampleCompleted","onlyCompleted","isCompleted","sampleComplete","complete","sampleText","$TodoItem","FromCallbackSource","callbackFunction","context","maybeDisposable","bind","fetchJson","async","fetch","json","packageQueryCache","packageLocalCache","fetchAndCacheDependancyTree","version","pkgPath","pkg","queryStore","locallyStoredItem","storedItem","parsedItem","pendingQuery","query","pkgJson","dependencies","files","meta","dependency","fetchMeta","dtsFiles","metaFile","test","dtsQueries","file","content","all","fetchFileListContent","typings","types","resp","setItem","stringify","cacheGet","depsQueries","pkgName","definePackageTree","monacoGlobal","pkgModelUri","Uri","editor","getModel","acc","pakgDefJsonStr","createModel","defineModel","whitespaceRegexp","elementBecameVisibleEvent","intersectionObserver","IntersectionObserver","intersectionEvent","intersectionRatio","MonacoEnvironment","getWorkerUrl","encodeURIComponent","monacoQuery","loadMonacoTSEditor","import","precacheAeleaDependanciesQuery","codiConQuery","FontFace","codiConFont","fonts","asyncloadMonacoEditor","monacoEntryFileId","$MonacoEditor","code","override","editorload","$editor","editorElement","languages","typescript","typescriptDefaults","setCompilerOptions","getCompilerOptions","module","ModuleKind","ESNext","moduleResolution","ModuleResolutionKind","NodeJs","model","minimap","enabled","overviewRulerLanes","lineNumbers","glyphMargin","folding","lineDecorationsWidth","lineNumbersMinChars","hover","renderLineHighlight","renderIndentGuides","scrollBeyondLastLine","automaticLayout","onDidContentSizeChange","contentHeight","getContentHeight","layout","clientWidth","attempDuration","getWorkerStream","getTypeScriptWorker","elEvents","modelChangeWithDelay","cbf","fromCallback","onDidChangeContent","editorChanges","getValue","changesWithInitial","ignoreWhitespaceChanges","modelChange","getWorker","worker","uri","semanticDiagnosticsQuery","getSemanticDiagnostics","toString","syntacticDiagnosticsQuery","getSyntacticDiagnostics","semanticDiagnostics","syntacticDiagnostics","readOnly","$loader","xxx","initalCodeBlockHeight","refImports","getEmitOutput","outputFiles","esModuleBlobUrl","URL","createObjectURL","Blob","default","parentRoute","$TSPeep","sampleRouteChange","routeChange","guideRoute","examplesRoute","popStateEvent","initialLocation","requestRouteChange","locationChange","composedConfig","CSSStyleSheet","body","adoptedStyleSheets","$root","runBrowser","baseRoute","changes","trailingSlash","frags","baseURI","rootRoute","pagesRoute","backgroundImage","alignContent","textAlign","maxWidth","$MainMenu","$Guide","$Examples","themes","sampleChangeThemeEffect","changeThemeEffect","applyOps","toIdx","toTheme","newTheme","assign","self","reload","changeTheme","$Website"],"mappings":"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","file":"main.ff326dc1a72824a67925.js","sourcesContent":["/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\n// Non-mutating array operations\r\n/**\r\n * a with x prepended\r\n */\r\nfunction cons(x, a) {\r\n    var l = a.length;\r\n    var b = new Array(l + 1);\r\n    b[0] = x;\r\n    for (var i = 0; i < l; ++i) {\r\n        b[i + 1] = a[i];\r\n    }\r\n    return b;\r\n}\r\n/**\r\n * a with x appended\r\n */\r\nfunction append(x, a) {\r\n    var l = a.length;\r\n    var b = new Array(l + 1);\r\n    for (var i = 0; i < l; ++i) {\r\n        b[i] = a[i];\r\n    }\r\n    b[l] = x;\r\n    return b;\r\n}\r\n/**\r\n * Concats two `ArrayLike`s\r\n */\r\nfunction concat(a, b) {\r\n    var al = a.length;\r\n    var bl = b.length;\r\n    var r = new Array(al + bl);\r\n    var i = 0;\r\n    for (i = 0; i < al; i++) {\r\n        r[i] = a[i];\r\n    }\r\n    for (var j = 0; j < bl; j++) {\r\n        r[i++] = b[j];\r\n    }\r\n    return r;\r\n}\r\n//\r\n/**\r\n * drop first n elements\r\n */\r\nfunction drop(n, a) {\r\n    if (n < 0) {\r\n        throw new TypeError('n must be >= 0');\r\n    }\r\n    var l = a.length;\r\n    if (n === 0 || l === 0) {\r\n        return a;\r\n    }\r\n    if (n >= l) {\r\n        return [];\r\n    }\r\n    return unsafeDrop(n, a, l - n);\r\n}\r\n/**\r\n * Internal helper for drop\r\n */\r\nfunction unsafeDrop(n, a, l) {\r\n    var b = new Array(l);\r\n    for (var i = 0; i < l; ++i) {\r\n        b[i] = a[n + i];\r\n    }\r\n    return b;\r\n}\r\n/**\r\n * drop head element\r\n */\r\nfunction tail(a) {\r\n    return drop(1, a);\r\n}\r\n/**\r\n * duplicate a (shallow duplication)\r\n */\r\nfunction copy(a) {\r\n    var l = a.length;\r\n    var b = new Array(l);\r\n    for (var i = 0; i < l; ++i) {\r\n        b[i] = a[i];\r\n    }\r\n    return b;\r\n}\r\n/**\r\n * transform each element with f\r\n */\r\nfunction map(f, a) {\r\n    var l = a.length;\r\n    var b = new Array(l);\r\n    for (var i = 0; i < l; ++i) {\r\n        b[i] = f(a[i]);\r\n    }\r\n    return b;\r\n}\r\n/**\r\n * accumulate via left-fold\r\n */\r\nfunction reduce(f, z, a) {\r\n    var r = z;\r\n    for (var i = 0, l = a.length; i < l; ++i) {\r\n        r = f(r, a[i], i);\r\n    }\r\n    return r;\r\n}\r\n/**\r\n * replace element at index\r\n */\r\nfunction replace(x, i, a) {\r\n    if (i < 0) {\r\n        throw new TypeError('i must be >= 0');\r\n    }\r\n    var l = a.length;\r\n    var b = new Array(l);\r\n    for (var j = 0; j < l; ++j) {\r\n        b[j] = i === j ? x : a[j];\r\n    }\r\n    return b;\r\n}\r\n/**\r\n * remove element at index\r\n * @throws\r\n */\r\nfunction remove(i, a) {\r\n    if (i < 0) {\r\n        throw new TypeError('i must be >= 0');\r\n    }\r\n    var l = a.length;\r\n    if (l === 0 || i >= l) { // exit early if index beyond end of array\r\n        return a;\r\n    }\r\n    if (l === 1) { // exit early if index in bounds and length === 1\r\n        return [];\r\n    }\r\n    return unsafeRemove(i, a, l - 1);\r\n}\r\n/**\r\n * Internal helper to remove element at index\r\n */\r\nfunction unsafeRemove(i, a, l) {\r\n    var b = new Array(l);\r\n    var j;\r\n    for (j = 0; j < i; ++j) {\r\n        b[j] = a[j];\r\n    }\r\n    for (j = i; j < l; ++j) {\r\n        b[j] = a[j + 1];\r\n    }\r\n    return b;\r\n}\r\n/**\r\n * remove all elements matching a predicate\r\n * @deprecated\r\n */\r\nfunction removeAll(f, a) {\r\n    var l = a.length;\r\n    var b = new Array(l);\r\n    var j = 0;\r\n    for (var x = void 0, i = 0; i < l; ++i) {\r\n        x = a[i];\r\n        if (!f(x)) {\r\n            b[j] = x;\r\n            ++j;\r\n        }\r\n    }\r\n    b.length = j;\r\n    return b;\r\n}\r\n/**\r\n * find index of x in a, from the left\r\n */\r\nfunction findIndex(x, a) {\r\n    for (var i = 0, l = a.length; i < l; ++i) {\r\n        if (x === a[i]) {\r\n            return i;\r\n        }\r\n    }\r\n    return -1;\r\n}\r\n/**\r\n * Return true iff x is array-like\r\n */\r\nfunction isArrayLike(x) {\r\n    return x != null && typeof x.length === 'number' && typeof x !== 'function';\r\n}\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\nvar id = function (x) { return x; };\r\nvar compose = function (f, g) { return function (x) { return f(g(x)); }; };\r\nvar apply = function (f, x) { return f(x); };\r\nfunction curry2(f) {\r\n    function curried(a, b) {\r\n        switch (arguments.length) {\r\n            case 0: return curried;\r\n            case 1: return function (b) { return f(a, b); };\r\n            default: return f(a, b);\r\n        }\r\n    }\r\n    return curried;\r\n}\r\nfunction curry3(f) {\r\n    function curried(a, b, c) {\r\n        switch (arguments.length) {\r\n            case 0: return curried;\r\n            case 1: return curry2(function (b, c) { return f(a, b, c); });\r\n            case 2: return function (c) { return f(a, b, c); };\r\n            default: return f(a, b, c);\r\n        }\r\n    }\r\n    return curried;\r\n}\r\nfunction curry4(f) {\r\n    function curried(a, b, c, d) {\r\n        switch (arguments.length) {\r\n            case 0: return curried;\r\n            case 1: return curry3(function (b, c, d) { return f(a, b, c, d); });\r\n            case 2: return curry2(function (c, d) { return f(a, b, c, d); });\r\n            case 3: return function (d) { return f(a, b, c, d); };\r\n            default: return f(a, b, c, d);\r\n        }\r\n    }\r\n    return curried;\r\n}\n\nexport { append, apply, compose, concat, cons, copy, curry2, curry3, curry4, drop, findIndex, id, isArrayLike, map, reduce, remove, removeAll, replace, tail };\n//# sourceMappingURL=index.es.js.map\n","import { findIndex, removeAll, curry2, curry3 } from '@most/prelude';\n\nvar ScheduledTaskImpl = /** @class */ (function () {\r\n    function ScheduledTaskImpl(time, localOffset, period, task, scheduler) {\r\n        this.time = time;\r\n        this.localOffset = localOffset;\r\n        this.period = period;\r\n        this.task = task;\r\n        this.scheduler = scheduler;\r\n        this.active = true;\r\n    }\r\n    ScheduledTaskImpl.prototype.run = function () {\r\n        return this.task.run(this.time - this.localOffset);\r\n    };\r\n    ScheduledTaskImpl.prototype.error = function (e) {\r\n        return this.task.error(this.time - this.localOffset, e);\r\n    };\r\n    ScheduledTaskImpl.prototype.dispose = function () {\r\n        this.active = false;\r\n        this.scheduler.cancel(this);\r\n        return this.task.dispose();\r\n    };\r\n    return ScheduledTaskImpl;\r\n}());\n\nvar RelativeScheduler = /** @class */ (function () {\r\n    function RelativeScheduler(origin, scheduler) {\r\n        this.origin = origin;\r\n        this.scheduler = scheduler;\r\n    }\r\n    RelativeScheduler.prototype.currentTime = function () {\r\n        return this.scheduler.currentTime() - this.origin;\r\n    };\r\n    RelativeScheduler.prototype.scheduleTask = function (localOffset, delay, period, task) {\r\n        return this.scheduler.scheduleTask(localOffset + this.origin, delay, period, task);\r\n    };\r\n    RelativeScheduler.prototype.relative = function (origin) {\r\n        return new RelativeScheduler(origin + this.origin, this.scheduler);\r\n    };\r\n    RelativeScheduler.prototype.cancel = function (task) {\r\n        return this.scheduler.cancel(task);\r\n    };\r\n    RelativeScheduler.prototype.cancelAll = function (f) {\r\n        return this.scheduler.cancelAll(f);\r\n    };\r\n    return RelativeScheduler;\r\n}());\n\n/** @license MIT License (c) copyright 2010-2017 original author or authors */\r\nvar defer = function (task) {\r\n    return Promise.resolve(task).then(runTask);\r\n};\r\nfunction runTask(task) {\r\n    try {\r\n        return task.run();\r\n    }\r\n    catch (e) {\r\n        return task.error(e);\r\n    }\r\n}\n\n/** @license MIT License (c) copyright 2010-2017 original author or authors */\r\nvar SchedulerImpl = /** @class */ (function () {\r\n    function SchedulerImpl(timer, timeline) {\r\n        var _this = this;\r\n        this._runReadyTasksBound = function () { return _this._runReadyTasks(); };\r\n        this.timer = timer;\r\n        this.timeline = timeline;\r\n        this._timer = null;\r\n        this._nextArrival = Infinity;\r\n    }\r\n    SchedulerImpl.prototype.currentTime = function () {\r\n        return this.timer.now();\r\n    };\r\n    SchedulerImpl.prototype.scheduleTask = function (localOffset, delay, period, task) {\r\n        var time = this.currentTime() + Math.max(0, delay);\r\n        var st = new ScheduledTaskImpl(time, localOffset, period, task, this);\r\n        this.timeline.add(st);\r\n        this._scheduleNextRun();\r\n        return st;\r\n    };\r\n    SchedulerImpl.prototype.relative = function (offset) {\r\n        return new RelativeScheduler(offset, this);\r\n    };\r\n    SchedulerImpl.prototype.cancel = function (task) {\r\n        task.active = false;\r\n        if (this.timeline.remove(task)) {\r\n            this._reschedule();\r\n        }\r\n    };\r\n    // @deprecated\r\n    SchedulerImpl.prototype.cancelAll = function (f) {\r\n        this.timeline.removeAll(f);\r\n        this._reschedule();\r\n    };\r\n    SchedulerImpl.prototype._reschedule = function () {\r\n        if (this.timeline.isEmpty()) {\r\n            this._unschedule();\r\n        }\r\n        else {\r\n            this._scheduleNextRun();\r\n        }\r\n    };\r\n    SchedulerImpl.prototype._unschedule = function () {\r\n        this.timer.clearTimer(this._timer);\r\n        this._timer = null;\r\n    };\r\n    SchedulerImpl.prototype._scheduleNextRun = function () {\r\n        if (this.timeline.isEmpty()) {\r\n            return;\r\n        }\r\n        var nextArrival = this.timeline.nextArrival();\r\n        if (this._timer === null) {\r\n            this._scheduleNextArrival(nextArrival);\r\n        }\r\n        else if (nextArrival < this._nextArrival) {\r\n            this._unschedule();\r\n            this._scheduleNextArrival(nextArrival);\r\n        }\r\n    };\r\n    SchedulerImpl.prototype._scheduleNextArrival = function (nextArrival) {\r\n        this._nextArrival = nextArrival;\r\n        var delay = Math.max(0, nextArrival - this.currentTime());\r\n        this._timer = this.timer.setTimer(this._runReadyTasksBound, delay);\r\n    };\r\n    SchedulerImpl.prototype._runReadyTasks = function () {\r\n        this._timer = null;\r\n        this.timeline.runTasks(this.currentTime(), runTask);\r\n        this._scheduleNextRun();\r\n    };\r\n    return SchedulerImpl;\r\n}());\n\n/** @license MIT License (c) copyright 2010-2017 original author or authors */\r\nvar TimelineImpl = /** @class */ (function () {\r\n    function TimelineImpl() {\r\n        this.tasks = [];\r\n    }\r\n    TimelineImpl.prototype.nextArrival = function () {\r\n        return this.isEmpty() ? Infinity : this.tasks[0].time;\r\n    };\r\n    TimelineImpl.prototype.isEmpty = function () {\r\n        return this.tasks.length === 0;\r\n    };\r\n    TimelineImpl.prototype.add = function (st) {\r\n        insertByTime(st, this.tasks);\r\n    };\r\n    TimelineImpl.prototype.remove = function (st) {\r\n        var i = binarySearch(getTime(st), this.tasks);\r\n        if (i >= 0 && i < this.tasks.length) {\r\n            var events = this.tasks[i].events;\r\n            var at = findIndex(st, events);\r\n            if (at >= 0) {\r\n                events.splice(at, 1);\r\n                if (events.length === 0) {\r\n                    this.tasks.splice(i, 1);\r\n                }\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    /**\r\n     * @deprecated\r\n     */\r\n    TimelineImpl.prototype.removeAll = function (f) {\r\n        for (var i = 0; i < this.tasks.length; ++i) {\r\n            removeAllFrom(f, this.tasks[i]);\r\n        }\r\n    };\r\n    TimelineImpl.prototype.runTasks = function (t, runTask) {\r\n        var tasks = this.tasks;\r\n        var l = tasks.length;\r\n        var i = 0;\r\n        while (i < l && tasks[i].time <= t) {\r\n            ++i;\r\n        }\r\n        this.tasks = tasks.slice(i);\r\n        // Run all ready tasks\r\n        for (var j = 0; j < i; ++j) {\r\n            this.tasks = runReadyTasks(runTask, tasks[j].events, this.tasks);\r\n        }\r\n    };\r\n    return TimelineImpl;\r\n}());\r\nfunction runReadyTasks(runTask, events, tasks) {\r\n    for (var i = 0; i < events.length; ++i) {\r\n        var task = events[i];\r\n        if (task.active) {\r\n            runTask(task);\r\n            // Reschedule periodic repeating tasks\r\n            // Check active again, since a task may have canceled itself\r\n            if (task.period >= 0 && task.active) {\r\n                task.time = task.time + task.period;\r\n                insertByTime(task, tasks);\r\n            }\r\n        }\r\n    }\r\n    return tasks;\r\n}\r\nfunction insertByTime(task, timeslots) {\r\n    var l = timeslots.length;\r\n    var time = getTime(task);\r\n    if (l === 0) {\r\n        timeslots.push(newTimeslot(time, [task]));\r\n        return;\r\n    }\r\n    var i = binarySearch(time, timeslots);\r\n    if (i >= l) {\r\n        timeslots.push(newTimeslot(time, [task]));\r\n    }\r\n    else {\r\n        insertAtTimeslot(task, timeslots, time, i);\r\n    }\r\n}\r\nfunction insertAtTimeslot(task, timeslots, time, i) {\r\n    var timeslot = timeslots[i];\r\n    if (time === timeslot.time) {\r\n        addEvent(task, timeslot.events);\r\n    }\r\n    else {\r\n        timeslots.splice(i, 0, newTimeslot(time, [task]));\r\n    }\r\n}\r\nfunction addEvent(task, events) {\r\n    if (events.length === 0 || task.time >= events[events.length - 1].time) {\r\n        events.push(task);\r\n    }\r\n    else {\r\n        spliceEvent(task, events);\r\n    }\r\n}\r\nfunction spliceEvent(task, events) {\r\n    for (var j = 0; j < events.length; j++) {\r\n        if (task.time < events[j].time) {\r\n            events.splice(j, 0, task);\r\n            break;\r\n        }\r\n    }\r\n}\r\nfunction getTime(scheduledTask) {\r\n    return Math.floor(scheduledTask.time);\r\n}\r\n/**\r\n * @deprecated\r\n */\r\nfunction removeAllFrom(f, timeslot) {\r\n    timeslot.events = removeAll(f, timeslot.events);\r\n}\r\nfunction binarySearch(t, sortedArray) {\r\n    var lo = 0;\r\n    var hi = sortedArray.length;\r\n    var mid, y;\r\n    while (lo < hi) {\r\n        mid = Math.floor((lo + hi) / 2);\r\n        y = sortedArray[mid];\r\n        if (t === y.time) {\r\n            return mid;\r\n        }\r\n        else if (t < y.time) {\r\n            hi = mid;\r\n        }\r\n        else {\r\n            lo = mid + 1;\r\n        }\r\n    }\r\n    return hi;\r\n}\r\nvar newTimeslot = function (t, events) { return ({ time: t, events: events }); };\n\n/** @license MIT License (c) copyright 2010-2017 original author or authors */\r\n/* global setTimeout, clearTimeout */\r\nvar ClockTimer = /** @class */ (function () {\r\n    function ClockTimer(clock) {\r\n        this._clock = clock;\r\n    }\r\n    ClockTimer.prototype.now = function () {\r\n        return this._clock.now();\r\n    };\r\n    ClockTimer.prototype.setTimer = function (f, dt) {\r\n        return dt <= 0 ? runAsap(f) : setTimeout(f, dt);\r\n    };\r\n    ClockTimer.prototype.clearTimer = function (t) {\r\n        return t instanceof Asap ? t.cancel() : clearTimeout(t);\r\n    };\r\n    return ClockTimer;\r\n}());\r\nvar Asap = /** @class */ (function () {\r\n    function Asap(f) {\r\n        this.f = f;\r\n        this.active = true;\r\n    }\r\n    Asap.prototype.run = function () {\r\n        if (this.active) {\r\n            return this.f();\r\n        }\r\n    };\r\n    Asap.prototype.error = function (e) {\r\n        throw e;\r\n    };\r\n    Asap.prototype.cancel = function () {\r\n        this.active = false;\r\n    };\r\n    return Asap;\r\n}());\r\nfunction runAsap(f) {\r\n    var task = new Asap(f);\r\n    defer(task);\r\n    return task;\r\n}\n\n/* global performance, process */\r\nvar RelativeClock = /** @class */ (function () {\r\n    function RelativeClock(clock, origin) {\r\n        this.origin = origin;\r\n        this.clock = clock;\r\n    }\r\n    RelativeClock.prototype.now = function () {\r\n        return this.clock.now() - this.origin;\r\n    };\r\n    return RelativeClock;\r\n}());\r\nvar HRTimeClock = /** @class */ (function () {\r\n    function HRTimeClock(hrtime, origin) {\r\n        this.origin = origin;\r\n        this.hrtime = hrtime;\r\n    }\r\n    HRTimeClock.prototype.now = function () {\r\n        var hrt = this.hrtime(this.origin);\r\n        return (hrt[0] * 1e9 + hrt[1]) / 1e6;\r\n    };\r\n    return HRTimeClock;\r\n}());\r\nvar clockRelativeTo = function (clock) {\r\n    return new RelativeClock(clock, clock.now());\r\n};\r\nvar newPerformanceClock = function () {\r\n    return clockRelativeTo(performance);\r\n};\r\n/**\r\n * @deprecated will be removed in 2.0.0\r\n * Date.now is not monotonic, and performance.now is ubiquitous:\r\n * @see https://caniuse.com/#search=performance.now\r\n */\r\nvar newDateClock = function () {\r\n    return clockRelativeTo(Date);\r\n};\r\nvar newHRTimeClock = function () {\r\n    return new HRTimeClock(process.hrtime, process.hrtime());\r\n};\r\nvar newPlatformClock = function () {\r\n    if (typeof performance !== 'undefined' && typeof performance.now === 'function') {\r\n        return newPerformanceClock();\r\n    }\r\n    else if (typeof process !== 'undefined' && typeof process.hrtime === 'function') {\r\n        return newHRTimeClock();\r\n    }\r\n    return newDateClock();\r\n};\n\n/**\r\n * Read the current time from the provided Scheduler\r\n */\r\nvar currentTime = function (scheduler) {\r\n    return scheduler.currentTime();\r\n};\r\n/**\r\n * Schedule a task to run as soon as possible, but\r\n * not in the current call stack\r\n */\r\nvar asap = curry2(function (task, scheduler) {\r\n    return scheduler.scheduleTask(0, 0, -1, task);\r\n});\r\n/**\r\n * Schedule a task to run after a millisecond delay\r\n */\r\nvar delay = curry3(function (delay, task, scheduler) {\r\n    return scheduler.scheduleTask(0, delay, -1, task);\r\n});\r\n/**\r\n * Schedule a task to run periodically, with the\r\n * first run starting asap\r\n */\r\nvar periodic = curry3(function (period, task, scheduler) {\r\n    return scheduler.scheduleTask(0, 0, period, task);\r\n});\r\n/**\r\n * Cancel a scheduledTask\r\n */\r\nvar cancelTask = function (scheduledTask) {\r\n    return scheduledTask.dispose();\r\n};\r\n/**\r\n * Cancel all ScheduledTasks for which a predicate is true\r\n * @deprecated Will be removed in 2.0.0\r\n */\r\nvar cancelAllTasks = curry2(function (predicate, scheduler) {\r\n    console.warn(\"DEPRECATED cancelAllTasks to be removed in 2.0.0\");\r\n    return scheduler.cancelAll(predicate);\r\n});\n\nvar schedulerRelativeTo = curry2(function (offset, scheduler) {\r\n    return new RelativeScheduler(offset, scheduler);\r\n});\n\n/** @license MIT License (c) copyright 2010-2017 original author or authors */\r\nvar newScheduler = curry2(function (timer, timeline) { return new SchedulerImpl(timer, timeline); });\r\nvar newDefaultScheduler = function () { return new SchedulerImpl(newDefaultTimer(), new TimelineImpl()); };\r\nvar newDefaultTimer = function () { return new ClockTimer(newPlatformClock()); };\r\nvar newClockTimer = function (clock) { return new ClockTimer(clock); };\r\nvar newTimeline = function () { return new TimelineImpl(); };\n\nexport { HRTimeClock, RelativeClock, asap, cancelAllTasks, cancelTask, clockRelativeTo, currentTime, delay, newClockTimer, newDateClock, newDefaultScheduler, newDefaultTimer, newHRTimeClock, newPerformanceClock, newPlatformClock, newScheduler, newTimeline, periodic, schedulerRelativeTo };\n//# sourceMappingURL=index.es.js.map\n","import { curry2, reduce, concat, append, curry3 } from '@most/prelude';\n\nvar dispose = function (disposable) {\r\n    return disposable.dispose();\r\n};\n\nvar disposeNone = function () { return NONE; };\r\nvar NONE = new (/** @class */ (function () {\r\n    function DisposeNone() {\r\n    }\r\n    DisposeNone.prototype.dispose = function () { };\r\n    return DisposeNone;\r\n}()))();\r\nvar isDisposeNone = function (d) {\r\n    return d === NONE;\r\n};\n\n/**\r\n * Wrap an existing disposable (which may not already have been once()d)\r\n * so that it will only dispose its underlying resource at most once.\r\n */\r\nvar disposeOnce = function (disposable) {\r\n    return new DisposeOnce(disposable);\r\n};\r\nvar DisposeOnce = /** @class */ (function () {\r\n    function DisposeOnce(disposable) {\r\n        this.disposed = false;\r\n        this.disposable = disposable;\r\n    }\r\n    DisposeOnce.prototype.dispose = function () {\r\n        if (!this.disposed) {\r\n            this.disposed = true;\r\n            if (this.disposable) {\r\n                this.disposable.dispose();\r\n                this.disposable = undefined;\r\n            }\r\n        }\r\n    };\r\n    return DisposeOnce;\r\n}());\n\n/** @license MIT License (c) copyright 2010-2017 original author or authors */\r\n/**\r\n * Create a Disposable that will use the provided\r\n * dispose function to dispose the resource\r\n */\r\nvar disposeWith = curry2(function (dispose, resource) {\r\n    return disposeOnce(new DisposeWithImpl(dispose, resource));\r\n});\r\n/**\r\n * Disposable represents a resource that must be\r\n * disposed/released. It aggregates a function to dispose\r\n * the resource and a handle to a key/id/handle/reference\r\n * that identifies the resource\r\n */\r\nvar DisposeWithImpl = /** @class */ (function () {\r\n    function DisposeWithImpl(dispose, resource) {\r\n        this._dispose = dispose;\r\n        this._resource = resource;\r\n    }\r\n    DisposeWithImpl.prototype.dispose = function () {\r\n        this._dispose(this._resource);\r\n    };\r\n    return DisposeWithImpl;\r\n}());\n\n/** @license MIT License (c) copyright 2010 original author or authors */\r\n/**\r\n * Aggregate a list of disposables into a DisposeAll\r\n */\r\nvar disposeAll = function (ds) {\r\n    var merged = reduce(merge, [], ds);\r\n    return merged.length === 0 ? disposeNone() : new DisposeAll(merged);\r\n};\r\n/**\r\n * Convenience to aggregate 2 disposables\r\n */\r\nvar disposeBoth = curry2(function (d1, d2) {\r\n    return disposeAll([d1, d2]);\r\n});\r\nvar merge = function (ds, d) {\r\n    return isDisposeNone(d) ? ds\r\n        : d instanceof DisposeAll ? concat(ds, d.disposables)\r\n            : append(d, ds);\r\n};\r\nvar DisposeAll = /** @class */ (function () {\r\n    function DisposeAll(disposables) {\r\n        this.disposables = disposables;\r\n    }\r\n    DisposeAll.prototype.dispose = function () {\r\n        throwIfErrors(disposeCollectErrors(this.disposables));\r\n    };\r\n    return DisposeAll;\r\n}());\r\n/**\r\n * Dispose all, safely collecting errors into an array\r\n */\r\nvar disposeCollectErrors = function (disposables) {\r\n    return reduce(appendIfError, [], disposables);\r\n};\r\n/**\r\n * Call dispose and if throws, append thrown error to errors\r\n */\r\nvar appendIfError = function (errors, d) {\r\n    try {\r\n        d.dispose();\r\n    }\r\n    catch (e) {\r\n        errors.push(e);\r\n    }\r\n    return errors;\r\n};\r\n/**\r\n * Throw DisposeAllError if errors is non-empty\r\n * @throws\r\n */\r\nvar throwIfErrors = function (errors) {\r\n    if (errors.length > 0) {\r\n        throw new DisposeAllError(errors.length + \" errors\", errors);\r\n    }\r\n};\r\nvar DisposeAllError = /** @class */ (function () {\r\n    function DisposeAllError(message, errors) {\r\n        this.name = 'DisposeAllError';\r\n        this.message = message;\r\n        this.errors = errors;\r\n        Error.call(this, message);\r\n        if (Error.captureStackTrace) {\r\n            Error.captureStackTrace(this, DisposeAllError);\r\n        }\r\n        this.stack = \"\" + this.stack + formatErrorStacks(this.errors);\r\n    }\r\n    return DisposeAllError;\r\n}());\r\nDisposeAllError.prototype = Object.create(Error.prototype);\r\nvar formatErrorStacks = function (errors) {\r\n    return reduce(formatErrorStack, '', errors);\r\n};\r\nvar formatErrorStack = function (s, e, i) {\r\n    return s + (\"\\n[\" + (i + 1) + \"] \" + e.stack);\r\n};\n\n/** @license MIT License (c) copyright 2010-2017 original author or authors */\r\n// Try to dispose the disposable.  If it throws, send\r\n// the error to sink.error with the provided Time value\r\nvar tryDispose = curry3(function (t, disposable, sink) {\r\n    try {\r\n        disposable.dispose();\r\n    }\r\n    catch (e) {\r\n        sink.error(t, e);\r\n    }\r\n});\n\nexport { DisposeAllError, dispose, disposeAll, disposeBoth, disposeNone, disposeOnce, disposeWith, isDisposeNone, tryDispose };\n//# sourceMappingURL=index.es.js.map\n","import { curry2, compose, apply, id, reduce, map as map$2, append, findIndex, remove, curry3 } from '@most/prelude';\nimport { asap, delay as delay$2, periodic as periodic$1, schedulerRelativeTo, currentTime, cancelTask } from '@most/scheduler';\nimport { disposeNone, disposeBoth, tryDispose as tryDispose$1, disposeOnce, disposeAll } from '@most/disposable';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\n/** @author Brian Cavalier */\r\n/** @author John Hann */\r\nfunction fatalError(e) {\r\n    setTimeout(rethrow, 0, e);\r\n}\r\nfunction rethrow(e) {\r\n    throw e;\r\n}\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\nvar propagateTask = function (run, value, sink) { return new PropagateRunEventTask(run, value, sink); };\r\nvar propagateEventTask = function (value, sink) { return new PropagateEventTask(value, sink); };\r\nvar propagateEndTask = function (sink) { return new PropagateEndTask(sink); };\r\nvar propagateErrorTask = function (value, sink) { return new PropagateErrorTask(value, sink); };\r\nvar PropagateTask = /** @class */ (function () {\r\n    function PropagateTask(sink) {\r\n        this.sink = sink;\r\n        this.active = true;\r\n    }\r\n    PropagateTask.prototype.dispose = function () {\r\n        this.active = false;\r\n    };\r\n    PropagateTask.prototype.run = function (t) {\r\n        if (!this.active) {\r\n            return;\r\n        }\r\n        this.runIfActive(t);\r\n    };\r\n    PropagateTask.prototype.error = function (t, e) {\r\n        // TODO: Remove this check and just do this.sink.error(t, e)?\r\n        if (!this.active) {\r\n            return fatalError(e);\r\n        }\r\n        this.sink.error(t, e);\r\n    };\r\n    return PropagateTask;\r\n}());\r\nvar PropagateRunEventTask = /** @class */ (function (_super) {\r\n    __extends(PropagateRunEventTask, _super);\r\n    function PropagateRunEventTask(runEvent, value, sink) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.runEvent = runEvent;\r\n        _this.value = value;\r\n        return _this;\r\n    }\r\n    PropagateRunEventTask.prototype.runIfActive = function (t) {\r\n        this.runEvent(t, this.value, this.sink);\r\n    };\r\n    return PropagateRunEventTask;\r\n}(PropagateTask));\r\nvar PropagateEventTask = /** @class */ (function (_super) {\r\n    __extends(PropagateEventTask, _super);\r\n    function PropagateEventTask(value, sink) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.value = value;\r\n        return _this;\r\n    }\r\n    PropagateEventTask.prototype.runIfActive = function (t) {\r\n        this.sink.event(t, this.value);\r\n    };\r\n    return PropagateEventTask;\r\n}(PropagateTask));\r\nvar PropagateEndTask = /** @class */ (function (_super) {\r\n    __extends(PropagateEndTask, _super);\r\n    function PropagateEndTask() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    PropagateEndTask.prototype.runIfActive = function (t) {\r\n        this.sink.end(t);\r\n    };\r\n    return PropagateEndTask;\r\n}(PropagateTask));\r\nvar PropagateErrorTask = /** @class */ (function (_super) {\r\n    __extends(PropagateErrorTask, _super);\r\n    function PropagateErrorTask(value, sink) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.value = value;\r\n        return _this;\r\n    }\r\n    PropagateErrorTask.prototype.runIfActive = function (t) {\r\n        this.sink.error(t, this.value);\r\n    };\r\n    return PropagateErrorTask;\r\n}(PropagateTask));\n\n/** @license MIT License (c) copyright 2010-2017 original author or authors */\r\nvar empty = function () { return EMPTY; };\r\nvar isCanonicalEmpty = function (stream) {\r\n    return stream === EMPTY;\r\n};\r\nvar containsCanonicalEmpty = function (streams) {\r\n    return streams.some(isCanonicalEmpty);\r\n};\r\nvar Empty = /** @class */ (function () {\r\n    function Empty() {\r\n    }\r\n    Empty.prototype.run = function (sink, scheduler) {\r\n        return asap(propagateEndTask(sink), scheduler);\r\n    };\r\n    return Empty;\r\n}());\r\nvar EMPTY = new Empty();\n\n/** @license MIT License (c) copyright 2010-2017 original author or authors */\r\nvar never = function () { return NEVER; };\r\nvar Never = /** @class */ (function () {\r\n    function Never() {\r\n    }\r\n    Never.prototype.run = function () {\r\n        return disposeNone();\r\n    };\r\n    return Never;\r\n}());\r\nvar NEVER = new Never();\n\n/** @license MIT License (c) copyright 2010-2017 original author or authors */\r\nvar at = function (t, x) { return new At(t, x); };\r\nvar At = /** @class */ (function () {\r\n    function At(t, x) {\r\n        this.time = t;\r\n        this.value = x;\r\n    }\r\n    At.prototype.run = function (sink, scheduler) {\r\n        return delay$2(this.time, propagateTask(runAt, this.value, sink), scheduler);\r\n    };\r\n    return At;\r\n}());\r\nfunction runAt(t, x, sink) {\r\n    sink.event(t, x);\r\n    sink.end(t);\r\n}\n\n/** @license MIT License (c) copyright 2010-2017 original author or authors */\r\nvar now = function (x) { return at(0, x); };\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\n/**\r\n * Create a stream of events that occur at a regular period\r\n * @param {Number} period periodicity of events\r\n * @returns {Stream} new stream of periodic events, the event value is undefined\r\n */\r\nvar periodic = function (period) {\r\n    return new Periodic(period);\r\n};\r\nvar Periodic = /** @class */ (function () {\r\n    function Periodic(period) {\r\n        this.period = period;\r\n    }\r\n    Periodic.prototype.run = function (sink, scheduler) {\r\n        return periodic$1(this.period, propagateEventTask(undefined, sink), scheduler);\r\n    };\r\n    return Periodic;\r\n}());\n\nvar newStream = function (run) { return new StreamImpl(run); };\r\nvar StreamImpl = /** @class */ (function () {\r\n    function StreamImpl(run) {\r\n        this.run = run;\r\n    }\r\n    return StreamImpl;\r\n}());\n\nvar SettableDisposable = /** @class */ (function () {\r\n    function SettableDisposable() {\r\n        this.disposable = undefined;\r\n        this.disposed = false;\r\n    }\r\n    SettableDisposable.prototype.setDisposable = function (disposable) {\r\n        if (this.disposable !== undefined) {\r\n            throw new Error('setDisposable called more than once');\r\n        }\r\n        this.disposable = disposable;\r\n        if (this.disposed) {\r\n            disposable.dispose();\r\n        }\r\n    };\r\n    SettableDisposable.prototype.dispose = function () {\r\n        if (this.disposed) {\r\n            return;\r\n        }\r\n        this.disposed = true;\r\n        if (this.disposable !== undefined) {\r\n            this.disposable.dispose();\r\n        }\r\n    };\r\n    return SettableDisposable;\r\n}());\n\n/** @license MIT License (c) copyright 2010-2017 original author or authors */\r\nvar runEffects = curry2(function (stream, scheduler) {\r\n    return new Promise(function (resolve, reject) {\r\n        return runStream(stream, scheduler, resolve, reject);\r\n    });\r\n});\r\nfunction runStream(stream, scheduler, resolve, reject) {\r\n    var disposable = new SettableDisposable();\r\n    var observer = new RunEffectsSink(resolve, reject, disposable);\r\n    disposable.setDisposable(stream.run(observer, scheduler));\r\n}\r\nvar RunEffectsSink = /** @class */ (function () {\r\n    function RunEffectsSink(end, error, disposable) {\r\n        this._end = end;\r\n        this._error = error;\r\n        this._disposable = disposable;\r\n        this.active = true;\r\n    }\r\n    RunEffectsSink.prototype.event = function () { };\r\n    RunEffectsSink.prototype.end = function () {\r\n        if (!this.active) {\r\n            return;\r\n        }\r\n        this.dispose(this._error, this._end, undefined);\r\n    };\r\n    RunEffectsSink.prototype.error = function (_t, e) {\r\n        this.dispose(this._error, this._error, e);\r\n    };\r\n    RunEffectsSink.prototype.dispose = function (error, end, x) {\r\n        this.active = false;\r\n        tryDispose(error, end, x, this._disposable);\r\n    };\r\n    return RunEffectsSink;\r\n}());\r\nfunction tryDispose(error, end, x, disposable) {\r\n    try {\r\n        disposable.dispose();\r\n    }\r\n    catch (e) {\r\n        error(e);\r\n        return;\r\n    }\r\n    end(x);\r\n}\n\n/**\r\n * Run a Stream, sending all its events to the provided Sink.\r\n */\r\nvar run = function (sink, scheduler, stream) {\r\n    return stream.run(sink, scheduler);\r\n};\n\nvar RelativeSink = /** @class */ (function () {\r\n    function RelativeSink(offset, sink) {\r\n        this.sink = sink;\r\n        this.offset = offset;\r\n    }\r\n    RelativeSink.prototype.event = function (t, x) {\r\n        this.sink.event(t + this.offset, x);\r\n    };\r\n    RelativeSink.prototype.error = function (t, e) {\r\n        this.sink.error(t + this.offset, e);\r\n    };\r\n    RelativeSink.prototype.end = function (t) {\r\n        this.sink.end(t + this.offset);\r\n    };\r\n    return RelativeSink;\r\n}());\n\n/**\r\n * Create a stream with its own local clock\r\n * This transforms time from the provided scheduler's clock to a stream-local\r\n * clock (which starts at 0), and then *back* to the scheduler's clock before\r\n * propagating events to sink.  In other words, upstream sources will see local times,\r\n * and downstream sinks will see non-local (original) times.\r\n */\r\nvar withLocalTime = function (origin, stream) {\r\n    return new WithLocalTime(origin, stream);\r\n};\r\nvar WithLocalTime = /** @class */ (function () {\r\n    function WithLocalTime(origin, source) {\r\n        this.origin = origin;\r\n        this.source = source;\r\n    }\r\n    WithLocalTime.prototype.run = function (sink, scheduler) {\r\n        return this.source.run(relativeSink(this.origin, sink), schedulerRelativeTo(this.origin, scheduler));\r\n    };\r\n    return WithLocalTime;\r\n}());\r\n/**\r\n * Accumulate offsets instead of nesting RelativeSinks, which can happen\r\n * with higher-order stream and combinators like continueWith when they're\r\n * applied recursively.\r\n */\r\nvar relativeSink = function (origin, sink) {\r\n    return sink instanceof RelativeSink\r\n        ? new RelativeSink(origin + sink.offset, sink.sink)\r\n        : new RelativeSink(origin, sink);\r\n};\n\nvar Pipe = /** @class */ (function () {\r\n    function Pipe(sink) {\r\n        this.sink = sink;\r\n    }\r\n    Pipe.prototype.end = function (t) {\r\n        return this.sink.end(t);\r\n    };\r\n    Pipe.prototype.error = function (t, e) {\r\n        return this.sink.error(t, e);\r\n    };\r\n    return Pipe;\r\n}());\n\n/** @license MIT License (c) copyright 2010 original author or authors */\r\n/**\r\n * Generalized feedback loop. Call a stepper function for each event. The stepper\r\n * will be called with 2 params: the current seed and the an event value.  It must\r\n * return a new { seed, value } pair. The `seed` will be fed back into the next\r\n * invocation of stepper, and the `value` will be propagated as the event value.\r\n * @param stepper loop step function\r\n * @param seed initial seed value passed to first stepper call\r\n * @param stream event stream\r\n * @returns new stream whose values are the `value` field of the objects\r\n * returned by the stepper\r\n */\r\nvar loop = function (stepper, seed, stream) {\r\n    return isCanonicalEmpty(stream) ? empty()\r\n        : new Loop(stepper, seed, stream);\r\n};\r\nvar Loop = /** @class */ (function () {\r\n    function Loop(stepper, seed, source) {\r\n        this.step = stepper;\r\n        this.seed = seed;\r\n        this.source = source;\r\n    }\r\n    Loop.prototype.run = function (sink, scheduler) {\r\n        return this.source.run(new LoopSink(this.step, this.seed, sink), scheduler);\r\n    };\r\n    return Loop;\r\n}());\r\nvar LoopSink = /** @class */ (function (_super) {\r\n    __extends(LoopSink, _super);\r\n    function LoopSink(stepper, seed, sink) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.step = stepper;\r\n        _this.seed = seed;\r\n        return _this;\r\n    }\r\n    LoopSink.prototype.event = function (t, x) {\r\n        var result = this.step(this.seed, x);\r\n        this.seed = result.seed;\r\n        this.sink.event(t, result.value);\r\n    };\r\n    return LoopSink;\r\n}(Pipe));\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\n/**\r\n * Create a stream containing successive reduce results of applying f to\r\n * the previous reduce result and the current stream item.\r\n * @param f reducer function\r\n * @param initial initial value\r\n * @param stream stream to scan\r\n * @returns new stream containing successive reduce results\r\n */\r\nvar scan = function (f, initial, stream) {\r\n    return new Scan(f, initial, stream);\r\n};\r\nvar Scan = /** @class */ (function () {\r\n    function Scan(f, z, source) {\r\n        this.source = source;\r\n        this.f = f;\r\n        this.value = z;\r\n    }\r\n    Scan.prototype.run = function (sink, scheduler) {\r\n        var d1 = asap(propagateEventTask(this.value, sink), scheduler);\r\n        var d2 = this.source.run(new ScanSink(this.f, this.value, sink), scheduler);\r\n        return disposeBoth(d1, d2);\r\n    };\r\n    return Scan;\r\n}());\r\nvar ScanSink = /** @class */ (function (_super) {\r\n    __extends(ScanSink, _super);\r\n    function ScanSink(f, z, sink) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.f = f;\r\n        _this.value = z;\r\n        return _this;\r\n    }\r\n    ScanSink.prototype.event = function (t, x) {\r\n        var f = this.f;\r\n        this.value = f(this.value, x);\r\n        this.sink.event(t, this.value);\r\n    };\r\n    return ScanSink;\r\n}(Pipe));\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\nvar continueWith = function (f, stream) {\r\n    return new ContinueWith(f, stream);\r\n};\r\nvar ContinueWith = /** @class */ (function () {\r\n    function ContinueWith(f, source) {\r\n        this.f = f;\r\n        this.source = source;\r\n    }\r\n    ContinueWith.prototype.run = function (sink, scheduler) {\r\n        return new ContinueWithSink(this.f, this.source, sink, scheduler);\r\n    };\r\n    return ContinueWith;\r\n}());\r\nvar ContinueWithSink = /** @class */ (function (_super) {\r\n    __extends(ContinueWithSink, _super);\r\n    function ContinueWithSink(f, source, sink, scheduler) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.f = f;\r\n        _this.scheduler = scheduler;\r\n        _this.active = true;\r\n        _this.disposable = disposeOnce(source.run(_this, scheduler));\r\n        return _this;\r\n    }\r\n    ContinueWithSink.prototype.event = function (t, x) {\r\n        if (!this.active) {\r\n            return;\r\n        }\r\n        this.sink.event(t, x);\r\n    };\r\n    ContinueWithSink.prototype.end = function (t) {\r\n        if (!this.active) {\r\n            return;\r\n        }\r\n        tryDispose$1(t, this.disposable, this.sink);\r\n        this.startNext(t, this.sink);\r\n    };\r\n    ContinueWithSink.prototype.startNext = function (t, sink) {\r\n        try {\r\n            this.disposable = this.continue(this.f, t, sink);\r\n        }\r\n        catch (e) {\r\n            sink.error(t, e);\r\n        }\r\n    };\r\n    ContinueWithSink.prototype.continue = function (f, t, sink) {\r\n        return run(sink, this.scheduler, withLocalTime(t, f()));\r\n    };\r\n    ContinueWithSink.prototype.dispose = function () {\r\n        this.active = false;\r\n        return this.disposable.dispose();\r\n    };\r\n    return ContinueWithSink;\r\n}(Pipe));\n\n/** @license MIT License (c) copyright 2010-2017 original author or authors */\r\nvar startWith = function (x, stream) {\r\n    return continueWith(function () { return stream; }, now(x));\r\n};\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\nvar Filter = /** @class */ (function () {\r\n    function Filter(p, source) {\r\n        this.p = p;\r\n        this.source = source;\r\n    }\r\n    Filter.prototype.run = function (sink, scheduler) {\r\n        return this.source.run(new FilterSink(this.p, sink), scheduler);\r\n    };\r\n    /**\r\n     * Create a filtered source, fusing adjacent filter.filter if possible\r\n     * @param {function(x:*):boolean} p filtering predicate\r\n     * @param {{run:function}} source source to filter\r\n     * @returns {Filter} filtered source\r\n     */\r\n    Filter.create = function (p, source) {\r\n        if (isCanonicalEmpty(source)) {\r\n            return source;\r\n        }\r\n        if (source instanceof Filter) {\r\n            return new Filter(and(source.p, p), source.source);\r\n        }\r\n        return new Filter(p, source);\r\n    };\r\n    return Filter;\r\n}());\r\nvar FilterSink = /** @class */ (function (_super) {\r\n    __extends(FilterSink, _super);\r\n    function FilterSink(p, sink) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.p = p;\r\n        return _this;\r\n    }\r\n    FilterSink.prototype.event = function (t, x) {\r\n        var p = this.p;\r\n        p(x) && this.sink.event(t, x);\r\n    };\r\n    return FilterSink;\r\n}(Pipe));\r\nvar and = function (p, q) { return function (x) { return p(x) && q(x); }; };\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\nvar FilterMap = /** @class */ (function () {\r\n    function FilterMap(p, f, source) {\r\n        this.p = p;\r\n        this.f = f;\r\n        this.source = source;\r\n    }\r\n    FilterMap.prototype.run = function (sink, scheduler) {\r\n        return this.source.run(new FilterMapSink(this.p, this.f, sink), scheduler);\r\n    };\r\n    return FilterMap;\r\n}());\r\nvar FilterMapSink = /** @class */ (function (_super) {\r\n    __extends(FilterMapSink, _super);\r\n    function FilterMapSink(p, f, sink) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.p = p;\r\n        _this.f = f;\r\n        return _this;\r\n    }\r\n    FilterMapSink.prototype.event = function (t, x) {\r\n        var f = this.f;\r\n        var p = this.p;\r\n        p(x) && this.sink.event(t, f(x));\r\n    };\r\n    return FilterMapSink;\r\n}(Pipe));\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\nvar Map = /** @class */ (function () {\r\n    function Map(f, source) {\r\n        this.f = f;\r\n        this.source = source;\r\n    }\r\n    Map.prototype.run = function (sink, scheduler) {\r\n        return this.source.run(new MapSink(this.f, sink), scheduler);\r\n    };\r\n    /**\r\n     * Create a mapped source, fusing adjacent map.map, filter.map,\r\n     * and filter.map.map if possible\r\n     * @param {function(*):*} f mapping function\r\n     * @param {{run:function}} source source to map\r\n     * @returns {Map|FilterMap} mapped source, possibly fused\r\n     */\r\n    Map.create = function (f, source) {\r\n        if (isCanonicalEmpty(source)) {\r\n            return empty();\r\n        }\r\n        if (source instanceof Map) {\r\n            return new Map(compose(f, source.f), source.source);\r\n        }\r\n        if (source instanceof Filter) {\r\n            return new FilterMap(source.p, f, source.source);\r\n        }\r\n        return new Map(f, source);\r\n    };\r\n    return Map;\r\n}());\r\nvar MapSink = /** @class */ (function (_super) {\r\n    __extends(MapSink, _super);\r\n    function MapSink(f, sink) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.f = f;\r\n        return _this;\r\n    }\r\n    MapSink.prototype.event = function (t, x) {\r\n        var f = this.f;\r\n        this.sink.event(t, f(x));\r\n    };\r\n    return MapSink;\r\n}(Pipe));\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\n/**\r\n * Transform each value in the stream by applying f to each\r\n * @param f mapping function\r\n * @param stream stream to map\r\n * @returns stream containing items transformed by f\r\n */\r\nvar map = function (f, stream) {\r\n    return Map.create(f, stream);\r\n};\r\n/**\r\n* Replace each value in the stream with x\r\n* @param x\r\n* @param stream\r\n* @returns stream containing items replaced with x\r\n*/\r\nvar constant = function (x, stream) {\r\n    return map(function () { return x; }, stream);\r\n};\r\n/**\r\n* Perform a side effect for each item in the stream\r\n* @param f side effect to execute for each item. The return value will be discarded.\r\n* @param stream stream to tap\r\n* @returns new stream containing the same items as this stream\r\n*/\r\nvar tap = function (f, stream) {\r\n    return new Tap(f, stream);\r\n};\r\nvar Tap = /** @class */ (function () {\r\n    function Tap(f, source) {\r\n        this.source = source;\r\n        this.f = f;\r\n    }\r\n    Tap.prototype.run = function (sink, scheduler) {\r\n        return this.source.run(new TapSink(this.f, sink), scheduler);\r\n    };\r\n    return Tap;\r\n}());\r\nvar TapSink = /** @class */ (function (_super) {\r\n    __extends(TapSink, _super);\r\n    function TapSink(f, sink) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.f = f;\r\n        return _this;\r\n    }\r\n    TapSink.prototype.event = function (t, x) {\r\n        var f = this.f;\r\n        f(x);\r\n        this.sink.event(t, x);\r\n    };\r\n    return TapSink;\r\n}(Pipe));\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\nvar IndexSink = /** @class */ (function (_super) {\r\n    __extends(IndexSink, _super);\r\n    function IndexSink(i, sink) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.index = i;\r\n        _this.active = true;\r\n        _this.value = undefined;\r\n        return _this;\r\n    }\r\n    IndexSink.prototype.event = function (t, x) {\r\n        if (!this.active) {\r\n            return;\r\n        }\r\n        this.value = x;\r\n        this.sink.event(t, this);\r\n    };\r\n    IndexSink.prototype.end = function (t) {\r\n        if (!this.active) {\r\n            return;\r\n        }\r\n        this.active = false;\r\n        this.sink.event(t, this);\r\n    };\r\n    return IndexSink;\r\n}(Pipe));\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\n/** @author Brian Cavalier */\r\n/** @author John Hann */\r\n/**\r\n * TODO: find a better way (without `any`)\r\n */\r\nfunction invoke(f, args) {\r\n    /* eslint complexity: [2,7] */\r\n    switch (args.length) {\r\n        case 0: return f();\r\n        case 1: return f(args[0]);\r\n        case 2: return f(args[0], args[1]);\r\n        case 3: return f(args[0], args[1], args[2]);\r\n        case 4: return f(args[0], args[1], args[2], args[3]);\r\n        case 5: return f(args[0], args[1], args[2], args[3], args[4]);\r\n        default:\r\n            return f.apply(undefined, args);\r\n    }\r\n}\n\n/** @license MIT License (c) copyright 2010 original author or authors */\r\n/**\r\n * Combine latest events from two streams\r\n * @param f function to combine most recent events\r\n * @param stream1\r\n * @param stream2\r\n * @returns stream containing the result of applying f to the most recent\r\n *  event of each input stream, whenever a new event arrives on any stream.\r\n */\r\nvar combine = function (f, stream1, stream2) {\r\n    return combineArray(f, [stream1, stream2]);\r\n};\r\n/**\r\n* Combine latest events from all input streams\r\n* @param f function to combine most recent events\r\n* @param streams most recent events\r\n* @returns stream containing the result of applying f to the most recent\r\n*  event of each input stream, whenever a new event arrives on any stream.\r\n*/\r\nvar combineArray = function (f, streams) {\r\n    return streams.length === 0 || containsCanonicalEmpty(streams) ? empty()\r\n        : streams.length === 1 ? map(f, streams[0])\r\n            : new Combine(f, streams);\r\n};\r\nvar Combine = /** @class */ (function () {\r\n    function Combine(f, sources) {\r\n        this.f = f;\r\n        this.sources = sources;\r\n    }\r\n    Combine.prototype.run = function (sink, scheduler) {\r\n        var l = this.sources.length;\r\n        var disposables = new Array(l);\r\n        var sinks = new Array(l);\r\n        var mergeSink = new CombineSink(disposables, sinks.length, sink, this.f);\r\n        for (var indexSink = void 0, i = 0; i < l; ++i) {\r\n            indexSink = sinks[i] = new IndexSink(i, mergeSink);\r\n            disposables[i] = this.sources[i].run(indexSink, scheduler);\r\n        }\r\n        return disposeAll(disposables);\r\n    };\r\n    return Combine;\r\n}());\r\nvar CombineSink = /** @class */ (function (_super) {\r\n    __extends(CombineSink, _super);\r\n    function CombineSink(disposables, length, sink, f) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.disposables = disposables;\r\n        _this.f = f;\r\n        _this.awaiting = length;\r\n        _this.values = new Array(length);\r\n        _this.hasValue = new Array(length).fill(false);\r\n        _this.activeCount = length;\r\n        return _this;\r\n    }\r\n    CombineSink.prototype.event = function (t, indexedValue) {\r\n        if (!indexedValue.active) {\r\n            this.dispose(t, indexedValue.index);\r\n            return;\r\n        }\r\n        var i = indexedValue.index;\r\n        var awaiting = this.updateReady(i);\r\n        this.values[i] = indexedValue.value;\r\n        if (awaiting === 0) {\r\n            this.sink.event(t, invoke(this.f, this.values));\r\n        }\r\n    };\r\n    CombineSink.prototype.updateReady = function (index) {\r\n        if (this.awaiting > 0) {\r\n            if (!this.hasValue[index]) {\r\n                this.hasValue[index] = true;\r\n                this.awaiting -= 1;\r\n            }\r\n        }\r\n        return this.awaiting;\r\n    };\r\n    CombineSink.prototype.dispose = function (t, index) {\r\n        tryDispose$1(t, this.disposables[index], this.sink);\r\n        if (--this.activeCount === 0) {\r\n            this.sink.end(t);\r\n        }\r\n    };\r\n    return CombineSink;\r\n}(Pipe));\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\n/**\r\n * Assume fs is a stream containing functions, and apply the latest function\r\n * in fs to the latest value in xs.\r\n * fs:         --f---------g--------h------>\r\n * xs:         -a-------b-------c-------d-->\r\n * ap(fs, xs): --fa-----fb-gb---gc--hc--hd->\r\n * @param {Stream} fs stream of functions to apply to the latest x\r\n * @param {Stream} xs stream of values to which to apply all the latest f\r\n * @returns {Stream} stream containing all the applications of fs to xs\r\n */\r\nfunction ap(fs, xs) {\r\n    return combine(apply, fs, xs);\r\n}\n\n/** @license MIT License (c) copyright 2010 original author or authors */\r\nvar mergeConcurrently = function (concurrency, stream) {\r\n    return mergeMapConcurrently(id, concurrency, stream);\r\n};\r\nvar mergeMapConcurrently = function (f, concurrency, stream) {\r\n    return isCanonicalEmpty(stream) ? empty()\r\n        : new MergeConcurrently(f, concurrency, stream);\r\n};\r\nvar MergeConcurrently = /** @class */ (function () {\r\n    function MergeConcurrently(f, concurrency, source) {\r\n        this.f = f;\r\n        this.concurrency = concurrency;\r\n        this.source = source;\r\n    }\r\n    MergeConcurrently.prototype.run = function (sink, scheduler) {\r\n        return new Outer(this.f, this.concurrency, this.source, sink, scheduler);\r\n    };\r\n    return MergeConcurrently;\r\n}());\r\nvar isNonEmpty = function (array) { return array.length > 0; };\r\nvar Outer = /** @class */ (function () {\r\n    function Outer(f, concurrency, source, sink, scheduler) {\r\n        this.f = f;\r\n        this.concurrency = concurrency;\r\n        this.sink = sink;\r\n        this.scheduler = scheduler;\r\n        this.pending = [];\r\n        this.current = [];\r\n        this.disposable = disposeOnce(source.run(this, scheduler));\r\n        this.active = true;\r\n    }\r\n    Outer.prototype.event = function (t, x) {\r\n        this.addInner(t, x);\r\n    };\r\n    Outer.prototype.addInner = function (t, x) {\r\n        if (this.current.length < this.concurrency) {\r\n            this.startInner(t, x);\r\n        }\r\n        else {\r\n            this.pending.push(x);\r\n        }\r\n    };\r\n    Outer.prototype.startInner = function (t, x) {\r\n        try {\r\n            this.initInner(t, x);\r\n        }\r\n        catch (e) {\r\n            this.error(t, e);\r\n        }\r\n    };\r\n    Outer.prototype.initInner = function (t, x) {\r\n        var innerSink = new Inner(t, this, this.sink);\r\n        innerSink.disposable = mapAndRun(this.f, t, x, innerSink, this.scheduler);\r\n        this.current.push(innerSink);\r\n    };\r\n    Outer.prototype.end = function (t) {\r\n        this.active = false;\r\n        tryDispose$1(t, this.disposable, this.sink);\r\n        this.checkEnd(t);\r\n    };\r\n    Outer.prototype.error = function (t, e) {\r\n        this.active = false;\r\n        this.sink.error(t, e);\r\n    };\r\n    Outer.prototype.dispose = function () {\r\n        this.active = false;\r\n        this.pending.length = 0;\r\n        this.disposable.dispose();\r\n        disposeAll(this.current).dispose();\r\n    };\r\n    Outer.prototype.endInner = function (t, inner) {\r\n        var i = this.current.indexOf(inner);\r\n        if (i >= 0) {\r\n            this.current.splice(i, 1);\r\n        }\r\n        tryDispose$1(t, inner, this);\r\n        var pending = this.pending;\r\n        if (isNonEmpty(pending)) {\r\n            this.startInner(t, pending.shift());\r\n        }\r\n        else {\r\n            this.checkEnd(t);\r\n        }\r\n    };\r\n    Outer.prototype.checkEnd = function (t) {\r\n        if (!this.active && this.current.length === 0) {\r\n            this.sink.end(t);\r\n        }\r\n    };\r\n    return Outer;\r\n}());\r\nvar mapAndRun = function (f, t, x, sink, scheduler) {\r\n    return f(x).run(sink, schedulerRelativeTo(t, scheduler));\r\n};\r\nvar Inner = /** @class */ (function () {\r\n    function Inner(time, outer, sink) {\r\n        this.time = time;\r\n        this.outer = outer;\r\n        this.sink = sink;\r\n        this.disposable = disposeNone();\r\n    }\r\n    Inner.prototype.event = function (t, x) {\r\n        this.sink.event(t + this.time, x);\r\n    };\r\n    Inner.prototype.end = function (t) {\r\n        this.outer.endInner(t + this.time, this);\r\n    };\r\n    Inner.prototype.error = function (t, e) {\r\n        this.outer.error(t + this.time, e);\r\n    };\r\n    Inner.prototype.dispose = function () {\r\n        return this.disposable.dispose();\r\n    };\r\n    return Inner;\r\n}());\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\n/**\r\n * Map each value in the stream to a new stream, and merge it into the\r\n * returned outer stream. Event arrival times are preserved.\r\n * @param f chaining function, must return a Stream\r\n * @param stream\r\n * @returns new stream containing all events from each stream returned by f\r\n */\r\nvar chain = function (f, stream) { return mergeMapConcurrently(f, Infinity, stream); };\r\n/**\r\n * Monadic join. Flatten a Stream<Stream<X>> to Stream<X> by merging inner\r\n * streams to the outer. Event arrival times are preserved.\r\n * @param stream stream of streams\r\n * @returns new stream containing all events of all inner streams\r\n */\r\nvar join = function (stream) { return mergeConcurrently(Infinity, stream); };\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\n/**\r\n * Map each value in stream to a new stream, and concatenate them all\r\n * stream:              -a---b---cX\r\n * f(a):                 1-1-1-1X\r\n * f(b):                        -2-2-2-2X\r\n * f(c):                                -3-3-3-3X\r\n * stream.concatMap(f): -1-1-1-1-2-2-2-2-3-3-3-3X\r\n * @param f function to map each value to a stream\r\n * @param stream\r\n * @returns new stream containing all events from each stream returned by f\r\n */\r\nvar concatMap = function (f, stream) {\r\n    return mergeMapConcurrently(f, 1, stream);\r\n};\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\n/**\r\n * @returns stream containing events from two streams in time order.\r\n * If two events are simultaneous they will be merged in arbitrary order.\r\n */\r\nfunction merge(stream1, stream2) {\r\n    return mergeArray([stream1, stream2]);\r\n}\r\n/**\r\n * @param streams array of stream to merge\r\n * @returns stream containing events from all input observables\r\n * in time order.  If two events are simultaneous they will be merged in\r\n * arbitrary order.\r\n */\r\nvar mergeArray = function (streams) {\r\n    return mergeStreams(withoutCanonicalEmpty(streams));\r\n};\r\n/**\r\n * This implements fusion/flattening for merge.  It will\r\n * fuse adjacent merge operations.  For example:\r\n * - a.merge(b).merge(c) effectively becomes merge(a, b, c)\r\n * - merge(a, merge(b, c)) effectively becomes merge(a, b, c)\r\n * It does this by concatenating the sources arrays of\r\n * any nested Merge sources, in effect \"flattening\" nested\r\n * merge operations into a single merge.\r\n * TODO: use {@link MergeArray}\r\n */\r\nvar mergeStreams = function (streams) {\r\n    return streams.length === 0 ? empty()\r\n        : streams.length === 1 ? streams[0]\r\n            : new Merge(reduce(appendSources, [], streams));\r\n};\r\nvar withoutCanonicalEmpty = function (streams) {\r\n    return streams.filter(isNotCanonicalEmpty);\r\n};\r\nvar isNotCanonicalEmpty = function (stream) {\r\n    return !isCanonicalEmpty(stream);\r\n};\r\nvar appendSources = function (sources, stream) {\r\n    return sources.concat(stream instanceof Merge ? stream.sources : stream);\r\n};\r\nvar Merge = /** @class */ (function () {\r\n    function Merge(sources) {\r\n        this.sources = sources;\r\n    }\r\n    Merge.prototype.run = function (sink, scheduler) {\r\n        var l = this.sources.length;\r\n        var disposables = new Array(l);\r\n        var sinks = new Array(l);\r\n        var mergeSink = new MergeSink(disposables, sinks, sink);\r\n        for (var indexSink = void 0, i = 0; i < l; ++i) {\r\n            indexSink = sinks[i] = new IndexSink(i, mergeSink);\r\n            disposables[i] = this.sources[i].run(indexSink, scheduler);\r\n        }\r\n        return disposeAll(disposables);\r\n    };\r\n    return Merge;\r\n}());\r\nvar MergeSink = /** @class */ (function (_super) {\r\n    __extends(MergeSink, _super);\r\n    function MergeSink(disposables, sinks, sink) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.disposables = disposables;\r\n        _this.activeCount = sinks.length;\r\n        return _this;\r\n    }\r\n    MergeSink.prototype.event = function (t, indexValue) {\r\n        if (!indexValue.active) {\r\n            this.dispose(t, indexValue.index);\r\n            return;\r\n        }\r\n        this.sink.event(t, indexValue.value);\r\n    };\r\n    MergeSink.prototype.dispose = function (t, index) {\r\n        tryDispose$1(t, this.disposables[index], this.sink);\r\n        if (--this.activeCount === 0) {\r\n            this.sink.end(t);\r\n        }\r\n    };\r\n    return MergeSink;\r\n}(Pipe));\n\n/** @license MIT License (c) copyright 2010 original author or authors */\r\nvar sample = function (values, sampler) {\r\n    return snapshot(function (x) { return x; }, values, sampler);\r\n};\r\nvar snapshot = function (f, values, sampler) {\r\n    return isCanonicalEmpty(sampler) || isCanonicalEmpty(values)\r\n        ? empty()\r\n        : new Snapshot(f, values, sampler);\r\n};\r\nvar Snapshot = /** @class */ (function () {\r\n    function Snapshot(f, values, sampler) {\r\n        this.f = f;\r\n        this.values = values;\r\n        this.sampler = sampler;\r\n    }\r\n    Snapshot.prototype.run = function (sink, scheduler) {\r\n        var sampleSink = new SnapshotSink(this.f, sink);\r\n        var valuesDisposable = this.values.run(sampleSink.latest, scheduler);\r\n        var samplerDisposable = this.sampler.run(sampleSink, scheduler);\r\n        return disposeBoth(samplerDisposable, valuesDisposable);\r\n    };\r\n    return Snapshot;\r\n}());\r\nvar SnapshotSink = /** @class */ (function (_super) {\r\n    __extends(SnapshotSink, _super);\r\n    function SnapshotSink(f, sink) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.f = f;\r\n        _this.latest = new LatestValueSink(_this);\r\n        return _this;\r\n    }\r\n    SnapshotSink.prototype.event = function (t, x) {\r\n        if (this.latest.hasValue) {\r\n            var f = this.f;\r\n            // TODO: value should be boxed to avoid ! bang\r\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\r\n            this.sink.event(t, f(this.latest.value, x));\r\n        }\r\n    };\r\n    return SnapshotSink;\r\n}(Pipe));\r\nvar LatestValueSink = /** @class */ (function (_super) {\r\n    __extends(LatestValueSink, _super);\r\n    function LatestValueSink(sink) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.hasValue = false;\r\n        return _this;\r\n    }\r\n    LatestValueSink.prototype.event = function (_t, x) {\r\n        this.value = x;\r\n        this.hasValue = true;\r\n    };\r\n    LatestValueSink.prototype.end = function () { };\r\n    return LatestValueSink;\r\n}(Pipe));\n\n/** @license MIT License (c) copyright 2010 original author or authors */\r\n// Construct a constrained bounds\r\nvar boundsFrom = function (unsafeMin, unsafeMax) {\r\n    var min = Math.max(0, unsafeMin);\r\n    var max = Math.max(min, unsafeMax);\r\n    return { min: min, max: max };\r\n};\r\n// Combine 2 bounds by narrowing min and max\r\nvar mergeBounds = function (b1, b2) {\r\n    return boundsFrom(b1.min + b2.min, Math.min(b1.max, b1.min + b2.max));\r\n};\r\n// Nil bounds excludes all slice indices\r\nvar isNilBounds = function (b) {\r\n    return b.min >= b.max;\r\n};\r\n// Infinite bounds includes all slice indices\r\nvar isInfiniteBounds = function (b) {\r\n    return b.min <= 0 && b.max === Infinity;\r\n};\n\n// TODO: split into smaller files\r\n/**\r\n * @param n\r\n * @param stream\r\n * @returns new stream containing only up to the first n items from stream\r\n */\r\nvar take = function (n, stream) {\r\n    return slice(0, n, stream);\r\n};\r\n/**\r\n * @param n\r\n * @param stream\r\n * @returns new stream with the first n items removed\r\n */\r\nvar skip = function (n, stream) {\r\n    return slice(n, Infinity, stream);\r\n};\r\n/**\r\n * Slice a stream by index. Negative start/end indexes are not supported\r\n * @param start\r\n * @param end\r\n * @param stream\r\n * @returns stream containing items where start <= index < end\r\n */\r\nvar slice = function (start, end, stream) {\r\n    return sliceBounds(boundsFrom(start, end), stream);\r\n};\r\nvar sliceBounds = function (bounds, stream) {\r\n    return isSliceEmpty(bounds, stream) ? empty()\r\n        : stream instanceof Map ? commuteMapSlice(bounds, stream)\r\n            : stream instanceof Slice ? fuseSlice(bounds, stream)\r\n                : createSlice(bounds, stream);\r\n};\r\nvar isSliceEmpty = function (bounds, stream) {\r\n    return isCanonicalEmpty(stream) || isNilBounds(bounds);\r\n};\r\nvar createSlice = function (bounds, stream) {\r\n    return isInfiniteBounds(bounds) ? stream : new Slice(bounds, stream);\r\n};\r\nvar commuteMapSlice = function (bounds, mapStream) {\r\n    return Map.create(mapStream.f, sliceBounds(bounds, mapStream.source));\r\n};\r\nvar fuseSlice = function (bounds, sliceStream) {\r\n    return sliceBounds(mergeBounds(sliceStream.bounds, bounds), sliceStream.source);\r\n};\r\nvar Slice = /** @class */ (function () {\r\n    function Slice(bounds, source) {\r\n        this.source = source;\r\n        this.bounds = bounds;\r\n    }\r\n    Slice.prototype.run = function (sink, scheduler) {\r\n        var disposable = new SettableDisposable();\r\n        var sliceSink = new SliceSink(this.bounds.min, this.bounds.max - this.bounds.min, sink, disposable);\r\n        disposable.setDisposable(this.source.run(sliceSink, scheduler));\r\n        return disposable;\r\n    };\r\n    return Slice;\r\n}());\r\nvar SliceSink = /** @class */ (function (_super) {\r\n    __extends(SliceSink, _super);\r\n    function SliceSink(skip, take, sink, disposable) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.skip = skip;\r\n        _this.take = take;\r\n        _this.disposable = disposable;\r\n        return _this;\r\n    }\r\n    SliceSink.prototype.event = function (t, x) {\r\n        /* eslint complexity: [1, 4] */\r\n        if (this.skip > 0) {\r\n            this.skip -= 1;\r\n            return;\r\n        }\r\n        if (this.take === 0) {\r\n            return;\r\n        }\r\n        this.take -= 1;\r\n        this.sink.event(t, x);\r\n        if (this.take === 0) {\r\n            this.disposable.dispose();\r\n            this.sink.end(t);\r\n        }\r\n    };\r\n    return SliceSink;\r\n}(Pipe));\r\nvar takeWhile = function (p, stream) {\r\n    return isCanonicalEmpty(stream) ? empty()\r\n        : new TakeWhile(p, stream);\r\n};\r\nvar TakeWhile = /** @class */ (function () {\r\n    function TakeWhile(p, source) {\r\n        this.p = p;\r\n        this.source = source;\r\n    }\r\n    TakeWhile.prototype.run = function (sink, scheduler) {\r\n        var disposable = new SettableDisposable();\r\n        var takeWhileSink = new TakeWhileSink(this.p, sink, disposable);\r\n        disposable.setDisposable(this.source.run(takeWhileSink, scheduler));\r\n        return disposable;\r\n    };\r\n    return TakeWhile;\r\n}());\r\nvar TakeWhileSink = /** @class */ (function (_super) {\r\n    __extends(TakeWhileSink, _super);\r\n    function TakeWhileSink(p, sink, disposable) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.p = p;\r\n        _this.active = true;\r\n        _this.disposable = disposable;\r\n        return _this;\r\n    }\r\n    TakeWhileSink.prototype.event = function (t, x) {\r\n        if (!this.active) {\r\n            return;\r\n        }\r\n        var p = this.p;\r\n        this.active = p(x);\r\n        if (this.active) {\r\n            this.sink.event(t, x);\r\n        }\r\n        else {\r\n            this.disposable.dispose();\r\n            this.sink.end(t);\r\n        }\r\n    };\r\n    return TakeWhileSink;\r\n}(Pipe));\r\nvar skipWhile = function (p, stream) {\r\n    return isCanonicalEmpty(stream) ? empty()\r\n        : new SkipWhile(p, stream);\r\n};\r\nvar SkipWhile = /** @class */ (function () {\r\n    function SkipWhile(p, source) {\r\n        this.p = p;\r\n        this.source = source;\r\n    }\r\n    SkipWhile.prototype.run = function (sink, scheduler) {\r\n        return this.source.run(new SkipWhileSink(this.p, sink), scheduler);\r\n    };\r\n    return SkipWhile;\r\n}());\r\nvar SkipWhileSink = /** @class */ (function (_super) {\r\n    __extends(SkipWhileSink, _super);\r\n    function SkipWhileSink(p, sink) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.p = p;\r\n        _this.skipping = true;\r\n        return _this;\r\n    }\r\n    SkipWhileSink.prototype.event = function (t, x) {\r\n        if (this.skipping) {\r\n            var p = this.p;\r\n            this.skipping = p(x);\r\n            if (this.skipping) {\r\n                return;\r\n            }\r\n        }\r\n        this.sink.event(t, x);\r\n    };\r\n    return SkipWhileSink;\r\n}(Pipe));\r\nvar skipAfter = function (p, stream) {\r\n    return isCanonicalEmpty(stream) ? empty()\r\n        : new SkipAfter(p, stream);\r\n};\r\nvar SkipAfter = /** @class */ (function () {\r\n    function SkipAfter(p, source) {\r\n        this.p = p;\r\n        this.source = source;\r\n    }\r\n    SkipAfter.prototype.run = function (sink, scheduler) {\r\n        return this.source.run(new SkipAfterSink(this.p, sink), scheduler);\r\n    };\r\n    return SkipAfter;\r\n}());\r\nvar SkipAfterSink = /** @class */ (function (_super) {\r\n    __extends(SkipAfterSink, _super);\r\n    function SkipAfterSink(p, sink) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.p = p;\r\n        _this.skipping = false;\r\n        return _this;\r\n    }\r\n    SkipAfterSink.prototype.event = function (t, x) {\r\n        if (this.skipping) {\r\n            return;\r\n        }\r\n        var p = this.p;\r\n        this.skipping = p(x);\r\n        this.sink.event(t, x);\r\n        if (this.skipping) {\r\n            this.sink.end(t);\r\n        }\r\n    };\r\n    return SkipAfterSink;\r\n}(Pipe));\n\n/** @license MIT License (c) copyright 2017 original author or authors */\r\nvar withItems = function (items, stream) {\r\n    return zipItems(keepLeft, items, stream);\r\n};\r\nvar zipItems = function (f, items, stream) {\r\n    return isCanonicalEmpty(stream) || items.length === 0\r\n        ? empty()\r\n        : new ZipItems(f, items, take(items.length, stream));\r\n};\r\nvar keepLeft = function (a) { return a; };\r\nvar ZipItems = /** @class */ (function () {\r\n    function ZipItems(f, items, source) {\r\n        this.f = f;\r\n        this.items = items;\r\n        this.source = source;\r\n    }\r\n    ZipItems.prototype.run = function (sink, scheduler) {\r\n        return this.source.run(new ZipItemsSink(this.f, this.items, sink), scheduler);\r\n    };\r\n    return ZipItems;\r\n}());\r\nvar ZipItemsSink = /** @class */ (function (_super) {\r\n    __extends(ZipItemsSink, _super);\r\n    function ZipItemsSink(f, items, sink) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.f = f;\r\n        _this.items = items;\r\n        _this.index = 0;\r\n        return _this;\r\n    }\r\n    ZipItemsSink.prototype.event = function (t, b) {\r\n        var f = this.f;\r\n        this.sink.event(t, f(this.items[this.index], b));\r\n        this.index += 1;\r\n    };\r\n    return ZipItemsSink;\r\n}(Pipe));\n\n// Copied and modified from https://github.com/invertase/denque\r\n// MIT License\r\n// These constants were extracted directly from denque's shift()\r\n// It's not clear exactly why the authors chose these particular\r\n// values, but given denque's stated goals, it seems likely that\r\n// they were chosen for speed/memory reasons.\r\n// Max value of _head at which Queue is willing to shink\r\n// its internal array\r\nvar HEAD_MAX_SHRINK = 2;\r\n// Min value of _tail at which Queue is willing to shink\r\n// its internal array\r\nvar TAIL_MIN_SHRINK = 10000;\r\nvar Queue = /** @class */ (function () {\r\n    function Queue() {\r\n        this.head = 0;\r\n        this.tail = 0;\r\n        this.capacityMask = 0x3;\r\n        this.list = new Array(4);\r\n    }\r\n    Queue.prototype.push = function (x) {\r\n        var tail = this.tail;\r\n        this.list[tail] = x;\r\n        this.tail = (tail + 1) & this.capacityMask;\r\n        if (this.tail === this.head) {\r\n            this.growArray();\r\n        }\r\n        if (this.head < this.tail) {\r\n            return this.tail - this.head;\r\n        }\r\n        else {\r\n            return this.capacityMask + 1 - (this.head - this.tail);\r\n        }\r\n    };\r\n    Queue.prototype.shift = function () {\r\n        var head = this.head;\r\n        if (head === this.tail) {\r\n            return undefined;\r\n        }\r\n        var x = this.list[head];\r\n        this.list[head] = undefined;\r\n        this.head = (head + 1) & this.capacityMask;\r\n        if (head < HEAD_MAX_SHRINK &&\r\n            this.tail > TAIL_MIN_SHRINK &&\r\n            this.tail <= this.list.length >>> 2) {\r\n            this.shrinkArray();\r\n        }\r\n        return x;\r\n    };\r\n    Queue.prototype.isEmpty = function () {\r\n        return this.head === this.tail;\r\n    };\r\n    Queue.prototype.length = function () {\r\n        if (this.head === this.tail) {\r\n            return 0;\r\n        }\r\n        else if (this.head < this.tail) {\r\n            return this.tail - this.head;\r\n        }\r\n        else {\r\n            return this.capacityMask + 1 - (this.head - this.tail);\r\n        }\r\n    };\r\n    Queue.prototype.growArray = function () {\r\n        if (this.head) {\r\n            // copy existing data, head to end, then beginning to tail.\r\n            this.list = this.copyArray();\r\n            this.head = 0;\r\n        }\r\n        // head is at 0 and array is now full, safe to extend\r\n        this.tail = this.list.length;\r\n        this.list.length *= 2;\r\n        this.capacityMask = (this.capacityMask << 1) | 1;\r\n    };\r\n    Queue.prototype.shrinkArray = function () {\r\n        this.list.length >>>= 1;\r\n        this.capacityMask >>>= 1;\r\n    };\r\n    Queue.prototype.copyArray = function () {\r\n        var newArray = [];\r\n        var list = this.list;\r\n        var len = list.length;\r\n        var i;\r\n        for (i = this.head; i < len; i++) {\r\n            newArray.push(list[i]);\r\n        }\r\n        for (i = 0; i < this.tail; i++) {\r\n            newArray.push(list[i]);\r\n        }\r\n        return newArray;\r\n    };\r\n    return Queue;\r\n}());\n\n/** @license MIT License (c) copyright 2010 original author or authors */\r\n/**\r\n * Combine two streams pairwise by index by applying f to values at corresponding\r\n * indices.  The returned stream ends when either of the input streams ends.\r\n * @param {function} f function to combine values\r\n * @returns {Stream} new stream with items at corresponding indices combined\r\n *  using f\r\n */\r\nfunction zip(f, stream1, stream2) {\r\n    return zipArray(f, [stream1, stream2]);\r\n}\r\n/**\r\n* Combine streams pairwise (or tuple-wise) by index by applying f to values\r\n* at corresponding indices.  The returned stream ends when any of the input\r\n* streams ends.\r\n* @param {function} f function to combine values\r\n* @param {[Stream]} streams streams to zip using f\r\n* @returns {Stream} new stream with items at corresponding indices combined\r\n*  using f\r\n*/\r\nvar zipArray = function (f, streams) {\r\n    return streams.length === 0 || containsCanonicalEmpty(streams) ? empty()\r\n        : streams.length === 1 ? map(f, streams[0])\r\n            : new Zip(f, streams);\r\n};\r\nvar Zip = /** @class */ (function () {\r\n    function Zip(f, sources) {\r\n        this.f = f;\r\n        this.sources = sources;\r\n    }\r\n    Zip.prototype.run = function (sink, scheduler) {\r\n        var l = this.sources.length;\r\n        var disposables = new Array(l);\r\n        var sinks = new Array(l);\r\n        var buffers = new Array(l);\r\n        var zipSink = new ZipSink(this.f, buffers, sinks, sink);\r\n        for (var indexSink = void 0, i = 0; i < l; ++i) {\r\n            buffers[i] = new Queue();\r\n            indexSink = sinks[i] = new IndexSink(i, zipSink);\r\n            disposables[i] = this.sources[i].run(indexSink, scheduler);\r\n        }\r\n        return disposeAll(disposables);\r\n    };\r\n    return Zip;\r\n}());\r\nvar ZipSink = /** @class */ (function (_super) {\r\n    __extends(ZipSink, _super);\r\n    function ZipSink(f, buffers, sinks, sink) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.f = f;\r\n        _this.sinks = sinks;\r\n        _this.buffers = buffers;\r\n        return _this;\r\n    }\r\n    ZipSink.prototype.event = function (t, indexedValue) {\r\n        /* eslint complexity: [1, 5] */\r\n        if (!indexedValue.active) {\r\n            this.dispose(t, indexedValue.index);\r\n            return;\r\n        }\r\n        var buffers = this.buffers;\r\n        var buffer = buffers[indexedValue.index];\r\n        buffer.push(indexedValue.value);\r\n        if (buffer.length() === 1) {\r\n            if (!ready(buffers)) {\r\n                return;\r\n            }\r\n            emitZipped(this.f, t, buffers, this.sink);\r\n            if (ended(this.buffers, this.sinks)) {\r\n                this.sink.end(t);\r\n            }\r\n        }\r\n    };\r\n    ZipSink.prototype.dispose = function (t, index) {\r\n        var buffer = this.buffers[index];\r\n        if (buffer.isEmpty()) {\r\n            this.sink.end(t);\r\n        }\r\n    };\r\n    return ZipSink;\r\n}(Pipe));\r\nvar emitZipped = function (f, t, buffers, sink) {\r\n    return sink.event(t, invoke(f, map$2(head, buffers)));\r\n};\r\nvar head = function (buffer) { return buffer.shift(); };\r\nfunction ended(buffers, sinks) {\r\n    for (var i = 0, l = buffers.length; i < l; ++i) {\r\n        if (buffers[i].isEmpty() && !sinks[i].active) {\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n}\r\nfunction ready(buffers) {\r\n    for (var i = 0, l = buffers.length; i < l; ++i) {\r\n        if (buffers[i].isEmpty()) {\r\n            return false;\r\n        }\r\n    }\r\n    return true;\r\n}\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\n/**\r\n * Given a stream of streams, return a new stream that adopts the behavior\r\n * of the most recent inner stream.\r\n * @param stream of streams on which to switch\r\n * @returns switching stream\r\n */\r\nvar switchLatest = function (stream) {\r\n    return isCanonicalEmpty(stream)\r\n        ? empty()\r\n        : new Switch(stream);\r\n};\r\nvar Switch = /** @class */ (function () {\r\n    function Switch(source) {\r\n        this.source = source;\r\n    }\r\n    Switch.prototype.run = function (sink, scheduler) {\r\n        var switchSink = new SwitchSink(sink, scheduler);\r\n        return disposeBoth(switchSink, this.source.run(switchSink, scheduler));\r\n    };\r\n    return Switch;\r\n}());\r\nvar SwitchSink = /** @class */ (function () {\r\n    function SwitchSink(sink, scheduler) {\r\n        this.sink = sink;\r\n        this.scheduler = scheduler;\r\n        this.current = null;\r\n        this.ended = false;\r\n    }\r\n    SwitchSink.prototype.event = function (t, stream) {\r\n        this.disposeCurrent(t);\r\n        this.current = new Segment(stream, t, Infinity, this, this.sink, this.scheduler);\r\n    };\r\n    SwitchSink.prototype.end = function (t) {\r\n        this.ended = true;\r\n        this.checkEnd(t);\r\n    };\r\n    SwitchSink.prototype.error = function (t, e) {\r\n        this.ended = true;\r\n        this.sink.error(t, e);\r\n    };\r\n    SwitchSink.prototype.dispose = function () {\r\n        return this.disposeCurrent(currentTime(this.scheduler));\r\n    };\r\n    SwitchSink.prototype.disposeCurrent = function (t) {\r\n        if (this.current !== null) {\r\n            return this.current.dispose(t);\r\n        }\r\n    };\r\n    SwitchSink.prototype.disposeInner = function (t, inner) {\r\n        inner.dispose(t);\r\n        if (inner === this.current) {\r\n            this.current = null;\r\n        }\r\n    };\r\n    SwitchSink.prototype.checkEnd = function (t) {\r\n        if (this.ended && this.current === null) {\r\n            this.sink.end(t);\r\n        }\r\n    };\r\n    SwitchSink.prototype.endInner = function (t, inner) {\r\n        this.disposeInner(t, inner);\r\n        this.checkEnd(t);\r\n    };\r\n    SwitchSink.prototype.errorInner = function (t, e, inner) {\r\n        this.disposeInner(t, inner);\r\n        this.sink.error(t, e);\r\n    };\r\n    return SwitchSink;\r\n}());\r\nvar Segment = /** @class */ (function () {\r\n    function Segment(source, min, max, outer, sink, scheduler) {\r\n        this.min = min;\r\n        this.max = max;\r\n        this.outer = outer;\r\n        this.sink = sink;\r\n        this.disposable = source.run(this, schedulerRelativeTo(min, scheduler));\r\n    }\r\n    Segment.prototype.event = function (t, x) {\r\n        var time = Math.max(0, t + this.min);\r\n        if (time < this.max) {\r\n            this.sink.event(time, x);\r\n        }\r\n    };\r\n    Segment.prototype.end = function (t) {\r\n        this.outer.endInner(t + this.min, this);\r\n    };\r\n    Segment.prototype.error = function (t, e) {\r\n        this.outer.errorInner(t + this.min, e, this);\r\n    };\r\n    Segment.prototype.dispose = function (t) {\r\n        tryDispose$1(t, this.disposable, this.sink);\r\n    };\r\n    return Segment;\r\n}());\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\nfunction filter(p, stream) {\r\n    return Filter.create(p, stream);\r\n}\r\n/**\r\n * Skip repeated events, using === to detect duplicates\r\n * @param stream stream from which to omit repeated events\r\n * @returns stream without repeated events\r\n */\r\nvar skipRepeats = function (stream) {\r\n    return skipRepeatsWith(same, stream);\r\n};\r\n/**\r\n * Skip repeated events using the provided equals function to detect duplicates\r\n * @param equals optional function to compare items\r\n * @param stream stream from which to omit repeated events\r\n * @returns stream without repeated events\r\n */\r\nvar skipRepeatsWith = function (equals, stream) {\r\n    return isCanonicalEmpty(stream) ? empty()\r\n        : new SkipRepeats(equals, stream);\r\n};\r\nvar SkipRepeats = /** @class */ (function () {\r\n    function SkipRepeats(equals, source) {\r\n        this.equals = equals;\r\n        this.source = source;\r\n    }\r\n    SkipRepeats.prototype.run = function (sink, scheduler) {\r\n        return this.source.run(new SkipRepeatsSink(this.equals, sink), scheduler);\r\n    };\r\n    return SkipRepeats;\r\n}());\r\nvar SkipRepeatsSink = /** @class */ (function (_super) {\r\n    __extends(SkipRepeatsSink, _super);\r\n    function SkipRepeatsSink(equals, sink) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.equals = equals;\r\n        _this.value = undefined;\r\n        _this.init = true;\r\n        return _this;\r\n    }\r\n    SkipRepeatsSink.prototype.event = function (t, x) {\r\n        if (this.init) {\r\n            this.init = false;\r\n            this.value = x;\r\n            this.sink.event(t, x);\r\n            // TODO: value should be boxed to avoid ! bang\r\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\r\n        }\r\n        else if (!this.equals(this.value, x)) {\r\n            this.value = x;\r\n            this.sink.event(t, x);\r\n        }\r\n    };\r\n    return SkipRepeatsSink;\r\n}(Pipe));\r\nfunction same(a, b) {\r\n    return a === b;\r\n}\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\nvar until = function (signal, stream) {\r\n    return new Until(signal, stream);\r\n};\r\nvar since = function (signal, stream) {\r\n    return new Since(signal, stream);\r\n};\r\nvar during = function (timeWindow, stream) {\r\n    return until(join(timeWindow), since(timeWindow, stream));\r\n};\r\nvar Until = /** @class */ (function () {\r\n    function Until(maxSignal, source) {\r\n        this.maxSignal = maxSignal;\r\n        this.source = source;\r\n    }\r\n    Until.prototype.run = function (sink, scheduler) {\r\n        var disposable = new SettableDisposable();\r\n        var d1 = this.source.run(sink, scheduler);\r\n        var d2 = this.maxSignal.run(new UntilSink(sink, disposable), scheduler);\r\n        disposable.setDisposable(disposeBoth(d1, d2));\r\n        return disposable;\r\n    };\r\n    return Until;\r\n}());\r\nvar Since = /** @class */ (function () {\r\n    function Since(minSignal, source) {\r\n        this.minSignal = minSignal;\r\n        this.source = source;\r\n    }\r\n    Since.prototype.run = function (sink, scheduler) {\r\n        var min = new LowerBoundSink(this.minSignal, sink, scheduler);\r\n        var d = this.source.run(new SinceSink(min, sink), scheduler);\r\n        return disposeBoth(min, d);\r\n    };\r\n    return Since;\r\n}());\r\nvar SinceSink = /** @class */ (function (_super) {\r\n    __extends(SinceSink, _super);\r\n    function SinceSink(min, sink) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.min = min;\r\n        return _this;\r\n    }\r\n    SinceSink.prototype.event = function (t, x) {\r\n        if (this.min.allow) {\r\n            this.sink.event(t, x);\r\n        }\r\n    };\r\n    return SinceSink;\r\n}(Pipe));\r\nvar LowerBoundSink = /** @class */ (function (_super) {\r\n    __extends(LowerBoundSink, _super);\r\n    function LowerBoundSink(signal, sink, scheduler) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.allow = false;\r\n        _this.disposable = signal.run(_this, scheduler);\r\n        return _this;\r\n    }\r\n    LowerBoundSink.prototype.event = function () {\r\n        this.allow = true;\r\n        this.dispose();\r\n    };\r\n    LowerBoundSink.prototype.end = function () { };\r\n    LowerBoundSink.prototype.dispose = function () {\r\n        this.disposable.dispose();\r\n    };\r\n    return LowerBoundSink;\r\n}(Pipe));\r\nvar UntilSink = /** @class */ (function (_super) {\r\n    __extends(UntilSink, _super);\r\n    function UntilSink(sink, disposable) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.disposable = disposable;\r\n        return _this;\r\n    }\r\n    UntilSink.prototype.event = function (t) {\r\n        this.disposable.dispose();\r\n        this.sink.end(t);\r\n    };\r\n    UntilSink.prototype.end = function () { };\r\n    return UntilSink;\r\n}(Pipe));\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\n/**\r\n * @param delayTime milliseconds to delay each item\r\n * @param stream\r\n * @returns new stream containing the same items, but delayed by ms\r\n */\r\nvar delay = function (delayTime, stream) {\r\n    return delayTime <= 0 ? stream : new Delay(delayTime, stream);\r\n};\r\nvar Delay = /** @class */ (function () {\r\n    function Delay(dt, source) {\r\n        this.dt = dt;\r\n        this.source = source;\r\n    }\r\n    Delay.prototype.run = function (sink, scheduler) {\r\n        var delaySink = new DelaySink(this.dt, sink, scheduler);\r\n        return disposeBoth(delaySink, this.source.run(delaySink, scheduler));\r\n    };\r\n    return Delay;\r\n}());\r\nvar DelaySink = /** @class */ (function (_super) {\r\n    __extends(DelaySink, _super);\r\n    function DelaySink(dt, sink, scheduler) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.dt = dt;\r\n        _this.scheduler = scheduler;\r\n        _this.tasks = [];\r\n        return _this;\r\n    }\r\n    DelaySink.prototype.dispose = function () {\r\n        this.tasks.forEach(cancelTask);\r\n    };\r\n    DelaySink.prototype.event = function (_t, x) {\r\n        this.tasks.push(delay$2(this.dt, propagateEventTask(x, this.sink), this.scheduler));\r\n    };\r\n    DelaySink.prototype.end = function () {\r\n        this.tasks.push(delay$2(this.dt, propagateEndTask(this.sink), this.scheduler));\r\n    };\r\n    return DelaySink;\r\n}(Pipe));\n\n/** @license MIT License (c) copyright 2010-2017 original author or authors */\r\n/**\r\n * Limit the rate of events by suppressing events that occur too often\r\n * @param period time to suppress events\r\n * @param stream\r\n */\r\nvar throttle = function (period, stream) {\r\n    return isCanonicalEmpty(stream) ? empty()\r\n        : stream instanceof Map ? commuteMapThrottle(period, stream)\r\n            : stream instanceof Throttle ? fuseThrottle(period, stream)\r\n                : new Throttle(period, stream);\r\n};\r\nvar commuteMapThrottle = function (period, mapStream) {\r\n    return Map.create(mapStream.f, throttle(period, mapStream.source));\r\n};\r\nvar fuseThrottle = function (period, throttleStream) {\r\n    return new Throttle(Math.max(period, throttleStream.period), throttleStream.source);\r\n};\r\nvar Throttle = /** @class */ (function () {\r\n    function Throttle(period, source) {\r\n        this.period = period;\r\n        this.source = source;\r\n    }\r\n    Throttle.prototype.run = function (sink, scheduler) {\r\n        return this.source.run(new ThrottleSink(this.period, sink), scheduler);\r\n    };\r\n    return Throttle;\r\n}());\r\nvar ThrottleSink = /** @class */ (function (_super) {\r\n    __extends(ThrottleSink, _super);\r\n    function ThrottleSink(period, sink) {\r\n        var _this = _super.call(this, sink) || this;\r\n        _this.time = 0;\r\n        _this.period = period;\r\n        return _this;\r\n    }\r\n    ThrottleSink.prototype.event = function (t, x) {\r\n        if (t >= this.time) {\r\n            this.time = t + this.period;\r\n            this.sink.event(t, x);\r\n        }\r\n    };\r\n    return ThrottleSink;\r\n}(Pipe));\r\n/**\r\n * Wait for a burst of events to subside and emit only the last event in the burst\r\n * @param period events occuring more frequently than this will be suppressed\r\n * @param stream stream to debounce\r\n * @returns new debounced stream\r\n */\r\nvar debounce = function (period, stream) {\r\n    return isCanonicalEmpty(stream) ? empty()\r\n        : new Debounce(period, stream);\r\n};\r\nvar Debounce = /** @class */ (function () {\r\n    function Debounce(dt, source) {\r\n        this.dt = dt;\r\n        this.source = source;\r\n    }\r\n    Debounce.prototype.run = function (sink, scheduler) {\r\n        return new DebounceSink(this.dt, this.source, sink, scheduler);\r\n    };\r\n    return Debounce;\r\n}());\r\nvar DebounceSink = /** @class */ (function () {\r\n    function DebounceSink(dt, source, sink, scheduler) {\r\n        this.dt = dt;\r\n        this.sink = sink;\r\n        this.scheduler = scheduler;\r\n        this.timer = null;\r\n        this.disposable = source.run(this, scheduler);\r\n    }\r\n    DebounceSink.prototype.event = function (_t, x) {\r\n        this.clearTimer();\r\n        this.value = x;\r\n        this.timer = delay$2(this.dt, new DebounceTask(this, x), this.scheduler);\r\n    };\r\n    DebounceSink.prototype.handleEventFromTask = function (t, x) {\r\n        this.clearTimer();\r\n        this.sink.event(t, x);\r\n    };\r\n    DebounceSink.prototype.end = function (t) {\r\n        if (this.clearTimer()) {\r\n            // TODO: value should be boxed to avoid ! bang\r\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\r\n            this.sink.event(t, this.value);\r\n            this.value = undefined;\r\n        }\r\n        this.sink.end(t);\r\n    };\r\n    DebounceSink.prototype.error = function (t, x) {\r\n        this.clearTimer();\r\n        this.sink.error(t, x);\r\n    };\r\n    DebounceSink.prototype.dispose = function () {\r\n        this.clearTimer();\r\n        this.disposable.dispose();\r\n    };\r\n    DebounceSink.prototype.clearTimer = function () {\r\n        if (this.timer === null) {\r\n            return false;\r\n        }\r\n        this.timer.dispose();\r\n        this.timer = null;\r\n        return true;\r\n    };\r\n    return DebounceSink;\r\n}());\r\nvar DebounceTask = /** @class */ (function () {\r\n    function DebounceTask(sink, value) {\r\n        this.sink = sink;\r\n        this.value = value;\r\n    }\r\n    DebounceTask.prototype.run = function (t) {\r\n        this.sink.handleEventFromTask(t, this.value);\r\n    };\r\n    DebounceTask.prototype.error = function (t, e) {\r\n        this.sink.error(t, e);\r\n    };\r\n    DebounceTask.prototype.dispose = function () { };\r\n    return DebounceTask;\r\n}());\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\n/**\r\n * Turn a Stream<Promise<T>> into Stream<T> by awaiting each promise.\r\n * Event order is preserved. The stream will fail if any promise rejects.\r\n */\r\nvar awaitPromises = function (stream) {\r\n    return isCanonicalEmpty(stream) ? empty() : new Await(stream);\r\n};\r\n/**\r\n * Create a stream containing only the promise's fulfillment\r\n * value at the time it fulfills.\r\n * @param promise\r\n * @return stream containing promise's fulfillment value.\r\n *  If the promise rejects, the stream will error\r\n */\r\nvar fromPromise = function (promise) { return awaitPromises(now(promise)); };\r\nvar Await = /** @class */ (function () {\r\n    function Await(source) {\r\n        this.source = source;\r\n    }\r\n    Await.prototype.run = function (sink, scheduler) {\r\n        return this.source.run(new AwaitSink(sink, scheduler), scheduler);\r\n    };\r\n    return Await;\r\n}());\r\nvar AwaitSink = /** @class */ (function () {\r\n    function AwaitSink(sink, scheduler) {\r\n        var _this = this;\r\n        // Pre-create closures, to avoid creating them per event\r\n        this.eventBound = function (x) { return _this.sink.event(currentTime(_this.scheduler), x); };\r\n        this.endBound = function () { return _this.sink.end(currentTime(_this.scheduler)); };\r\n        this.errorBound = function (e) { return _this.sink.error(currentTime(_this.scheduler), e); };\r\n        this.sink = sink;\r\n        this.scheduler = scheduler;\r\n        this.queue = Promise.resolve();\r\n    }\r\n    AwaitSink.prototype.event = function (_t, promise) {\r\n        var _this = this;\r\n        this.queue = this.queue.then(function () { return _this.handlePromise(promise); })\r\n            .catch(this.errorBound);\r\n    };\r\n    AwaitSink.prototype.end = function () {\r\n        this.queue = this.queue.then(this.endBound)\r\n            .catch(this.errorBound);\r\n    };\r\n    AwaitSink.prototype.error = function (_t, e) {\r\n        var _this = this;\r\n        // Don't resolve error values, propagate directly\r\n        this.queue = this.queue.then(function () { return _this.errorBound(e); })\r\n            .catch(fatalError);\r\n    };\r\n    AwaitSink.prototype.handlePromise = function (promise) {\r\n        return promise.then(this.eventBound);\r\n    };\r\n    return AwaitSink;\r\n}());\n\nvar SafeSink = /** @class */ (function () {\r\n    function SafeSink(sink) {\r\n        this.sink = sink;\r\n        this.active = true;\r\n    }\r\n    SafeSink.prototype.event = function (t, x) {\r\n        if (!this.active) {\r\n            return;\r\n        }\r\n        this.sink.event(t, x);\r\n    };\r\n    SafeSink.prototype.end = function (t) {\r\n        if (!this.active) {\r\n            return;\r\n        }\r\n        this.disable();\r\n        this.sink.end(t);\r\n    };\r\n    SafeSink.prototype.error = function (t, e) {\r\n        this.disable();\r\n        this.sink.error(t, e);\r\n    };\r\n    SafeSink.prototype.disable = function () {\r\n        this.active = false;\r\n        return this.sink;\r\n    };\r\n    return SafeSink;\r\n}());\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\n/** @author Brian Cavalier */\r\n/** @author John Hann */\r\nfunction tryEvent(t, x, sink) {\r\n    try {\r\n        sink.event(t, x);\r\n    }\r\n    catch (e) {\r\n        sink.error(t, e);\r\n    }\r\n}\r\nfunction tryEnd(t, sink) {\r\n    try {\r\n        sink.end(t);\r\n    }\r\n    catch (e) {\r\n        sink.error(t, e);\r\n    }\r\n}\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\r\n/**\r\n * If stream encounters an error, recover and continue with items from stream\r\n * returned by f.\r\n * @param f which returns a new stream\r\n * @param stream\r\n * @returns new stream which will recover from an error by calling f\r\n */\r\nvar recoverWith = function (f, stream) {\r\n    return isCanonicalEmpty(stream) ? empty()\r\n        : new RecoverWith(f, stream);\r\n};\r\n/**\r\n * Create a stream containing only an error\r\n * @param e error value, preferably an Error or Error subtype\r\n * @returns new stream containing only an error\r\n */\r\nvar throwError = function (e) {\r\n    return new ErrorStream(e);\r\n};\r\nvar ErrorStream = /** @class */ (function () {\r\n    function ErrorStream(e) {\r\n        this.value = e;\r\n    }\r\n    ErrorStream.prototype.run = function (sink, scheduler) {\r\n        return asap(propagateErrorTask(this.value, sink), scheduler);\r\n    };\r\n    return ErrorStream;\r\n}());\r\nvar RecoverWith = /** @class */ (function () {\r\n    function RecoverWith(f, source) {\r\n        this.f = f;\r\n        this.source = source;\r\n    }\r\n    RecoverWith.prototype.run = function (sink, scheduler) {\r\n        return new RecoverWithSink(this.f, this.source, sink, scheduler);\r\n    };\r\n    return RecoverWith;\r\n}());\r\nvar RecoverWithSink = /** @class */ (function () {\r\n    function RecoverWithSink(f, source, sink, scheduler) {\r\n        this.f = f;\r\n        this.sink = new SafeSink(sink);\r\n        this.scheduler = scheduler;\r\n        this.disposable = source.run(this, scheduler);\r\n    }\r\n    RecoverWithSink.prototype.event = function (t, x) {\r\n        tryEvent(t, x, this.sink);\r\n    };\r\n    RecoverWithSink.prototype.end = function (t) {\r\n        tryEnd(t, this.sink);\r\n    };\r\n    RecoverWithSink.prototype.error = function (t, e) {\r\n        var nextSink = this.sink.disable();\r\n        tryDispose$1(t, this.disposable, this.sink);\r\n        this._startNext(t, e, nextSink);\r\n    };\r\n    RecoverWithSink.prototype._startNext = function (t, x, sink) {\r\n        try {\r\n            this.disposable = this._continue(this.f, t, x, sink);\r\n        }\r\n        catch (e) {\r\n            sink.error(t, e);\r\n        }\r\n    };\r\n    RecoverWithSink.prototype._continue = function (f, t, x, sink) {\r\n        return run(sink, this.scheduler, withLocalTime(t, f(x)));\r\n    };\r\n    RecoverWithSink.prototype.dispose = function () {\r\n        return this.disposable.dispose();\r\n    };\r\n    return RecoverWithSink;\r\n}());\n\nvar multicast = function (stream) {\r\n    return stream instanceof Multicast || isCanonicalEmpty(stream)\r\n        ? stream\r\n        : new Multicast(stream);\r\n};\r\nvar Multicast = /** @class */ (function () {\r\n    function Multicast(source) {\r\n        this.source = new MulticastSource(source);\r\n    }\r\n    Multicast.prototype.run = function (sink, scheduler) {\r\n        return this.source.run(sink, scheduler);\r\n    };\r\n    return Multicast;\r\n}());\r\nvar MulticastSource = /** @class */ (function () {\r\n    function MulticastSource(source) {\r\n        this.source = source;\r\n        this.sinks = [];\r\n        this.disposable = disposeNone();\r\n    }\r\n    MulticastSource.prototype.run = function (sink, scheduler) {\r\n        var n = this.add(sink);\r\n        if (n === 1) {\r\n            this.disposable = this.source.run(this, scheduler);\r\n        }\r\n        return disposeOnce(new MulticastDisposable(this, sink));\r\n    };\r\n    MulticastSource.prototype.dispose = function () {\r\n        var disposable = this.disposable;\r\n        this.disposable = disposeNone();\r\n        return disposable.dispose();\r\n    };\r\n    MulticastSource.prototype.add = function (sink) {\r\n        this.sinks = append(sink, this.sinks);\r\n        return this.sinks.length;\r\n    };\r\n    MulticastSource.prototype.remove = function (sink) {\r\n        var i = findIndex(sink, this.sinks);\r\n        // istanbul ignore next\r\n        if (i >= 0) {\r\n            this.sinks = remove(i, this.sinks);\r\n        }\r\n        return this.sinks.length;\r\n    };\r\n    MulticastSource.prototype.event = function (time, value) {\r\n        var s = this.sinks;\r\n        if (s.length === 1) {\r\n            return s[0].event(time, value);\r\n        }\r\n        for (var i = 0; i < s.length; ++i) {\r\n            tryEvent(time, value, s[i]);\r\n        }\r\n    };\r\n    MulticastSource.prototype.end = function (time) {\r\n        var s = this.sinks;\r\n        for (var i = 0; i < s.length; ++i) {\r\n            tryEnd(time, s[i]);\r\n        }\r\n    };\r\n    MulticastSource.prototype.error = function (time, err) {\r\n        var s = this.sinks;\r\n        for (var i = 0; i < s.length; ++i) {\r\n            s[i].error(time, err);\r\n        }\r\n    };\r\n    return MulticastSource;\r\n}());\r\nvar MulticastDisposable = /** @class */ (function () {\r\n    function MulticastDisposable(source, sink) {\r\n        this.source = source;\r\n        this.sink = sink;\r\n    }\r\n    MulticastDisposable.prototype.dispose = function () {\r\n        if (this.source.remove(this.sink) === 0) {\r\n            this.source.dispose();\r\n        }\r\n    };\r\n    return MulticastDisposable;\r\n}());\n\n/** @license MIT License (c) copyright 2016 original author or authors */\r\nvar run$1 = curry3(run);\r\nvar withLocalTime$1 = curry2(withLocalTime);\r\nvar loop$1 = curry3(loop);\r\nvar scan$1 = curry3(scan);\r\nvar startWith$1 = curry2(startWith);\r\nvar map$1 = curry2(map);\r\nvar constant$1 = curry2(constant);\r\nvar tap$1 = curry2(tap);\r\nvar ap$1 = curry2(ap);\r\nvar chain$1 = curry2(chain);\r\nvar continueWith$1 = curry2(continueWith);\r\nvar concatMap$1 = curry2(concatMap);\r\nvar mergeConcurrently$1 = curry2(mergeConcurrently);\r\nvar mergeMapConcurrently$1 = curry3(mergeMapConcurrently);\r\nvar merge$1 = curry2(merge);\r\nvar combine$1 = curry3(combine);\r\nvar combineArray$1 = curry2(combineArray);\r\nvar sample$1 = curry2(sample);\r\nvar snapshot$1 = curry3(snapshot);\r\nvar zipItems$1 = curry3(zipItems);\r\nvar withItems$1 = curry2(withItems);\r\nvar zip$1 = curry3(zip);\r\nvar zipArray$1 = curry2(zipArray);\r\nvar filter$1 = curry2(filter);\r\nvar skipRepeatsWith$1 = curry2(skipRepeatsWith);\r\nvar take$1 = curry2(take);\r\nvar skip$1 = curry2(skip);\r\nvar slice$1 = curry3(slice);\r\nvar takeWhile$1 = curry2(takeWhile);\r\nvar skipWhile$1 = curry2(skipWhile);\r\nvar skipAfter$1 = curry2(skipAfter);\r\nvar until$1 = curry2(until);\r\nvar since$1 = curry2(since);\r\nvar during$1 = curry2(during);\r\nvar delay$1 = curry2(delay);\r\nvar throttle$1 = curry2(throttle);\r\nvar debounce$1 = curry2(debounce);\r\nvar recoverWith$1 = curry2(recoverWith);\r\nvar propagateTask$1 = curry3(propagateTask);\r\nvar propagateEventTask$1 = curry2(propagateEventTask);\r\nvar propagateErrorTask$1 = curry2(propagateErrorTask);\n\nexport { MulticastSource, ap$1 as ap, at, awaitPromises, chain$1 as chain, combine$1 as combine, combineArray$1 as combineArray, concatMap$1 as concatMap, constant$1 as constant, continueWith$1 as continueWith, debounce$1 as debounce, delay$1 as delay, during$1 as during, empty, filter$1 as filter, fromPromise, join, loop$1 as loop, map$1 as map, merge$1 as merge, mergeArray, mergeConcurrently$1 as mergeConcurrently, mergeMapConcurrently$1 as mergeMapConcurrently, multicast, never, newStream, now, periodic, propagateEndTask, propagateErrorTask$1 as propagateErrorTask, propagateEventTask$1 as propagateEventTask, propagateTask$1 as propagateTask, recoverWith$1 as recoverWith, run$1 as run, runEffects, sample$1 as sample, scan$1 as scan, since$1 as since, skip$1 as skip, skipAfter$1 as skipAfter, skipRepeats, skipRepeatsWith$1 as skipRepeatsWith, skipWhile$1 as skipWhile, slice$1 as slice, snapshot$1 as snapshot, startWith$1 as startWith, switchLatest, take$1 as take, takeWhile$1 as takeWhile, tap$1 as tap, throttle$1 as throttle, throwError, until$1 as until, withItems$1 as withItems, withLocalTime$1 as withLocalTime, zip$1 as zip, zipArray$1 as zipArray, zipItems$1 as zipItems };\n//# sourceMappingURL=index.es.js.map\n","import { loop } from \"@most/core\";\nexport function applyStyleBehavior(styleBehavior, node, styleEnv) {\n    let latestClass;\n    return loop((previousCssRule, styleObject) => {\n        if (previousCssRule) {\n            if (styleObject === null) {\n                node.element.classList.remove(previousCssRule);\n                return { seed: null, value: '' };\n            }\n            else {\n                const cashedCssClas = useStyleRule(styleEnv, styleObject);\n                if (previousCssRule !== cashedCssClas) {\n                    node.element.classList.replace(latestClass, cashedCssClas);\n                    latestClass = cashedCssClas;\n                    return { seed: cashedCssClas, value: cashedCssClas };\n                }\n            }\n        }\n        if (styleObject) {\n            const cashedCssClas = useStyleRule(styleEnv, styleObject);\n            node.element.classList.add(cashedCssClas);\n            latestClass = cashedCssClas;\n            return { seed: cashedCssClas, value: cashedCssClas };\n        }\n        return { seed: previousCssRule, value: '' };\n    }, null, styleBehavior);\n}\nfunction styleObjectAsString(styleObj) {\n    return Object.entries(styleObj)\n        .map(([key, val]) => {\n        const kebabCaseKey = key.replace(/([a-z])([A-Z])/g, \"$1-$2\").toLowerCase();\n        return `${kebabCaseKey}:${val};`;\n    })\n        .join(\"\");\n}\nexport function useStyleRule(cacheService, styleDefinition) {\n    const properties = styleObjectAsString(styleDefinition);\n    const cachedRuleIdx = cacheService.cache.indexOf(properties);\n    if (cachedRuleIdx === -1) {\n        const index = cacheService.stylesheet.cssRules.length;\n        const namespace = cacheService.namespace + index;\n        cacheService.cache.push(properties);\n        cacheService.stylesheet.insertRule(`.${namespace} {${properties}}`, index);\n        return `${cacheService.namespace + index}`;\n    }\n    return `${cacheService.namespace + cachedRuleIdx}`;\n}\nexport function useStylePseudoRule(cacheService, styleDefinition, pseudo = '') {\n    const properties = styleObjectAsString(styleDefinition);\n    const index = cacheService.stylesheet.cssRules.length;\n    const rule = `.${cacheService.namespace + index + pseudo} {${properties}}`;\n    const cachedRuleIdx = cacheService.cache.indexOf(rule);\n    if (cachedRuleIdx === -1) {\n        cacheService.cache.push(rule);\n        cacheService.stylesheet.insertRule(rule, index);\n        return `${cacheService.namespace + index}`;\n    }\n    return `${cacheService.namespace + cachedRuleIdx}`;\n}\n//# sourceMappingURL=styleUtils.js.map","import { compose, id } from '@most/prelude';\nimport { empty, never, run, startWith } from '@most/core';\nimport { disposeNone } from '@most/disposable';\nexport const xForver = (x) => startWith(x, never());\nexport function MaybeOp(a, b) {\n    return b ? compose(b, a) : a;\n}\nexport function isStream(s) {\n    return s instanceof Object && 'run' in s;\n}\nexport function isFunction(s) {\n    return s instanceof Function;\n}\nconst EMPTY = empty();\nexport function isEmpty(s) {\n    return s === EMPTY;\n}\nexport class Pipe {\n    constructor(sink) {\n        this.sink = sink;\n    }\n    end(t) {\n        return this.sink.end(t);\n    }\n    error(t, e) {\n        return this.sink.error(t, e);\n    }\n}\nexport function tryRunning(stream, sink, scheduler, time = scheduler.currentTime()) {\n    try {\n        return run(sink, scheduler, stream);\n    }\n    catch (e) {\n        sink.error(time, e);\n        return disposeNone();\n    }\n}\nexport const nullSink = {\n    // tslint:disable-next-line:no-empty\n    event() { },\n    // tslint:disable-next-line:no-empty\n    end() { },\n    // tslint:disable-next-line:no-empty\n    error(_, x) {\n        // tslint:disable-next-line: no-console\n        console.error(x);\n    }\n};\nexport const nullDisposable = {\n    // tslint:disable-next-line:no-empty\n    dispose() { }\n};\n// /* tslint:enable:max-line-length */\nexport function O(...fns) {\n    // @ts-ignore\n    return fns.length ? fns.reduceRight(compose) : id;\n}\n//# sourceMappingURL=utils.js.map","import { newDefaultScheduler } from '@most/scheduler';\nimport { loop, map, mergeArray, tap } from '@most/core';\nimport { disposeAll, disposeNone, disposeWith } from '@most/disposable';\nimport { useStylePseudoRule, useStyleRule } from './utils/styleUtils';\nimport { nullSink } from './utils';\nfunction appendToSlot(parent, child, insertAt) {\n    if (insertAt === 0)\n        return parent.prepend(child);\n    parent.insertBefore(child, parent.children[insertAt]);\n}\nexport function runBrowser(config = {}) {\n    const composedConfig = {\n        style: {\n            namespace: '',\n            stylesheet: new CSSStyleSheet(),\n            cache: []\n        },\n        rootNode: document.body,\n        scheduler: newDefaultScheduler(),\n        ...config\n    };\n    document.adoptedStyleSheets = [...document.adoptedStyleSheets, composedConfig.style.stylesheet];\n    return ($root) => {\n        const s = new BranchEffectsSink(composedConfig, composedConfig.rootNode, 0, [0]);\n        map(node => ({ ...node, segmentPosition: 0 }), $root)\n            .run(s, composedConfig.scheduler);\n    };\n}\nclass BranchEffectsSink {\n    constructor(env, parentElement, segmentPosition, segmentsCount) {\n        this.env = env;\n        this.parentElement = parentElement;\n        this.segmentPosition = segmentPosition;\n        this.segmentsCount = segmentsCount;\n        this.disposables = [];\n        this.segmentsSlotsMap = [];\n    }\n    event(_, node) {\n        try {\n            node === null || node === void 0 ? void 0 : node.disposable.setDisposable(disposeWith(node => {\n                this.segmentsCount[this.segmentPosition]--;\n                node.element.remove();\n                const slot = this.segmentsSlotsMap[this.segmentPosition];\n                const disposableBranch = slot.get(node);\n                slot.delete(node);\n                disposableBranch === null || disposableBranch === void 0 ? void 0 : disposableBranch.dispose();\n            }, node));\n        }\n        catch (e) {\n            console.error(node.element);\n            throw new Error(`Cannot append node that have already been rendered, check invalid node operations under ^`);\n        }\n        this.segmentsCount[this.segmentPosition]++;\n        let slot = 0;\n        for (let s = 0; s < this.segmentPosition; s++) {\n            slot += this.segmentsCount[s];\n        }\n        appendToSlot(this.parentElement, node.element, slot);\n        if ('style' in node && node.style && Object.keys(node.style).length) {\n            const selector = useStyleRule(this.env.style, node.style);\n            node.element.classList.add(selector);\n        }\n        if ('stylePseudo' in node) {\n            node.stylePseudo.forEach(styleDeclaration => {\n                const selector = useStylePseudoRule(this.env.style, styleDeclaration.style, styleDeclaration.class);\n                node.element.classList.add(selector);\n            });\n        }\n        if ('attributes' in node && node.attributes) {\n            if (Object.keys(node.attributes).length !== 0) {\n                applyAttrFn(node.attributes, node.element);\n            }\n        }\n        if ('styleBehavior' in node && node.styleBehavior) {\n            const disposeStyle = mergeArray(node.styleBehavior.map(sb => styleBehavior(sb, node, this.env.style))).run(nullSink, this.env.scheduler);\n            this.disposables.push(disposeStyle);\n        }\n        if ('attributesBehavior' in node && node.attributesBehavior) {\n            const disposeStyle = mergeArray(node.attributesBehavior.map(attrs => {\n                return tap((attr) => {\n                    applyAttrFn(attr, node.element);\n                }, attrs);\n            })).run(nullSink, this.env.scheduler);\n            this.disposables.push(disposeStyle);\n        }\n        const newDisp = '$segments' in node\n            ? new BranchChildrenSinkList(node.$segments, this.env, node)\n            : disposeNone();\n        if (!this.segmentsSlotsMap[this.segmentPosition]) {\n            this.segmentsSlotsMap[this.segmentPosition] = new Map();\n        }\n        this.segmentsSlotsMap[this.segmentPosition].set(node, disposeAll([...this.disposables, newDisp]));\n    }\n    end(_t) {\n        this.segmentsSlotsMap.forEach(s => {\n            s.forEach(d => d.dispose());\n        });\n    }\n    error(t, err) {\n        console.error(err);\n    }\n}\nclass BranchChildrenSinkList {\n    constructor($segments, env, node) {\n        this.env = env;\n        this.node = node;\n        this.disposables = new Map();\n        const l = $segments.length;\n        const segmentsCount = new Array(l).fill(0);\n        for (let i = 0; i < l; ++i) {\n            const $child = $segments[i];\n            const sink = new BranchEffectsSink(this.env, node.element, i, segmentsCount);\n            this.disposables.set($child, $child.run(sink, this.env.scheduler));\n        }\n    }\n    dispose() {\n        this.disposables.forEach(d => d.dispose());\n    }\n}\nfunction styleBehavior(styleBehavior, node, cacheService) {\n    let latestClass;\n    return loop((previousCssRule, styleObject) => {\n        if (previousCssRule) {\n            if (styleObject === null) {\n                node.element.classList.remove(previousCssRule);\n                return { seed: null, value: '' };\n            }\n            else {\n                const cashedCssClas = useStyleRule(cacheService, styleObject);\n                if (previousCssRule !== cashedCssClas) {\n                    node.element.classList.replace(latestClass, cashedCssClas);\n                    latestClass = cashedCssClas;\n                    return { seed: cashedCssClas, value: cashedCssClas };\n                }\n            }\n        }\n        if (styleObject) {\n            const cashedCssClas = useStyleRule(cacheService, styleObject);\n            node.element.classList.add(cashedCssClas);\n            latestClass = cashedCssClas;\n            return { seed: cashedCssClas, value: cashedCssClas };\n        }\n        return { seed: previousCssRule, value: '' };\n    }, null, styleBehavior);\n}\nexport function applyAttrFn(attrs, node) {\n    if (attrs) {\n        Object.entries(attrs).forEach(([attrKey, value]) => {\n            if (value === undefined || value === null) {\n                node.removeAttribute(attrKey);\n            }\n            else {\n                node.setAttribute(attrKey, String(value));\n            }\n        });\n    }\n    return node;\n}\n//# sourceMappingURL=run.js.map","import { join, map } from '@most/core';\nimport { curry2 } from '@most/prelude';\nexport function eventElementTarget(eventType, element, options = false) {\n    return {\n        run(sink, scheduler) {\n            const cb = (e) => sink.event(scheduler.currentTime(), e);\n            const removeListener = () => element.removeEventListener(eventType, cb, options);\n            element.addEventListener(eventType, cb, options);\n            return {\n                dispose() {\n                    removeListener();\n                }\n            };\n        }\n    };\n}\nexport const event = curry2((eventType, node) => {\n    return join(map(ns => eventElementTarget(eventType, ns.element, { capture: true }), node));\n});\n//# sourceMappingURL=event.js.map","import { disposeWith } from '@most/disposable';\nimport { remove } from '@most/prelude';\nimport { Pipe } from '../utils';\nclass SourceSink {\n    constructor(parent, sink) {\n        this.parent = parent;\n        this.sink = sink;\n        this.hasValue = false;\n    }\n    event(t, x) {\n        this.value = x;\n        this.hasValue = true;\n        this.sink.event(t, x);\n        this.parent.tetherSink.forEach(s => s.event(t, x));\n    }\n    end(t) {\n        this.sink.end(t);\n    }\n    error(t, e) {\n        this.sink.error(t, e);\n    }\n}\nclass TetherSink extends Pipe {\n    constructor(sink) {\n        super(sink);\n    }\n    event(t, x) {\n        this.sink.event(t, x);\n    }\n}\nexport class Tether {\n    constructor(source) {\n        this.source = source;\n        this.sourceSink = null;\n        this.tetherSink = [];\n    }\n    run(sink, scheduler) {\n        var _a;\n        if (sink instanceof SourceSink) {\n            if (this.sourceSink) {\n                throw new Error('Cannot split multiple sources');\n            }\n            this.sourceSink = sink;\n            const sourceDisposable = this.source.run(sink, scheduler);\n            return {\n                dispose: () => {\n                    sourceDisposable.dispose();\n                    this.tetherSink = [];\n                    this.sourceSink = null;\n                }\n            };\n        }\n        if (sink instanceof TetherSink) {\n            this.tetherSink.push(sink);\n            if ((_a = this.sourceSink) === null || _a === void 0 ? void 0 : _a.hasValue) {\n                sink.event(scheduler.currentTime(), this.sourceSink.value);\n            }\n            return disposeWith(s => {\n                const sinkIdx = this.tetherSink.indexOf(s);\n                if (sinkIdx > -1) {\n                    this.tetherSink[sinkIdx].end(scheduler.currentTime());\n                    remove(sinkIdx, this.tetherSink);\n                }\n            }, sink);\n        }\n        throw new Error(`Sink is not an instance of ${SourceSink.name} or ${TetherSink.name}`);\n    }\n}\nexport const tether = (source) => {\n    const split = new Tether(source);\n    return [\n        {\n            run(sink, scheduler) {\n                return split.run(new SourceSink(split, sink), scheduler);\n            }\n        },\n        {\n            run(sink, scheduler) {\n                return split.run(new TetherSink(sink), scheduler);\n            }\n        }\n    ];\n};\n//# sourceMappingURL=tether.js.map","import { disposeWith } from '@most/disposable';\nimport { O } from '../utils';\nimport { tether } from '../combinators/tether';\nimport { multicast } from '@most/core';\nexport class BehaviorSource {\n    constructor() {\n        this.queuedSamplers = [];\n        this.sinks = new Map();\n        this.sample = (...ops) => {\n            return (sb) => {\n                const [source, tetherSource] = tether(sb);\n                // @ts-ignore\n                const bops = ops.length ? O(...ops)(tetherSource) : tetherSource;\n                this.queuedSamplers.push(multicast(bops));\n                this.sinks.forEach((sourcesMap, sink) => {\n                    sourcesMap.set(bops, this.runBehavior(sink, bops));\n                });\n                return source;\n            };\n        };\n    }\n    // TODO: check case where early samplers will not receive events of future behaviors\n    run(sink, scheduler) {\n        this.scheduler = scheduler;\n        const sourcesMap = new Map();\n        this.sinks.set(sink, sourcesMap);\n        this.queuedSamplers.forEach(s => {\n            sourcesMap.set(s, this.runBehavior(sink, s));\n        });\n        return disposeWith((s) => {\n            sink.end(scheduler.currentTime());\n            this.disposeSampler(s);\n        }, sink);\n    }\n    disposeSampler(sink) {\n        var _a;\n        (_a = this.sinks.get(sink)) === null || _a === void 0 ? void 0 : _a.forEach(x => x === null || x === void 0 ? void 0 : x.dispose());\n        this.sinks.delete(sink);\n    }\n    runBehavior(sink, x) {\n        return x.run(sink, this.scheduler);\n    }\n}\nexport function behavior() {\n    const ss = new BehaviorSource();\n    return [ss.sample, ss];\n}\n//# sourceMappingURL=behavior.js.map","import { behavior } from '../source/behavior';\nimport { disposeAll, disposeWith } from '@most/disposable';\nimport { curry2 } from '@most/prelude';\nimport { nullSink } from '../utils';\nexport function componentFn(inputComp, projectBehaviors) {\n    return {\n        run(sink, scheduler) {\n            // fill stubbed aguments as a behavior\n            const behaviors = Array(inputComp.length).fill(null).map(behavior);\n            const [view, outputBehaviors] = inputComp(...behaviors);\n            const outputDisposables = [];\n            if (projectBehaviors) {\n                for (const k in projectBehaviors) {\n                    if (projectBehaviors[k] && outputBehaviors) {\n                        const consumerSampler = projectBehaviors[k];\n                        if (consumerSampler) {\n                            const componentOutputBehavior = outputBehaviors[k];\n                            const outputDisposable = consumerSampler(componentOutputBehavior).run(nullSink, scheduler);\n                            outputDisposables.push(outputDisposable);\n                        }\n                    }\n                }\n            }\n            return disposeAll([\n                disposeWith(() => {\n                    sink.end(scheduler.currentTime());\n                }, null),\n                view.run(sink, scheduler),\n                ...outputDisposables,\n            ]);\n        }\n    };\n}\nexport const component = curry2(componentFn);\n//# sourceMappingURL=component.js.map","import { disposeNone } from '@most/disposable';\nexport default class SettableDisposable {\n    constructor(initialDiposable = disposeNone()) {\n        this.initialDiposable = initialDiposable;\n        this.disposed = false;\n    }\n    setDisposable(disposable) {\n        if (this.disposable !== undefined) {\n            throw new Error('setDisposable called more than once');\n        }\n        this.disposable = disposable;\n        if (this.disposed) {\n            disposable.dispose();\n        }\n    }\n    dispose() {\n        if (this.disposed) {\n            return;\n        }\n        this.disposed = true;\n        if (this.disposable !== undefined) {\n            this.initialDiposable.dispose();\n            this.disposable.dispose();\n        }\n    }\n}\n//# sourceMappingURL=SettableDisposable.js.map","import { map, never, switchLatest } from '@most/core';\nimport { id } from '@most/prelude';\nimport { isFunction, O } from '../utils';\nimport SettableDisposable from '../utils/SettableDisposable';\nexport const $svg = branch((a) => document.createElementNS('http://www.w3.org/2000/svg', a));\nexport const $element = branch((a) => document.createElement(a));\nexport const $custom = branch((a) => document.createElement(a));\nexport const $node = $custom('node');\nexport const $wrapNativeElement = branch((rootNode) => rootNode);\n// childless nodes\nexport const $text = $textFn(id);\nexport class NodeSource {\n    constructor(sourceValue, sourceOp, $segments) {\n        this.sourceValue = sourceValue;\n        this.sourceOp = sourceOp;\n        this.$segments = $segments;\n    }\n    run(sink, scheduler) {\n        const element = this.sourceOp(this.sourceValue);\n        const $segments = this.$segments;\n        const disposable = new SettableDisposable();\n        sink.event(scheduler.currentTime(), {\n            $segments, element, disposable,\n            styleBehavior: [],\n            attributesBehavior: [],\n            stylePseudo: []\n        });\n        return disposable;\n    }\n}\nfunction node(text) {\n    return {\n        run(sink, scheduler) {\n            const element = document.createTextNode(text);\n            const disposable = new SettableDisposable();\n            sink.event(scheduler.currentTime(), { element, disposable });\n            return disposable;\n        }\n    };\n}\nexport function branch(sourceOp, postOp = id) {\n    return (sourceOpValue) => {\n        return function nodeComposeFn(...input) {\n            if (input.some(isFunction))\n                // @ts-ignore\n                return branch(sourceOp, O(postOp, ...input))(sourceOpValue);\n            const $segments = input.length ? input : [never()];\n            const $branch = new NodeSource(sourceOpValue, sourceOp, $segments);\n            return postOp($branch);\n        };\n    };\n}\nfunction $textFn(postOp = O(x => x)) {\n    return function textComp(...input) {\n        if (input.some(isFunction))\n            // @ts-ignore\n            return $textFn(O(postOp, ...input));\n        const children = input.map((x) => {\n            return typeof x === 'string' ? node(x) : switchLatest(map(node, x));\n        });\n        return branch(() => document.createElement('text'), postOp)(null)(...children);\n    };\n}\n//# sourceMappingURL=node.js.map","import { filter, map, tap } from '@most/core';\nimport { curry2, curry3 } from '@most/prelude';\nfunction styleFn(styleInput, source) {\n    return map(node => ({ ...node, style: { ...node.style, ...styleInput } }), source);\n}\nfunction stylePseudoFn(pseudoClass, styleInput, source) {\n    return map(node => ({\n        ...node,\n        stylePseudo: [\n            ...node.stylePseudo,\n            {\n                class: pseudoClass,\n                style: styleInput\n            }\n        ]\n    }), source);\n}\nfunction styleBehaviorFn(style, $node) {\n    return map(node => ({ ...node, styleBehavior: [...node.styleBehavior, style] }), $node);\n}\nexport const styleInline = (style) => ($node) => {\n    return map(node => {\n        const applyInlineStyleStream = tap((styleObj) => {\n            for (const prop in styleObj) {\n                if (Object.prototype.hasOwnProperty.call(styleObj, prop)) {\n                    // @ts-ignore\n                    const val = styleObj[prop];\n                    // @ts-ignore\n                    node.element.style[prop] = val;\n                }\n            }\n        }, style);\n        return { ...node, styleBehavior: [...node.styleBehavior, filter(() => false, applyInlineStyleStream)] };\n    }, $node);\n};\n// applyStyle\nexport const style = curry2(styleFn);\nexport const stylePseudo = curry3(stylePseudoFn);\nexport const styleBehavior = curry2(styleBehaviorFn);\n//# sourceMappingURL=style.js.map","import { constant, filter, join, map, skipRepeatsWith, switchLatest, tap, until } from '@most/core';\nimport { O } from '@aelea/core';\nexport const create = ({ fragment = '', fragmentsChange, title }) => {\n    const ignoreRepeatPathChanges = skipRepeatsWith((next, prev) => {\n        return next.length === prev.length && next.every((f, i) => f === prev[i]);\n    }, fragmentsChange);\n    return resolveRoute(ignoreRepeatPathChanges, [])({ fragment, title });\n};\nfunction resolveRoute(pathChange, parentFragments) {\n    return ({ fragment, title }) => {\n        const fragments = [...parentFragments, fragment];\n        const fragIdx = parentFragments.length;\n        const diff = O(skipRepeatsWith((prev, next) => {\n            return next[fragIdx] === prev[fragIdx];\n        }));\n        const contains = O(diff, filter(next => {\n            return isMatched(fragment, next[fragIdx]);\n        }));\n        const match = O(map((evt) => {\n            const lastTarget = evt.slice(-1)[0];\n            return isMatched(fragment, lastTarget);\n        }), tap(isMatched => {\n            if (isMatched) {\n                document.title = title || '';\n            }\n        }));\n        const miss = O(diff, filter(next => !isMatched(fragment, next[fragIdx])));\n        return {\n            create: resolveRoute(pathChange, fragments),\n            contains: contains(pathChange),\n            match: match(pathChange),\n            miss: miss(pathChange),\n            fragments\n        };\n    };\n}\nexport function isMatched(frag, path) {\n    if (frag instanceof RegExp) {\n        return Boolean(path === null || path === void 0 ? void 0 : path.match(frag));\n    }\n    return frag === path;\n}\nexport const contains = (route) => (ns) => {\n    return switchLatest(constant(until(route.miss, ns), route.contains));\n};\nexport const match = (route) => (ns) => {\n    const exactMatch = filter(isMatch => isMatch, route.match);\n    const unmatch = filter(isMatch => !isMatch, route.match);\n    return join(constant(until(unmatch, ns), exactMatch));\n};\n//# sourceMappingURL=resolveUrl.js.map","import { map } from '@most/core';\nimport { curry2 } from '@most/prelude';\nexport const attr = curry2((attrs, source) => map(ns => ({ ...ns, attributes: { ...ns.attributes, ...attrs } }), source));\nexport const attrBehavior = curry2((attrs, source) => map(ns => ({ ...ns, attributesBehavior: [...ns.attributesBehavior, attrs] }), source));\n//# sourceMappingURL=attribute.js.map","import { component, attr, event, style, $element } from \"@aelea/core\";\nimport { constant, map, merge, startWith } from \"@most/core\";\nconst $anchor = $element('a')(style({ textDecoration: 'none', }));\nexport const $Anchor = ({ url, route, $content }) => component(([sampleClick, click], [sampleFocus, focus]) => {\n    const trailingSlash = /\\/$/;\n    const href = url.replace(trailingSlash, '');\n    const contains = merge(constant(true, route.contains), constant(false, route.miss));\n    return [\n        $anchor(attr({ href }), sampleClick(event('click'), map((clickEv) => {\n            clickEv.preventDefault();\n            const pathName = clickEv.currentTarget instanceof HTMLAnchorElement ? clickEv.currentTarget.pathname : null;\n            if (pathName) {\n                // avoid repeated adjacent states\n                if (location.pathname !== pathName) {\n                    history.pushState(null, '', pathName);\n                }\n                return pathName;\n            }\n            else {\n                throw new Error('target anchor contains no href');\n            }\n        })), sampleFocus($anchor => {\n            const focus = constant(true, merge(event('focus', $anchor), event('pointerenter', $anchor)));\n            const blur = constant(false, merge(event('blur', $anchor), event('pointerleave', $anchor)));\n            return startWith(false, merge(focus, blur));\n        }))($content),\n        { click, match: route.match, contains, focus }\n    ];\n});\n//# sourceMappingURL=$Anchor.js.map","export const THEME_PALLETE_SELECTED_KEY = `!!THEME_PALLETE_SELECTED_KEY`;\nexport function changeTheme(name, pallete) {\n    const newTheme = { name, pallete };\n    localStorage.setItem(THEME_PALLETE_SELECTED_KEY, JSON.stringify(newTheme));\n    Object.assign(theme, newTheme);\n    self.location.reload();\n}\nexport const selected = JSON.parse(localStorage.getItem(THEME_PALLETE_SELECTED_KEY));\nif (selected === null) {\n    console.error('No theme as been assigned to localstorage');\n}\nexport const theme = selected;\nexport const pallete = theme.pallete;\n//# sourceMappingURL=staticThemeService.js.map","import { O, style } from \"@aelea/core\";\nconst stretch = style({\n    position: 'absolute',\n    top: '0',\n    bottom: '0',\n    right: '0',\n    left: '0'\n});\nconst spacingTiny = style({\n    gap: '4px'\n});\nconst spacingSmall = style({\n    gap: '8px'\n});\nconst spacing = style({\n    gap: '16px'\n});\nconst spacingBig = style({\n    gap: '26px'\n});\nconst flex = style({ flex: 1 });\nconst displayFlex = style({ display: 'flex' });\nconst row = O(displayFlex, style({ flexDirection: 'row' }));\nconst column = O(displayFlex, style({ flexDirection: 'column' }));\nconst rowFlex = O(row, flex);\nconst columnFlex = O(column, flex);\nexport default {\n    stretch, spacingTiny, spacingSmall, spacing, spacingBig, flex, displayFlex, row, column, rowFlex, columnFlex\n};\n//# sourceMappingURL=layoutSheet.js.map","import { $custom, $node, style } from '@aelea/core';\nimport { pallete } from '@aelea/ui-components-theme';\nimport layoutSheet from './style/layoutSheet';\nexport const $row = $custom('row')(layoutSheet.row);\nexport const $column = $custom('column')(layoutSheet.column);\nexport const $card = $column(style({\n    padding: '16px',\n    backgroundColor: pallete.middleground,\n    boxShadow: '10px 10px 0px -6px rgba(0, 0, 0, .25)',\n}));\nexport const $mainCard = $card(layoutSheet.spacingBig, style({ width: '400px', margin: '0 auto' }));\nexport const $seperator = $node(style({\n    minHeight: '1px',\n    minWidth: '1px',\n    background: pallete.description\n}))();\n//# sourceMappingURL=$elements.js.map","import { $svg, attr } from \"@aelea/core\";\nimport { pallete } from \"@aelea/ui-components-theme\";\nexport const $icon = ({ $content, width = 24, height = width, viewBox = `0 0 ${width} ${height}`, fill = pallete.description }) => ($svg('svg')(attr({ viewBox, width, height, fill }))($content));\n//# sourceMappingURL=$icon.js.map","import { $svg, attr } from \"@aelea/core\"\n\n\n\nexport const $trash = $svg('path')(\n  attr({\n    d: 'M6.24 18.84A2.16 2.16 0 008.4 21h7.2a2.16 2.16 0 002.16-2.16L19.2 7.32H4.8l1.44 11.52zm7.92-9.36h1.44v9.36h-1.44V9.48zm-2.88 0h1.44v9.36h-1.44V9.48zm-2.88 0h1.44v9.36H8.4V9.48zm10.44-5.04h-4.68S13.838 3 13.44 3h-2.88c-.398 0-.72 1.44-.72 1.44H5.16a1.08 1.08 0 00-1.08 1.08V6.6h15.84V5.52a1.08 1.08 0 00-1.08-1.08z'\n  })\n)()\n\nexport const $aeleaLogo = $svg('path')(\n  attr({\n    d: 'M17.648 58.063l-.046 1.64c0 1.219.343 1.992 1.03 2.32.266.125.571.188.915.188.547 0 1.11-.125 1.687-.375-.593.25-1.109.578-1.547.984-.437.407-.882.805-1.335 1.196-1.125.937-2.258 1.406-3.399 1.406-1.14 0-1.75-.656-1.828-1.969a11.402 11.402 0 01-.047-1.031c-2.812 1.953-5.39 2.93-7.734 2.93-1.985 0-3.36-.602-4.125-1.805-.282-.438-.422-1.04-.422-1.805 0-.765.234-1.531.703-2.297a9.178 9.178 0 011.781-2.133c1.281-1.187 2.828-2.164 4.64-2.93 1.345-.577 3.071-.905 5.18-.984v-1.03c0-2.485-.226-4.165-.68-5.04-.452-.875-1.038-1.516-1.757-1.922-.719-.422-1.562-.633-2.531-.633-1.64 0-3.086.32-4.336.961 1.719-1.422 2.976-2.359 3.773-2.812 1.64-.922 3.125-1.383 4.453-1.383 1.344 0 2.352.195 3.024.586a4.45 4.45 0 011.594 1.547c.672 1.125 1.007 2.742 1.007 4.851v9.54zM6.633 61.437c.375.266.812.461 1.312.586.5.125 1.242.188 2.227.188.984 0 1.96-.234 2.93-.703v-4.922H9.305c-1.36 0-2.547.094-3.563.281a6.641 6.641 0 00-.304 1.922c0 .61.101 1.133.304 1.57.219.438.516.797.89 1.078zM128.352 58.063l.046 1.64c0 1.219-.343 1.992-1.031 2.32a2.12 2.12 0 01-.914.188c-.547 0-1.109-.125-1.687-.375.593.25 1.109.578 1.546.984.438.407.883.805 1.336 1.196 1.125.937 2.258 1.406 3.399 1.406s1.75-.656 1.828-1.969c.031-.344.047-.687.047-1.031 2.812 1.953 5.39 2.93 7.734 2.93 1.985 0 3.36-.602 4.125-1.805.281-.438.422-1.04.422-1.805 0-.765-.234-1.531-.703-2.297a9.177 9.177 0 00-1.781-2.133c-1.281-1.187-2.828-2.164-4.641-2.93-1.344-.577-3.07-.905-5.18-.984v-1.03c0-2.485.227-4.165.68-5.04.453-.875 1.039-1.516 1.758-1.922.719-.422 1.562-.633 2.531-.633 1.641 0 3.086.32 4.336.961-1.719-1.422-2.976-2.359-3.773-2.812-1.641-.922-3.125-1.383-4.453-1.383-1.344 0-2.352.195-3.024.586a4.453 4.453 0 00-1.594 1.547c-.671 1.125-1.007 2.742-1.007 4.851v9.54zm11.015 3.374c-.375.266-.812.461-1.312.586-.5.125-1.243.188-2.227.188-.984 0-1.961-.234-2.93-.703v-4.922h3.797c1.36 0 2.547.094 3.563.281.203.672.304 1.313.304 1.922 0 .61-.101 1.133-.304 1.57a3.008 3.008 0 01-.891 1.078zM55.063 59.219c-2.855 3.187-6.396 5.177-10.626 5.968-.979.167-2.187.25-3.624.25-1.438 0-2.792-.395-4.063-1.187a10.166 10.166 0 01-3.125-3.125c-1.542-2.458-2.313-5.458-2.313-9 0-2.333.896-4.917 2.688-7.75 1.75-2.792 3.885-5.125 6.406-7 2.709-2 5.271-3 7.688-3 1.25 0 2.302.458 3.156 1.375.792.896 1.188 1.917 1.188 3.063 0 1.145-.25 2.208-.75 3.187-.5.958-1.157 1.896-1.97 2.813a22.319 22.319 0 01-2.75 2.656 42.65 42.65 0 01-3.156 2.343c-1.52 1.042-3.437 2.22-5.75 3.532.667 2.52 1.844 4.468 3.532 5.843 1.687 1.355 3.864 2.032 6.531 2.032 2.25 0 4.563-.667 6.938-2zm-9.438-12.532c.563-.895.844-1.77.844-2.624 0-.855-.094-1.573-.282-2.157a5.005 5.005 0 00-.812-1.593c-.813-1.042-1.865-1.563-3.156-1.563-3.167 0-4.75 3.23-4.75 9.688 0 1.145.093 2.28.281 3.406 3.667-1.021 6.292-2.74 7.875-5.157zM90.938 59.219c2.854 3.187 6.395 5.177 10.624 5.968.98.167 2.188.25 3.626.25 1.437 0 2.791-.395 4.062-1.187a10.17 10.17 0 003.125-3.125c1.542-2.458 2.313-5.458 2.313-9 0-2.333-.896-4.917-2.688-7.75-1.75-2.792-3.885-5.125-6.406-7-2.709-2-5.271-3-7.688-3-1.25 0-2.302.458-3.156 1.375-.792.896-1.188 1.917-1.188 3.063 0 1.145.25 2.208.75 3.187.5.958 1.157 1.896 1.97 2.813a22.32 22.32 0 002.75 2.656 42.517 42.517 0 003.156 2.343c1.52 1.042 3.437 2.22 5.75 3.532-.667 2.52-1.844 4.468-3.532 5.843-1.687 1.355-3.864 2.032-6.531 2.032-2.25 0-4.563-.667-6.938-2zm9.437-12.532c-.563-.895-.844-1.77-.844-2.624 0-.855.094-1.573.281-2.157a5.01 5.01 0 01.813-1.593c.813-1.042 1.865-1.563 3.156-1.563 3.167 0 4.75 3.23 4.75 9.688a20.63 20.63 0 01-.281 3.406c-3.667-1.021-6.292-2.74-7.875-5.157zM81.375 65.125a54.597 54.597 0 00-1.969 1.625 15.52 15.52 0 01-1.937 1.438c-1.48.958-3.01 1.437-4.594 1.437-2.292 0-3.542-1.583-3.75-4.75a51.288 51.288 0 01-.063-2.5V28.937c0-2.854-.645-4.708-1.937-5.562-.542-.375-1.063-.563-1.563-.563-.666 0-1.114.021-1.343.063-.23.02-.427.042-.594.063 3-2.084 4.896-3.334 5.688-3.75a92.84 92.84 0 013.218-1.657c1.125-.562 1.99-1 2.594-1.312v45.5c.02.729.146 1.364.375 1.906.52 1.125 1.833 1.688 3.938 1.688.666 0 1.312-.063 1.937-.188z'\n  })\n)()\n\nexport const $github = $svg('path')(\n  attr({\n    d: 'M512 0C229.12 0 0 229.12 0 512c0 226.56 146.56 417.92 350.08 485.76 25.6 4.48 35.2-10.88 35.2-24.32 0-12.16-.64-52.48-.64-95.36-128.64 23.68-161.92-31.36-172.16-60.16-5.76-14.72-30.72-60.16-52.48-72.32-17.92-9.6-43.52-33.28-.64-33.92 40.32-.64 69.12 37.12 78.72 52.48 46.08 77.44 119.68 55.68 149.12 42.24 4.48-33.28 17.92-55.68 32.64-68.48-113.92-12.8-232.96-56.96-232.96-252.8 0-55.68 19.84-101.76 52.48-137.6-5.12-12.8-23.04-65.28 5.12-135.68 0 0 42.88-13.44 140.8 52.48 40.96-11.52 84.48-17.28 128-17.28 43.52 0 87.04 5.76 128 17.28 97.92-66.56 140.8-52.48 140.8-52.48 28.16 70.4 10.24 122.88 5.12 135.68 32.64 35.84 52.48 81.28 52.48 137.6 0 196.48-119.68 240-233.6 252.8 18.56 16 34.56 46.72 34.56 94.72 0 68.48-.64 123.52-.64 140.8 0 13.44 9.6 29.44 35.2 24.32C877.44 929.92 1024 737.92 1024 512 1024 229.12 794.88 0 512 0z'\n  })\n)()\n\n\n","import { currentTime, } from '@most/scheduler';\nimport { skipAfter, map, continueWith, constant, switchLatest, loop, startWith } from '@most/core';\nimport { O } from '../utils';\nimport { disposeWith } from '@most/disposable';\nimport { compose, curry3 } from '@most/prelude';\n// copied & modified from https://github.com/mostjs/x-animation-frame/tree/master\nclass AnimationFrameSource {\n    constructor(afp) {\n        this.afp = afp;\n    }\n    run(sink, scheduler) {\n        const requestTime = currentTime(scheduler);\n        const propagate = () => eventThenEnd(requestTime, currentTime(scheduler), sink);\n        const rafId = this.afp.requestAnimationFrame(propagate);\n        return disposeWith(fid => this.afp.cancelAnimationFrame(fid), rafId);\n    }\n}\nconst eventThenEnd = (requestTime, responseTime, sink) => {\n    sink.event(requestTime, { requestTime, responseTime });\n    sink.end(requestTime);\n};\nexport const nextAnimationFrame = (afp = window) => new AnimationFrameSource(afp);\nexport const animationFrames = (afp = window) => continueWith(() => animationFrames(afp), nextAnimationFrame(afp));\nexport const drawLatest = compose(\n// @ts-ignore\nswitchLatest, map(x => constant(x, nextAnimationFrame(window))));\nexport const MOTION_NO_WOBBLE = { stiffness: 170, damping: 26, precision: .01 };\nexport const MOTION_GENTLE = { stiffness: 120, damping: 14, precision: .01 };\nexport const MOTION_WOBBLY = { stiffness: 180, damping: 12, precision: .01 };\nexport const MOTION_STIFF = { stiffness: 210, damping: 20, precision: .01 };\n/**\n * adapting to motion changes using \"spring physics\"\n *\n * @param initialPositon - animation starting position to animate from\n * @param motionEnvironment - config spring metrics.\n *\n *  noWobble =  stiffness 170 damping 26\n *\n *  gentle =    stiffness 120 damping 14\n *\n *  wobbly =    stiffness 180 damping 12\n *\n *  stiff =     stiffness 210 damping 20\n *\n *  @see  modified-from https://github.com/chenglou/react-motion/blob/master/src/stepper.js\n */\nexport const motion = curry3((motionEnvironment, initialState, change) => {\n    const motionEnv = { ...MOTION_STIFF, ...motionEnvironment };\n    const ma = motionState(motionEnv, { position: initialState, velocity: 0 }, change);\n    return map(s => s.position, ma);\n});\n// used in cases where velocity feedback is needed(for renimation)\nexport const motionState = curry3((motionEnvironment, initialState, change) => {\n    const motionEnv = { ...MOTION_STIFF, ...motionEnvironment };\n    return O(loop((seed, target) => {\n        const frames = O(map(() => stepFrame(target, seed, motionEnv)), skipAfter(n => n.position === target));\n        return { seed, value: frames(animationFrames()) };\n    }, initialState), switchLatest, startWith(initialState))(change);\n});\nfunction stepFrame(target, state, motionEnv) {\n    const fps = 1 / 60;\n    const delta = target - state.position;\n    const spring = motionEnv.stiffness * delta;\n    const damper = motionEnv.damping * state.velocity;\n    const acceleration = spring - damper;\n    const newVelocity = state.velocity + (acceleration * fps);\n    const newPosition = state.position + (newVelocity * fps);\n    const settled = Math.abs(newVelocity) < motionEnv.precision && Math.abs(delta) < motionEnv.precision;\n    state.velocity = newVelocity;\n    state.position = settled ? target : newPosition;\n    return state;\n}\n//# sourceMappingURL=animate.js.map","import { $Node, motion, styleInline } from \"@aelea/core\"\nimport { combine, now } from \"@most/core\"\n\nexport function fadeIn($content: $Node) {\n  const fadeIn = motion({ stiffness: 70, damping: 26, precision: 1 }, 0, now(100))\n  const slideIn = motion({ stiffness: 270, damping: 46, precision: 1 }, 25, now(0))\n\n  const animation = styleInline(\n    combine((opacity, slide) => ({ opacity: `${opacity}%`, transform: `translate(0, ${slide}px)` }), fadeIn, slideIn)\n  )\n\n  return animation(\n    $content\n  )\n}","\nimport { $Branch, component, style } from '@aelea/core'\nimport { $column, layoutSheet } from '@aelea/ui-components'\nimport { fadeIn } from './transitions/enter'\n\n\ninterface Example {\n  file: string,\n}\n\nexport default (config: Example) => (...$content: $Branch[]) => component(() => {\n\n  return [\n    fadeIn(\n      $column(layoutSheet.spacingBig, style({ flex: 1 }))(\n        ...$content\n      )\n    )\n  ]\n})\n\n","import { component, Behavior, O, styleBehavior, StyleCSS, style } from \"@aelea/core\"\nimport { IAnchor, $Anchor } from \"@aelea/router\"\nimport { combine } from \"@most/core\"\nimport { pallete } from \"@aelea/ui-components-theme\"\n\n\n\nexport interface ILink extends IAnchor {\n  styles?: StyleCSS\n}\n\nexport const $Link = ({ url, route, $content, styles = {} }: ILink) => component((\n  [sampleClick, click]: Behavior<string, string>,\n  [sampleContains, active]: Behavior<boolean, boolean>,\n  [sampleFocus, focus]: Behavior<boolean, boolean>,\n) => {\n\n  const anchorOps = O(\n    style({\n      color: pallete.message,\n      padding: '2px 4px',\n      ...styles,\n    }),\n    styleBehavior(\n      combine((isActive, isFocus): StyleCSS | null => {\n        return isActive ? { color: pallete.primary, cursor: 'default' }\n          : isFocus ? { backgroundColor: pallete.primary }\n            : null\n      }, active, focus)\n    )\n  )\n\n  return [\n    anchorOps(\n      $Anchor({ $content, url, route })({\n        click: sampleClick(),\n        focus: sampleFocus(),\n        contains: sampleContains()\n      })\n    ),\n\n    { click, active, focus }\n  ]\n})","import { style, O, stylePseudo } from '@aelea/core';\nimport { pallete } from '@aelea/ui-components-theme';\nconst text = style({\n    fontFamily: `'Nunito', Fira Code`,\n    fontWeight: 100,\n    fontSize: '1.15rem'\n});\nconst customScroll = O(stylePseudo('::-webkit-scrollbar-thumb', {\n    backgroundColor: pallete.description\n}), stylePseudo('::-webkit-scrollbar', {\n    backgroundColor: 'transparent'\n}));\nconst control = O(text, style({\n    border: '2px solid transparent',\n    color: pallete.message,\n    outline: 'none',\n    flexShrink: 0,\n}));\nexport default {\n    customScroll,\n    text,\n    main: O(text, style({\n        height: '100vh',\n        color: pallete.message,\n        fill: pallete.message,\n        overflowY: 'scroll',\n        backgroundColor: pallete.background,\n        margin: '0',\n        scrollbarColor: 'auto',\n        scrollbarWidth: 'thin',\n        display: 'flex'\n    }), customScroll),\n    control,\n    input: O(control, style({\n        minWidth: '100px',\n        backgroundColor: 'transparent',\n        border: 'none',\n        borderBottom: `2px solid ${pallete.description}`,\n        paddingBottom: '2px',\n        flex: 1,\n    }), stylePseudo('::placeholder', {\n        color: pallete.description\n    })),\n    btn: O(control, style({\n        cursor: 'pointer',\n        backgroundColor: 'transparent',\n        border: `2px solid ${pallete.description}`,\n        color: pallete.message,\n        padding: '5px 15px',\n        display: 'flex',\n        alignItems: 'center',\n    }))\n};\n//# sourceMappingURL=designSheet.js.map","import { BehaviorSource, Pipe } from \"@aelea/core\";\nimport { combineArray, multicast, skip, startWith, tap } from \"@most/core\";\nimport { curry2 } from \"@most/prelude\";\nexport function stateBehavior(initialState) {\n    const bs = new BehaviorSource();\n    const mbs = multicast(bs);\n    return [bs.sample, replayLatest(mbs, initialState)];\n}\nclass StateSink extends Pipe {\n    constructor(parent, sink) {\n        super(sink);\n        this.parent = parent;\n        this.sink = sink;\n    }\n    event(t, x) {\n        this.parent.latestvalue = x;\n        this.parent.hasValue = true;\n        this.sink.event(t, x);\n    }\n}\nexport function replayLatest(s, initialState) {\n    if (arguments.length === 1) {\n        return new ReplayLatest(s);\n    }\n    else {\n        return new ReplayLatest(s, initialState);\n    }\n}\nexport class ReplayLatest {\n    constructor(source, initialState) {\n        this.source = source;\n        this.initialState = initialState;\n        this.hasValue = false;\n        this.hasInitial = arguments.length === 2;\n    }\n    run(sink, scheduler) {\n        const startWithReplay = this.hasValue\n            ? startWith(this.latestvalue)\n            : this.hasInitial\n                ? startWith(this.initialState)\n                : null;\n        const withReplayedValue = startWithReplay ? startWithReplay(this.source) : this.source;\n        return withReplayedValue.run(new StateSink(this, sink), scheduler);\n    }\n}\nexport function combineState(initialState, state) {\n    const entries = Object.entries(state);\n    const streams = entries.map(([k, s]) => {\n        return startWith(initialState[k], s);\n    });\n    const combinedWithInitial = combineArray((...arrgs) => {\n        return arrgs.reduce((seed, val, idx) => {\n            const key = entries[idx][0];\n            seed[key] = val;\n            return seed;\n        }, { ...initialState });\n    }, streams);\n    return skip(1, combinedWithInitial);\n}\n// temorary typings fix for this issue https://github.com/mostjs/core/pull/543\nexport function combineArrayMap(cb, ...streamList) {\n    return combineArray(cb, streamList);\n}\nexport const localStorageTreeFactory = (rootChainKey) => (key, initialDefaultState) => {\n    const mktTree = `${rootChainKey}.${key}`;\n    const storeData = localStorage.getItem(mktTree);\n    const initialState = storeData ? JSON.parse(storeData) : initialDefaultState;\n    const storeCurry = curry2((writePipe = (x => x), stream) => {\n        const writeOp = writePipe(stream);\n        const writeEffect = tap(state => {\n            scope.state = state;\n            localStorage.setItem(mktTree, JSON.stringify(state));\n        }, writeOp);\n        return writeEffect;\n    });\n    let _state = initialState;\n    const scope = {\n        get state() {\n            return _state;\n        },\n        set state(newState) {\n            _state = newState;\n        },\n        store: storeCurry,\n        craete: localStorageTreeFactory(mktTree)\n    };\n    return scope;\n};\n//# sourceMappingURL=state.js.map","import { constant, filter, merge } from '@most/core';\nimport { $element, event, O, style } from '@aelea/core';\nimport layoutSheet from '../../style/layoutSheet';\nimport { pallete } from '@aelea/ui-components-theme';\nexport const interactionOp = O((src) => merge(event('focus', src), event('pointerover', src)), constant(true));\nexport const dismissOp = O((src) => merge(event('blur', src), event('pointerout', src)), filter(x => document.activeElement !== x.target), // focused elements cannot be dismissed\nconstant(false));\nexport const $form = $element('form')(layoutSheet.column);\nexport const $label = $element('label')(layoutSheet.column, style({ cursor: 'pointer', color: pallete.description }));\n//# sourceMappingURL=form.js.map","export var InputType;\n(function (InputType) {\n    InputType[\"TEXT\"] = \"text\";\n    InputType[\"NUMBER\"] = \"number\";\n})(InputType || (InputType = {}));\n//# sourceMappingURL=types.js.map","import { $element, attr, component, event, O, style, styleBehavior } from '@aelea/core';\nimport { pallete } from '@aelea/ui-components-theme';\nimport { multicast, never, now, tap } from '@most/core';\nimport { filter } from '@most/core';\nimport { merge } from '@most/core';\nimport { empty, map, switchLatest } from \"@most/core\";\nimport designSheet from '../../style/designSheet';\nimport { combineState } from '../../utils/state';\nimport { dismissOp, interactionOp } from \"./form\";\nimport { InputType } from './types';\nexport const $Field = ({ type = InputType.TEXT, value = empty(), name, placeholder, autocomplete = true, fieldStyle = {}, validation = never }) => component(([interactionBehavior, focusStyle], [dismissBehavior, dismissstyle], [sampleChange, change]) => {\n    const multicastValidation = O(validation, multicast);\n    const alert = multicastValidation(change);\n    const focus = merge(focusStyle, dismissstyle);\n    const state = combineState({ focus: false, alert: null }, { focus, alert });\n    return [\n        $element('input')(attr({ name, type, placeholder, autocomplete: autocomplete ? null : 'off' }), designSheet.input, style(fieldStyle), sampleChange(event('input'), map(inputEv => {\n            if (inputEv.target instanceof HTMLInputElement) {\n                const text = inputEv.target.value;\n                return text || '';\n            }\n            return '';\n        })), styleBehavior(map(({ focus, alert }) => {\n            if (alert) {\n                return { borderBottom: `2px solid ${pallete.negative}` };\n            }\n            return focus ? { borderBottom: `2px solid ${pallete.primary}` } : null;\n        }, state)), interactionBehavior(interactionOp), dismissBehavior(dismissOp), O(map(node => merge(now(node), filter(() => false, tap(val => {\n            // applying by setting `HTMLInputElement.value` imperatively(only way known to me)\n            node.element.value = String(val);\n        }, value)))), switchLatest))(),\n        {\n            change\n        }\n    ];\n});\n//# sourceMappingURL=$Field.js.map","import { at, map, merge, multicast, now, scan, skip, skipRepeats, skipRepeatsWith, switchLatest } from '@most/core';\nimport { $node, $text, O, style, styleBehavior } from '@aelea/core';\nexport const sumFromZeroOp = scan((current, x) => current + x, 0);\nvar Direction;\n(function (Direction) {\n    Direction[Direction[\"INCREMENT\"] = 0] = \"INCREMENT\";\n    Direction[Direction[\"DECREMENT\"] = 1] = \"DECREMENT\";\n})(Direction || (Direction = {}));\nfunction getDetlaSlotIdex(current, change, i) {\n    if (current[i] !== change[i] || i > change.length)\n        return i;\n    return getDetlaSlotIdex(current, change, i + 1);\n}\nexport const $NumberTicker = ({ value$, incrementColor, decrementColor, textStyle = {}, slots = 10 }) => {\n    const uniqueValues$ = skipRepeats(value$);\n    const incrementMulticast = O(scan((seed, change) => {\n        const changeStr = change.toLocaleString();\n        if (seed === null) {\n            return { change, dir: null, pos: changeStr.length, changeStr };\n        }\n        const dir = change > seed.change ? Direction.INCREMENT : Direction.DECREMENT;\n        const currentStr = seed.change.toLocaleString();\n        const isWholeNumber = changeStr.split('.').length === 1;\n        // TODO handle fractions\n        const pos = isWholeNumber && changeStr.length > currentStr.length ? 0 : getDetlaSlotIdex(currentStr, changeStr, 0);\n        return { change, dir, pos, changeStr };\n    }, null), skip(1), // skips inital null that scans emit - preventing count from getting an inital color\n    multicast)(uniqueValues$);\n    const dirStyleMap = {\n        [Direction.INCREMENT]: { color: incrementColor },\n        [Direction.DECREMENT]: { color: decrementColor },\n    };\n    return $node(...Array(slots).fill(undefined).map((_, slot) => $text(style({ transition: 'ease-out .25s color', ...textStyle }), styleBehavior(switchLatest(O(skipRepeatsWith((x, y) => x.changeStr[slot] === y.changeStr[slot] && slot < y.pos), map(({ pos, dir }) => {\n        const decayColor = at(1000, {});\n        if (slot < pos) {\n            return decayColor;\n        }\n        return merge(now(dirStyleMap[dir]), decayColor);\n    }))(incrementMulticast))))(O(map(({ changeStr }) => { var _a; return (_a = changeStr[slot]) !== null && _a !== void 0 ? _a : ''; }), skipRepeats)(incrementMulticast))));\n};\n//# sourceMappingURL=$NumberTicker.js.map","\nimport { $node, $text, Behavior, component, O, style } from '@aelea/core'\nimport { $column, $Field, $NumberTicker, $row, layoutSheet } from '@aelea/ui-components'\nimport { pallete } from '@aelea/ui-components-theme'\nimport { combine, empty, map, startWith } from '@most/core'\n\n\nconst add = (x: number, y: number) => x + y\n\n\nconst extractValue = O(\n  map((str: string) => Number(str)),\n  startWith(0)\n)\n\nconst $plus = $node(\n  style({\n    justifyContent: 'center', alignItems: 'center',\n    width: '36px', color: pallete.description\n  }),\n  layoutSheet.displayFlex\n)\n\nexport default component((\n  [sampleX, x]: Behavior<string, number>,\n  [sampleY, y]: Behavior<string, number>\n) =>\n  [\n    $column(layoutSheet.spacingSmall)(\n\n      $row(\n        $plus(\n          $text('+')\n        ),\n        $column(layoutSheet.spacingTiny)(\n          $Field({ value: empty(), placeholder: '0' })({\n            change: sampleX(extractValue)\n          }),\n          $Field({ value: empty(), placeholder: '0' })({\n            change: sampleY(extractValue)\n          })\n        )\n      ),\n\n      $row(\n        $node(style({ width: '36px' }))(),\n        $NumberTicker({\n          value$: combine(add, x, y),\n          decrementColor: pallete.negative,\n          incrementColor: pallete.positive,\n          slots: 30\n        })\n      )\n\n    )\n  ]\n)\n\n\n","import { map, mergeArray, never } from \"@most/core\";\nimport { $element, component, event, styleBehavior, attrBehavior } from '@aelea/core';\nimport { dismissOp, interactionOp } from './form';\nimport { pallete } from '@aelea/ui-components-theme';\nimport designSheet from \"../../style/designSheet\";\nexport const $Button = ({ disabled = never(), $content }) => component(([interactionBehavior, focusStyle], [dismissBehavior, dismissstyle], [sampleClick, click]) => {\n    const $button = $element('button')(designSheet.btn, sampleClick(event('pointerup')), styleBehavior(map(disabled => disabled ? { opacity: .4, pointerEvents: 'none' } : null, disabled)), attrBehavior(map(disabled => ({ disabled }), disabled)), styleBehavior(map(active => active ? { borderColor: pallete.primary } : null, mergeArray([focusStyle, dismissstyle]))), interactionBehavior(interactionOp), dismissBehavior(dismissOp));\n    return [\n        $button($content),\n        {\n            click\n        }\n    ];\n});\n//# sourceMappingURL=$Button.js.map","import { $ButtonIcon } from \"@aelea/ui-components\"\nimport { $trash } from \"./$icons\"\n\nexport const $TrashBtn = $ButtonIcon($trash)\n","import { map, mergeArray } from \"@most/core\";\nimport { component, event, O, style, styleBehavior } from '@aelea/core';\nimport { dismissOp, interactionOp } from \"./form\";\nimport { $icon } from \"../../elemets/$icon\";\nimport designSheet from \"../../style/designSheet\";\nimport { pallete } from \"@aelea/ui-components-theme\";\nexport const $ButtonIcon = ($content) => component(([interactionBehavior, focusStyle], [dismissBehavior, dismissstyle], [sampleClick, click]) => {\n    const iconOp = O(designSheet.control, style({ cursor: 'pointer', fill: pallete.description, borderRadius: '50%', }), interactionBehavior(interactionOp), dismissBehavior(dismissOp), sampleClick(event('pointerup')), styleBehavior(map(active => active ? { borderColor: pallete.primary } : null, mergeArray([focusStyle, dismissstyle]))));\n    const $buttonIcon = iconOp($icon({ $content }));\n    return [\n        $buttonIcon,\n        { click }\n    ];\n});\n//# sourceMappingURL=$ButtonIcon.js.map","import { $text, Behavior, component, style } from '@aelea/core'\nimport { $Button, $column, $NumberTicker, $row, layoutSheet } from '@aelea/ui-components'\nimport { pallete } from '@aelea/ui-components-theme'\nimport { constant } from '@most/core'\nimport { Stream } from '@most/types'\n\n\ninterface Counter {\n  value: Stream<number>\n}\n\nexport default ({ value }: Counter) => component((\n  [sampleIncrement, increment]: Behavior<PointerEvent, 1>,\n  [sampleDecrement, decrement]: Behavior<PointerEvent, -1>\n) => {\n\n\n  return [\n\n    $row(style({ alignItems: 'center', placeContent: 'space-between' }), layoutSheet.spacing)(\n      $column(style({ borderRadius: '5px', alignItems: 'center' }), layoutSheet.spacing)(\n        $Button({ $content: $text('+') })({\n          click: sampleIncrement(\n            constant(1)\n          )\n        }),\n        $Button({ $content: $text('-') })({\n          click: sampleDecrement(\n            constant(-1)\n          )\n        }),\n      ),\n\n      $NumberTicker({\n        value$: value,\n        textStyle: {\n          fontSize: '30px'\n        },\n        decrementColor: pallete.negative,\n        incrementColor: pallete.positive\n      })\n    ),\n\n    { increment, decrement }\n\n  ]\n})\n","\nimport { $text, Behavior, behavior, component, O, style } from '@aelea/core'\nimport { $Button, $column, $row, $seperator, layoutSheet } from '@aelea/ui-components'\nimport { chain, constant, map, merge, mergeArray, now, scan, snapshot, startWith, until } from '@most/core'\nimport { $TrashBtn } from '../../../elements/$common'\nimport $Counter from './$Counter'\n\nconst $AddBtn = $Button({\n  $content: $text('Add One')\n})\nexport const sumAdd = scan((current: number, x: number) => current + x)\n\nexport default component((\n  [sampleAddedCounter, addedCounter]: Behavior<PointerEvent, PointerEvent>,\n  [sampleDisposeCounter, disposeCounter]: Behavior<PointerEvent, PointerEvent>,\n  [sampleCountersIncrement, counterIncrement]: Behavior<1, 1>,\n  [sampleCountersDecrement, counterDecrement]: Behavior<-1, -1>,\n  [sampleDisposedCounterCount, disposedCounterCount]: Behavior<any, number>,\n) => {\n\n  const INITAL_COUNT = 0\n  const sumWithInitial = sumAdd(INITAL_COUNT)\n\n  const counting = mergeArray([disposedCounterCount, counterIncrement, counterDecrement])\n  const totalCount = sumWithInitial(counting)\n\n  const addCounter = merge(addedCounter, now(null))\n\n  return [\n\n    $column(layoutSheet.spacing)(\n      $row(style({ placeContent: 'space-between', alignItems: 'center' }), layoutSheet.spacing)(\n        $text(\n          map(n => `Counters: ${n}`, sumWithInitial(merge(constant(1, addCounter), constant(-1, disposeCounter))))\n        ),\n        $text(\n          map(n => `Sum: ${n}`, totalCount)\n        ),\n        $AddBtn({\n          click: sampleAddedCounter()\n        }),\n      ),\n      chain(() => {\n\n        const [sampleRemove, remove] = behavior<PointerEvent, PointerEvent>()\n        const [sampleValueChange, valueChange] = behavior<number, number>()\n\n        const value = startWith(0, valueChange)\n\n\n        return until(remove)(\n          $column(layoutSheet.spacing)(\n            $seperator,\n            $row(style({ alignItems: 'center' }), layoutSheet.spacingBig)(\n              $TrashBtn({\n                click: O(\n                  sampleRemove(),\n                  sampleDisposeCounter(),\n                  sampleDisposedCounterCount(\n                    snapshot(val => -val, value)\n                  ),\n                )\n              }),\n              $Counter({ value })({\n                increment: O(\n                  sampleCountersIncrement(),               \n                  sampleValueChange(\n                    snapshot((val, increment) => val + increment, value)\n                  ),\n                ),\n                decrement: O(\n                  sampleCountersDecrement(),\n                  sampleValueChange(\n                    snapshot((val, increment) => val + increment, value)\n                  ),\n                )\n              })\n            )\n          )\n        )\n      }, addCounter)\n    )\n\n  ]\n})\n\n","import { chain, combine, filter, map, merge, multicast, now, skipAfter, skipRepeats, snapshot, startWith, switchLatest } from \"@most/core\";\nimport { remove } from \"@most/prelude\";\nimport { behavior, component, event, eventElementTarget, motion, O, style, styleInline, styleBehavior } from '@aelea/core';\nimport { $column, $row } from \"../$elements\";\nimport layoutSheet from \"../style/layoutSheet\";\nconst clamp = (val, min, max) => val > max ? max : val < min ? min : val;\nconst swap = (a, idx, arr) => {\n    const currentIdx = arr.indexOf(a);\n    if (currentIdx === -1)\n        throw new Error('unable to find element within the array');\n    const newArr = remove(currentIdx, arr);\n    newArr.splice(idx, 0, a);\n    return newArr;\n};\nconst $dragItem = $row(style({ cursor: 'grab', width: '100%', position: 'absolute' }));\nexport const $Sortable = (config) => component(([sampleOrderChange, orderChange]) => {\n    var _a;\n    const gap = ((_a = config.gap) !== null && _a !== void 0 ? _a : 0);\n    const listLength = config.$list.length;\n    const itemHeight = gap + config.itemHeight;\n    const containerHeight = listLength > 1 ? (itemHeight * listLength) : config.itemHeight;\n    const orderMulticat = multicast(orderChange);\n    const $listChangesWithInitial = startWith(config.$list, map(s => s.list, orderMulticat));\n    const draggingMotion = motion({ stiffness: 150, damping: 20 });\n    return [\n        $column(layoutSheet.flex, style({ flex: 1, userSelect: 'none', position: 'relative', height: containerHeight + 'px' }))(...config.$list.map(($item, i) => {\n            var _a;\n            const [sampleDragY, dragY] = behavior();\n            const multicastedDrag = multicast(dragY);\n            const isDraggingStream = skipRepeats(map(x => x.isDragging, multicastedDrag));\n            const iHeight = config.itemHeight + ((_a = config.gap) !== null && _a !== void 0 ? _a : 0);\n            const yMotion = O(filter(({ $draggedItem }) => $draggedItem !== $item), map(({ list }) => list.indexOf($item) * iHeight))(orderMulticat);\n            const yDragPosition = merge(chain(s => {\n                if (s.isDragging) {\n                    return now(s.delta);\n                }\n                else {\n                    return draggingMotion(s.delta, now(s.list.indexOf($item) * iHeight));\n                }\n            }, multicastedDrag), draggingMotion(i * iHeight, yMotion));\n            const applyTransformStyle = combine((ypos, scale) => ({ transform: `translateY(${ypos}px) scale(${scale})` }), yDragPosition, draggingMotion(1, map(id => id ? 1.1 : 1, isDraggingStream)));\n            const applyBoxShadowStyle = map(shadow => ({ boxShadow: `0px ${shadow}px ${shadow * 3}px 0px rgba(0, 0, 0, 0.25` }), draggingMotion(0, map(id => id ? 5 : 0, isDraggingStream)));\n            return $dragItem(sampleDragY(event('pointerdown'), \n            // list order continously changing, snapshot is used to get a(snapshot) of the latest list\n            snapshot((list, startEv) => {\n                const drag = merge(eventElementTarget('pointerup', window), eventElementTarget('pointermove', window));\n                const move = skipAfter(ev => ev.type === 'pointerup', drag);\n                return map((pointerEvent) => {\n                    const from = list.indexOf($item);\n                    const delta = pointerEvent.clientY - (startEv.clientY - from * iHeight);\n                    const to = clamp(Math.round(delta / iHeight), 0, list.length - 1);\n                    const isPositionChange = to !== from;\n                    const isDragging = pointerEvent.type === 'pointermove';\n                    return {\n                        delta, isDragging, to,\n                        $draggedItem: isDragging ? $item : null,\n                        list: isPositionChange ? swap($item, to, list) : list\n                    };\n                }, move);\n            }, $listChangesWithInitial), switchLatest, sampleOrderChange()), styleInline(merge(applyTransformStyle, applyBoxShadowStyle)), styleBehavior(map(x => ({ zIndex: x ? 1000 : 0 }), isDraggingStream)))($item);\n        })),\n        { orderChange: $listChangesWithInitial }\n    ];\n});\n//# sourceMappingURL=$Sortable.js.map","import { component, Behavior, $Branch, IBranchElement, style, $text } from \"@aelea/core\"\nimport { $column, $row, $Sortable, layoutSheet } from \"@aelea/ui-components\"\nimport { pallete } from \"@aelea/ui-components-theme\"\n\n\nexport default component(([sampleOrder]: Behavior<$Branch<IBranchElement, {}>[], $Branch<IBranchElement, {}>[]>) => {\n\n  const $list = Array(4).fill(null).map((_, i) =>\n    $column(layoutSheet.flex, style({ backgroundColor: pallete.background, placeContent: 'center', height: '90px', alignItems: 'center' }))(\n      $text('node: ' + i)\n    )\n  )\n\n  return [\n    $row(style({ placeContent: 'stretch' }))(\n      $Sortable({\n        $list,\n        itemHeight: 90,\n        gap: 10\n      })({ orderChange: sampleOrder() })\n    )\n  ]\n})","import { $text, component, O, style } from '@aelea/core';\nimport { pallete } from '@aelea/ui-components-theme';\nimport { empty, map, merge, multicast, never, now, skipRepeats, switchLatest } from '@most/core';\nimport { $row } from \"../../$elements\";\nimport layoutSheet from '../../style/layoutSheet';\nimport { $Field } from \"./$Field\";\nimport { $label } from \"./form\";\nexport const $TextField = (config) => component(([sampleValue, change]) => {\n    const { hint } = config;\n    const multicastValidation = config.validation ? O(config.validation, multicast) : undefined;\n    const validation = multicastValidation ? skipRepeats(multicastValidation(change)) : never();\n    const $messageLabel = $text(style({ fontSize: '75%', width: '100%' }));\n    const $hint = hint ? now($messageLabel(hint)) : never();\n    const $alert = map(msg => {\n        const newLocal = style({ color: pallete.negative });\n        if (msg) {\n            return newLocal($messageLabel(msg));\n        }\n        return hint ? $messageLabel(hint) : empty();\n    }, validation);\n    const $message = switchLatest(merge($hint, $alert));\n    return [\n        $label(layoutSheet.flex, layoutSheet.spacingTiny, style({ alignSelf: 'self-start' }))($row(layoutSheet.flex, layoutSheet.spacingSmall)($text(style({ alignSelf: 'flex-end', paddingBottom: '1px', ...config.labelStyle }))(config.label), $Field({ ...config, validation: multicastValidation })({\n            change: sampleValue()\n        })), $message),\n        { change }\n    ];\n});\n//# sourceMappingURL=$TextField.js.map","import { combine, delay, map, merge, mergeArray, multicast, skipRepeats, skipRepeatsWith, switchLatest } from \"@most/core\";\nimport { $node, component, style, styleInline, $text, event } from '@aelea/core';\nimport { $column } from '../$elements';\nimport { pallete } from \"@aelea/ui-components-theme\";\nimport designSheet from \"../style/designSheet\";\nimport { observer } from \"..\";\nimport { replayLatest } from \"../utils/state\";\nfunction getPageRequest(offsetTop, containerHeight, rowHeight, threshold) {\n    const top = Math.floor(offsetTop / rowHeight);\n    const pageSize = Math.floor((containerHeight / rowHeight) + threshold);\n    const from = Math.max(0, top - (top % threshold));\n    const to = from + pageSize;\n    const delta = to - from;\n    return { from, to, pageSize, delta };\n}\nconst $itemLoading = $text(style({ color: pallete.description, padding: '3px 10px' }))('loading...');\nexport const $QuantumScroll = ({ rowHeight, dataSource, threshold = 10, containerStyle = {}, contentStyle = {}, $loading = $itemLoading }) => component(([sampleScroll, scroll], [sampleContainerDimension, containerDimension]) => {\n    const multicastedData = multicast(dataSource);\n    const initalScrollState = map(rect => getPageRequest(0, rect.height, rowHeight, threshold), containerDimension);\n    const requestSource = replayLatest(merge(scroll, initalScrollState));\n    const $requestAndLoader = merge(delay(1, map(res => res.$items.map($item => style({ height: rowHeight + 'px' }, $item)), multicastedData)), map((scroll) => Array(scroll.delta).fill(style({ height: rowHeight + 'px' }, $loading)), requestSource));\n    const $skipRepaintingLoader = skipRepeatsWith((prev, next) => {\n        return next[0] === prev[0];\n    }, $requestAndLoader);\n    const $intermissionedItems = switchLatest(map(l => mergeArray(l), $skipRepaintingLoader));\n    const $container = $column(style({ display: 'block', position: 'relative', ...containerStyle }), sampleScroll(event('scroll'), map(ev => {\n        const target = ev.target;\n        if (!(target instanceof HTMLElement)) {\n            throw new Error('element target is not scrollable');\n        }\n        return getPageRequest(target.scrollTop, target.clientHeight, rowHeight, threshold);\n    }), skipRepeatsWith((prev, next) => prev.from === next.from)), sampleContainerDimension(observer.resize(), map(dim => { var _a; return (_a = dim[0]) === null || _a === void 0 ? void 0 : _a.contentRect; }), skipRepeats));\n    const $content = $node(designSheet.customScroll, style({\n        ...contentStyle,\n        display: 'block', overflow: 'auto',\n        position: 'absolute', top: '0px', left: '0px', right: '0px', bottom: '0px'\n    }));\n    const totalItemsCount = skipRepeats(map(x => x.totalItems, multicastedData));\n    const $list = $column(style({ willChange: 'transform' }), styleInline(combine((totalItems, loc) => {\n        const top = loc.from * rowHeight;\n        return {\n            transform: `translate(0, ${top}px)`,\n            height: `${rowHeight * totalItems - top}px`\n        };\n    }, totalItemsCount, requestSource)));\n    return [\n        $container($content($list($intermissionedItems))),\n        {\n            requestSource\n        }\n    ];\n});\n//# sourceMappingURL=$QuantumScroll.js.map","import { chain } from \"@most/core\";\nimport { disposeWith } from \"@most/disposable\";\nexport const intersection = (config = {}) => chain((node) => ({\n    run(sink, scheduler) {\n        const intersectionObserver = new IntersectionObserver(entries => {\n            sink.event(scheduler.currentTime(), entries);\n        }, config);\n        intersectionObserver.observe(node.element);\n        return disposeWith(([instance, el]) => instance.unobserve(el), [intersectionObserver, node.element]);\n    }\n}));\nexport const resize = (config = {}) => chain((node) => ({\n    run(sink, scheduler) {\n        const ro = new ResizeObserver(entries => {\n            sink.event(scheduler.currentTime(), entries);\n        });\n        ro.observe(node.element, config);\n        return disposeWith(([instance, el]) => instance.unobserve(el), [ro, node.element]);\n    }\n}));\nexport const mutation = (config = { attributes: true, childList: false, subtree: false }) => chain((node) => ({\n    run(sink, scheduler) {\n        const ro = new MutationObserver(entries => {\n            sink.event(scheduler.currentTime(), entries);\n        });\n        ro.observe(node.element, config);\n        return disposeWith(instance => instance.disconnect(), ro);\n    }\n}));\n//# sourceMappingURL=elementObservers.js.map","\nimport { $text, Behavior, component, style } from '@aelea/core'\nimport { $column, $NumberTicker, $QuantumScroll, $row, $seperator, $TextField, layoutSheet, ScrollSegment } from '@aelea/ui-components'\nimport { pallete } from '@aelea/ui-components-theme'\nimport { at, debounce, map, merge, now, snapshot, switchLatest } from '@most/core'\n\n\n\nexport default component((\n  [sampleScroll, scroll]: Behavior<ScrollSegment, ScrollSegment>,\n  [sampleDelayResponse, delayResponse]: Behavior<string, number>,\n  [sampleDebounceRequest, debounceRequest]: Behavior<string, number>,\n) => {\n\n  const formatNumber = Intl.NumberFormat().format\n  const initialDebounceRequestChange = now(1000)\n  const initialDelayResponse = now(500)\n\n  const dataSource = switchLatest(\n    map((debounceDuration: number) => {\n      const dd = debounce(debounceDuration, scroll)\n\n      return switchLatest(\n        snapshot((delay: number, positionChange) => {\n          const totalItems = 1e6\n\n          const arr = Array(positionChange.delta).fill(null)\n          const $items = arr.map((x, i) => {\n            const to = Math.min(positionChange.to, totalItems)\n            const id = totalItems - (to - i) + 1\n\n            return $text(style({ padding: '3px 10px' }))('item: ' + formatNumber(id))\n          })\n\n          return at(delay, { $items, totalItems })\n        }, merge(initialDelayResponse, delayResponse), dd)\n      )\n    }, merge(initialDebounceRequestChange, debounceRequest))\n  )\n\n\n  return [\n    $column(layoutSheet.spacingBig)(\n      $text('High performance dynamically loaded list based on scroll position and computed container height'),\n      $row(layoutSheet.spacingBig)(\n        $row(layoutSheet.spacingSmall, layoutSheet.flex)(\n          $text(style({ color: pallete.description }))('Page: '),\n          $NumberTicker({\n            value$: map(l => Math.floor(l.to / l.pageSize), scroll),\n            decrementColor: pallete.negative,\n            incrementColor: pallete.positive\n          }),\n        ),\n        $row(layoutSheet.spacingSmall)(\n          $text(style({ color: pallete.description }))(`page size: `),\n          $text(\n            map(l => String(l.pageSize), scroll)\n          )\n        )\n      ),\n\n      $row(layoutSheet.spacingBig)(\n        $TextField({\n          label: 'Debounce Request(ms)',\n          value: initialDebounceRequestChange,\n          hint: 'prevent bursts of page requests to a datasource during scroll',\n          validation: map(value => isFinite(Number(value)) ? null : 'Field has to contain numbers only')\n        })({\n          change: sampleDebounceRequest(\n            map(Number)\n          )\n        }),\n        $TextField({\n          label: 'Delay Response(ms)',\n          value: initialDelayResponse,\n          hint: 'Emulate the duration of our datasource response, show a stubbed $node instead'\n        })({\n          change: sampleDelayResponse(\n            map(Number)\n          )\n        }),\n      ),\n\n      $seperator,\n\n      $QuantumScroll({\n        rowHeight: 31,\n        dataSource,\n        containerStyle: { border: `1px solid ${pallete.horizon}`, height: '400px' }\n      })({\n        requestSource: sampleScroll()\n      })\n\n    )\n  ]\n})\n\n","import { map, merge, now } from \"@most/core\";\nimport { $text, component, O, style, stylePseudo } from '@aelea/core';\nimport { $row } from \"../$elements\";\nimport { $QuantumScroll } from \"./$QuantumScroll\";\nimport { pallete } from \"@aelea/ui-components-theme\";\nimport layoutSheet from \"../style/layoutSheet\";\nconst elipsisTextOverflow = style({\n    overflow: 'hidden', textOverflow: 'ellipsis', whiteSpace: 'nowrap'\n});\nconst tableCellStyle = O(style({\n    padding: '3px 6px'\n}), layoutSheet.flex);\nconst $headerCell = $row(tableCellStyle, style({ fontSize: '15px', color: pallete.description, }));\nconst $bodyCell = $row(tableCellStyle);\nconst $rowContainer = $row(layoutSheet.spacing);\nexport const $Table = (config) => {\n    return component(([sampleRequestList, requestList]) => {\n        const $header = $rowContainer(style({ overflowY: 'scroll' }), stylePseudo('::-webkit-scrollbar', { backgroundColor: 'transparent' }))(...config.columns.map(col => {\n            var _a, _b;\n            return $headerCell(style((_a = col.cellStyle) !== null && _a !== void 0 ? _a : { height: config.rowHeight + 'px' }))((_b = col.header) !== null && _b !== void 0 ? _b : elipsisTextOverflow($text(String(col.id))));\n        }));\n        const dataStream = map(({ data, totalItems }) => {\n            const $items = data.map(rowData => $rowContainer(...config.columns.map(col => {\n                var _a;\n                return $bodyCell(style((_a = col.cellStyle) !== null && _a !== void 0 ? _a : {}))(col.value(now(rowData)));\n            })));\n            return { $items, totalItems };\n        }, config.dataSource);\n        const $body = $QuantumScroll({\n            ...config,\n            dataSource: dataStream\n        })({\n            requestSource: sampleRequestList()\n        });\n        return [\n            merge($body, $header),\n            { requestList }\n        ];\n    });\n};\n//# sourceMappingURL=$Table.js.map","import { $text, Behavior, component } from \"@aelea/core\"\nimport { $Table, ScrollSegment } from \"@aelea/ui-components\"\nimport { chain, map } from \"@most/core\"\n\n\nexport default component((\n  [sampleRequestList, requestList]: Behavior<ScrollSegment, ScrollSegment>\n) => {\n\n  const dataSource = map(position => {\n    const totalItems = 1e6\n    const segment = position.to - position.from\n    const arr = Array(segment)\n    const $items = arr.fill(null).map((x, i) => {\n      const id = totalItems - (position.to - i) + 1\n\n      return {\n        id: 'item-#' + id\n      }\n    })\n\n    return { totalItems, data: $items }\n  }, requestList)\n\n  return [\n    $Table<{ id: string }>({\n      dataSource,\n      rowHeight: 31,\n      containerStyle: {\n        height: '400px'\n      },\n      columns: [\n        {\n          id: 'id',\n          value: chain(x => $text(x.id)),\n        },\n        {\n          id: 'id',\n          value: chain(x => $text(x.id)),\n        },\n        {\n          id: 'id',\n          value: chain(x => $text(x.id)),\n        }\n      ],\n    })({ requestList: sampleRequestList() })\n  ]\n})\n","\nimport type { Theme } from \"@aelea/ui-components-theme\"\n\n\nexport const light: Theme = {\n  name: 'light',\n  pallete: {\n    primary: '#f00',\n\n    message: '#000000',\n    description: '#616058',\n\n    background: '#e8dab4',\n    horizon: '#ded7cb',\n    middleground: '#fff5de',\n    foreground: '#80600d',\n\n    positive: '#6bc36b',\n    negative: '#e07070',\n    indeterminate: '#c5bd61',\n  }\n}\nexport const dark: Theme = {\n  name: 'dark',\n  pallete: {\n    primary: '#ea607e',\n\n    message: '#ffffff',\n    description: '#a5b6bd',\n\n    background: '#1e282b',\n    horizon: '#50676f',\n    middleground: '#2d363a',\n    foreground: '#a5b6bd',\n\n    positive: '#a6f5a6',\n    negative: '#de3434',\n    indeterminate: '#dccb07',\n  }\n}\n\n\n","\nimport { $node, $text, component, style } from '@aelea/core'\nimport { $column, $row, layoutSheet } from '@aelea/ui-components'\nimport { Pallete, Theme } from '@aelea/ui-components-theme'\nimport { dark, light } from '../../../common/theme'\n\n\n\nfunction getPallete(theme: Pallete, name: string, colors: [name: string, color: string][]) {\n  return $column(layoutSheet.spacingTiny)(\n    $text(name),\n\n    ...colors.map(([name, color]) =>\n      $row(layoutSheet.spacing, style({ height: '30px', alignItems: 'center' }))(\n        $node(style({ width: '30px', height: '30px', backgroundColor: color }))(),\n        $text(style({ flex: 1, color: theme.description, fontSize: '12px' }))(color),\n        $text(style({ flex: 1 }))(name),\n      )\n    )\n  )\n}\n\nexport const $Pallete = (themeDef: Theme) => component(() => {\n  const pallete = Object.entries(themeDef.pallete)\n  const theme = themeDef.pallete\n\n  return [\n    $column(\n      $column(layoutSheet.spacingBig, style({ color: theme.message, padding: '15px', backgroundColor: theme.background }))(\n        $text(style({ fontSize: '120%' }))(themeDef.name),\n        getPallete(theme, 'Action', pallete.slice(0, 1)),\n        getPallete(theme, 'Story', pallete.slice(1, 3)),\n        getPallete(theme, 'Landscape', pallete.slice(3, 7)),\n        getPallete(theme, 'Attention', pallete.slice(7, 10)),\n      )\n    )\n  ]\n})\n\nexport const $Theme = component((\n) => {\n  \n\n  return [\n    $row(layoutSheet.spacingBig)(\n      ...[dark, light].map(themeDef => {\n        return $Pallete(themeDef)({})\n      })\n    )\n  ]\n})\n\n\n","import { $text, Behavior, component } from '@aelea/core'\nimport { $Button, $Field, $row, layoutSheet } from \"@aelea/ui-components\"\nimport { constant, map, merge, now, snapshot, startWith } from \"@most/core\"\n\nlet iid = 0\n\nexport interface Todo {\n  id: number,\n  text: string,\n  completed: boolean,\n}\n\nexport function createTodo(text: string): Todo {\n  return {\n    id: iid++,\n    text,\n    completed: false\n  }\n}\n\n\nexport default component((\n  [sampleAdd, create]: Behavior<PointerEvent, PointerEvent>,\n  [sampleInputChange, inputChange]: Behavior<string, string>\n) => {\n\n  const inputState = startWith('', inputChange)\n  const value = constant('', merge(create, now(null)))\n  const valueChahnges = merge(inputChange, value)\n  const disabled = map(x => !x, valueChahnges)\n\n  const add = snapshot(\n    (text) => ({ id: iid++, text, completed: false }),\n    inputState, create\n  )\n\n  return [\n    $row(layoutSheet.flex)(\n      $Field({ value })({\n        change: sampleInputChange()\n      }),\n      $Button({ $content: $text('add'), disabled })({\n        click: sampleAdd()\n      })\n    ),\n\n    { add }\n  ]\n\n})","import { map, mergeArray } from \"@most/core\";\nimport { $element, $node, attr, component, event, O, style, styleBehavior, attrBehavior } from '@aelea/core';\nimport { dismissOp, interactionOp } from \"./form\";\nimport { pallete } from \"@aelea/ui-components-theme\";\nimport layoutSheet from \"../../style/layoutSheet\";\nexport const $Checkbox = ({ value }) => component(([interactionBehavior, focusStyle], [dismissBehavior, dismissstyle], [sampleCheck, check]) => {\n    const $overlay = $node(layoutSheet.stretch, style({ flex: 1, margin: '3px', }), styleBehavior(map(ch => ch ? { backgroundColor: pallete.message } : null, value)));\n    const $checkInput = $element('input')(style({ opacity: 0, width: 'inherit', height: 'inherit', margin: '0', cursor: 'pointer', }), layoutSheet.stretch, sampleCheck(event('change'), map(evt => evt.target.checked)), attr({ type: 'checkbox' }), attrBehavior(map(checked => ({ checked: checked ? true : null }), value)), interactionBehavior(interactionOp), dismissBehavior(dismissOp));\n    const containerStyle = O(styleBehavior(map(active => active ? { borderColor: pallete.primary } : null, mergeArray([focusStyle, dismissstyle]))), style({ position: 'relative', width: '18px', height: '18px', border: `2px solid ${pallete.description}` }));\n    return [\n        $node(containerStyle)($overlay(), $checkInput()),\n        { check }\n    ];\n});\n//# sourceMappingURL=$Checkbox.js.map","import { Behavior, component, O, style } from '@aelea/core'\nimport { $Checkbox, $Field, $row, layoutSheet } from \"@aelea/ui-components\"\nimport { now } from \"@most/core\"\nimport { Stream } from \"@most/types\"\nimport { $TrashBtn } from '../../../elements/$common'\nimport { Todo } from \"./$CreateTodo\"\n\n\nconst rowStyle = O(\n  layoutSheet.spacing,\n  style({ alignItems: 'center' })\n)\n\ninterface TodoItem {\n  todo: Todo,\n  completed: Stream<boolean>\n}\n\nexport default ({ todo, completed }: TodoItem) => component((\n  [sampleRemove, remove]: Behavior<MouseEvent, MouseEvent>,\n  [sampleComplete, complete]: Behavior<boolean, boolean>,\n  [sampleText, text]: Behavior<string, string>\n) => {\n\n  return [\n    $row(rowStyle)(\n      $Checkbox({ value: completed })({\n        check: sampleComplete()\n      }),\n      $Field({ value: now(todo.text) })({\n        change: sampleText()\n      }),\n      $TrashBtn({\n        click: sampleRemove()\n      })\n    ),\n\n    { text, remove, complete }\n  ]\n})\n\n\n","\nimport { $element, $text, behavior, Behavior, component, style } from '@aelea/core'\nimport { $Checkbox, $column, $row, layoutSheet, state } from '@aelea/ui-components'\nimport { pallete } from '@aelea/ui-components-theme'\nimport { chain, combine, empty, mergeArray, now, switchLatest, until } from '@most/core'\nimport $CreateTodo, { Todo } from './$CreateTodo'\nimport $TodoItem from './$TodoItem'\n\n\n\nexport const $label = $element('label')(\n  layoutSheet.row,\n  style({ cursor: 'pointer', alignItems: 'center', color: pallete.description })\n)\n\n\nexport default (todos: Todo[]) => component((\n  [sampleCreateTodo, newTodo]: Behavior<Todo, Todo>,\n) => {\n\n  const [sampleShowCompletedList, showCompletedList] = state.stateBehavior(false)\n\n  return [\n    $column(layoutSheet.spacingBig)(\n\n      $row(layoutSheet.spacingBig)(\n        $label(layoutSheet.spacing)(\n          $Checkbox({ value: showCompletedList })({\n            check: sampleShowCompletedList()\n          }),\n          $text('Show completped ')\n        ),\n        $CreateTodo({\n          add: sampleCreateTodo()\n        }),\n      ),\n\n      $column(layoutSheet.spacingSmall)(\n        chain((todo: Todo) => {\n\n          const [sampleRemove, remove] = behavior<MouseEvent, MouseEvent>()\n          const [sampleCompleted, completed] = state.stateBehavior(todo.completed)\n\n          return until(remove)(\n            switchLatest(\n              combine(\n                (onlyCompleted, isCompleted) => onlyCompleted === isCompleted\n                  ? $TodoItem({ todo, completed })({\n                    remove: sampleRemove(),\n                    complete: sampleCompleted()\n                  })\n                  : empty(),\n                showCompletedList,\n                completed\n              )\n            )\n          )\n\n        }, mergeArray([newTodo, ...todos.map(now)]))\n      )\n\n    )\n  ]\n})\n\n\n","import { $node, $text, Behavior, component, style } from '@aelea/core'\nimport { match, Route } from '@aelea/router'\nimport { $column, $row, layoutSheet } from '@aelea/ui-components'\nimport { pallete } from '@aelea/ui-components-theme'\nimport $Example from '../../components/$Example'\nimport { $Link } from '../../components/$Link'\nimport { fadeIn } from '../../components/transitions/enter'\nimport $Calculator from './calculator/$Calculator'\nimport $CountCounters from './count-counters/$CountCounters'\nimport $DragList from './dragList/$DragList'\nimport $VirtualList from './quantum-list/$QuantumList'\nimport $Table from './table/$Table'\nimport { $Theme } from './theme/$Theme'\nimport { createTodo } from './todo-app/$CreateTodo'\nimport $TodoApp from './todo-app/$TodoApp'\n\n\n\n\ninterface Website {\n  router: Route\n}\n\nexport default ({ router }: Website) => component((\n  [sampleLinkClick, routeChanges]: Behavior<string, string>\n) => {\n\n  const dragAngDropRoute = router.create({ fragment: 'drag-and-sort', title: 'Drag N Drop' })\n  const todoAppRoute = router.create({ fragment: 'todo-app', title: 'Todo App' })\n  const countCountersRoute = router.create({ fragment: 'count-counters', title: 'Count Counters' })\n  const quantumListRoute = router.create({ fragment: 'quantum-list', title: 'Quantum List' })\n  const calculatorRoute = router.create({ fragment: 'calculator', title: 'Calculator' })\n  const tableRoute = router.create({ fragment: 'table', title: 'Table' })\n  const autocompleteRoute = router.create({ fragment: 'autocomplete', title: 'Autocomplete' })\n  const themeRoute = router.create({ fragment: 'theme', title: 'Theme' })\n\n  const $container = $row\n\n\n\n  return [\n\n    $row(layoutSheet.spacingBig, layoutSheet.flex, style({ placeContent: 'center' }))(\n\n      fadeIn(\n        $column(layoutSheet.spacing, style({ top: '10vh', placeContent: 'center flex-start' }))(\n\n          $column(layoutSheet.spacingSmall, style({ alignItems: 'flex-end' }))(\n            $Link({ $content: $text('Theme'), url: '/p/examples/theme', route: themeRoute })({\n              click: sampleLinkClick()\n            }),\n            $Link({ $content: $text('Drag And Sort'), url: '/p/examples/drag-and-sort', route: dragAngDropRoute })({\n              click: sampleLinkClick()\n            }),\n            // $Link({ $content: $text('Autocomplete'), url: '/p/examples/autocomplete', route: autocompleteRoute })({\n            //   click: sampleLinkClick()\n            // }),\n            $Link({ $content: $text('Quantum List'), url: '/p/examples/quantum-list', route: quantumListRoute })({\n              click: sampleLinkClick()\n            }),\n            $Link({ $content: $text('Count Counters'), url: '/p/examples/count-counters', route: countCountersRoute })({\n              click: sampleLinkClick()\n            }),\n            $Link({ $content: $text('Todo App'), url: '/p/examples/todo-app', route: todoAppRoute })({\n              click: sampleLinkClick()\n            }),\n            $Link({ $content: $text('Table'), url: '/p/examples/table', route: tableRoute })({\n              click: sampleLinkClick()\n            }),\n            $Link({ $content: $text('Calculator'), url: '/p/examples/calculator', route: calculatorRoute })({\n              click: sampleLinkClick()\n            }),\n          )\n\n        )\n      ),\n\n      $node(),\n\n      $column(style({ flex: 2 }))(\n\n        $container(\n          match(themeRoute)(\n            $Example({ file: 'src/components/$Table.ts' })(\n              $column(\n                $Theme({})\n              )\n            )({})\n          )\n        ),\n\n        $container(\n          match(dragAngDropRoute)(\n            $Example({ file: 'src/components/$DragSort.ts' })(\n              $DragList({})\n            )({})\n          )\n        ),\n\n        // $container(\n        //   contains(autocompleteRoute)(\n        //     $Example({ file: 'src/components/$DragSort.ts' })(\n        //       $Autocomplete({})\n        //     )({})\n        //   )\n        // ),\n\n        $container(\n          match(tableRoute)(\n            $Example({ file: 'src/components/$Table.ts' })(\n              $column(style({ border: `1px solid ${pallete.horizon}` }))(\n                $Table({})\n              )\n            )({})\n          )\n        ),\n\n        $container(\n          match(calculatorRoute)(\n            $Example({ file: 'src/components/$Calculator.ts' })(\n              $Calculator({})\n            )({})\n          )\n        ),\n\n        $container(\n          match(quantumListRoute)(\n            $Example({ file: 'src/components/$QuantumList.ts' })(\n              $VirtualList({})\n            )({})\n          )\n        ),\n\n        $container(\n          match(countCountersRoute)(\n            $Example({ file: 'src/components/$CountCounters.ts' })(\n              $CountCounters({})\n            )({})\n          )\n        ),\n\n        $container(\n          match(todoAppRoute)(\n            $Example({ file: 'src/components/todo-app/$TodoApp.ts' })(\n              $TodoApp(\n                Array(1e2).fill(null).map((x, i) => createTodo('t-' + (i + 1)))\n              )({})\n            )({})\n          )\n        ),\n\n      )\n\n    ),\n\n\n    {\n      routeChanges\n    }\n\n  ]\n})\n\n\n","import { disposeNone, disposeWith } from '@most/disposable';\n// copied & modified from https://github.com/mostjs/x-animation-frame/tree/master\nclass FromCallbackSource {\n    constructor(callbackFunction, context) {\n        this.callbackFunction = callbackFunction;\n        this.context = context;\n    }\n    run(sink, scheduler) {\n        // very common that callback functions returns a destructor, perhaps a Disposable in a \"most\" case\n        const maybeDisposable = this.callbackFunction.bind(this.context)((ev) => {\n            sink.event(scheduler.currentTime(), ev);\n        });\n        if (maybeDisposable instanceof Function) {\n            return disposeWith(maybeDisposable, null);\n        }\n        if (maybeDisposable && 'dispose' in maybeDisposable && (maybeDisposable === null || maybeDisposable === void 0 ? void 0 : maybeDisposable.dispose) instanceof Function) {\n            return maybeDisposable;\n        }\n        return disposeNone();\n    }\n}\nexport const fromCallback = (cbf, context = null) => new FromCallbackSource(cbf, context);\n//# sourceMappingURL=fromCallback.js.map","import { component, fromCallback, O, style, $wrapNativeElement, $node } from '@aelea/core';\nimport { at, awaitPromises, combine, continueWith, delay, empty, filter, fromPromise, join, map, merge, multicast, now, recoverWith, skipRepeatsWith, startWith, switchLatest, take } from '@most/core';\nimport layoutSheet from '../style/layoutSheet';\nimport * as observer from '../utils/elementObservers';\nconst fetchJson = async (input, init) => (await fetch(input, init)).json();\nconst fetchMeta = (dependency, version) => fetchJson(`https://data.jsdelivr.com/v1/package/npm/${dependency}@${version}/flat`);\nconst packageQueryCache = new Map();\nconst packageLocalCache = new Map();\nasync function cacheGet(key, queryStore) {\n    const locallyStoredItem = packageLocalCache.get(key);\n    if (locallyStoredItem)\n        return locallyStoredItem;\n    const storedItem = localStorage.getItem(key);\n    if (storedItem) {\n        const parsedItem = JSON.parse(storedItem);\n        packageLocalCache.set(key, parsedItem);\n        return parsedItem;\n    }\n    const pendingQuery = packageQueryCache.get(key);\n    if (pendingQuery)\n        return pendingQuery;\n    const query = queryStore();\n    packageQueryCache.set(key, query);\n    const resp = await query;\n    packageLocalCache.set(key, resp);\n    localStorage.setItem(key, JSON.stringify(resp));\n    return resp;\n}\nexport async function fetchFileListContent(name, version = 'latest') {\n    const meta = (await fetchMeta(name, version)).files;\n    let dtsFiles = meta.filter(metaFile => /\\.d\\.ts$/.test(metaFile.name));\n    if (dtsFiles.length === 0) {\n        // if no .d.ts files found, fallback to .ts files\n        dtsFiles = meta.filter(metaFile => /\\.ts$/.test(metaFile.name));\n    }\n    if (dtsFiles.length === 0) {\n        throw new Error('No inline typings found.');\n    }\n    const dtsQueries = dtsFiles.map(async (file) => {\n        const content = await fetch(`https://cdn.jsdelivr.net/npm/${name}@${version}${file.name}`).then(r => r.text());\n        return { ...file, content: content.replace(/(} from '@)/g, `} from '%40`) };\n    });\n    return Promise.all(dtsQueries);\n}\nexport async function fetchAndCacheDependancyTree(name, version = 'latest') {\n    const pkgPath = `https://cdn.jsdelivr.net/npm/${name}@${version}/package.json`;\n    const pkg = await cacheGet(pkgPath, async () => {\n        var _a, _b;\n        const pkgJson = await fetchJson(pkgPath);\n        const dependencies = (_a = pkgJson === null || pkgJson === void 0 ? void 0 : pkgJson.dependencies) !== null && _a !== void 0 ? _a : {};\n        const files = await fetchFileListContent(name, version);\n        const typings = (_b = pkgJson.typings) !== null && _b !== void 0 ? _b : pkgJson.types;\n        return { files, dependencies, name, version, typings };\n    });\n    const depsQueries = Object.entries(pkg.dependencies).map(([pkgName, version]) => fetchAndCacheDependancyTree(pkgName, version.replace(/[\\^*]/, '')));\n    const dependencies = await Promise.all(depsQueries);\n    return { ...pkg, dependencies };\n}\nexport function defineModel(pkg, monacoGlobal) {\n    const pkgModelUri = monacoGlobal.Uri.parse(`file://root/node_modules/${pkg.name}/package.json`);\n    const model = monacoGlobal.editor.getModel(pkgModelUri);\n    if (!model) {\n        const dependencies = Object.entries(pkg.dependencies).reduce(((acc, [key, val]) => ({ ...acc, [key.replace(/^@/, `%40`)]: val })), {}); // https://github.com/microsoft/monaco-editor/issues/1306\n        const pakgDefJsonStr = JSON.stringify({\n            name: pkg.name,\n            version: pkg.version,\n            typings: pkg.typings,\n            dependencies\n        });\n        monacoGlobal.editor.createModel(pakgDefJsonStr, \"typescript\", pkgModelUri);\n        pkg.files.forEach(file => {\n            monacoGlobal.editor.createModel(file.content, \"typescript\", monacoGlobal.Uri.parse(`file://root/node_modules/${pkg.name}${file.name}`));\n        });\n    }\n}\nexport function definePackageTree(pkg, monacoGlobal) {\n    defineModel(pkg, monacoGlobal);\n    pkg.dependencies.forEach(pkg => {\n        definePackageTree(pkg, monacoGlobal);\n    });\n}\nconst whitespaceRegexp = /[\\n\\r\\s\\t]+/g;\nconst elementBecameVisibleEvent = O(observer.intersection(), filter(intersectionEvent => intersectionEvent[0].intersectionRatio > 0), take(1));\n// Before loading vs/editor/editor.main, define a global MonacoEnvironment that overwrites\n// the default worker url location (used when creating WebWorkers). The problem here is that\n// HTML5 does not allow cross-domain web workers, so we need to proxy the instantiation of\n// a web worker through a same-domain script\n// @ts-ignore\nwindow.MonacoEnvironment = {\n    getWorkerUrl: function () {\n        return `data:text/javascriptcharset=utf-8,${encodeURIComponent(`\n        self.MonacoEnvironment = {\n          baseUrl: 'https://cdn.jsdelivr.net/npm/monaco-editor@0.23.0/min/'\n        }\n        importScripts('https://cdn.jsdelivr.net/npm/monaco-editor@0.23.0/min/vs/base/worker/workerMain.js')`)}`;\n    }\n};\nexport async function asyncloadMonacoEditor() {\n    // @ts-ignore\n    const monacoQuery = import(/* webpackIgnore: true */ 'https://cdn.skypack.dev/pin/monaco-editor@v0.23.0-nVyIshjiDqruq90zejl0/mode=imports,min/optimized/monaco-editor.js');\n    const precacheAeleaDependanciesQuery = fetchAndCacheDependancyTree('@aelea/core', '0.6.0');\n    // @ts-ignore\n    const codiConQuery = new FontFace('codicon', `url('https://cdn.jsdelivr.net/npm/monaco-editor@0.23.0/min/vs/base/browser/ui/codicons/codicon/codicon.ttf')`);\n    const monacoGlobal = await monacoQuery;\n    const codiConFont = await codiConQuery;\n    const pkg = await precacheAeleaDependanciesQuery;\n    definePackageTree(pkg, monacoGlobal);\n    // @ts-ignore\n    document.fonts.add(codiConFont);\n    return { monacoGlobal, pkg };\n}\nlet monacoQuery = null;\nexport async function loadMonacoTSEditor() {\n    if (monacoQuery)\n        return monacoQuery;\n    monacoQuery = asyncloadMonacoEditor();\n    return monacoQuery;\n}\nlet monacoEntryFileId = 0;\nexport const $MonacoEditor = ({ code, config, override, containerStyle = { flex: 1 } }) => component(([sampleChange, change]) => {\n    const editorload = fromPromise(loadMonacoTSEditor());\n    const $editor = map(({ monacoGlobal }) => {\n        const editorElement = document.createElement('div');\n        monacoGlobal.languages.typescript.typescriptDefaults.setCompilerOptions({\n            ...monacoGlobal.languages.typescript.typescriptDefaults.getCompilerOptions(),\n            module: monacoGlobal.languages.typescript.ModuleKind.ESNext,\n            moduleResolution: monacoGlobal.languages.typescript.ModuleResolutionKind.NodeJs\n        });\n        const model = monacoGlobal.editor.createModel(code.replace(/(} from '@)/g, `} from '%40`), \"typescript\", monacoGlobal.Uri.parse(`file://root/test${++monacoEntryFileId}.ts`));\n        const ops = {\n            theme: 'vs-dark',\n            \"semanticHighlighting.enabled\": true,\n            minimap: { enabled: false },\n            overviewRulerLanes: 0,\n            lineNumbers: 'off',\n            glyphMargin: false,\n            folding: false,\n            lineDecorationsWidth: 15,\n            lineNumbersMinChars: 0,\n            hover: { delay: 0 },\n            padding: { top: 16, bottom: 16 },\n            renderLineHighlight: 'none',\n            renderIndentGuides: false,\n            scrollBeyondLastLine: false,\n            automaticLayout: false,\n            model,\n            ...config,\n        };\n        const instance = monacoGlobal.editor.create(editorElement, ops, override);\n        const updateHeight = () => {\n            if (ops.automaticLayout) {\n                const contentHeight = instance.getContentHeight();\n                editorElement.style.minHeight = `${contentHeight}px`;\n                instance.layout({ width: editorElement.clientWidth, height: contentHeight });\n                instance.layout();\n            }\n            else\n                instance.layout();\n        };\n        instance.onDidContentSizeChange(updateHeight);\n        let attempDuration = 50;\n        const getWorkerStream = O(continueWith(() => {\n            return fromPromise(monacoGlobal.languages.typescript.getTypeScriptWorker());\n        }), recoverWith(err => {\n            console.error(err);\n            attempDuration += 100;\n            return join(at(attempDuration, getWorkerStream));\n        }))(empty());\n        const $editor = $wrapNativeElement(editorElement)(O(layoutSheet.column, style({ ...containerStyle }), sampleChange(\n        // ensure we load editor only when it's visible on the screen\n        elementBecameVisibleEvent, map(async (elEvents) => {\n            const node = elEvents[0].target;\n            const modelChangeWithDelay = delay(10, fromCallback(model.onDidChangeContent, model)); // delay is required because change emits an event before diagnostics and other stuff are finished\n            const editorChanges = map(() => model.getValue(), modelChangeWithDelay);\n            const changesWithInitial = merge(now(model.getValue()), editorChanges);\n            const ignoreWhitespaceChanges = skipRepeatsWith((prev, next) => prev.replace(whitespaceRegexp, '') === next.replace(whitespaceRegexp, ''), changesWithInitial);\n            const tsModelChanges = awaitPromises(combine(async (modelChange, getWorker) => {\n                const worker = await getWorker(model.uri);\n                const semanticDiagnosticsQuery = worker.getSemanticDiagnostics(model.uri.toString());\n                const syntacticDiagnosticsQuery = worker.getSyntacticDiagnostics(model.uri.toString());\n                const semanticDiagnostics = await semanticDiagnosticsQuery;\n                const syntacticDiagnostics = await syntacticDiagnosticsQuery;\n                return { node, instance, monacoGlobal, worker, model, modelChange, semanticDiagnostics, syntacticDiagnostics };\n            }, ignoreWhitespaceChanges, getWorkerStream));\n            return tsModelChanges;\n        }), awaitPromises, join, multicast)))();\n        const disposeMonacoStub = { run: () => instance };\n        return merge($editor, disposeMonacoStub);\n    }, editorload);\n    return [\n        switchLatest(startWith($node(style(containerStyle))(), $editor)),\n        { change }\n    ];\n});\n//# sourceMappingURL=$MonacoEditor.js.map","import { awaitPromises, empty, map, never, switchLatest, filter, now, debounce, startWith } from '@most/core'\nimport { $custom, $Node, $text, Behavior, component, motion, O, style, styleInline } from '@aelea/core'\n\nimport { $column, $MonacoEditor, $row, layoutSheet, ModelChangeBehavior } from '@aelea/ui-components'\nimport { pallete, theme } from '@aelea/ui-components-theme'\n\n\ninterface IMonaco {\n  code: string\n  readOnly?: boolean\n}\n\n\nexport default ({ code = '', readOnly = true }: IMonaco) => component((\n  [sampleChange, change]: Behavior<ModelChangeBehavior, ModelChangeBehavior>\n) => {\n\n  const $loader = $row(style({ width: '2px', backgroundColor: 'rgb(43 52 55)' }))(\n    $row(\n      styleInline(\n        map(({ semanticDiagnostics, syntacticDiagnostics }) => {\n          return { backgroundColor: semanticDiagnostics.length || syntacticDiagnostics.length ? pallete.negative : pallete.description }\n        }, change)\n      ),\n      styleInline(\n        map(\n          s => ({ height: s + '%' }),\n          switchLatest(\n            map(xxx => {\n              return motion({ stiffness: 160, damping: 36, precision: .1 }, 0, now(100))\n            }, change)\n          )\n        )\n      ),\n      layoutSheet.flex,\n      style({ backgroundColor: pallete.description })\n    )()\n  )\n\n  const initalCodeBlockHeight = 24 + 20 + (code.split('\\n').length * 18)\n\n\n  return [\n    $column(layoutSheet.flex)(\n      $MonacoEditor({ code, config: { readOnly, automaticLayout: true, theme: theme.name === 'light' ? 'vs-light': 'vs-dark' }, containerStyle: { height: initalCodeBlockHeight + 'px' } })({\n        change: sampleChange()\n      }),\n      $row(style({ backgroundColor: pallete.background, minHeight: '30px' }))(\n        $loader,\n\n        $custom('render-here')(style({ padding: '10px 15px' }))(\n          switchLatest(\n            O(\n              debounce(500),\n              map(async ({ model, worker, semanticDiagnostics, syntacticDiagnostics }: ModelChangeBehavior): Promise<$Node> => {\n\n                if (semanticDiagnostics.length || syntacticDiagnostics.length) {\n                  return never()\n                }\n\n                const emittedFiles = await worker.getEmitOutput(model.uri.toString())\n                const file = emittedFiles.outputFiles[0].text\n                const refImports = file.replace(/(} from '%40)/g, `} from 'https://esm.run/@`)\n\n                const esModuleBlobUrl = URL.createObjectURL(new Blob([refImports], { type: 'text/javascript' }))\n                const esModule = await import(/* webpackIgnore: true */esModuleBlobUrl)\n\n                const value: $Node = esModule.default ?? empty()\n\n                return value\n              }),\n              awaitPromises,\n              filter(node => node !== never()),\n              startWith($text(style({ color: pallete.description, fontSize: '75%' }))('Loading Typescript Service...'))\n            )(change)\n          )\n        )\n      )\n    ),\n\n    { change }\n  ]\n})\n\n\n\n","import { $element, $node, $text, attr, Behavior, component, style } from '@aelea/core'\nimport { Route } from '@aelea/router'\nimport { $column, $row, layoutSheet } from '@aelea/ui-components'\nimport { pallete } from '@aelea/ui-components-theme'\n\nimport $Example from '../../components/$Example'\nimport $TSPeep from '../../components/typescript-notebook/$TSPeep'\n\n\n\ninterface Guide {\n  parentRoute: Route\n}\n\nexport default ({ parentRoute }: Guide) => component((\n  // []: Behavior<NodeChild, any>,\n  [sampleLinkClick, routeChanges]: Behavior<string, string>\n) => {\n\n  return [\n\n    $column(layoutSheet.spacingBig, layoutSheet.flex, style({ alignItems: 'center' }))(\n\n      $Example({ file: 'src/components/$QuantumList.ts' })(\n        $row(style({ border: `1px solid ${pallete.negative}`, padding: '10px' }))(\n          $text(style({ fontSize: '75%' }))(`WIP: still in progress, external imports name have been encoded because of Monaco editor issue: https://github.com/microsoft/monaco-editor/issues/1306. `)\n        ),\n\n        $node(\n          $text(`aelea uses a reactive toolkit called `),\n          $element('a')(style({ color: pallete.primary }), attr({ href: 'https://mostcore.readthedocs.io/en/latest/index.html' }))(\n            $text('@most/core')\n          ),\n          $text(` Some basic understanding of functional programming and typescript is required, if you use Visual Studio Code IDE these code blocks will look familiar`)\n        ),\n\n        $text(`The ultimate way to learn is to get your hands a little dirty, any changes in the code below will reflect it visually right below the code block`),\n\n        $TSPeep({\n          readOnly: false,\n          code:\n`import { $text } from '@aelea/core'\n\nexport default $text('Yellow World')`\n        })({}),\n\n        $text(`Nothing fancy yet, the \"default export\" renders a message and there is this \"$text\" function, aelea semantically prefixes anything that will eventually emits elements with $ sign, this is jsut for readability, we see its usefulness later on`),\n\n        $TSPeep({\n          readOnly: false,\n          code:\n`import { $text, $node, style } from '@aelea/core'\n\nconst colorStyle = style({ color: 'yellow' })\nconst containerStyle = style({ padding: '10px', display: 'block', border: '1px dashed yellow', borderRadius: '50px' })\n\nconst $container = $node(containerStyle, colorStyle)\n\nexport default $container(style({alignSelf: 'center'}))(\n    $container(\n        $text('Yellow World')\n    )\n)`\n        })({}),\n\n        $text(`in this guide we will be creating different types of Counters in different levels of complexity`),\n\n\n        $TSPeep({\n          readOnly: false,\n          code:\n`import { $text, $node } from '@aelea/core'\nimport { constant, map, periodic, scan } from '@most/core'\n\nconst eventEverySecond = periodic(1000)       // stream of undefined every 1000 milliseconds\nconst mapTo1 = constant(1, eventEverySecond)  // map that undefined into 1\n\nconst accumulate = scan((acc, one) => acc + one, 0, mapTo1)\nconst toString = map(String, accumulate)\n\n\nexport default $node(\n  $text(toString)\n)`\n        })({}),\n\n        $TSPeep({\n          readOnly: false,\n          code:\n`import { constant, map, merge, scan } from '@most/core'\nimport { $custom, $element, $text, Behavior, component, style, event, INode, runBrowser } from '@aelea/core'\n\n// composable style\nconst displayFlex = style({ display: 'flex' })\nconst spacingStyle = style({ gap: '16px' })\n\n// composable elements\nconst $row = $custom('row')(displayFlex)\nconst $column = $custom('column')(displayFlex, style({ flexDirection: 'column' }))\n\n// Component that outputs state(optionally), this is currently not used anywhere, see next example to see it being consumed\nexport default component((\n    [sampleIncrement, increment]: Behavior<INode, 1>,\n    [sampleDecrement, decrement]: Behavior<INode, -1>\n  ) => {\n\n    return [ // Component has to return [$Node, Behavior(optionally)] in the next example we will use these outputted behaviors\n\n      $row(spacingStyle)(\n        $column(\n          $element('button')(sampleIncrement(event('click'), constant(1)))(\n            $text('+')\n          ),\n          $element('button')(sampleDecrement(event('click'), constant(-1)))(\n            $text('-')\n          )\n        ),\n        $text(style({ fontSize: '64px' }))(\n          map(String, scan((current: number, x: number) => current + x, 0, merge(increment, decrement)))\n        )\n      ),\n\n      { increment, decrement }\n    ]\n  }\n)({})`\n        })({})\n\n      )({}),\n\n\n    )\n\n  ]\n})\n\n","import { $element, $text, attr, Behavior, component, style, stylePseudo } from '@aelea/core'\nimport { $icon, $row, layoutSheet } from '@aelea/ui-components'\nimport { $Link } from '../components/$Link'\nimport { $github } from '../elements/$icons'\nimport { Route } from '@aelea/router'\nimport { pallete } from '@aelea/ui-components-theme'\n\n\n\n\ninterface MainMenu {\n  parentRoute: Route\n}\n\nexport default ({ parentRoute }: MainMenu) => component((\n  [sampleRouteChange, routeChange]: Behavior<string, string>\n) => {\n\n  const guideRoute = parentRoute.create({ fragment: 'guide', title: 'Guide' })\n  const examplesRoute = parentRoute.create({ fragment: 'examples', title: 'Examples' })\n\n  const $seperator = $text(style({ color: pallete.description, pointerEvents: 'none' }))('|')\n  return [\n    $row(layoutSheet.spacingSmall, style({ alignItems: 'center', placeContent: 'center' }))(\n\n      // $Link({ $content: $text('Why?!'), href: '/drag-and-sort', route: guideRoute })({\n      //   click: sampleLinkClick()\n      // }),\n\n      $Link({ $content: $text('Developer\\'s Guide'), url: '/p/guide', route: guideRoute })({\n        click: sampleRouteChange()\n      }),\n      $seperator,\n      $Link({ $content: $text('Examples'), url: '/p/examples/theme', route: examplesRoute })({\n        click: sampleRouteChange()\n      }),\n      $seperator,\n\n      $element('a')(stylePseudo(':hover', { fill: pallete.primary }), layoutSheet.displayFlex, style({ padding: '0 4px' }), attr({ href: 'https://github.com/nissoh/aelea' }))(\n        $icon({ $content: $github, width: 25, viewBox: `0 0 1024 1024` })\n      ),\n\n    ),\n\n\n    { routeChange }\n  ]\n})\n\n\n","import { $node, $text, Behavior, component, eventElementTarget, style } from '@aelea/core'\nimport * as router from '@aelea/router'\nimport { $Anchor } from '@aelea/router'\nimport { $column, $icon, $row, layoutSheet } from '@aelea/ui-components'\nimport { map, merge, multicast, now } from '@most/core'\nimport { $aeleaLogo } from '../elements/$icons'\nimport { fadeIn } from '../components/transitions/enter'\nimport $Examples from './examples/$Examples'\nimport $Guide from './guide/$Guide'\nimport { designSheet } from '@aelea/ui-components'\nimport $MainMenu from './$MainMenu'\nimport { $Picker } from '../components/$ThemePicker'\nimport { dark, light } from '../common/theme'\nimport { pallete } from '@aelea/ui-components-theme'\n\n\n\n\nconst popStateEvent = eventElementTarget('popstate', window)\nconst initialLocation = now(document.location)\nconst requestRouteChange = merge(initialLocation, popStateEvent)\nconst locationChange = map((location) => {\n  return location\n}, requestRouteChange)\n\n\ninterface Website {\n  baseRoute: string\n}\n\nexport default ({ baseRoute }: Website) => component((\n  [sampleLinkClick, routeChanges]: Behavior<string, string>\n) => {\n\n  const changes = merge(locationChange, multicast(routeChanges))\n  const fragmentsChange = map(() => {\n    const trailingSlash = /\\/$/\n    const relativeUrl = location.href.replace(trailingSlash, '').split(document.baseURI.replace(trailingSlash, ''))[1]\n    const frags = relativeUrl.split('/')\n    frags.splice(0, 1, baseRoute)\n    return frags\n  }, changes)\n\n  const rootRoute = router.create({ fragment: baseRoute, title: 'aelea', fragmentsChange })\n  const pagesRoute = rootRoute.create({ fragment: 'p', title: 'aelea' })\n  const guideRoute = pagesRoute.create({ fragment: 'guide', title: 'Guide' })\n  const examplesRoute = pagesRoute.create({ fragment: 'examples', title: 'Examples' })\n\n  return [\n    $node(designSheet.main, style({ backgroundImage: `radial-gradient(at center center, ${pallete.middleground} 50vh, ${pallete.background})` }))(\n      router.match(rootRoute)(\n        $row(layoutSheet.flex, layoutSheet.spacingBig, style({ alignContent: 'center', alignItems: 'center', placeContent: 'center', textAlign: 'center', padding: '0 30px', }))(\n          fadeIn(\n            $column(style({ alignItems: 'center', maxWidth: '550px' }), layoutSheet.spacing)(\n              $Anchor({ $content: $icon({ $content: style({ fill: pallete.foreground }, $aeleaLogo), width: 237, height: 115, viewBox: `0 0 147 90` }), url: '/', route: rootRoute })({\n                click: sampleLinkClick()\n              }),\n              $text(`\"aelea\", is a UI Framework for reactive event programming`),\n              $text(`It helps you write composable and performant building blocks by composing functional event streams`),\n\n              $MainMenu({ parentRoute: pagesRoute })({\n                routeChange: sampleLinkClick()\n              })\n            )\n          )\n        )\n      ),\n\n      router.contains(pagesRoute)(\n        $column(layoutSheet.spacingBig, style({ maxWidth: '870px', width: '100%', margin: '0 auto', paddingBottom: '45px' }))(\n          $row(style({ placeContent: 'space-between', padding: '0 15px' }))(\n            $Anchor({ $content: $icon({ $content: $aeleaLogo, width: 137, height: 115, viewBox: `0 0 147 90` }), url: '/', route: rootRoute })({\n              click: sampleLinkClick()\n            }),\n            $MainMenu({ parentRoute: pagesRoute })({\n              routeChange: sampleLinkClick()\n            })\n          ),\n          router.match(guideRoute)(\n            $Guide({ parentRoute: rootRoute })({})\n          ),\n          router.contains(examplesRoute)(\n            $Examples({ router: examplesRoute })({\n              routeChanges: sampleLinkClick()\n            })\n          )\n        )\n      ),\n\n\n      $Picker([light, dark])({})\n    )\n\n  ]\n})\n\n\n","import './assignThemeSync'\n// @ts-ignore\nimport { } from 'global.d.ts'\n\nimport { runBrowser } from '@aelea/core'\nimport $Website from './pages/$Website'\n\n\nrunBrowser({ rootNode: document.body })(\n  $Website({ baseRoute: '' })({})\n)","import { $svg, attr, Behavior, component, event, O, style, stylePseudo } from \"@aelea/core\"\nimport { $icon } from \"@aelea/ui-components\"\nimport { changeTheme, pallete, Theme, THEME_PALLETE_SELECTED_KEY } from \"@aelea/ui-components-theme\"\nimport { merge, tap } from \"@most/core\"\n\n\n\n\nexport const $Picker = (themes: Theme[]) => component((\n  [sampleChangeThemeEffect, changeThemeEffect]: Behavior<any, any>\n) => {\n\n  const current = JSON.parse(localStorage.getItem(THEME_PALLETE_SELECTED_KEY)!) as Theme\n\n  const applyOps = O(\n    style({ position: 'absolute', left: '15px', top: '15px', cursor: 'pointer' }),\n    stylePseudo(':hover', { fill: pallete.primary }),\n    sampleChangeThemeEffect(\n      event('click'),\n      tap(() => {\n        const themeNameList = themes.map(t => t.name)\n        const toIdx = (themeNameList.indexOf(current.name) + 1) % themes.length\n        const toTheme = themes[toIdx]\n\n        changeTheme(toTheme.name, toTheme.pallete)\n      })\n    )\n  )\n\n  return [\n    merge(\n      applyOps(\n        $icon({\n          $content: $svg('path')(attr({ d: 'M22.8 11.039h-1.176c-.664 0-1.2.43-1.2.961 0 .53.536.959 1.2.959H22.8c.662 0 1.2-.429 1.2-.959s-.539-.961-1.2-.961zM12 5.4A6.58 6.58 0 005.4 12a6.58 6.58 0 006.6 6.6 6.58 6.58 0 006.6-6.6c0-3.661-2.941-6.6-6.6-6.6zm0 11.4c-2.653 0-4.8-2.15-4.8-4.8 0-2.653 2.147-4.8 4.8-4.8a4.8 4.8 0 010 9.6zM3.6 12c0-.53-.539-.961-1.2-.961H1.2c-.664 0-1.2.43-1.2.961 0 .53.536.959 1.2.959h1.2c.661 0 1.2-.43 1.2-.959zM12 3.6c.53 0 .959-.536.959-1.2V1.2c0-.664-.43-1.2-.959-1.2-.53 0-.961.536-.961 1.2v1.2c0 .664.43 1.2.961 1.2zm0 16.8c-.53 0-.961.536-.961 1.2v1.2c0 .664.43 1.2.961 1.2.53 0 .959-.536.959-1.2v-1.2c0-.664-.43-1.2-.959-1.2zm8.838-15.88c.47-.47.545-1.154.17-1.528-.374-.375-1.06-.298-1.526.171l-.84.839c-.47.47-.545 1.153-.17 1.528.374.374 1.06.297 1.527-.172l.839-.839zM4.001 18.64l-.84.84c-.47.47-.545 1.152-.17 1.526.374.374 1.059.3 1.526-.17.13-.128.711-.71.84-.838.469-.47.545-1.153.17-1.529-.374-.375-1.06-.296-1.526.17zm.517-15.478c-.468-.47-1.153-.546-1.528-.172-.374.375-.297 1.06.17 1.53.13.128.711.71.84.838.469.47 1.152.546 1.526.172.374-.375.299-1.06-.17-1.528-.128-.13-.708-.712-.838-.84zm14.123 16.837l.84.839c.469.47 1.152.544 1.526.172.375-.375.299-1.06-.17-1.528l-.839-.839c-.47-.469-1.153-.546-1.529-.171-.375.374-.297 1.058.172 1.527z' }))()\n        })\n      ),\n      changeThemeEffect\n    )\n    \n  ]\n})\n"],"sourceRoot":""}